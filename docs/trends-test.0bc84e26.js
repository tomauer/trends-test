parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"JiFC":[function(require,module,exports) {

},{}],"KniQ":[function(require,module,exports) {
"use strict";function t(){return function(){throw new Error("Unimplemented abstract method.")}()}Object.defineProperty(exports,"__esModule",{value:!0}),exports.abstract=t,exports.getUid=r,exports.VERSION=void 0;var e=0;function r(t){return t.ol_uid||(t.ol_uid=String(++e))}var o="6.3.1";exports.VERSION=o;
},{}],"ygGQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./util.js"),r=function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(r,e)};return function(r,e){function o(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),e=function(e){function o(r){var o=this,n="Assertion failed. See https://openlayers.org/en/"+("latest"===t.VERSION?t.VERSION:"v"+t.VERSION.split("-")[0])+"/doc/errors/#"+r+" for details.";return(o=e.call(this,n)||this).code=r,o.name="AssertionError",o.message=n,o}return r(o,e),o}(Error),o=e;exports.default=o;
},{"./util.js":"KniQ"}],"BTrx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ADD:"add",REMOVE:"remove"};exports.default=e;
},{}],"zehl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={PROPERTYCHANGE:"propertychange"};exports.default=e;
},{}],"mH6q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clear=r,exports.isEmpty=n,exports.getValues=exports.assign=void 0;var e="function"==typeof Object.assign?Object.assign:function(e,r){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1,o=arguments.length;n<o;++n){var s=arguments[n];if(null!=s)for(var u in s)s.hasOwnProperty(u)&&(t[u]=s[u])}return t};function r(e){for(var r in e)delete e[r]}exports.assign=e;var t="function"==typeof Object.values?Object.values:function(e){var r=[];for(var t in e)r.push(e[t]);return r};function n(e){var r;for(r in e)return!1;return!r}exports.getValues=t;
},{}],"UqnM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.listen=t,exports.listenOnce=r,exports.unlistenByKey=n;var e=require("./obj.js");function t(e,t,r,n,i){if(n&&n!==e&&(r=r.bind(n)),i){var s=r;r=function(){e.removeEventListener(t,r),s.apply(this,arguments)}}var o={target:e,type:t,listener:r};return e.addEventListener(t,r),o}function r(e,r,n,i){return t(e,r,n,i,!0)}function n(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),(0,e.clear)(t))}
},{"./obj.js":"mH6q"}],"DDda":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=function(){function e(){this.disposed_=!1}return e.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},e.prototype.disposeInternal=function(){},e}(),t=e;exports.default=t;
},{}],"luEr":[function(require,module,exports) {
"use strict";function r(r,n,t){for(var u,o,i=t||e,f=0,a=r.length,s=!1;f<a;)(o=+i(r[u=f+(a-f>>1)],n))<0?f=u+1:(a=u,s=!o);return s?f:~f}function e(r,e){return r>e?1:r<e?-1:0}function n(r,e){return r.indexOf(e)>=0}function t(r,e,n){var t=r.length;if(r[0]<=e)return 0;if(e<=r[t-1])return t-1;var u=void 0;if(n>0){for(u=1;u<t;++u)if(r[u]<e)return u-1}else if(n<0){for(u=1;u<t;++u)if(r[u]<=e)return u}else for(u=1;u<t;++u){if(r[u]==e)return u;if(r[u]<e)return r[u-1]-e<e-r[u]?u-1:u}return t-1}function u(r,e,n){for(;e<n;){var t=r[e];r[e]=r[n],r[n]=t,++e,--n}}function o(r,e){for(var n=Array.isArray(e)?e:[e],t=n.length,u=0;u<t;u++)r[r.length]=n[u]}function i(r,e){var n=r.indexOf(e),t=n>-1;return t&&r.splice(n,1),t}function f(r,e){for(var n,t=r.length>>>0,u=0;u<t;u++)if(e(n=r[u],u,r))return n;return null}function a(r,e){var n=r.length;if(n!==e.length)return!1;for(var t=0;t<n;t++)if(r[t]!==e[t])return!1;return!0}function s(r,e){var n,t=r.length,u=Array(r.length);for(n=0;n<t;n++)u[n]={index:n,value:r[n]};for(u.sort(function(r,n){return e(r.value,n.value)||r.index-n.index}),n=0;n<r.length;n++)r[n]=u[n].value}function l(r,e){var n;return!r.every(function(t,u){return n=u,!e(t,u,r)})?n:-1}function v(r,n,t){var u=n||e;return r.every(function(e,n){if(0===n)return!0;var o=u(r[n-1],e);return!(o>0||t&&0===o)})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.binarySearch=r,exports.numberSafeCompareFunction=e,exports.includes=n,exports.linearFindNearest=t,exports.reverseSubArray=u,exports.extend=o,exports.remove=i,exports.find=f,exports.equals=a,exports.stableSort=s,exports.findIndex=l,exports.isSorted=v;
},{}],"RgA2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TRUE=e,exports.FALSE=t,exports.VOID=n,exports.memoizeOne=o;var r=require("./array.js");function e(){return!0}function t(){return!1}function n(){}function o(e){var t,n,o,s=!1;return function(){var u=Array.prototype.slice.call(arguments);return s&&this===o&&(0,r.equals)(u,n)||(s=!0,o=this,n=u,t=e.apply(this,arguments)),t}}
},{"./array.js":"luEr"}],"fKNg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stopPropagation=o,exports.preventDefault=e,exports.default=void 0;var t=function(){function t(t){this.propagationStopped,this.type=t,this.target=null}return t.prototype.preventDefault=function(){this.propagationStopped=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}();function o(t){t.stopPropagation()}function e(t){t.preventDefault()}var p=t;exports.default=p;
},{}],"CR4Y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=s(require("../Disposable.js")),e=require("../functions.js"),n=s(require("./Event.js")),i=require("../obj.js");function s(t){return t&&t.__esModule?t:{default:t}}var r=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=function(t){function s(e){var n=t.call(this)||this;return n.eventTarget_=e,n.pendingRemovals_={},n.dispatching_={},n.listeners_={},n}return r(s,t),s.prototype.addEventListener=function(t,e){if(t&&e){var n=this.listeners_[t];n||(n=[],this.listeners_[t]=n),-1===n.indexOf(e)&&n.push(e)}},s.prototype.dispatchEvent=function(t){var i="string"==typeof t?new n.default(t):t,s=i.type;i.target||(i.target=this.eventTarget_||this);var r,o=this.listeners_[s];if(o){s in this.dispatching_||(this.dispatching_[s]=0,this.pendingRemovals_[s]=0),++this.dispatching_[s];for(var a=0,p=o.length;a<p;++a)if(!1===(r="handleEvent"in o[a]?o[a].handleEvent(i):o[a].call(this,i))||i.propagationStopped){r=!1;break}if(--this.dispatching_[s],0===this.dispatching_[s]){var h=this.pendingRemovals_[s];for(delete this.pendingRemovals_[s];h--;)this.removeEventListener(s,e.VOID);delete this.dispatching_[s]}return r}},s.prototype.disposeInternal=function(){(0,i.clear)(this.listeners_)},s.prototype.getListeners=function(t){return this.listeners_[t]},s.prototype.hasListener=function(t){return t?t in this.listeners_:Object.keys(this.listeners_).length>0},s.prototype.removeEventListener=function(t,n){var i=this.listeners_[t];if(i){var s=i.indexOf(n);-1!==s&&(t in this.pendingRemovals_?(i[s]=e.VOID,++this.pendingRemovals_[t]):(i.splice(s,1),0===i.length&&delete this.listeners_[t]))}},s}(t.default),a=o;exports.default=a;
},{"../Disposable.js":"DDda","../functions.js":"RgA2","./Event.js":"fKNg","../obj.js":"mH6q"}],"C8cu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};exports.default=e;
},{}],"IdSm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unByKey=s,exports.default=void 0;var e=require("./events.js"),t=n(require("./events/Target.js")),r=n(require("./events/EventType.js"));function n(e){return e&&e.__esModule?e:{default:e}}var o=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=function(t){function n(){var e=t.call(this)||this;return e.revision_=0,e}return o(n,t),n.prototype.changed=function(){++this.revision_,this.dispatchEvent(r.default.CHANGE)},n.prototype.getRevision=function(){return this.revision_},n.prototype.on=function(t,r){if(Array.isArray(t)){for(var n=t.length,o=new Array(n),i=0;i<n;++i)o[i]=(0,e.listen)(this,t[i],r);return o}return(0,e.listen)(this,t,r)},n.prototype.once=function(t,r){if(Array.isArray(t)){for(var n=t.length,o=new Array(n),i=0;i<n;++i)o[i]=(0,e.listenOnce)(this,t[i],r);return o}return(0,e.listenOnce)(this,t,r)},n.prototype.un=function(e,t){if(Array.isArray(e))for(var r=0,n=e.length;r<n;++r)this.removeEventListener(e[r],t);else this.removeEventListener(e,t)},n}(t.default);function s(t){if(Array.isArray(t))for(var r=0,n=t.length;r<n;++r)(0,e.unlistenByKey)(t[r]);else(0,e.unlistenByKey)(t)}var u=i;exports.default=u;
},{"./events.js":"UqnM","./events/Target.js":"CR4Y","./events/EventType.js":"C8cu"}],"PhPh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getChangeEventType=c,exports.default=exports.ObjectEvent=void 0;var t=require("./util.js"),e=s(require("./ObjectEventType.js")),r=s(require("./Observable.js")),n=s(require("./events/Event.js")),o=require("./obj.js");function s(t){return t&&t.__esModule?t:{default:t}}var i=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),u=function(t){function e(e,r,n){var o=t.call(this,e)||this;return o.key=r,o.oldValue=n,o}return i(e,t),e}(n.default);exports.ObjectEvent=u;var a=function(r){function n(e){var n=r.call(this)||this;return(0,t.getUid)(n),n.values_={},void 0!==e&&n.setProperties(e),n}return i(n,r),n.prototype.get=function(t){var e;return this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},n.prototype.getKeys=function(){return Object.keys(this.values_)},n.prototype.getProperties=function(){return(0,o.assign)({},this.values_)},n.prototype.notify=function(t,r){var n;n=c(t),this.dispatchEvent(new u(n,t,r)),n=e.default.PROPERTYCHANGE,this.dispatchEvent(new u(n,t,r))},n.prototype.set=function(t,e,r){if(r)this.values_[t]=e;else{var n=this.values_[t];this.values_[t]=e,n!==e&&this.notify(t,n)}},n.prototype.setProperties=function(t,e){for(var r in t)this.set(r,t[r],e)},n.prototype.unset=function(t,e){if(t in this.values_){var r=this.values_[t];delete this.values_[t],e||this.notify(t,r)}},n}(r.default),p={};function c(t){return p.hasOwnProperty(t)?p[t]:p[t]="change:"+t}var v=a;exports.default=v;
},{"./util.js":"KniQ","./ObjectEventType.js":"zehl","./Observable.js":"IdSm","./events/Event.js":"fKNg","./obj.js":"mH6q"}],"FnDa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.CollectionEvent=void 0;var t=i(require("./AssertionError.js")),e=i(require("./CollectionEventType.js")),r=i(require("./Object.js")),n=i(require("./events/Event.js"));function i(t){return t&&t.__esModule?t:{default:t}}var o=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),s={LENGTH:"length"},u=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.element=r,i.index=n,i}return o(e,t),e}(n.default);exports.CollectionEvent=u;var a=function(r){function n(t,e){var n=r.call(this)||this,i=e||{};if(n.unique_=!!i.unique,n.array_=t||[],n.unique_)for(var o=0,s=n.array_.length;o<s;++o)n.assertUnique_(n.array_[o],o);return n.updateLength_(),n}return o(n,r),n.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},n.prototype.extend=function(t){for(var e=0,r=t.length;e<r;++e)this.push(t[e]);return this},n.prototype.forEach=function(t){for(var e=this.array_,r=0,n=e.length;r<n;++r)t(e[r],r,e)},n.prototype.getArray=function(){return this.array_},n.prototype.item=function(t){return this.array_[t]},n.prototype.getLength=function(){return this.get(s.LENGTH)},n.prototype.insertAt=function(t,r){this.unique_&&this.assertUnique_(r),this.array_.splice(t,0,r),this.updateLength_(),this.dispatchEvent(new u(e.default.ADD,r,t))},n.prototype.pop=function(){return this.removeAt(this.getLength()-1)},n.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},n.prototype.remove=function(t){for(var e=this.array_,r=0,n=e.length;r<n;++r)if(e[r]===t)return this.removeAt(r)},n.prototype.removeAt=function(t){var r=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new u(e.default.REMOVE,r,t)),r},n.prototype.setAt=function(t,r){var n=this.getLength();if(t<n){this.unique_&&this.assertUnique_(r,t);var i=this.array_[t];this.array_[t]=r,this.dispatchEvent(new u(e.default.REMOVE,i,t)),this.dispatchEvent(new u(e.default.ADD,r,t))}else{for(var o=n;o<t;++o)this.insertAt(o,void 0);this.insertAt(t,r)}},n.prototype.updateLength_=function(){this.set(s.LENGTH,this.array_.length)},n.prototype.assertUnique_=function(e,r){for(var n=0,i=this.array_.length;n<i;++n)if(this.array_[n]===e&&n!==r)throw new t.default(58)},n}(r.default),h=a;exports.default=h;
},{"./AssertionError.js":"ygGQ","./CollectionEventType.js":"BTrx","./Object.js":"PhPh","./events/Event.js":"fKNg"}],"fLG6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assert=t;var e=r(require("./AssertionError.js"));function r(e){return e&&e.__esModule?e:{default:e}}function t(r,t){if(!r)throw new e.default(t)}
},{"./AssertionError.js":"ygGQ"}],"mYW9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createStyleFunction=u,exports.default=void 0;var e=require("./asserts.js"),t=require("./events.js"),r=s(require("./events/EventType.js")),n=i(require("./Object.js"));function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var s=n?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(r,i,s):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}function s(e){return e&&e.__esModule?e:{default:e}}var y=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),a=function(e){function o(t){var r=e.call(this)||this;if(r.id_=void 0,r.geometryName_="geometry",r.style_=null,r.styleFunction_=void 0,r.geometryChangeKey_=null,r.addEventListener((0,n.getChangeEventType)(r.geometryName_),r.handleGeometryChanged_),t)if("function"==typeof t.getSimplifiedGeometry){var o=t;r.setGeometry(o)}else{var i=t;r.setProperties(i)}return r}return y(o,e),o.prototype.clone=function(){var e=new o(this.getProperties());e.setGeometryName(this.getGeometryName());var t=this.getGeometry();t&&e.setGeometry(t.clone());var r=this.getStyle();return r&&e.setStyle(r),e},o.prototype.getGeometry=function(){return this.get(this.geometryName_)},o.prototype.getId=function(){return this.id_},o.prototype.getGeometryName=function(){return this.geometryName_},o.prototype.getStyle=function(){return this.style_},o.prototype.getStyleFunction=function(){return this.styleFunction_},o.prototype.handleGeometryChange_=function(){this.changed()},o.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&((0,t.unlistenByKey)(this.geometryChangeKey_),this.geometryChangeKey_=null);var e=this.getGeometry();e&&(this.geometryChangeKey_=(0,t.listen)(e,r.default.CHANGE,this.handleGeometryChange_,this)),this.changed()},o.prototype.setGeometry=function(e){this.set(this.geometryName_,e)},o.prototype.setStyle=function(e){this.style_=e,this.styleFunction_=e?u(e):void 0,this.changed()},o.prototype.setId=function(e){this.id_=e,this.changed()},o.prototype.setGeometryName=function(e){this.removeEventListener((0,n.getChangeEventType)(this.geometryName_),this.handleGeometryChanged_),this.geometryName_=e,this.addEventListener((0,n.getChangeEventType)(this.geometryName_),this.handleGeometryChanged_),this.handleGeometryChanged_()},o}(n.default);function u(t){return"function"==typeof t?t:(Array.isArray(t)?r=t:((0,e.assert)("function"==typeof t.getZIndex,41),r=[t]),function(){return r});var r}var h=a;exports.default=h;
},{"./asserts.js":"fLG6","./events.js":"UqnM","./events/EventType.js":"C8cu","./Object.js":"PhPh"}],"urGY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"};exports.default=t;
},{}],"bUAS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};exports.default=e;
},{}],"QDir":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.boundingExtent=o,exports.buffer=a,exports.clone=i,exports.closestSquaredDistanceXY=s,exports.containsCoordinate=f,exports.containsExtent=p,exports.containsXY=c,exports.coordinateRelationship=x,exports.createEmpty=l,exports.createOrUpdate=d,exports.createOrUpdateEmpty=h,exports.createOrUpdateFromCoordinate=g,exports.createOrUpdateFromCoordinates=m,exports.createOrUpdateFromFlatCoordinates=M,exports.createOrUpdateFromRings=E,exports.equals=T,exports.approximatelyEquals=v,exports.extend=O,exports.extendCoordinate=C,exports.extendCoordinates=R,exports.extendFlatCoordinates=F,exports.extendRings=I,exports.extendXY=N,exports.forEachCorner=y,exports.getArea=B,exports.getBottomLeft=L,exports.getBottomRight=U,exports.getCenter=G,exports.getCorner=_,exports.getEnlargedArea=b,exports.getForViewAndSize=A,exports.getHeight=S,exports.getIntersectionArea=W,exports.getIntersection=q,exports.getMargin=H,exports.getSize=X,exports.getTopLeft=j,exports.getTopRight=V,exports.getWidth=P,exports.intersects=Y,exports.isEmpty=w,exports.returnOrUpdate=z,exports.scaleFromCenter=K,exports.intersectsSegment=D,exports.applyTransform=k,exports.wrapX=J;var t=require("./asserts.js"),e=n(require("./extent/Corner.js")),r=n(require("./extent/Relationship.js"));function n(t){return t&&t.__esModule?t:{default:t}}function o(t){for(var e=l(),r=0,n=t.length;r<n;++r)C(e,t[r]);return e}function u(t,e,r){return d(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),r)}function a(t,e,r){return r?(r[0]=t[0]-e,r[1]=t[1]-e,r[2]=t[2]+e,r[3]=t[3]+e,r):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function i(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function s(t,e,r){var n,o;return(n=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*n+(o=r<t[1]?t[1]-r:t[3]<r?r-t[3]:0)*o}function f(t,e){return c(t,e[0],e[1])}function p(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function c(t,e,r){return t[0]<=e&&e<=t[2]&&t[1]<=r&&r<=t[3]}function x(t,e){var n=t[0],o=t[1],u=t[2],a=t[3],i=e[0],s=e[1],f=r.default.UNKNOWN;return i<n?f|=r.default.LEFT:i>u&&(f|=r.default.RIGHT),s<o?f|=r.default.BELOW:s>a&&(f|=r.default.ABOVE),f===r.default.UNKNOWN&&(f=r.default.INTERSECTING),f}function l(){return[1/0,1/0,-1/0,-1/0]}function d(t,e,r,n,o){return o?(o[0]=t,o[1]=e,o[2]=r,o[3]=n,o):[t,e,r,n]}function h(t){return d(1/0,1/0,-1/0,-1/0,t)}function g(t,e){var r=t[0],n=t[1];return d(r,n,r,n,e)}function m(t,e){return R(h(e),t)}function M(t,e,r,n,o){return F(h(o),t,e,r,n)}function E(t,e){return I(h(e),t)}function T(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function v(t,e,r){return Math.abs(t[0]-e[0])<r&&Math.abs(t[2]-e[2])<r&&Math.abs(t[1]-e[1])<r&&Math.abs(t[3]-e[3])<r}function O(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function C(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function R(t,e){for(var r=0,n=e.length;r<n;++r)C(t,e[r]);return t}function F(t,e,r,n,o){for(;r<n;r+=o)N(t,e[r],e[r+1]);return t}function I(t,e){for(var r=0,n=e.length;r<n;++r)R(t,e[r]);return t}function N(t,e,r){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],r)}function y(t,e){var r;return(r=e(L(t)))?r:(r=e(U(t)))?r:(r=e(V(t)))?r:(r=e(j(t)))||!1}function B(t){var e=0;return w(t)||(e=P(t)*S(t)),e}function L(t){return[t[0],t[1]]}function U(t){return[t[2],t[1]]}function G(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function _(r,n){var o;return n===e.default.BOTTOM_LEFT?o=L(r):n===e.default.BOTTOM_RIGHT?o=U(r):n===e.default.TOP_LEFT?o=j(r):n===e.default.TOP_RIGHT?o=V(r):(0,t.assert)(!1,13),o}function b(t,e){var r=Math.min(t[0],e[0]),n=Math.min(t[1],e[1]);return(Math.max(t[2],e[2])-r)*(Math.max(t[3],e[3])-n)}function A(t,e,r,n,o){var u=e*n[0]/2,a=e*n[1]/2,i=Math.cos(r),s=Math.sin(r),f=u*i,p=u*s,c=a*i,x=a*s,l=t[0],h=t[1],g=l-f+x,m=l-f-x,M=l+f-x,E=l+f+x,T=h-p-c,v=h-p+c,O=h+p+c,C=h+p-c;return d(Math.min(g,m,M,E),Math.min(T,v,O,C),Math.max(g,m,M,E),Math.max(T,v,O,C),o)}function S(t){return t[3]-t[1]}function W(t,e){return B(q(t,e))}function q(t,e,r){var n=r||l();return Y(t,e)?(t[0]>e[0]?n[0]=t[0]:n[0]=e[0],t[1]>e[1]?n[1]=t[1]:n[1]=e[1],t[2]<e[2]?n[2]=t[2]:n[2]=e[2],t[3]<e[3]?n[3]=t[3]:n[3]=e[3]):h(n),n}function H(t){return P(t)+S(t)}function X(t){return[t[2]-t[0],t[3]-t[1]]}function j(t){return[t[0],t[3]]}function V(t){return[t[2],t[3]]}function P(t){return t[2]-t[0]}function Y(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function w(t){return t[2]<t[0]||t[3]<t[1]}function z(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function K(t,e){var r=(t[2]-t[0])/2*(e-1),n=(t[3]-t[1])/2*(e-1);t[0]-=r,t[2]+=r,t[1]-=n,t[3]+=n}function D(t,e,n){var o=!1,u=x(t,e),a=x(t,n);if(u===r.default.INTERSECTING||a===r.default.INTERSECTING)o=!0;else{var i=t[0],s=t[1],f=t[2],p=t[3],c=e[0],l=e[1],d=n[0],h=n[1],g=(h-l)/(d-c),m=void 0,M=void 0;a&r.default.ABOVE&&!(u&r.default.ABOVE)&&(o=(m=d-(h-p)/g)>=i&&m<=f),o||!(a&r.default.RIGHT)||u&r.default.RIGHT||(o=(M=h-(d-f)*g)>=s&&M<=p),o||!(a&r.default.BELOW)||u&r.default.BELOW||(o=(m=d-(h-s)/g)>=i&&m<=f),o||!(a&r.default.LEFT)||u&r.default.LEFT||(o=(M=h-(d-i)*g)>=s&&M<=p)}return o}function k(t,e,r,n){var o=[];if(n>1)for(var a=t[2]-t[0],i=t[3]-t[1],s=0;s<n;++s)o.push(t[0]+a*s/n,t[1],t[2],t[1]+i*s/n,t[2]-a*s/n,t[3],t[0],t[3]-i*s/n);else o=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(o,o,2);for(var f=[],p=[],c=(s=0,o.length);s<c;s+=2)f.push(o[s]),p.push(o[s+1]);return u(f,p,r)}function J(t,e){var r=e.getExtent(),n=G(t);if(e.canWrapX()&&(n[0]<r[0]||n[0]>=r[2])){var o=P(r),u=Math.floor((n[0]-r[0])/o)*o;t[0]-=u,t[2]-=u}return t}
},{"./asserts.js":"fLG6","./extent/Corner.js":"urGY","./extent/Relationship.js":"bUAS"}],"Utvi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"};exports.default=e;
},{}],"lmV0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"};exports.default=e;
},{}],"LGwr":[function(require,module,exports) {
"use strict";function r(r,t,e,n,o,a){for(var f=a||[],s=0,l=t;l<e;l+=n){var u=r[l],v=r[l+1];f[s++]=o[0]*u+o[2]*v+o[4],f[s++]=o[1]*u+o[3]*v+o[5]}return a&&f.length!=s&&(f.length=s),f}function t(r,t,e,n,o,a,f){for(var s=f||[],l=Math.cos(o),u=Math.sin(o),v=a[0],h=a[1],c=0,g=t;g<e;g+=n){var i=r[g]-v,p=r[g+1]-h;s[c++]=v+i*l-p*u,s[c++]=h+i*u+p*l;for(var x=g+2;x<g+n;++x)s[c++]=r[x]}return f&&s.length!=c&&(s.length=c),s}function e(r,t,e,n,o,a,f,s){for(var l=s||[],u=f[0],v=f[1],h=0,c=t;c<e;c+=n){var g=r[c]-u,i=r[c+1]-v;l[h++]=u+o*g,l[h++]=v+a*i;for(var p=c+2;p<c+n;++p)l[h++]=r[p]}return s&&l.length!=h&&(l.length=h),l}function n(r,t,e,n,o,a,f){for(var s=f||[],l=0,u=t;u<e;u+=n){s[l++]=r[u]+o,s[l++]=r[u+1]+a;for(var v=u+2;v<u+n;++v)s[l++]=r[v]}return f&&s.length!=l&&(s.length=l),s}Object.defineProperty(exports,"__esModule",{value:!0}),exports.transform2D=r,exports.rotate=t,exports.scale=e,exports.translate=n;
},{}],"B96G":[function(require,module,exports) {
"use strict";function r(r,t,e){return Math.min(Math.max(r,t),e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.clamp=r,exports.squaredSegmentDistance=e,exports.squaredDistance=n,exports.solveLinearSystem=o,exports.toDegrees=a,exports.toRadians=s,exports.modulo=u,exports.lerp=i,exports.cosh=void 0;var t="cosh"in Math?Math.cosh:function(r){var t=Math.exp(r);return(t+1/t)/2};function e(r,t,e,o,a,s){var u=a-e,i=s-o;if(0!==u||0!==i){var c=((r-e)*u+(t-o)*i)/(u*u+i*i);c>1?(e=a,o=s):c>0&&(e+=u*c,o+=i*c)}return n(r,t,e,o)}function n(r,t,e,n){var o=e-r,a=n-t;return o*o+a*a}function o(r){for(var t=r.length,e=0;e<t;e++){for(var n=e,o=Math.abs(r[e][e]),a=e+1;a<t;a++){var s=Math.abs(r[a][e]);s>o&&(o=s,n=a)}if(0===o)return null;var u=r[n];r[n]=r[e],r[e]=u;for(var i=e+1;i<t;i++)for(var c=-r[i][e]/r[e][e],f=e;f<t+1;f++)e==f?r[i][f]=0:r[i][f]+=c*r[e][f]}for(var v=new Array(t),p=t-1;p>=0;p--){v[p]=r[p][t]/r[p][p];for(var h=p-1;h>=0;h--)r[h][t]-=r[h][p]*v[p]}return v}function a(r){return 180*r/Math.PI}function s(r){return r*Math.PI/180}function u(r,t){var e=r%t;return e*t<0?e+t:e}function i(r,t,e){return r+e*(t-r)}exports.cosh=t;
},{}],"q4ER":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDistance=s,exports.getLength=n,exports.getArea=u,exports.offset=h,exports.DEFAULT_RADIUS=void 0;var e=require("./math.js"),t=a(require("./geom/GeometryType.js"));function a(e){return e&&e.__esModule?e:{default:e}}var r=6371008.8;function s(t,a,s){var o=s||r,n=(0,e.toRadians)(t[1]),i=(0,e.toRadians)(a[1]),u=(i-n)/2,h=(0,e.toRadians)(a[0]-t[0])/2,f=Math.sin(u)*Math.sin(u)+Math.sin(h)*Math.sin(h)*Math.cos(n)*Math.cos(i);return 2*o*Math.atan2(Math.sqrt(f),Math.sqrt(1-f))}function o(e,t){for(var a=0,r=0,o=e.length;r<o-1;++r)a+=s(e[r],e[r+1],t);return a}function n(e,a){var s=a||{},i=s.radius||r,u=s.projection||"EPSG:3857",h=e.getType();h!==t.default.GEOMETRY_COLLECTION&&(e=e.clone().transform(u,"EPSG:4326"));var f,d,M,c,l,g,I=0;switch(h){case t.default.POINT:case t.default.MULTI_POINT:break;case t.default.LINE_STRING:case t.default.LINEAR_RING:I=o(f=e.getCoordinates(),i);break;case t.default.MULTI_LINE_STRING:case t.default.POLYGON:for(M=0,c=(f=e.getCoordinates()).length;M<c;++M)I+=o(f[M],i);break;case t.default.MULTI_POLYGON:for(M=0,c=(f=e.getCoordinates()).length;M<c;++M)for(l=0,g=(d=f[M]).length;l<g;++l)I+=o(d[l],i);break;case t.default.GEOMETRY_COLLECTION:var L=e.getGeometries();for(M=0,c=L.length;M<c;++M)I+=n(L[M],a);break;default:throw new Error("Unsupported geometry type: "+h)}return I}function i(t,a){for(var r=0,s=t.length,o=t[s-1][0],n=t[s-1][1],i=0;i<s;i++){var u=t[i][0],h=t[i][1];r+=(0,e.toRadians)(u-o)*(2+Math.sin((0,e.toRadians)(n))+Math.sin((0,e.toRadians)(h))),o=u,n=h}return r*a*a/2}function u(e,a){var s=a||{},o=s.radius||r,n=s.projection||"EPSG:3857",h=e.getType();h!==t.default.GEOMETRY_COLLECTION&&(e=e.clone().transform(n,"EPSG:4326"));var f,d,M,c,l,g,I=0;switch(h){case t.default.POINT:case t.default.MULTI_POINT:case t.default.LINE_STRING:case t.default.MULTI_LINE_STRING:case t.default.LINEAR_RING:break;case t.default.POLYGON:for(f=e.getCoordinates(),I=Math.abs(i(f[0],o)),M=1,c=f.length;M<c;++M)I-=Math.abs(i(f[M],o));break;case t.default.MULTI_POLYGON:for(M=0,c=(f=e.getCoordinates()).length;M<c;++M)for(d=f[M],I+=Math.abs(i(d[0],o)),l=1,g=d.length;l<g;++l)I-=Math.abs(i(d[l],o));break;case t.default.GEOMETRY_COLLECTION:var L=e.getGeometries();for(M=0,c=L.length;M<c;++M)I+=u(L[M],a);break;default:throw new Error("Unsupported geometry type: "+h)}return I}function h(t,a,s,o){var n=o||r,i=(0,e.toRadians)(t[1]),u=(0,e.toRadians)(t[0]),h=a/n,f=Math.asin(Math.sin(i)*Math.cos(h)+Math.cos(i)*Math.sin(h)*Math.cos(s)),d=u+Math.atan2(Math.sin(s)*Math.sin(h)*Math.cos(i),Math.cos(h)-Math.sin(i)*Math.sin(f));return[(0,e.toDegrees)(d),(0,e.toDegrees)(f)]}exports.DEFAULT_RADIUS=r;
},{"./math.js":"B96G","./geom/GeometryType.js":"lmV0"}],"yZx6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.METERS_PER_UNIT=void 0;var E={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},e={};exports.METERS_PER_UNIT=e,e[E.DEGREES]=2*Math.PI*6370997/360,e[E.FEET]=.3048,e[E.METERS]=1,e[E.USFEET]=1200/3937;var t=E;exports.default=t;
},{}],"WUar":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./Units.js"),n=function(){function t(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return t.prototype.canWrapX=function(){return this.canWrapX_},t.prototype.getCode=function(){return this.code_},t.prototype.getExtent=function(){return this.extent_},t.prototype.getUnits=function(){return this.units_},t.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||e.METERS_PER_UNIT[this.units_]},t.prototype.getWorldExtent=function(){return this.worldExtent_},t.prototype.getAxisOrientation=function(){return this.axisOrientation_},t.prototype.isGlobal=function(){return this.global_},t.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},t.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},t.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},t.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},t.prototype.setWorldExtent=function(t){this.worldExtent_=t},t.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},t.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},t}(),i=n;exports.default=i;
},{"./Units.js":"yZx6"}],"lohs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fromEPSG4326=f,exports.toEPSG4326=E,exports.PROJECTIONS=exports.WORLD_EXTENT=exports.EXTENT=exports.HALF_SIZE=exports.RADIUS=void 0;var t=require("../math.js"),r=o(require("./Projection.js")),e=o(require("./Units.js"));function o(t){return t&&t.__esModule?t:{default:t}}var n=function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(r,e)};return function(r,e){function o(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),s=6378137;exports.RADIUS=s;var a=Math.PI*s;exports.HALF_SIZE=a;var u=[-a,-a,a,a];exports.EXTENT=u;var i=[-180,-85,180,85];exports.WORLD_EXTENT=i;var c=function(r){function o(o){return r.call(this,{code:o,units:e.default.METERS,extent:u,global:!0,worldExtent:i,getPointResolution:function(r,e){return r/(0,t.cosh)(e[1]/s)}})||this}return n(o,r),o}(r.default),p=[new c("EPSG:3857"),new c("EPSG:102100"),new c("EPSG:102113"),new c("EPSG:900913"),new c("urn:ogc:def:crs:EPSG:6.18:3:3857"),new c("urn:ogc:def:crs:EPSG::3857"),new c("http://www.opengis.net/gml/srs/epsg.xml#3857")];function f(t,r,e){var o=t.length,n=e>1?e:2,u=r;void 0===u&&(u=n>2?t.slice():new Array(o));for(var i=a,c=0;c<o;c+=n){u[c]=i*t[c]/180;var p=s*Math.log(Math.tan(Math.PI*(+t[c+1]+90)/360));p>i?p=i:p<-i&&(p=-i),u[c+1]=p}return u}function E(t,r,e){var o=t.length,n=e>1?e:2,u=r;void 0===u&&(u=n>2?t.slice():new Array(o));for(var i=0;i<o;i+=n)u[i]=180*t[i]/a,u[i+1]=360*Math.atan(Math.exp(t[i+1]/s))/Math.PI-90;return u}exports.PROJECTIONS=p;
},{"../math.js":"B96G","./Projection.js":"WUar","./Units.js":"yZx6"}],"ZniN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PROJECTIONS=exports.METERS_PER_UNIT=exports.EXTENT=exports.RADIUS=void 0;var e=r(require("./Projection.js")),t=r(require("./Units.js"));function r(e){return e&&e.__esModule?e:{default:e}}var n=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=6378137;exports.RADIUS=o;var u=[-180,-90,180,90];exports.EXTENT=u;var s=Math.PI*o/180;exports.METERS_PER_UNIT=s;var c=function(e){function r(r,n){return e.call(this,{code:r,units:t.default.DEGREES,extent:u,axisOrientation:n,global:!0,metersPerUnit:s,worldExtent:u})||this}return n(r,e),r}(e.default),i=[new c("CRS:84"),new c("EPSG:4326","neu"),new c("urn:ogc:def:crs:EPSG::4326","neu"),new c("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new c("urn:ogc:def:crs:OGC:1.3:CRS84"),new c("urn:ogc:def:crs:OGC:2:84"),new c("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new c("urn:x-ogc:def:crs:EPSG:4326","neu")];exports.PROJECTIONS=i;
},{"./Projection.js":"WUar","./Units.js":"yZx6"}],"uhlP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clear=r,exports.add=o,exports.remove=n,exports.get=i;var e=require("../obj.js"),t={};function r(){t={}}function o(e,r,o){var n=e.getCode(),i=r.getCode();n in t||(t[n]={}),t[n][i]=o}function n(r,o){var n=r.getCode(),i=o.getCode(),d=t[n][i];return delete t[n][i],(0,e.isEmpty)(t[n])&&delete t[n],d}function i(e,r){var o;return e in t&&r in t[e]&&(o=t[e][r]),o}
},{"../obj.js":"mH6q"}],"tlE8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clear=t,exports.get=r,exports.add=n;var e={};function t(){e={}}function r(t){return e[t]||null}function n(t,r){e[t]=r}
},{}],"Diht":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cloneTransform=d,exports.identityTransform=l,exports.addProjection=E,exports.addProjections=P,exports.get=j,exports.getPointResolution=g,exports.addEquivalentProjections=x,exports.addEquivalentTransforms=v,exports.clearAllProjections=m,exports.createProjection=T,exports.createTransformFromCoordinateTransform=O,exports.addCoordinateTransforms=S,exports.fromLonLat=U,exports.toLonLat=y,exports.equivalent=R,exports.getTransformFromProjections=h,exports.getTransform=C,exports.transform=_,exports.transformExtent=q,exports.transformWithProjections=b,exports.setUserProjection=M,exports.clearUserProjection=I,exports.getUserProjection=N,exports.useGeographic=D,exports.toUserCoordinate=w,exports.fromUserCoordinate=J,exports.toUserExtent=L,exports.fromUserExtent=F,exports.addCommon=W,Object.defineProperty(exports,"Projection",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"METERS_PER_UNIT",{enumerable:!0,get:function(){return u.METERS_PER_UNIT}});var e=require("./sphere.js"),r=require("./extent.js"),t=require("./math.js"),n=require("./proj/epsg3857.js"),o=require("./proj/epsg4326.js"),i=p(require("./proj/Projection.js")),u=a(require("./proj/Units.js")),s=require("./proj/transforms.js"),f=require("./proj/projections.js");function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(t,o,i):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function p(e){return e&&e.__esModule?e:{default:e}}function d(e,r,t){var n;if(void 0!==r){for(var o=0,i=e.length;o<i;++o)r[o]=e[o];n=r}else n=e.slice();return n}function l(e,r,t){if(void 0!==r&&e!==r){for(var n=0,o=e.length;n<o;++n)r[n]=e[n];e=r}return e}function E(e){(0,f.add)(e.getCode(),e),(0,s.add)(e,e,d)}function P(e){e.forEach(E)}function j(e){return"string"==typeof e?(0,f.get)(e):e||null}function g(r,t,n,o){var i,s=(r=j(r)).getPointResolutionFunc();if(s)i=s(t,n),o&&o!==r.getUnits()&&(f=r.getMetersPerUnit())&&(i=i*f/u.METERS_PER_UNIT[o]);else if(r.getUnits()==u.default.DEGREES&&!o||o==u.default.DEGREES)i=t;else{var f,c=h(r,j("EPSG:4326")),a=[n[0]-t/2,n[1],n[0]+t/2,n[1],n[0],n[1]-t/2,n[0],n[1]+t/2];a=c(a,a,2),i=((0,e.getDistance)(a.slice(0,2),a.slice(2,4))+(0,e.getDistance)(a.slice(4,6),a.slice(6,8)))/2,void 0!==(f=o?u.METERS_PER_UNIT[o]:r.getMetersPerUnit())&&(i/=f)}return i}function x(e){P(e),e.forEach(function(r){e.forEach(function(e){r!==e&&(0,s.add)(r,e,d)})})}function v(e,r,t,n){e.forEach(function(e){r.forEach(function(r){(0,s.add)(e,r,t),(0,s.add)(r,e,n)})})}function m(){(0,f.clear)(),(0,s.clear)()}function T(e,r){return e?"string"==typeof e?j(e):e:j(r)}function O(e){return function(r,t,n){for(var o=r.length,i=void 0!==n?n:2,u=void 0!==t?t:new Array(o),s=0;s<o;s+=i){var f=e([r[s],r[s+1]]);u[s]=f[0],u[s+1]=f[1];for(var c=i-1;c>=2;--c)u[s+c]=r[s+c]}return u}}function S(e,r,t,n){var o=j(e),i=j(r);(0,s.add)(o,i,O(t)),(0,s.add)(i,o,O(n))}function U(e,r){return _(e,"EPSG:4326",void 0!==r?r:"EPSG:3857")}function y(e,r){var n=_(e,void 0!==r?r:"EPSG:3857","EPSG:4326"),o=n[0];return(o<-180||o>180)&&(n[0]=(0,t.modulo)(o+180,360)-180),n}function R(e,r){if(e===r)return!0;var t=e.getUnits()===r.getUnits();return e.getCode()===r.getCode()?t:h(e,r)===d&&t}function h(e,r){var t=e.getCode(),n=r.getCode(),o=(0,s.get)(t,n);return o||(o=l),o}function C(e,r){return h(j(e),j(r))}function _(e,r,t){return C(r,t)(e,void 0,e.length)}function q(e,t,n,o){var i=C(t,n);return(0,r.applyTransform)(e,i,void 0,o)}function b(e,r,t){return h(r,t)(e)}var G=null;function M(e){G=j(e)}function I(){G=null}function N(){return G}function D(){M("EPSG:4326")}function w(e,r){return G?_(e,r,G):e}function J(e,r){return G?_(e,G,r):e}function L(e,r){return G?q(e,r,G):e}function F(e,r){return G?q(e,G,r):e}function W(){x(n.PROJECTIONS),x(o.PROJECTIONS),v(o.PROJECTIONS,n.PROJECTIONS,n.fromEPSG4326,n.toEPSG4326)}W();
},{"./sphere.js":"q4ER","./extent.js":"QDir","./math.js":"B96G","./proj/epsg3857.js":"lohs","./proj/epsg4326.js":"ZniN","./proj/Projection.js":"WUar","./proj/Units.js":"yZx6","./proj/transforms.js":"uhlP","./proj/projections.js":"tlE8"}],"P4eA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=e,exports.reset=n,exports.multiply=o,exports.set=s,exports.setFromArray=u,exports.apply=a,exports.rotate=i,exports.scale=c,exports.makeScale=p,exports.translate=f,exports.compose=x,exports.composeCssTransform=v,exports.invert=m,exports.makeInverse=l,exports.determinant=y,exports.toString=M;var r=require("./asserts.js"),t=new Array(6);function e(){return[1,0,0,1,0,0]}function n(r){return s(r,1,0,0,1,0,0)}function o(r,t){var e=r[0],n=r[1],o=r[2],s=r[3],u=r[4],a=r[5],i=t[0],c=t[1],p=t[2],f=t[3],x=t[4],v=t[5];return r[0]=e*i+o*c,r[1]=n*i+s*c,r[2]=e*p+o*f,r[3]=n*p+s*f,r[4]=e*x+o*v+u,r[5]=n*x+s*v+a,r}function s(r,t,e,n,o,s,u){return r[0]=t,r[1]=e,r[2]=n,r[3]=o,r[4]=s,r[5]=u,r}function u(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r}function a(r,t){var e=t[0],n=t[1];return t[0]=r[0]*e+r[2]*n+r[4],t[1]=r[1]*e+r[3]*n+r[5],t}function i(r,e){var n=Math.cos(e),u=Math.sin(e);return o(r,s(t,n,u,-u,n,0,0))}function c(r,e,n){return o(r,s(t,e,0,0,n,0,0))}function p(r,t,e){return s(r,t,0,0,e,0,0)}function f(r,e,n){return o(r,s(t,1,0,0,1,e,n))}function x(r,t,e,n,o,s,u,a){var i=Math.sin(s),c=Math.cos(s);return r[0]=n*c,r[1]=o*i,r[2]=-n*i,r[3]=o*c,r[4]=u*n*c-a*n*i+t,r[5]=u*o*i+a*o*c+e,r}function v(r,t,n,o,s,u,a){return M(x(e(),r,t,n,o,s,u,a))}function m(r){return l(r,r)}function l(t,e){var n=y(e);(0,r.assert)(0!==n,32);var o=e[0],s=e[1],u=e[2],a=e[3],i=e[4],c=e[5];return t[0]=a/n,t[1]=-s/n,t[2]=-u/n,t[3]=o/n,t[4]=(u*c-a*i)/n,t[5]=-(o*c-s*i)/n,t}function y(r){return r[0]*r[3]-r[1]*r[2]}function M(r){return"matrix("+r.join(", ")+")"}
},{"./asserts.js":"fLG6"}],"F8sI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../util.js"),e=u(require("../Object.js")),r=require("../extent.js"),n=require("./flat/transform.js"),o=require("../proj.js"),i=u(require("../proj/Units.js")),s=require("../transform.js"),a=require("../functions.js");function u(t){return t&&t.__esModule?t:{default:t}}var p=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),c=(0,s.create)(),f=function(e){function u(){var t=e.call(this)||this;return t.extent_=(0,r.createEmpty)(),t.extentRevision_=-1,t.simplifiedGeometryMaxMinSquaredTolerance=0,t.simplifiedGeometryRevision=0,t.simplifyTransformedInternal=(0,a.memoizeOne)(function(t,e,r){if(!r)return this.getSimplifiedGeometry(e);var n=this.clone();return n.applyTransform(r),n.getSimplifiedGeometry(e)}),t}return p(u,e),u.prototype.simplifyTransformed=function(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)},u.prototype.clone=function(){return(0,t.abstract)()},u.prototype.closestPointXY=function(e,r,n,o){return(0,t.abstract)()},u.prototype.containsXY=function(t,e){var r=this.getClosestPoint([t,e]);return r[0]===t&&r[1]===e},u.prototype.getClosestPoint=function(t,e){var r=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],r,1/0),r},u.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},u.prototype.computeExtent=function(e){return(0,t.abstract)()},u.prototype.getExtent=function(t){return this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision()),(0,r.returnOrUpdate)(this.extent_,t)},u.prototype.rotate=function(e,r){(0,t.abstract)()},u.prototype.scale=function(e,r,n){(0,t.abstract)()},u.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},u.prototype.getSimplifiedGeometry=function(e){return(0,t.abstract)()},u.prototype.getType=function(){return(0,t.abstract)()},u.prototype.applyTransform=function(e){(0,t.abstract)()},u.prototype.intersectsExtent=function(e){return(0,t.abstract)()},u.prototype.translate=function(e,r){(0,t.abstract)()},u.prototype.transform=function(t,e){var a=(0,o.get)(t),u=a.getUnits()==i.default.TILE_PIXELS?function(t,i,u){var p=a.getExtent(),f=a.getWorldExtent(),l=(0,r.getHeight)(f)/(0,r.getHeight)(p);return(0,s.compose)(c,f[0],f[3],l,-l,0,0,0),(0,n.transform2D)(t,0,t.length,u,c,i),(0,o.getTransform)(a,e)(t,i,u)}:(0,o.getTransform)(a,e);return this.applyTransform(u),this},u}(e.default),l=f;exports.default=l;
},{"../util.js":"KniQ","../Object.js":"PhPh","../extent.js":"QDir","./flat/transform.js":"LGwr","../proj.js":"Diht","../proj/Units.js":"yZx6","../transform.js":"P4eA","../functions.js":"RgA2"}],"pnrv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getStrideForLayout=l,exports.transformGeom2D=f,exports.default=void 0;var t=require("../util.js"),e=require("../extent.js"),r=n(require("./Geometry.js")),i=n(require("./GeometryLayout.js")),o=require("./flat/transform.js");function n(t){return t&&t.__esModule?t:{default:t}}var a=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),s=function(r){function n(){var t=r.call(this)||this;return t.layout=i.default.XY,t.stride=2,t.flatCoordinates=null,t}return a(n,r),n.prototype.computeExtent=function(t){return(0,e.createOrUpdateFromFlatCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},n.prototype.getCoordinates=function(){return(0,t.abstract)()},n.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},n.prototype.getFlatCoordinates=function(){return this.flatCoordinates},n.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},n.prototype.getLayout=function(){return this.layout},n.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},n.prototype.getSimplifiedGeometryInternal=function(t){return this},n.prototype.getStride=function(){return this.stride},n.prototype.setFlatCoordinates=function(t,e){this.stride=l(t),this.layout=t,this.flatCoordinates=e},n.prototype.setCoordinates=function(e,r){(0,t.abstract)()},n.prototype.setLayout=function(t,e,r){var o;if(t)o=l(t);else{for(var n=0;n<r;++n){if(0===e.length)return this.layout=i.default.XY,void(this.stride=2);e=e[0]}t=u(o=e.length)}this.layout=t,this.stride=o},n.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},n.prototype.rotate=function(t,e){var r=this.getFlatCoordinates();if(r){var i=this.getStride();(0,o.rotate)(r,0,r.length,i,t,e,r),this.changed()}},n.prototype.scale=function(t,r,i){var n=r;void 0===n&&(n=t);var a=i;a||(a=(0,e.getCenter)(this.getExtent()));var s=this.getFlatCoordinates();if(s){var u=this.getStride();(0,o.scale)(s,0,s.length,u,t,n,a,s),this.changed()}},n.prototype.translate=function(t,e){var r=this.getFlatCoordinates();if(r){var i=this.getStride();(0,o.translate)(r,0,r.length,i,t,e,r),this.changed()}},n}(r.default);function u(t){var e;return 2==t?e=i.default.XY:3==t?e=i.default.XYZ:4==t&&(e=i.default.XYZM),e}function l(t){var e;return t==i.default.XY?e=2:t==i.default.XYZ||t==i.default.XYM?e=3:t==i.default.XYZM&&(e=4),e}function f(t,e,r){var i=t.getFlatCoordinates();if(i){var n=t.getStride();return(0,o.transform2D)(i,0,i.length,n,e,r)}return null}var d=s;exports.default=d;
},{"../util.js":"KniQ","../extent.js":"QDir","./Geometry.js":"F8sI","./GeometryLayout.js":"Utvi","./flat/transform.js":"LGwr"}],"EOSm":[function(require,module,exports) {
"use strict";function r(r,e,n,t){for(var o=0,i=r[n-t],a=r[n-t+1];e<n;e+=t){var s=r[e],u=r[e+1];o+=a*s-i*u,i=s,a=u}return o/2}function e(e,n,t,o){for(var i=0,a=0,s=t.length;a<s;++a){var u=t[a];i+=r(e,n,u,o),n=u}return i}function n(r,n,t,o){for(var i=0,a=0,s=t.length;a<s;++a){var u=t[a];i+=e(r,n,u,o),n=u[u.length-1]}return i}Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearRing=r,exports.linearRings=e,exports.linearRingss=n;
},{}],"rMra":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxSquaredDelta=t,exports.arrayMaxSquaredDelta=a,exports.multiArrayMaxSquaredDelta=n,exports.assignClosestPoint=s,exports.assignClosestArrayPoint=o,exports.assignClosestMultiArrayPoint=i;var r=require("../../math.js");function e(e,t,a,n,s,o,i){var u,f=e[t],l=e[t+1],v=e[a]-f,h=e[a+1]-l;if(0===v&&0===h)u=t;else{var g=((s-f)*v+(o-l)*h)/(v*v+h*h);if(g>1)u=a;else{if(g>0){for(var c=0;c<n;++c)i[c]=(0,r.lerp)(e[t+c],e[a+c],g);return void(i.length=n)}u=t}}for(c=0;c<n;++c)i[c]=e[u+c];i.length=n}function t(e,t,a,n,s){var o=e[t],i=e[t+1];for(t+=n;t<a;t+=n){var u=e[t],f=e[t+1],l=(0,r.squaredDistance)(o,i,u,f);l>s&&(s=l),o=u,i=f}return s}function a(r,e,a,n,s){for(var o=0,i=a.length;o<i;++o){var u=a[o];s=t(r,e,u,n,s),e=u}return s}function n(r,e,t,n,s){for(var o=0,i=t.length;o<i;++o){var u=t[o];s=a(r,e,u,n,s),e=u[u.length-1]}return s}function s(t,a,n,s,o,i,u,f,l,v,h){if(a==n)return v;var g,c;if(0===o){if((c=(0,r.squaredDistance)(u,f,t[a],t[a+1]))<v){for(g=0;g<s;++g)l[g]=t[a+g];return l.length=s,c}return v}for(var N=h||[NaN,NaN],x=a+s;x<n;)if(e(t,x-s,x,s,u,f,N),(c=(0,r.squaredDistance)(u,f,N[0],N[1]))<v){for(v=c,g=0;g<s;++g)l[g]=N[g];l.length=s,x+=s}else x+=s*Math.max((Math.sqrt(c)-Math.sqrt(v))/o|0,1);if(i&&(e(t,n-s,a,s,u,f,N),(c=(0,r.squaredDistance)(u,f,N[0],N[1]))<v)){for(v=c,g=0;g<s;++g)l[g]=N[g];l.length=s}return v}function o(r,e,t,a,n,o,i,u,f,l,v){for(var h=v||[NaN,NaN],g=0,c=t.length;g<c;++g){var N=t[g];l=s(r,e,N,a,n,o,i,u,f,l,h),e=N}return l}function i(r,e,t,a,n,s,i,u,f,l,v){for(var h=v||[NaN,NaN],g=0,c=t.length;g<c;++g){var N=t[g];l=o(r,e,N,a,n,s,i,u,f,l,h),e=N[N.length-1]}return l}
},{"../../math.js":"B96G"}],"FNhl":[function(require,module,exports) {
"use strict";function e(e,r,t,n){for(var o=0,a=t.length;o<a;++o)e[r++]=t[o];return r}function r(e,r,t,n){for(var o=0,a=t.length;o<a;++o)for(var f=t[o],l=0;l<n;++l)e[r++]=f[l];return r}function t(e,t,n,o,a){for(var f=a||[],l=0,u=0,i=n.length;u<i;++u){var s=r(e,t,n[u],o);f[l++]=s,t=s}return f.length=l,f}function n(e,r,n,o,a){for(var f=a||[],l=0,u=0,i=n.length;u<i;++u){var s=t(e,r,n[u],o,f[l]);f[l++]=s,r=s[s.length-1]}return f.length=l,f}Object.defineProperty(exports,"__esModule",{value:!0}),exports.deflateCoordinate=e,exports.deflateCoordinates=r,exports.deflateCoordinatesArray=t,exports.deflateMultiCoordinatesArray=n;
},{}],"znXl":[function(require,module,exports) {
"use strict";function e(e,r,t,n,o){for(var i=void 0!==o?o:[],a=0,l=r;l<t;l+=n)i[a++]=e.slice(l,l+n);return i.length=a,i}function r(r,t,n,o,i){for(var a=void 0!==i?i:[],l=0,s=0,f=n.length;s<f;++s){var u=n[s];a[l++]=e(r,t,u,o,a[l]),t=u}return a.length=l,a}function t(e,t,n,o,i){for(var a=void 0!==i?i:[],l=0,s=0,f=n.length;s<f;++s){var u=n[s];a[l++]=r(e,t,u,o,a[l]),t=u[u.length-1]}return a.length=l,a}Object.defineProperty(exports,"__esModule",{value:!0}),exports.inflateCoordinates=e,exports.inflateCoordinatesArray=r,exports.inflateMultiCoordinatesArray=t;
},{}],"IEpt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.simplifyLineString=e,exports.douglasPeucker=t,exports.douglasPeuckerArray=n,exports.douglasPeuckerMultiArray=u,exports.radialDistance=a,exports.snap=o,exports.quantize=i,exports.quantizeArray=s,exports.quantizeMultiArray=f;var r=require("../../math.js");function e(r,e,n,u,o,i,s){var f=void 0!==s?s:[];return i||(n=a(r,e,n,u,o,f,0),r=f,e=0,u=2),f.length=t(r,e,n,u,o,f,0),f}function t(e,t,n,u,a,o,i){var s=(n-t)/u;if(s<3){for(;t<n;t+=u)o[i++]=e[t],o[i++]=e[t+1];return i}var f=new Array(s);f[0]=1,f[s-1]=1;for(var p=[t,n-u],v=0;p.length>0;){for(var l=p.pop(),c=p.pop(),h=0,g=e[c],d=e[c+1],x=e[l],y=e[l+1],q=c+u;q<l;q+=u){var A=e[q],M=e[q+1],P=(0,r.squaredSegmentDistance)(A,M,g,d,x,y);P>h&&(v=q,h=P)}h>a&&(f[(v-t)/u]=1,c+u<v&&p.push(c,v),v+u<l&&p.push(v,l))}for(q=0;q<s;++q)f[q]&&(o[i++]=e[t+q*u],o[i++]=e[t+q*u+1]);return i}function n(r,e,n,u,a,o,i,s){for(var f=0,p=n.length;f<p;++f){var v=n[f];i=t(r,e,v,u,a,o,i),s.push(i),e=v}return i}function u(r,e,t,u,a,o,i,s){for(var f=0,p=t.length;f<p;++f){var v=t[f],l=[];i=n(r,e,v,u,a,o,i,l),s.push(l),e=v[v.length-1]}return i}function a(e,t,n,u,a,o,i){if(n<=t+u){for(;t<n;t+=u)o[i++]=e[t],o[i++]=e[t+1];return i}var s=e[t],f=e[t+1];o[i++]=s,o[i++]=f;var p=s,v=f;for(t+=u;t<n;t+=u)p=e[t],v=e[t+1],(0,r.squaredDistance)(s,f,p,v)>a&&(o[i++]=p,o[i++]=v,s=p,f=v);return p==s&&v==f||(o[i++]=p,o[i++]=v),i}function o(r,e){return e*Math.round(r/e)}function i(r,e,t,n,u,a,i){if(e==t)return i;var s,f,p=o(r[e],u),v=o(r[e+1],u);e+=n,a[i++]=p,a[i++]=v;do{if(s=o(r[e],u),f=o(r[e+1],u),(e+=n)==t)return a[i++]=s,a[i++]=f,i}while(s==p&&f==v);for(;e<t;){var l=o(r[e],u),c=o(r[e+1],u);if(e+=n,l!=s||c!=f){var h=s-p,g=f-v,d=l-p,x=c-v;h*x==g*d&&(h<0&&d<h||h==d||h>0&&d>h)&&(g<0&&x<g||g==x||g>0&&x>g)?(s=l,f=c):(a[i++]=s,a[i++]=f,p=s,v=f,s=l,f=c)}}return a[i++]=s,a[i++]=f,i}function s(r,e,t,n,u,a,o,s){for(var f=0,p=t.length;f<p;++f){var v=t[f];o=i(r,e,v,n,u,a,o),s.push(o),e=v}return o}function f(r,e,t,n,u,a,o,i){for(var f=0,p=t.length;f<p;++f){var v=t[f],l=[];o=s(r,e,v,n,u,a,o,l),i.push(l),e=v[v.length-1]}return o}
},{"../../math.js":"B96G"}],"jRgU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../extent.js"),e=u(require("./GeometryLayout.js")),i=u(require("./GeometryType.js")),o=u(require("./SimpleGeometry.js")),r=require("./flat/area.js"),s=require("./flat/closest.js"),n=require("./flat/deflate.js"),a=require("./flat/inflate.js"),l=require("./flat/simplify.js");function u(t){return t&&t.__esModule?t:{default:t}}var f=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),d=function(o){function u(t,e){var i=o.call(this)||this;return i.maxDelta_=-1,i.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?i.setCoordinates(t,e):i.setFlatCoordinates(e,t),i}return f(u,o),u.prototype.clone=function(){return new u(this.flatCoordinates.slice(),this.layout)},u.prototype.closestPointXY=function(e,i,o,r){return r<(0,t.closestSquaredDistanceXY)(this.getExtent(),e,i)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,s.maxSquaredDelta)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,s.assignClosestPoint)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,i,o,r))},u.prototype.getArea=function(){return(0,r.linearRing)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},u.prototype.getCoordinates=function(){return(0,a.inflateCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},u.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=(0,l.douglasPeucker)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new u(i,e.default.XY)},u.prototype.getType=function(){return i.default.LINEAR_RING},u.prototype.intersectsExtent=function(t){return!1},u.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,n.deflateCoordinates)(this.flatCoordinates,0,t,this.stride),this.changed()},u}(o.default),h=d;exports.default=h;
},{"../extent.js":"QDir","./GeometryLayout.js":"Utvi","./GeometryType.js":"lmV0","./SimpleGeometry.js":"pnrv","./flat/area.js":"EOSm","./flat/closest.js":"rMra","./flat/deflate.js":"FNhl","./flat/inflate.js":"znXl","./flat/simplify.js":"IEpt"}],"gLcY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../extent.js"),e=i(require("./GeometryType.js")),o=i(require("./SimpleGeometry.js")),r=require("./flat/deflate.js"),n=require("../math.js");function i(t){return t&&t.__esModule?t:{default:t}}var s=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),a=function(o){function i(t,e){var r=o.call(this)||this;return r.setCoordinates(t,e),r}return s(i,o),i.prototype.clone=function(){return new i(this.flatCoordinates.slice(),this.layout)},i.prototype.closestPointXY=function(t,e,o,r){var i=this.flatCoordinates,s=(0,n.squaredDistance)(t,e,i[0],i[1]);if(s<r){for(var a=this.stride,u=0;u<a;++u)o[u]=i[u];return o.length=a,s}return r},i.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},i.prototype.computeExtent=function(e){return(0,t.createOrUpdateFromCoordinate)(this.flatCoordinates,e)},i.prototype.getType=function(){return e.default.POINT},i.prototype.intersectsExtent=function(e){return(0,t.containsXY)(e,this.flatCoordinates[0],this.flatCoordinates[1])},i.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,r.deflateCoordinate)(this.flatCoordinates,0,t,this.stride),this.changed()},i}(o.default),u=a;exports.default=u;
},{"../extent.js":"QDir","./GeometryType.js":"lmV0","./SimpleGeometry.js":"pnrv","./flat/deflate.js":"FNhl","../math.js":"B96G"}],"dzdN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearRingContainsExtent=n,exports.linearRingContainsXY=e,exports.linearRingsContainsXY=t,exports.linearRingssContainsXY=i;var r=require("../../extent.js");function n(n,t,i,o,u){return!(0,r.forEachCorner)(u,function(r){return!e(n,t,i,o,r[0],r[1])})}function e(r,n,e,t,i,o){for(var u=0,a=r[e-t],s=r[e-t+1];n<e;n+=t){var f=r[n],l=r[n+1];s<=o?l>o&&(f-a)*(o-s)-(i-a)*(l-s)>0&&u++:l<=o&&(f-a)*(o-s)-(i-a)*(l-s)<0&&u--,a=f,s=l}return 0!==u}function t(r,n,t,i,o,u){if(0===t.length)return!1;if(!e(r,n,t[0],i,o,u))return!1;for(var a=1,s=t.length;a<s;++a)if(e(r,t[a-1],t[a],i,o,u))return!1;return!0}function i(r,n,e,i,o,u){if(0===e.length)return!1;for(var a=0,s=e.length;a<s;++a){var f=e[a];if(t(r,n,f,i,o,u))return!0;n=f[f.length-1]}return!1}
},{"../../extent.js":"QDir"}],"UDvN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getInteriorPointOfArray=t,exports.getInteriorPointsOfMultiArray=n;var r=require("../../array.js"),e=require("./contains.js");function t(t,n,a,o,i,s,u){for(var f,l,v,g,h,p,c,y=i[s+1],N=[],b=0,j=a.length;b<j;++b){var x=a[b];for(g=t[x-o],p=t[x-o+1],f=n;f<x;f+=o)h=t[f],c=t[f+1],(y<=p&&c<=y||p<=y&&y<=c)&&(v=(y-p)/(c-p)*(h-g)+g,N.push(v)),g=h,p=c}var M=NaN,O=-1/0;for(N.sort(r.numberSafeCompareFunction),g=N[0],f=1,l=N.length;f<l;++f){h=N[f];var P=Math.abs(h-g);P>O&&(v=(g+h)/2,(0,e.linearRingsContainsXY)(t,n,a,o,v,y)&&(M=v,O=P)),g=h}return isNaN(M)&&(M=i[s]),u?(u.push(M,y,O),u):[M,y,O]}function n(r,e,n,a,o){for(var i=[],s=0,u=n.length;s<u;++s){var f=n[s];i=t(r,e,f,a,o,2*s,i),e=f[f.length-1]}return i}
},{"../../array.js":"luEr","./contains.js":"dzdN"}],"U8i0":[function(require,module,exports) {
"use strict";function e(e,r,t,o,u){for(var f,n=[e[r],e[r+1]],s=[];r+o<t;r+=o){if(s[0]=e[r+o],s[1]=e[r+o+1],f=u(n,s))return f;n[0]=s[0],n[1]=s[1]}return!1}Object.defineProperty(exports,"__esModule",{value:!0}),exports.forEach=e;
},{}],"GZir":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.intersectsLineString=t,exports.intersectsLineStringArray=i,exports.intersectsLinearRing=s,exports.intersectsLinearRingArray=a,exports.intersectsLinearRingMultiArray=o;var n=require("../../extent.js"),e=require("./contains.js"),r=require("./segments.js");function t(e,t,i,s,a){var o=(0,n.extendFlatCoordinates)((0,n.createEmpty)(),e,t,i,s);return!!(0,n.intersects)(a,o)&&(!!(0,n.containsExtent)(a,o)||(o[0]>=a[0]&&o[2]<=a[2]||(o[1]>=a[1]&&o[3]<=a[3]||(0,r.forEach)(e,t,i,s,function(e,r){return(0,n.intersectsSegment)(a,e,r)}))))}function i(n,e,r,i,s){for(var a=0,o=r.length;a<o;++a){if(t(n,e,r[a],i,s))return!0;e=r[a]}return!1}function s(n,r,i,s,a){return!!t(n,r,i,s,a)||(!!(0,e.linearRingContainsXY)(n,r,i,s,a[0],a[1])||(!!(0,e.linearRingContainsXY)(n,r,i,s,a[0],a[3])||(!!(0,e.linearRingContainsXY)(n,r,i,s,a[2],a[1])||!!(0,e.linearRingContainsXY)(n,r,i,s,a[2],a[3]))))}function a(n,r,i,a,o){if(!s(n,r,i[0],a,o))return!1;if(1===i.length)return!0;for(var u=1,c=i.length;u<c;++u)if((0,e.linearRingContainsExtent)(n,i[u-1],i[u],a,o)&&!t(n,i[u-1],i[u],a,o))return!1;return!0}function o(n,e,r,t,i){for(var s=0,o=r.length;s<o;++s){var u=r[s];if(a(n,e,u,t,i))return!0;e=u[u.length-1]}return!1}
},{"../../extent.js":"QDir","./contains.js":"dzdN","./segments.js":"U8i0"}],"ElTe":[function(require,module,exports) {
"use strict";function e(e,r,o,t){for(;r<o-t;){for(var s=0;s<t;++s){var a=e[r+s];e[r+s]=e[o-t+s],e[o-t+s]=a}r+=t,o-=t}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.coordinates=e;
},{}],"cJkE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearRingIsClockwise=e,exports.linearRingsAreOriented=n,exports.linearRingssAreOriented=t,exports.orientLinearRings=i,exports.orientLinearRingsArray=o;var r=require("./reverse.js");function e(r,e,n,t){for(var i=0,o=r[n-t],s=r[n-t+1];e<n;e+=t){var a=r[e],u=r[e+1];i+=(a-o)*(u+s),o=a,s=u}return i>0}function n(r,n,t,i,o){for(var s=void 0!==o&&o,a=0,u=t.length;a<u;++a){var f=t[a],v=e(r,n,f,i);if(0===a){if(s&&v||!s&&!v)return!1}else if(s&&!v||!s&&v)return!1;n=f}return!0}function t(r,e,t,i,o){for(var s=0,a=t.length;s<a;++s){var u=t[s];if(!n(r,e,u,i,o))return!1;u.length&&(e=u[u.length-1])}return!0}function i(n,t,i,o,s){for(var a=void 0!==s&&s,u=0,f=i.length;u<f;++u){var v=i[u],l=e(n,t,v,o);(0===u?a&&l||!a&&!l:a&&!l||!a&&l)&&(0,r.coordinates)(n,t,v,o),t=v}return t}function o(r,e,n,t,o){for(var s=0,a=n.length;s<a;++s)e=i(r,e,n[s],t,o);return e}
},{"./reverse.js":"ElTe"}],"Nwwk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.circular=x,exports.fromExtent=j,exports.fromCircle=P,exports.makeRegular=m,exports.default=void 0;var t=require("../array.js"),e=require("../extent.js"),i=C(require("./GeometryLayout.js")),r=C(require("./GeometryType.js")),n=C(require("./LinearRing.js")),s=C(require("./Point.js")),o=C(require("./SimpleGeometry.js")),a=require("../sphere.js"),l=require("./flat/area.js"),d=require("./flat/closest.js"),h=require("./flat/contains.js"),u=require("./flat/deflate.js"),f=require("./flat/inflate.js"),g=require("./flat/interiorpoint.js"),p=require("./flat/intersectsextent.js"),c=require("./flat/orient.js"),_=require("./flat/simplify.js"),y=require("../math.js");function C(t){return t&&t.__esModule?t:{default:t}}var v=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),R=function(o){function a(t,e,i){var r=o.call(this)||this;return r.ends_=[],r.flatInteriorPointRevision_=-1,r.flatInteriorPoint_=null,r.maxDelta_=-1,r.maxDeltaRevision_=-1,r.orientedRevision_=-1,r.orientedFlatCoordinates_=null,void 0!==e&&i?(r.setFlatCoordinates(e,t),r.ends_=i):r.setCoordinates(t,e),r}return v(a,o),a.prototype.appendLinearRing=function(e){this.flatCoordinates?(0,t.extend)(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},a.prototype.clone=function(){return new a(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},a.prototype.closestPointXY=function(t,i,r,n){return n<(0,e.closestSquaredDistanceXY)(this.getExtent(),t,i)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,d.arrayMaxSquaredDelta)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,d.assignClosestArrayPoint)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,i,r,n))},a.prototype.containsXY=function(t,e){return(0,h.linearRingsContainsXY)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},a.prototype.getArea=function(){return(0,l.linearRings)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},a.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),(0,c.orientLinearRings)(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,(0,f.inflateCoordinatesArray)(e,0,this.ends_,this.stride)},a.prototype.getEnds=function(){return this.ends_},a.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=(0,e.getCenter)(this.getExtent());this.flatInteriorPoint_=(0,g.getInteriorPointOfArray)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},a.prototype.getInteriorPoint=function(){return new s.default(this.getFlatInteriorPoint(),i.default.XYM)},a.prototype.getLinearRingCount=function(){return this.ends_.length},a.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new n.default(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},a.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.ends_,r=[],s=0,o=0,a=i.length;o<a;++o){var l=i[o],d=new n.default(e.slice(s,l),t);r.push(d),s=l}return r},a.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;(0,c.linearRingsAreOriented)(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=(0,c.orientLinearRings)(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},a.prototype.getSimplifiedGeometryInternal=function(t){var e=[],r=[];return e.length=(0,_.quantizeArray)(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,r),new a(e,i.default.XY,r)},a.prototype.getType=function(){return r.default.POLYGON},a.prototype.intersectsExtent=function(t){return(0,p.intersectsLinearRingArray)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},a.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=(0,u.deflateCoordinatesArray)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},a}(o.default),q=R;function x(e,r,n,s){for(var o=n||32,l=[],d=0;d<o;++d)(0,t.extend)(l,(0,a.offset)(e,r,2*Math.PI*d/o,s));return l.push(l[0],l[1]),new R(l,i.default.XY,[l.length])}function j(t){var e=t[0],r=t[1],n=t[2],s=t[3],o=[e,r,e,s,n,s,n,r,e,r];return new R(o,i.default.XY,[o.length])}function P(t,e,i){for(var r=e||32,n=t.getStride(),s=t.getLayout(),o=t.getCenter(),a=n*(r+1),l=new Array(a),d=0;d<a;d+=n){l[d]=0,l[d+1]=0;for(var h=2;h<n;h++)l[d+h]=o[h]}var u=[l.length],f=new R(l,s,u);return m(f,o,t.getRadius(),i),f}function m(t,e,i,r){for(var n=t.getFlatCoordinates(),s=t.getStride(),o=n.length/s-1,a=r||0,l=0;l<=o;++l){var d=l*s,h=a+2*(0,y.modulo)(l,o)*Math.PI/o;n[d]=e[0]+i*Math.cos(h),n[d+1]=e[1]+i*Math.sin(h)}t.changed()}exports.default=q;
},{"../array.js":"luEr","../extent.js":"QDir","./GeometryLayout.js":"Utvi","./GeometryType.js":"lmV0","./LinearRing.js":"jRgU","./Point.js":"gLcY","./SimpleGeometry.js":"pnrv","../sphere.js":"q4ER","./flat/area.js":"EOSm","./flat/closest.js":"rMra","./flat/contains.js":"dzdN","./flat/deflate.js":"FNhl","./flat/inflate.js":"znXl","./flat/interiorpoint.js":"UDvN","./flat/intersectsextent.js":"GZir","./flat/orient.js":"cJkE","./flat/simplify.js":"IEpt","../math.js":"B96G"}],"X4ix":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=c(require("./Object.js")),e=s(require("./events/Event.js")),i=s(require("./events/EventType.js")),n=require("./geom/Polygon.js"),o=require("./math.js"),r=require("./proj.js");function s(t){return t&&t.__esModule?t:{default:t}}function a(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function c(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=a();if(e&&e.has(t))return e.get(t);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var r=n?Object.getOwnPropertyDescriptor(t,o):null;r&&(r.get||r.set)?Object.defineProperty(i,o,r):i[o]=t[o]}return i.default=t,e&&e.set(t,i),i}var u=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),p={ACCURACY:"accuracy",ACCURACY_GEOMETRY:"accuracyGeometry",ALTITUDE:"altitude",ALTITUDE_ACCURACY:"altitudeAccuracy",HEADING:"heading",POSITION:"position",PROJECTION:"projection",SPEED:"speed",TRACKING:"tracking",TRACKING_OPTIONS:"trackingOptions"},h=function(t){function e(e){var n=t.call(this,i.default.ERROR)||this;return n.code=e.code,n.message=e.message,n}return u(e,t),e}(e.default),d=function(e){function i(i){var n=e.call(this)||this,o=i||{};return n.position_=null,n.transform_=r.identityTransform,n.watchId_=void 0,n.addEventListener((0,t.getChangeEventType)(p.PROJECTION),n.handleProjectionChanged_),n.addEventListener((0,t.getChangeEventType)(p.TRACKING),n.handleTrackingChanged_),void 0!==o.projection&&n.setProjection(o.projection),void 0!==o.trackingOptions&&n.setTrackingOptions(o.trackingOptions),n.setTracking(void 0!==o.tracking&&o.tracking),n}return u(i,e),i.prototype.disposeInternal=function(){this.setTracking(!1),e.prototype.disposeInternal.call(this)},i.prototype.handleProjectionChanged_=function(){var t=this.getProjection();t&&(this.transform_=(0,r.getTransformFromProjections)((0,r.get)("EPSG:4326"),t),this.position_&&this.set(p.POSITION,this.transform_(this.position_)))},i.prototype.handleTrackingChanged_=function(){if("geolocation"in navigator){var t=this.getTracking();t&&void 0===this.watchId_?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):t||void 0===this.watchId_||(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}},i.prototype.positionChange_=function(t){var e=t.coords;this.set(p.ACCURACY,e.accuracy),this.set(p.ALTITUDE,null===e.altitude?void 0:e.altitude),this.set(p.ALTITUDE_ACCURACY,null===e.altitudeAccuracy?void 0:e.altitudeAccuracy),this.set(p.HEADING,null===e.heading?void 0:(0,o.toRadians)(e.heading)),this.position_?(this.position_[0]=e.longitude,this.position_[1]=e.latitude):this.position_=[e.longitude,e.latitude];var i=this.transform_(this.position_);this.set(p.POSITION,i),this.set(p.SPEED,null===e.speed?void 0:e.speed);var r=(0,n.circular)(this.position_,e.accuracy);r.applyTransform(this.transform_),this.set(p.ACCURACY_GEOMETRY,r),this.changed()},i.prototype.positionError_=function(t){this.setTracking(!1),this.dispatchEvent(new h(t))},i.prototype.getAccuracy=function(){return this.get(p.ACCURACY)},i.prototype.getAccuracyGeometry=function(){return this.get(p.ACCURACY_GEOMETRY)||null},i.prototype.getAltitude=function(){return this.get(p.ALTITUDE)},i.prototype.getAltitudeAccuracy=function(){return this.get(p.ALTITUDE_ACCURACY)},i.prototype.getHeading=function(){return this.get(p.HEADING)},i.prototype.getPosition=function(){return this.get(p.POSITION)},i.prototype.getProjection=function(){return this.get(p.PROJECTION)},i.prototype.getSpeed=function(){return this.get(p.SPEED)},i.prototype.getTracking=function(){return this.get(p.TRACKING)},i.prototype.getTrackingOptions=function(){return this.get(p.TRACKING_OPTIONS)},i.prototype.setProjection=function(t){this.set(p.PROJECTION,(0,r.get)(t))},i.prototype.setTracking=function(t){this.set(p.TRACKING,t)},i.prototype.setTrackingOptions=function(t){this.set(p.TRACKING_OPTIONS,t)},i}(t.default),g=d;exports.default=g;
},{"./Object.js":"PhPh","./events/Event.js":"fKNg","./events/EventType.js":"C8cu","./geom/Polygon.js":"Nwwk","./math.js":"B96G","./proj.js":"Diht"}],"HbeD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source"};exports.default=e;
},{}],"T6DQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../util.js"),e=r(require("../Object.js")),o=r(require("./Property.js")),i=require("../math.js"),n=require("../obj.js"),s=require("../asserts.js");function r(t){return t&&t.__esModule?t:{default:t}}var a=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),u=function(e){function r(t){var i=e.call(this)||this,r=(0,n.assign)({},t);return r[o.default.OPACITY]=void 0!==t.opacity?t.opacity:1,(0,s.assert)("number"==typeof r[o.default.OPACITY],64),r[o.default.VISIBLE]=void 0===t.visible||t.visible,r[o.default.Z_INDEX]=t.zIndex,r[o.default.MAX_RESOLUTION]=void 0!==t.maxResolution?t.maxResolution:1/0,r[o.default.MIN_RESOLUTION]=void 0!==t.minResolution?t.minResolution:0,r[o.default.MIN_ZOOM]=void 0!==t.minZoom?t.minZoom:-1/0,r[o.default.MAX_ZOOM]=void 0!==t.maxZoom?t.maxZoom:1/0,i.className_=void 0!==r.className?t.className:"ol-layer",delete r.className,i.setProperties(r),i.state_=null,i}return a(r,e),r.prototype.getClassName=function(){return this.className_},r.prototype.getLayerState=function(t){var e=this.state_||{layer:this,managed:void 0===t||t},o=this.getZIndex();return e.opacity=(0,i.clamp)(Math.round(100*this.getOpacity())/100,0,1),e.sourceState=this.getSourceState(),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==o?o:!1===e.managed?1/0:0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e},r.prototype.getLayersArray=function(e){return(0,t.abstract)()},r.prototype.getLayerStatesArray=function(e){return(0,t.abstract)()},r.prototype.getExtent=function(){return this.get(o.default.EXTENT)},r.prototype.getMaxResolution=function(){return this.get(o.default.MAX_RESOLUTION)},r.prototype.getMinResolution=function(){return this.get(o.default.MIN_RESOLUTION)},r.prototype.getMinZoom=function(){return this.get(o.default.MIN_ZOOM)},r.prototype.getMaxZoom=function(){return this.get(o.default.MAX_ZOOM)},r.prototype.getOpacity=function(){return this.get(o.default.OPACITY)},r.prototype.getSourceState=function(){return(0,t.abstract)()},r.prototype.getVisible=function(){return this.get(o.default.VISIBLE)},r.prototype.getZIndex=function(){return this.get(o.default.Z_INDEX)},r.prototype.setExtent=function(t){this.set(o.default.EXTENT,t)},r.prototype.setMaxResolution=function(t){this.set(o.default.MAX_RESOLUTION,t)},r.prototype.setMinResolution=function(t){this.set(o.default.MIN_RESOLUTION,t)},r.prototype.setMaxZoom=function(t){this.set(o.default.MAX_ZOOM,t)},r.prototype.setMinZoom=function(t){this.set(o.default.MIN_ZOOM,t)},r.prototype.setOpacity=function(t){(0,s.assert)("number"==typeof t,64),this.set(o.default.OPACITY,t)},r.prototype.setVisible=function(t){this.set(o.default.VISIBLE,t)},r.prototype.setZIndex=function(t){this.set(o.default.Z_INDEX,t)},r.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),e.prototype.disposeInternal.call(this)},r}(e.default),l=u;exports.default=l;
},{"../util.js":"KniQ","../Object.js":"PhPh","./Property.js":"HbeD","../math.js":"B96G","../obj.js":"mH6q","../asserts.js":"fLG6"}],"z39m":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};exports.default=e;
},{}],"iC8j":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"};exports.default=e;
},{}],"GCgv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.inView=l,exports.default=void 0;var e=require("../events.js"),t=p(require("../events/EventType.js")),r=require("../Object.js"),n=p(require("./Base.js")),o=p(require("./Property.js")),s=require("../obj.js"),u=p(require("../render/EventType.js")),i=p(require("../source/State.js")),a=require("../asserts.js");function p(e){return e&&e.__esModule?e:{default:e}}var c=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),h=function(n){function p(e){var t=this,u=(0,s.assign)({},e);delete u.source,(t=n.call(this,u)||this).mapPrecomposeKey_=null,t.mapRenderKey_=null,t.sourceChangeKey_=null,t.renderer_=null,e.render&&(t.render=e.render),e.map&&t.setMap(e.map),t.addEventListener((0,r.getChangeEventType)(o.default.SOURCE),t.handleSourcePropertyChange_);var i=e.source?e.source:null;return t.setSource(i),t}return c(p,n),p.prototype.getLayersArray=function(e){var t=e||[];return t.push(this),t},p.prototype.getLayerStatesArray=function(e){var t=e||[];return t.push(this.getLayerState()),t},p.prototype.getSource=function(){return this.get(o.default.SOURCE)||null},p.prototype.getSourceState=function(){var e=this.getSource();return e?e.getState():i.default.UNDEFINED},p.prototype.handleSourceChange_=function(){this.changed()},p.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&((0,e.unlistenByKey)(this.sourceChangeKey_),this.sourceChangeKey_=null);var r=this.getSource();r&&(this.sourceChangeKey_=(0,e.listen)(r,t.default.CHANGE,this.handleSourceChange_,this)),this.changed()},p.prototype.getFeatures=function(e){return this.renderer_.getFeatures(e)},p.prototype.render=function(e,t){var r=this.getRenderer();if(r.prepareFrame(e))return r.renderFrame(e,t)},p.prototype.setMap=function(r){this.mapPrecomposeKey_&&((0,e.unlistenByKey)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),r||this.changed(),this.mapRenderKey_&&((0,e.unlistenByKey)(this.mapRenderKey_),this.mapRenderKey_=null),r&&(this.mapPrecomposeKey_=(0,e.listen)(r,u.default.PRECOMPOSE,function(e){var t=e.frameState.layerStatesArray,r=this.getLayerState(!1);(0,a.assert)(!t.some(function(e){return e.layer===r.layer}),67),t.push(r)},this),this.mapRenderKey_=(0,e.listen)(this,t.default.CHANGE,r.render,r),this.changed())},p.prototype.setSource=function(e){this.set(o.default.SOURCE,e)},p.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},p.prototype.hasRenderer=function(){return!!this.renderer_},p.prototype.createRenderer=function(){return null},p.prototype.disposeInternal=function(){this.setSource(null),n.prototype.disposeInternal.call(this)},p}(n.default);function l(e,t){if(!e.visible)return!1;var r=t.resolution;if(r<e.minResolution||r>=e.maxResolution)return!1;var n=t.zoom;return n>e.minZoom&&n<=e.maxZoom}var y=h;exports.default=y;
},{"../events.js":"UqnM","../events/EventType.js":"C8cu","../Object.js":"PhPh","./Base.js":"T6DQ","./Property.js":"HbeD","../obj.js":"mH6q","../render/EventType.js":"z39m","../source/State.js":"iC8j","../asserts.js":"fLG6"}],"eucy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asString=s,exports.asArray=i,exports.normalize=p,exports.toString=c,exports.isStringColor=l,exports.fromString=void 0;var r=require("./asserts.js"),e=require("./math.js"),t=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,n=/^([a-z]*)$|^hsla?\(.*\)$/i;function s(r){return"string"==typeof r?r:c(r)}function a(r){var e=document.createElement("div");if(e.style.color=r,""!==e.style.color){document.body.appendChild(e);var t=getComputedStyle(e).color;return document.body.removeChild(e),t}return""}var o=function(){var r={},e=0;return function(t){var n;if(r.hasOwnProperty(t))n=r[t];else{if(e>=1024){var s=0;for(var a in r)0==(3&s++)&&(delete r[a],--e)}n=u(t),r[t]=n,++e}return n}}();function i(r){return Array.isArray(r)?r:o(r)}function u(e){var s,o,i,u,c;if(n.exec(e)&&(e=a(e)),t.exec(e)){var l=e.length-1,f=void 0;f=l<=4?1:2;var d=4===l||8===l;s=parseInt(e.substr(1+0*f,f),16),o=parseInt(e.substr(1+1*f,f),16),i=parseInt(e.substr(1+2*f,f),16),u=d?parseInt(e.substr(1+3*f,f),16):255,1==f&&(s=(s<<4)+s,o=(o<<4)+o,i=(i<<4)+i,d&&(u=(u<<4)+u)),c=[s,o,i,u/255]}else 0==e.indexOf("rgba(")?p(c=e.slice(5,-1).split(",").map(Number)):0==e.indexOf("rgb(")?((c=e.slice(4,-1).split(",").map(Number)).push(1),p(c)):(0,r.assert)(!1,14);return c}function p(r){return r[0]=(0,e.clamp)(r[0]+.5|0,0,255),r[1]=(0,e.clamp)(r[1]+.5|0,0,255),r[2]=(0,e.clamp)(r[2]+.5|0,0,255),r[3]=(0,e.clamp)(r[3],0,1),r}function c(r){var e=r[0];e!=(0|e)&&(e=e+.5|0);var t=r[1];t!=(0|t)&&(t=t+.5|0);var n=r[2];return n!=(0|n)&&(n=n+.5|0),"rgba("+e+","+t+","+n+","+(void 0===r[3]?1:r[3])+")"}function l(r){return n.test(r)&&(r=a(r)),t.test(r)||0===r.indexOf("rgba(")||0===r.indexOf("rgb(")}exports.fromString=o;
},{"./asserts.js":"fLG6","./math.js":"B96G"}],"V5XN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asColorLike=e;var r=require("./color.js");function e(e){return Array.isArray(e)?(0,r.toString)(e):e}
},{"./color.js":"eucy"}],"f3Nv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PASSIVE_EVENT_LISTENERS=exports.IMAGE_DECODE=exports.WORKER_OFFSCREEN_CANVAS=exports.DEVICE_PIXEL_RATIO=exports.MAC=exports.WEBKIT=exports.SAFARI=exports.FIREFOX=void 0;var e="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",r=-1!==e.indexOf("firefox");exports.FIREFOX=r;var o=-1!==e.indexOf("safari")&&-1==e.indexOf("chrom");exports.SAFARI=o;var t=-1!==e.indexOf("webkit")&&-1==e.indexOf("edge");exports.WEBKIT=t;var n=-1!==e.indexOf("macintosh");exports.MAC=n;var i="undefined"!=typeof devicePixelRatio?devicePixelRatio:1;exports.DEVICE_PIXEL_RATIO=i;var E="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope;exports.WORKER_OFFSCREEN_CANVAS=E;var s="undefined"!=typeof Image&&Image.prototype.decode;exports.IMAGE_DECODE=s;var a=function(){var e=!1;try{var r=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,r),window.removeEventListener("_",null,r)}catch(o){}return e}();exports.PASSIVE_EVENT_LISTENERS=a;
},{}],"Xno5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCanvasContext2D=t,exports.outerWidth=r,exports.outerHeight=n,exports.replaceNode=o,exports.removeNode=a,exports.removeChildren=i,exports.replaceChildren=s;var e=require("./has.js");function t(t,r,n){var o=n&&n.length?n.shift():e.WORKER_OFFSCREEN_CANVAS?new OffscreenCanvas(t||300,r||300):document.createElement("canvas");return t&&(o.width=t),r&&(o.height=r),o.getContext("2d")}function r(e){var t=e.offsetWidth,r=getComputedStyle(e);return t+=parseInt(r.marginLeft,10)+parseInt(r.marginRight,10)}function n(e){var t=e.offsetHeight,r=getComputedStyle(e);return t+=parseInt(r.marginTop,10)+parseInt(r.marginBottom,10)}function o(e,t){var r=t.parentNode;r&&r.replaceChild(e,t)}function a(e){return e&&e.parentNode?e.parentNode.removeChild(e):null}function i(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function s(e,t){for(var r=e.childNodes,n=0;;++n){var o=r[n],a=t[n];if(!o&&!a)break;o!==a&&(o?a?e.insertBefore(a,o):(e.removeChild(o),--n):e.appendChild(a))}}
},{"./has.js":"f3Nv"}],"u3kG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};exports.default=e;
},{}],"HgMV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getFontParameters=exports.CLASS_COLLAPSED=exports.CLASS_CONTROL=exports.CLASS_UNSUPPORTED=exports.CLASS_UNSELECTABLE=exports.CLASS_SELECTABLE=exports.CLASS_HIDDEN=void 0;var e="ol-hidden";exports.CLASS_HIDDEN=e;var r="ol-selectable";exports.CLASS_SELECTABLE=r;var t="ol-unselectable";exports.CLASS_UNSELECTABLE=t;var s="ol-unsupported";exports.CLASS_UNSUPPORTED=s;var l="ol-control";exports.CLASS_CONTROL=l;var a="ol-collapsed";exports.CLASS_COLLAPSED=a;var o=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),S=["style","variant","weight","size","lineHeight","family"],i=function(e){var r=e.match(o);if(!r)return null;for(var t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},s=0,l=S.length;s<l;++s){var a=r[s+1];void 0!==a&&(t[S[s]]=a)}return t.families=t.family.split(/,\s?/),t};exports.getFontParameters=i;
},{}],"iAG7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.measureTextWidth=O,exports.measureAndCacheTextWidth=w,exports.measureTextWidths=H,exports.rotateAtOffset=M,exports.drawImageOrLabel=N,exports.createTransformString=q,exports.measureTextHeight=exports.registerFont=exports.textHeights=exports.labelCache=exports.checkedFonts=exports.defaultLineWidth=exports.defaultPadding=exports.defaultTextBaseline=exports.defaultTextAlign=exports.defaultStrokeStyle=exports.defaultMiterLimit=exports.defaultLineJoin=exports.defaultLineDashOffset=exports.defaultLineDash=exports.defaultLineCap=exports.defaultFillStyle=exports.defaultFont=void 0;var e=require("../css.js"),t=require("../dom.js"),r=require("../obj.js"),a=i(require("../Object.js")),n=i(require("../events/Target.js")),s=require("../has.js"),o=require("../transform.js");function i(e){return e&&e.__esModule?e:{default:e}}var l="10px sans-serif";exports.defaultFont=l;var u="#000";exports.defaultFillStyle=u;var f="round";exports.defaultLineCap=f;var d=[];exports.defaultLineDash=d;var p=0;exports.defaultLineDashOffset=p;var x="round";exports.defaultLineJoin=x;var c=10;exports.defaultMiterLimit=c;var v="#000";exports.defaultStrokeStyle=v;var g="center";exports.defaultTextAlign=g;var h="middle";exports.defaultTextBaseline=h;var m=[0,0,0,0];exports.defaultPadding=m;var y=1;exports.defaultLineWidth=y;var C=new a.default;exports.checkedFonts=C;var L=new n.default;exports.labelCache=L,L.setSize=function(){console.warn("labelCache is deprecated.")};var T,F=null,S={};exports.textHeights=S;var b=function(){var t,a,n=100,s="32px ",o=["monospace","serif"],i=o.length,l="wmytzilWMYTZIL@#/&?$%10";function u(e,t,r){for(var n=!0,u=0;u<i;++u){var f=o[u];if(a=O(e+" "+t+" "+s+f,l),r!=f){var d=O(e+" "+t+" "+s+r+","+f,l);n=n&&d!=a}}return!!n}function f(){for(var e=!0,a=C.getKeys(),s=0,o=a.length;s<o;++s){var i=a[s];C.get(i)<n&&(u.apply(this,i.split("\n"))?((0,r.clear)(S),F=null,T=void 0,C.set(i,n)):(C.set(i,C.get(i)+1,!0),e=!1))}e&&(clearInterval(t),t=void 0)}return function(r){var a=(0,e.getFontParameters)(r);if(a)for(var s=a.families,o=0,i=s.length;o<i;++o){var l=s[o],d=a.style+"\n"+a.weight+"\n"+l;void 0===C.get(d)&&(C.set(d,n,!0),u(a.style,a.weight,l)||(C.set(d,0,!0),void 0===t&&(t=setInterval(f,32))))}}}();exports.registerFont=b;var A=function(){var t,r=S;return function(a){var n=r[a];if(null==n)if(s.WORKER_OFFSCREEN_CANVAS){var o=(0,e.getFontParameters)(a),i=j(a,"Žg"),l=isNaN(Number(o.lineHeight))?1.2:Number(o.lineHeight);S[a]=l*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else t||((t=document.createElement("div")).innerHTML="M",t.style.margin="0 !important",t.style.padding="0 !important",t.style.position="absolute !important",t.style.left="-99999px !important"),t.style.font=a,document.body.appendChild(t),n=t.offsetHeight,r[a]=n,document.body.removeChild(t);return n}}();function j(e,r){return F||(F=(0,t.createCanvasContext2D)(1,1)),e!=T&&(F.font=e,T=F.font),F.measureText(r)}function O(e,t){return j(e,t).width}function w(e,t,r){if(t in r)return r[t];var a=O(e,t);return r[t]=a,a}function H(e,t,r){for(var a=t.length,n=0,s=0;s<a;++s){var o=O(e,t[s]);n=Math.max(n,o),r.push(o)}return n}function M(e,t,r,a){0!==t&&(e.translate(r,a),e.rotate(t),e.translate(-r,-a))}function N(e,t,r,a,n,s,o,i,l,u,f){e.save(),1!==r&&(e.globalAlpha*=r),t&&e.setTransform.apply(e,t),a.contextInstructions?(e.translate(l,u),e.scale(f,f),W(a,e)):e.drawImage(a,n,s,o,i,l,u,o*f,i*f),e.restore()}function W(e,t){for(var r=e.contextInstructions,a=0,n=r.length;a<n;a+=2)Array.isArray(r[a+1])?t[r[a]].apply(t,r[a+1]):t[r[a]]=r[a+1]}exports.measureTextHeight=A;var _=null;function q(e){return s.WORKER_OFFSCREEN_CANVAS?(0,o.toString)(e):(_||(_=(0,t.createCanvasContext2D)(1,1).canvas),_.style.transform=(0,o.toString)(e),_.style.transform)}
},{"../css.js":"HgMV","../dom.js":"Xno5","../obj.js":"mH6q","../Object.js":"PhPh","../events/Target.js":"CR4Y","../has.js":"f3Nv","../transform.js":"P4eA"}],"S8ow":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../util.js"),e=function(){function e(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.displacement_=t.displacement}return e.prototype.clone=function(){return new e({opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})},e.prototype.getOpacity=function(){return this.opacity_},e.prototype.getRotateWithView=function(){return this.rotateWithView_},e.prototype.getRotation=function(){return this.rotation_},e.prototype.getScale=function(){return this.scale_},e.prototype.getDisplacement=function(){return this.displacement_},e.prototype.getAnchor=function(){return(0,t.abstract)()},e.prototype.getImage=function(e){return(0,t.abstract)()},e.prototype.getHitDetectionImage=function(e){return(0,t.abstract)()},e.prototype.getImageState=function(){return(0,t.abstract)()},e.prototype.getImageSize=function(){return(0,t.abstract)()},e.prototype.getHitDetectionImageSize=function(){return(0,t.abstract)()},e.prototype.getOrigin=function(){return(0,t.abstract)()},e.prototype.getSize=function(){return(0,t.abstract)()},e.prototype.setOpacity=function(t){this.opacity_=t},e.prototype.setRotateWithView=function(t){this.rotateWithView_=t},e.prototype.setRotation=function(t){this.rotation_=t},e.prototype.setScale=function(t){this.scale_=t},e.prototype.listenImageChange=function(e){(0,t.abstract)()},e.prototype.load=function(){(0,t.abstract)()},e.prototype.unlistenImageChange=function(e){(0,t.abstract)()},e}(),o=e;exports.default=o;
},{"../util.js":"KniQ"}],"il3X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../color.js"),e=require("../colorlike.js"),i=require("../dom.js"),s=r(require("../ImageState.js")),n=require("../render/canvas.js"),o=r(require("./Image.js"));function r(t){return t&&t.__esModule?t:{default:t}}var a=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),l=function(o){function r(t){var e=this,i=void 0!==t.rotateWithView&&t.rotateWithView;return(e=o.call(this,{opacity:1,rotateWithView:i,rotation:void 0!==t.rotation?t.rotation:0,scale:1,displacement:void 0!==t.displacement?t.displacement:[0,0]})||this).canvas_=null,e.hitDetectionCanvas_=null,e.fill_=void 0!==t.fill?t.fill:null,e.origin_=[0,0],e.points_=t.points,e.radius_=void 0!==t.radius?t.radius:t.radius1,e.radius2_=t.radius2,e.angle_=void 0!==t.angle?t.angle:0,e.stroke_=void 0!==t.stroke?t.stroke:null,e.anchor_=null,e.size_=null,e.imageSize_=null,e.hitDetectionImageSize_=null,e.render(),e}return a(r,o),r.prototype.clone=function(){var t=new r({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},r.prototype.getAnchor=function(){return this.anchor_},r.prototype.getAngle=function(){return this.angle_},r.prototype.getFill=function(){return this.fill_},r.prototype.getHitDetectionImage=function(t){return this.hitDetectionCanvas_},r.prototype.getImage=function(t){return this.canvas_},r.prototype.getImageSize=function(){return this.imageSize_},r.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_},r.prototype.getImageState=function(){return s.default.LOADED},r.prototype.getOrigin=function(){return this.origin_},r.prototype.getPoints=function(){return this.points_},r.prototype.getRadius=function(){return this.radius_},r.prototype.getRadius2=function(){return this.radius2_},r.prototype.getSize=function(){return this.size_},r.prototype.getStroke=function(){return this.stroke_},r.prototype.listenImageChange=function(t){},r.prototype.load=function(){},r.prototype.unlistenImageChange=function(t){},r.prototype.render=function(){var t,s=n.defaultLineCap,o=n.defaultLineJoin,r=0,a=null,l=0,h=0;this.stroke_&&(null===(t=this.stroke_.getColor())&&(t=n.defaultStrokeStyle),t=(0,e.asColorLike)(t),void 0===(h=this.stroke_.getWidth())&&(h=n.defaultLineWidth),a=this.stroke_.getLineDash(),l=this.stroke_.getLineDashOffset(),void 0===(o=this.stroke_.getLineJoin())&&(o=n.defaultLineJoin),void 0===(s=this.stroke_.getLineCap())&&(s=n.defaultLineCap),void 0===(r=this.stroke_.getMiterLimit())&&(r=n.defaultMiterLimit));var u=2*(this.radius_+h)+1,c={strokeStyle:t,strokeWidth:h,size:u,lineCap:s,lineDash:a,lineDashOffset:l,lineJoin:o,miterLimit:r},d=(0,i.createCanvasContext2D)(u,u);this.canvas_=d.canvas;var f=u=this.canvas_.width,_=this.getDisplacement();this.draw_(c,d,0,0),this.createHitDetectionCanvas_(c),this.anchor_=[u/2-_[0],u/2+_[1]],this.size_=[u,u],this.imageSize_=[f,f]},r.prototype.draw_=function(t,i,s,o){var r,a,l;i.setTransform(1,0,0,1,0,0),i.translate(s,o),i.beginPath();var h=this.points_;if(h===1/0)i.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var u=void 0!==this.radius2_?this.radius2_:this.radius_;for(u!==this.radius_&&(h*=2),r=0;r<=h;r++)a=2*r*Math.PI/h-Math.PI/2+this.angle_,l=r%2==0?this.radius_:u,i.lineTo(t.size/2+l*Math.cos(a),t.size/2+l*Math.sin(a))}if(this.fill_){var c=this.fill_.getColor();null===c&&(c=n.defaultFillStyle),i.fillStyle=(0,e.asColorLike)(c),i.fill()}this.stroke_&&(i.strokeStyle=t.strokeStyle,i.lineWidth=t.strokeWidth,i.setLineDash&&t.lineDash&&(i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset),i.lineCap=t.lineCap,i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit,i.stroke()),i.closePath()},r.prototype.createHitDetectionCanvas_=function(e){if(this.hitDetectionImageSize_=[e.size,e.size],this.hitDetectionCanvas_=this.canvas_,this.fill_){var s=this.fill_.getColor(),n=0;if("string"==typeof s&&(s=(0,t.asArray)(s)),null===s?n=1:Array.isArray(s)&&(n=4===s.length?s[3]:1),0===n){var o=(0,i.createCanvasContext2D)(e.size,e.size);this.hitDetectionCanvas_=o.canvas,this.drawHitDetectionCanvas_(e,o,0,0)}}},r.prototype.drawHitDetectionCanvas_=function(t,e,i,s){e.setTransform(1,0,0,1,0,0),e.translate(i,s),e.beginPath();var o=this.points_;if(o===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var r=void 0!==this.radius2_?this.radius2_:this.radius_;r!==this.radius_&&(o*=2);var a=void 0,l=void 0,h=void 0;for(a=0;a<=o;a++)h=2*a*Math.PI/o-Math.PI/2+this.angle_,l=a%2==0?this.radius_:r,e.lineTo(t.size/2+l*Math.cos(h),t.size/2+l*Math.sin(h))}e.fillStyle=n.defaultFillStyle,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.stroke()),e.closePath()},r}(o.default),h=l;exports.default=h;
},{"../color.js":"eucy","../colorlike.js":"V5XN","../dom.js":"Xno5","../ImageState.js":"u3kG","../render/canvas.js":"iAG7","./Image.js":"S8ow"}],"cdf1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./RegularShape.js"));function e(t){return t&&t.__esModule?t:{default:t}}var r=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),i=function(t){function e(e){var r=e||{};return t.call(this,{points:1/0,fill:r.fill,radius:r.radius,stroke:r.stroke,displacement:void 0!==r.displacement?r.displacement:[0,0]})||this}return r(e,t),e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),displacement:this.getDisplacement().slice()});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.setRadius=function(t){this.radius_=t,this.render()},e}(t.default),o=i;exports.default=o;
},{"./RegularShape.js":"il3X"}],"AFcg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o=function(){function o(o){var r=o||{};this.color_=void 0!==r.color?r.color:null}return o.prototype.clone=function(){var r=this.getColor();return new o({color:Array.isArray(r)?r.slice():r||void 0})},o.prototype.getColor=function(){return this.color_},o.prototype.setColor=function(o){this.color_=o},o}(),r=o;exports.default=r;
},{}],"TXDt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=function(){function t(t){var i=t||{};this.color_=void 0!==i.color?i.color:null,this.lineCap_=i.lineCap,this.lineDash_=void 0!==i.lineDash?i.lineDash:null,this.lineDashOffset_=i.lineDashOffset,this.lineJoin_=i.lineJoin,this.miterLimit_=i.miterLimit,this.width_=i.width}return t.prototype.clone=function(){var i=this.getColor();return new t({color:Array.isArray(i)?i.slice():i||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},t.prototype.getColor=function(){return this.color_},t.prototype.getLineCap=function(){return this.lineCap_},t.prototype.getLineDash=function(){return this.lineDash_},t.prototype.getLineDashOffset=function(){return this.lineDashOffset_},t.prototype.getLineJoin=function(){return this.lineJoin_},t.prototype.getMiterLimit=function(){return this.miterLimit_},t.prototype.getWidth=function(){return this.width_},t.prototype.setColor=function(t){this.color_=t},t.prototype.setLineCap=function(t){this.lineCap_=t},t.prototype.setLineDash=function(t){this.lineDash_=t},t.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t},t.prototype.setLineJoin=function(t){this.lineJoin_=t},t.prototype.setMiterLimit=function(t){this.miterLimit_=t},t.prototype.setWidth=function(t){this.width_=t},t}(),i=t;exports.default=i;
},{}],"he4w":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toFunction=l,exports.createDefaultStyle=f,exports.createEditingStyle=d,exports.default=void 0;var e=require("../asserts.js"),t=i(require("../geom/GeometryType.js")),o=i(require("./Circle.js")),r=i(require("./Fill.js")),n=i(require("./Stroke.js"));function i(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(e){var t=e||{};this.geometry_=null,this.geometryFunction_=a,void 0!==t.geometry&&this.setGeometry(t.geometry),this.fill_=void 0!==t.fill?t.fill:null,this.image_=void 0!==t.image?t.image:null,this.renderer_=void 0!==t.renderer?t.renderer:null,this.stroke_=void 0!==t.stroke?t.stroke:null,this.text_=void 0!==t.text?t.text:null,this.zIndex_=t.zIndex}return e.prototype.clone=function(){var t=this.getGeometry();return t&&"object"==typeof t&&(t=t.clone()),new e({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.setRenderer=function(e){this.renderer_=e},e.prototype.getGeometry=function(){return this.geometry_},e.prototype.getGeometryFunction=function(){return this.geometryFunction_},e.prototype.getFill=function(){return this.fill_},e.prototype.setFill=function(e){this.fill_=e},e.prototype.getImage=function(){return this.image_},e.prototype.setImage=function(e){this.image_=e},e.prototype.getStroke=function(){return this.stroke_},e.prototype.setStroke=function(e){this.stroke_=e},e.prototype.getText=function(){return this.text_},e.prototype.setText=function(e){this.text_=e},e.prototype.getZIndex=function(){return this.zIndex_},e.prototype.setGeometry=function(e){"function"==typeof e?this.geometryFunction_=e:"string"==typeof e?this.geometryFunction_=function(t){return t.get(e)}:e?void 0!==e&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=a,this.geometry_=e},e.prototype.setZIndex=function(e){this.zIndex_=e},e}();function l(t){var o;if("function"==typeof t)o=t;else{var r;if(Array.isArray(t))r=t;else(0,e.assert)("function"==typeof t.getZIndex,41),r=[t];o=function(){return r}}return o}var s=null;function f(e,t){if(!s){var i=new r.default({color:"rgba(255,255,255,0.4)"}),l=new n.default({color:"#3399CC",width:1.25});s=[new u({image:new o.default({fill:i,stroke:l,radius:5}),fill:i,stroke:l})]}return s}function d(){var e={},i=[255,255,255,1],l=[0,153,255,1];return e[t.default.POLYGON]=[new u({fill:new r.default({color:[255,255,255,.5]})})],e[t.default.MULTI_POLYGON]=e[t.default.POLYGON],e[t.default.LINE_STRING]=[new u({stroke:new n.default({color:i,width:5})}),new u({stroke:new n.default({color:l,width:3})})],e[t.default.MULTI_LINE_STRING]=e[t.default.LINE_STRING],e[t.default.CIRCLE]=e[t.default.POLYGON].concat(e[t.default.LINE_STRING]),e[t.default.POINT]=[new u({image:new o.default({radius:6,fill:new r.default({color:l}),stroke:new n.default({color:i,width:1.5})}),zIndex:1/0})],e[t.default.MULTI_POINT]=e[t.default.POINT],e[t.default.GEOMETRY_COLLECTION]=e[t.default.POLYGON].concat(e[t.default.LINE_STRING],e[t.default.POINT]),e}function a(e){return e.getGeometry()}var c=u;exports.default=c;
},{"../asserts.js":"fLG6","../geom/GeometryType.js":"lmV0","./Circle.js":"cdf1","./Fill.js":"AFcg","./Stroke.js":"TXDt"}],"pskK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("./Layer.js")),e=require("../obj.js"),r=require("../style/Style.js");function n(t){return t&&t.__esModule?t:{default:t}}var i=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o={RENDER_ORDER:"renderOrder"},u=function(t){function n(r){var n=this,i=r||{},o=(0,e.assign)({},i);return delete o.style,delete o.renderBuffer,delete o.updateWhileAnimating,delete o.updateWhileInteracting,(n=t.call(this,o)||this).declutter_=void 0!==i.declutter&&i.declutter,n.renderBuffer_=void 0!==i.renderBuffer?i.renderBuffer:100,n.style_=null,n.styleFunction_=void 0,n.setStyle(i.style),n.updateWhileAnimating_=void 0!==i.updateWhileAnimating&&i.updateWhileAnimating,n.updateWhileInteracting_=void 0!==i.updateWhileInteracting&&i.updateWhileInteracting,n}return i(n,t),n.prototype.getDeclutter=function(){return this.declutter_},n.prototype.getFeatures=function(e){return t.prototype.getFeatures.call(this,e)},n.prototype.getRenderBuffer=function(){return this.renderBuffer_},n.prototype.getRenderOrder=function(){return this.get(o.RENDER_ORDER)},n.prototype.getStyle=function(){return this.style_},n.prototype.getStyleFunction=function(){return this.styleFunction_},n.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},n.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},n.prototype.setRenderOrder=function(t){this.set(o.RENDER_ORDER,t)},n.prototype.setStyle=function(t){this.style_=void 0!==t?t:r.createDefaultStyle,this.styleFunction_=null===t?void 0:(0,r.toFunction)(this.style_),this.changed()},n}(t.default),l=u;exports.default=l;
},{"./Layer.js":"GCgv","../obj.js":"mH6q","../style/Style.js":"he4w"}],"cuLW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ANIMATING:0,INTERACTING:1};exports.default=e;
},{}],"AiCK":[function(require,module,exports) {
"use strict";function e(e,r,t){var n=void 0!==t?e.toFixed(t):""+e,i=n.indexOf(".");return(i=-1===i?n.length:i)>r?n:new Array(1+r-i).join("0")+n}function r(e,r){for(var t=(""+e).split("."),n=(""+r).split("."),i=0;i<Math.max(t.length,n.length);i++){var o=parseInt(t[i]||"0",10),s=parseInt(n[i]||"0",10);if(o>s)return 1;if(s>o)return-1}return 0}Object.defineProperty(exports,"__esModule",{value:!0}),exports.padNumber=e,exports.compareVersions=r;
},{}],"nGsj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.add=n,exports.closestOnCircle=o,exports.closestOnSegment=u,exports.createStringXY=a,exports.degreesToStringHDMS=s,exports.format=i,exports.equals=c,exports.rotate=f,exports.scale=p,exports.squaredDistance=x,exports.distance=d,exports.squaredDistanceToSegment=l,exports.toStringHDMS=h,exports.toStringXY=g,exports.wrapX=M;var t=require("./math.js"),r=require("./string.js"),e=require("./extent.js");function n(t,r){return t[0]+=+r[0],t[1]+=+r[1],t}function o(t,r){var e=r.getRadius(),n=r.getCenter(),o=n[0],u=n[1],a=t[0]-o,s=t[1]-u;0===a&&0===s&&(a=1);var i=Math.sqrt(a*a+s*s);return[o+e*a/i,u+e*s/i]}function u(t,r){var e,n,o=t[0],u=t[1],a=r[0],s=r[1],i=a[0],c=a[1],f=s[0],p=s[1],x=f-i,d=p-c,l=0===x&&0===d?0:(x*(o-i)+d*(u-c))/(x*x+d*d||0);return l<=0?(e=i,n=c):l>=1?(e=f,n=p):(e=i+l*x,n=c+l*d),[e,n]}function a(t){return function(r){return g(r,t)}}function s(e,n,o){var u=(0,t.modulo)(n+180,360)-180,a=Math.abs(3600*u),s=o||0,i=Math.pow(10,s),c=Math.floor(a/3600),f=Math.floor((a-3600*c)/60),p=a-3600*c-60*f;return(p=Math.ceil(p*i)/i)>=60&&(p=0,f+=1),f>=60&&(f=0,c+=1),c+"° "+(0,r.padNumber)(f,2)+"′ "+(0,r.padNumber)(p,2,s)+"″"+(0==u?"":" "+e.charAt(u<0?1:0))}function i(t,r,e){return t?r.replace("{x}",t[0].toFixed(e)).replace("{y}",t[1].toFixed(e)):""}function c(t,r){for(var e=!0,n=t.length-1;n>=0;--n)if(t[n]!=r[n]){e=!1;break}return e}function f(t,r){var e=Math.cos(r),n=Math.sin(r),o=t[0]*e-t[1]*n,u=t[1]*e+t[0]*n;return t[0]=o,t[1]=u,t}function p(t,r){return t[0]*=r,t[1]*=r,t}function x(t,r){var e=t[0]-r[0],n=t[1]-r[1];return e*e+n*n}function d(t,r){return Math.sqrt(x(t,r))}function l(t,r){return x(t,u(t,r))}function h(t,r){return t?s("NS",t[1],r)+" "+s("EW",t[0],r):""}function g(t,r){return i(t,"{x}, {y}",r)}function M(t,r){var n=r.getExtent();if(r.canWrapX()&&(t[0]<n[0]||t[0]>=n[2])){var o=(0,e.getWidth)(n),u=Math.floor((t[0]-n[0])/o);t[0]-=u*o}return t}
},{"./math.js":"B96G","./string.js":"AiCK","./extent.js":"QDir"}],"LQER":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=function(){function t(){}return t.prototype.drawCustom=function(t,o,e){},t.prototype.drawGeometry=function(t){},t.prototype.setStyle=function(t){},t.prototype.drawCircle=function(t,o){},t.prototype.drawFeature=function(t,o){},t.prototype.drawGeometryCollection=function(t,o){},t.prototype.drawLineString=function(t,o){},t.prototype.drawMultiLineString=function(t,o){},t.prototype.drawMultiPoint=function(t,o){},t.prototype.drawMultiPolygon=function(t,o){},t.prototype.drawPoint=function(t,o){},t.prototype.drawPolygon=function(t,o){},t.prototype.drawText=function(t,o){},t.prototype.setFillStrokeStyle=function(t,o){},t.prototype.setImageStyle=function(t,o){},t.prototype.setTextStyle=function(t,o){},t}(),o=t;exports.default=o;
},{}],"kTJv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.closePathInstruction=exports.beginPathInstruction=exports.strokeInstruction=exports.fillInstruction=void 0;var t={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},r=[t.FILL];exports.fillInstruction=r;var e=[t.STROKE];exports.strokeInstruction=e;var o=[t.BEGIN_PATH];exports.beginPathInstruction=o;var s=[t.CLOSE_PATH];exports.closePathInstruction=s;var E=t;exports.default=E;
},{}],"QBj4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../../array.js"),e=require("../../colorlike.js"),i=require("../../extent.js"),n=l(require("../../extent/Relationship.js")),r=l(require("../../geom/GeometryType.js")),o=require("../../geom/flat/inflate.js"),s=l(require("../VectorContext.js")),a=require("../canvas.js"),u=l(require("./Instruction.js"));function l(t){return t&&t.__esModule?t:{default:t}}var h=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),d=function(s){function l(t,e,i,n){var r=s.call(this)||this;return r.tolerance=t,r.maxExtent=e,r.pixelRatio=n,r.maxLineWidth=0,r.resolution=i,r.beginGeometryInstruction1_=null,r.beginGeometryInstruction2_=null,r.bufferedMaxExtent_=null,r.instructions=[],r.coordinates=[],r.tmpCoordinate_=[],r.hitDetectionInstructions=[],r.state={},r}return h(l,s),l.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map(function(t){return t*e})},l.prototype.appendFlatCoordinates=function(t,e,r,o,s,a){var u=this.coordinates.length,l=this.getBufferedMaxExtent();a&&(e+=o);var h,d,c,f=t[e],p=t[e+1],y=this.tmpCoordinate_,v=!0;for(h=e+o;h<r;h+=o)y[0]=t[h],y[1]=t[h+1],(c=(0,i.coordinateRelationship)(l,y))!==d?(v&&(this.coordinates[u++]=f,this.coordinates[u++]=p),this.coordinates[u++]=y[0],this.coordinates[u++]=y[1],v=!1):c===n.default.INTERSECTING?(this.coordinates[u++]=y[0],this.coordinates[u++]=y[1],v=!1):v=!0,f=y[0],p=y[1],d=c;return(s&&v||h===e+o)&&(this.coordinates[u++]=f,this.coordinates[u++]=p),u},l.prototype.drawCustomCoordinates_=function(t,e,i,n,r){for(var o=0,s=i.length;o<s;++o){var a=i[o],u=this.appendFlatCoordinates(t,e,a,n,!1,!1);r.push(u),e=a}return e},l.prototype.drawCustom=function(t,e,i){this.beginGeometry(t,e);var n,s,a,l,h,d=t.getType(),c=t.getStride(),f=this.coordinates.length;if(d==r.default.MULTI_POLYGON){n=(t=t).getOrientedFlatCoordinates(),l=[];var p=t.getEndss();h=0;for(var y=0,v=p.length;y<v;++y){var _=[];h=this.drawCustomCoordinates_(n,h,p[y],c,_),l.push(_)}this.instructions.push([u.default.CUSTOM,f,l,t,i,o.inflateMultiCoordinatesArray])}else d==r.default.POLYGON||d==r.default.MULTI_LINE_STRING?(a=[],n=d==r.default.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),h=this.drawCustomCoordinates_(n,0,t.getEnds(),c,a),this.instructions.push([u.default.CUSTOM,f,a,t,i,o.inflateCoordinatesArray])):d==r.default.LINE_STRING||d==r.default.MULTI_POINT?(n=t.getFlatCoordinates(),s=this.appendFlatCoordinates(n,0,n.length,c,!1,!1),this.instructions.push([u.default.CUSTOM,f,s,t,i,o.inflateCoordinates])):d==r.default.POINT&&(n=t.getFlatCoordinates(),this.coordinates.push(n[0],n[1]),s=this.coordinates.length,this.instructions.push([u.default.CUSTOM,f,s,t,i]));this.endGeometry(e)},l.prototype.beginGeometry=function(t,e){var i=t.getExtent();this.beginGeometryInstruction1_=[u.default.BEGIN_GEOMETRY,e,0,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[u.default.BEGIN_GEOMETRY,e,0,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},l.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},l.prototype.reverseHitDetectionInstructions=function(){var e,i=this.hitDetectionInstructions;i.reverse();var n,r,o=i.length,s=-1;for(e=0;e<o;++e)(r=(n=i[e])[0])==u.default.END_GEOMETRY?s=e:r==u.default.BEGIN_GEOMETRY&&(n[2]=e,(0,t.reverseSubArray)(this.hitDetectionInstructions,s,e),s=-1)},l.prototype.setFillStrokeStyle=function(t,i){var n=this.state;if(t){var r=t.getColor();n.fillStyle=(0,e.asColorLike)(r||a.defaultFillStyle)}else n.fillStyle=void 0;if(i){var o=i.getColor();n.strokeStyle=(0,e.asColorLike)(o||a.defaultStrokeStyle);var s=i.getLineCap();n.lineCap=void 0!==s?s:a.defaultLineCap;var u=i.getLineDash();n.lineDash=u?u.slice():a.defaultLineDash;var l=i.getLineDashOffset();n.lineDashOffset=l||a.defaultLineDashOffset;var h=i.getLineJoin();n.lineJoin=void 0!==h?h:a.defaultLineJoin;var d=i.getWidth();n.lineWidth=void 0!==d?d:a.defaultLineWidth;var c=i.getMiterLimit();n.miterLimit=void 0!==c?c:a.defaultMiterLimit,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0},l.prototype.createFill=function(t){var e=t.fillStyle,i=[u.default.SET_FILL_STYLE,e];return"string"!=typeof e&&i.push(!0),i},l.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},l.prototype.createStroke=function(t){return[u.default.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},l.prototype.updateFillStyle=function(t,e){var i=t.fillStyle;"string"==typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)},l.prototype.updateStrokeStyle=function(e,i){var n=e.strokeStyle,r=e.lineCap,o=e.lineDash,s=e.lineDashOffset,a=e.lineJoin,u=e.lineWidth,l=e.miterLimit;(e.currentStrokeStyle!=n||e.currentLineCap!=r||o!=e.currentLineDash&&!(0,t.equals)(e.currentLineDash,o)||e.currentLineDashOffset!=s||e.currentLineJoin!=a||e.currentLineWidth!=u||e.currentMiterLimit!=l)&&(void 0!==n&&i.call(this,e),e.currentStrokeStyle=n,e.currentLineCap=r,e.currentLineDash=o,e.currentLineDashOffset=s,e.currentLineJoin=a,e.currentLineWidth=u,e.currentMiterLimit=l)},l.prototype.endGeometry=function(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var e=[u.default.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)},l.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,i.clone)(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;(0,i.buffer)(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},l}(s.default),c=d;exports.default=c;
},{"../../array.js":"luEr","../../colorlike.js":"V5XN","../../extent.js":"QDir","../../extent/Relationship.js":"bUAS","../../geom/GeometryType.js":"lmV0","../../geom/flat/inflate.js":"znXl","../VectorContext.js":"LQER","../canvas.js":"iAG7","./Instruction.js":"kTJv"}],"JWDt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./Instruction.js")),i=e(require("./Builder.js"));function e(t){return t&&t.__esModule?t:{default:t}}var o=function(){var t=function(i,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(i,e)};return function(i,e){function o(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),h=function(i){function e(t,e,o,h){var s=i.call(this,t,e,o,h)||this;return s.declutterGroups_=null,s.hitDetectionImage_=null,s.image_=null,s.anchorX_=void 0,s.anchorY_=void 0,s.height_=void 0,s.opacity_=void 0,s.originX_=void 0,s.originY_=void 0,s.rotateWithView_=void 0,s.rotation_=void 0,s.scale_=void 0,s.width_=void 0,s}return o(e,i),e.prototype.drawCoordinates_=function(t,i,e,o){return this.appendFlatCoordinates(t,i,e,o,!1,!1)},e.prototype.drawPoint=function(i,e){if(this.image_){this.beginGeometry(i,e);var o=i.getFlatCoordinates(),h=i.getStride(),s=this.coordinates.length,r=this.drawCoordinates_(o,0,o.length,h);this.instructions.push([t.default.DRAW_IMAGE,s,r,this.image_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([t.default.DRAW_IMAGE,s,r,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(e)}},e.prototype.drawMultiPoint=function(i,e){if(this.image_){this.beginGeometry(i,e);var o=i.getFlatCoordinates(),h=i.getStride(),s=this.coordinates.length,r=this.drawCoordinates_(o,0,o.length,h);this.instructions.push([t.default.DRAW_IMAGE,s,r,this.image_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([t.default.DRAW_IMAGE,s,r,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(e)}},e.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,i.prototype.finish.call(this)},e.prototype.setImageStyle=function(t,i){var e=t.getAnchor(),o=t.getSize(),h=t.getHitDetectionImage(1),s=t.getImage(1),r=t.getOrigin();this.anchorX_=e[0],this.anchorY_=e[1],this.declutterGroups_=i,this.hitDetectionImage_=h,this.image_=s,this.height_=o[1],this.opacity_=t.getOpacity(),this.originX_=r[0],this.originY_=r[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScale(),this.width_=o[0]},e}(i.default),s=h;exports.default=s;
},{"./Instruction.js":"kTJv","./Builder.js":"QBj4"}],"ppsk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./Instruction.js")),e=i(require("./Builder.js"));function i(t){return t&&t.__esModule?t:{default:t}}function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}function r(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=r?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=t[o]}return i.default=t,e&&e.set(t,i),i}var o=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),s=function(e){function i(t,i,n,r){return e.call(this,t,i,n,r)||this}return o(i,e),i.prototype.drawFlatCoordinates_=function(e,i,n,r){var o=this.coordinates.length,s=this.appendFlatCoordinates(e,i,n,r,!1,!1),u=[t.default.MOVE_TO_LINE_TO,o,s];return this.instructions.push(u),this.hitDetectionInstructions.push(u),n},i.prototype.drawLineString=function(e,i){var n=this.state,r=n.strokeStyle,o=n.lineWidth;if(void 0!==r&&void 0!==o){this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(e,i),this.hitDetectionInstructions.push([t.default.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],t.beginPathInstruction);var s=e.getFlatCoordinates(),u=e.getStride();this.drawFlatCoordinates_(s,0,s.length,u),this.hitDetectionInstructions.push(t.strokeInstruction),this.endGeometry(i)}},i.prototype.drawMultiLineString=function(e,i){var n=this.state,r=n.strokeStyle,o=n.lineWidth;if(void 0!==r&&void 0!==o){this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(e,i),this.hitDetectionInstructions.push([t.default.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],t.beginPathInstruction);for(var s=e.getEnds(),u=e.getFlatCoordinates(),a=e.getStride(),l=0,h=0,c=s.length;h<c;++h)l=this.drawFlatCoordinates_(u,l,s[h],a);this.hitDetectionInstructions.push(t.strokeInstruction),this.endGeometry(i)}},i.prototype.finish=function(){var i=this.state;return null!=i.lastStroke&&i.lastStroke!=this.coordinates.length&&this.instructions.push(t.strokeInstruction),this.reverseHitDetectionInstructions(),this.state=null,e.prototype.finish.call(this)},i.prototype.applyStroke=function(i){null!=i.lastStroke&&i.lastStroke!=this.coordinates.length&&(this.instructions.push(t.strokeInstruction),i.lastStroke=this.coordinates.length),i.lastStroke=0,e.prototype.applyStroke.call(this,i),this.instructions.push(t.beginPathInstruction)},i}(e.default),u=s;exports.default=u;
},{"./Instruction.js":"kTJv","./Builder.js":"QBj4"}],"e19k":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../../geom/flat/simplify.js"),e=require("../canvas.js"),i=r(require("./Instruction.js")),s=n(require("./Builder.js"));function n(t){return t&&t.__esModule?t:{default:t}}function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}function r(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=s?Object.getOwnPropertyDescriptor(t,n):null;r&&(r.get||r.set)?Object.defineProperty(i,n,r):i[n]=t[n]}return i.default=t,e&&e.set(t,i),i}var l=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),u=function(s){function n(t,e,i,n){return s.call(this,t,e,i,n)||this}return l(n,s),n.prototype.drawFlatCoordinatess_=function(t,e,s,n){var o=this.state,r=void 0!==o.fillStyle,l=void 0!==o.strokeStyle,u=s.length;this.instructions.push(i.beginPathInstruction),this.hitDetectionInstructions.push(i.beginPathInstruction);for(var h=0;h<u;++h){var a=s[h],c=this.coordinates.length,f=this.appendFlatCoordinates(t,e,a,n,!0,!l),d=[i.default.MOVE_TO_LINE_TO,c,f];this.instructions.push(d),this.hitDetectionInstructions.push(d),l&&(this.instructions.push(i.closePathInstruction),this.hitDetectionInstructions.push(i.closePathInstruction)),e=a}return r&&(this.instructions.push(i.fillInstruction),this.hitDetectionInstructions.push(i.fillInstruction)),l&&(this.instructions.push(i.strokeInstruction),this.hitDetectionInstructions.push(i.strokeInstruction)),e},n.prototype.drawCircle=function(t,s){var n=this.state,o=n.fillStyle,r=n.strokeStyle;if(void 0!==o||void 0!==r){this.setFillStrokeStyles_(),this.beginGeometry(t,s),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([i.default.SET_FILL_STYLE,e.defaultFillStyle]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([i.default.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);var l=t.getFlatCoordinates(),u=t.getStride(),h=this.coordinates.length;this.appendFlatCoordinates(l,0,l.length,u,!1,!1);var a=[i.default.CIRCLE,h];this.instructions.push(i.beginPathInstruction,a),this.hitDetectionInstructions.push(i.beginPathInstruction,a),void 0!==n.fillStyle&&(this.instructions.push(i.fillInstruction),this.hitDetectionInstructions.push(i.fillInstruction)),void 0!==n.strokeStyle&&(this.instructions.push(i.strokeInstruction),this.hitDetectionInstructions.push(i.strokeInstruction)),this.endGeometry(s)}},n.prototype.drawPolygon=function(t,s){var n=this.state,o=n.fillStyle,r=n.strokeStyle;if(void 0!==o||void 0!==r){this.setFillStrokeStyles_(),this.beginGeometry(t,s),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([i.default.SET_FILL_STYLE,e.defaultFillStyle]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([i.default.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);var l=t.getEnds(),u=t.getOrientedFlatCoordinates(),h=t.getStride();this.drawFlatCoordinatess_(u,0,l,h),this.endGeometry(s)}},n.prototype.drawMultiPolygon=function(t,s){var n=this.state,o=n.fillStyle,r=n.strokeStyle;if(void 0!==o||void 0!==r){this.setFillStrokeStyles_(),this.beginGeometry(t,s),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([i.default.SET_FILL_STYLE,e.defaultFillStyle]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([i.default.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);for(var l=t.getEndss(),u=t.getOrientedFlatCoordinates(),h=t.getStride(),a=0,c=0,f=l.length;c<f;++c)a=this.drawFlatCoordinatess_(u,a,l[c],h);this.endGeometry(s)}},n.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var e=this.tolerance;if(0!==e)for(var i=this.coordinates,n=0,o=i.length;n<o;++n)i[n]=(0,t.snap)(i[n],e);return s.prototype.finish.call(this)},n.prototype.setFillStrokeStyles_=function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)},n}(s.default),h=u;exports.default=h;
},{"../../geom/flat/simplify.js":"IEpt","../canvas.js":"iAG7","./Instruction.js":"kTJv","./Builder.js":"QBj4"}],"hCfl":[function(require,module,exports) {
"use strict";function t(t,e,r,o,a){var s,i,n,u,c,v,d,h,f,p=r,M=r,l=0,x=0,_=r;for(s=r;s<o;s+=a){var b=e[s],g=e[s+1];void 0!==u&&(h=b-u,f=g-c,n=Math.sqrt(h*h+f*f),void 0!==v&&(x+=i,Math.acos((v*h+d*f)/(i*n))>t&&(x>l&&(l=x,p=_,M=s),x=0,_=s-a)),i=n,v=h,d=f),u=b,c=g}return(x+=n)>l?[_,s]:[p,M]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.matchingChunk=t;
},{}],"AXKs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={POINT:"point",LINE:"line"};exports.default=e;
},{}],"DEzw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.TEXT_ALIGN=void 0;var t=require("../../util.js"),e=require("../../colorlike.js"),i=require("../../extent.js"),s=require("../../geom/flat/straightchunk.js"),l=h(require("../../geom/GeometryType.js")),a=require("../canvas.js"),r=h(require("./Instruction.js")),o=h(require("./Builder.js")),n=h(require("../../style/TextPlacement.js"));function h(t){return t&&t.__esModule?t:{default:t}}var u=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),f={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};exports.TEXT_ALIGN=f;var d=function(o){function h(t,e,i,s){var l=o.call(this,t,e,i,s)||this;return l.declutterGroups_,l.labels_=null,l.text_="",l.textOffsetX_=0,l.textOffsetY_=0,l.textRotateWithView_=void 0,l.textRotation_=0,l.textFillState_=null,l.fillStates={},l.textStrokeState_=null,l.strokeStates={},l.textState_={},l.textStates={},l.textKey_="",l.fillKey_="",l.strokeKey_="",l}return u(h,o),h.prototype.finish=function(){var t=o.prototype.finish.call(this);return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t},h.prototype.drawText=function(t,e){var o=this.textFillState_,h=this.textStrokeState_,u=this.textState_;if(""!==this.text_&&u&&(o||h)){var f,d,_=this.coordinates.length,g=t.getType(),c=null,x=2,S=2;if(u.placement===n.default.LINE){if(!(0,i.intersects)(this.getBufferedMaxExtent(),t.getExtent()))return;var p=void 0;if(c=t.getFlatCoordinates(),S=t.getStride(),g==l.default.LINE_STRING)p=[c.length];else if(g==l.default.MULTI_LINE_STRING)p=t.getEnds();else if(g==l.default.POLYGON)p=t.getEnds().slice(0,1);else if(g==l.default.MULTI_POLYGON){var k=t.getEndss();for(p=[],f=0,d=k.length;f<d;++f)p.push(k[f][0])}this.beginGeometry(t,e);for(var y=u.textAlign,v=0,L=void 0,N=0,O=p.length;N<O;++N){if(null==y){var m=(0,s.matchingChunk)(u.maxAngle,c,v,p[N],S);v=m[0],L=m[1]}else L=p[N];for(f=v;f<L;f+=S)this.coordinates.push(c[f],c[f+1]);x=this.coordinates.length,v=p[N];var F=this.declutterGroups_?0===N?this.declutterGroups_[0]:[].concat(this.declutterGroups_[0]):null;this.drawChars_(_,x,F),_=x}this.endGeometry(e)}else{var T=null;switch(u.overflow||(T=[]),g){case l.default.POINT:case l.default.MULTI_POINT:x=(c=t.getFlatCoordinates()).length;break;case l.default.LINE_STRING:c=t.getFlatMidpoint();break;case l.default.CIRCLE:c=t.getCenter();break;case l.default.MULTI_LINE_STRING:x=(c=t.getFlatMidpoints()).length;break;case l.default.POLYGON:c=t.getFlatInteriorPoint(),u.overflow||T.push(c[2]/this.resolution),S=3;break;case l.default.MULTI_POLYGON:var I=t.getFlatInteriorPoints();for(c=[],f=0,d=I.length;f<d;f+=3)u.overflow||T.push(I[f+2]/this.resolution),c.push(I[f],I[f+1]);if(0==(x=c.length))return}x=this.appendFlatCoordinates(c,0,x,S,!1,!1),this.saveTextStates_(),(u.backgroundFill||u.backgroundStroke)&&(this.setFillStrokeStyle(u.backgroundFill,u.backgroundStroke),u.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),u.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);var b=this.pixelRatio;this.instructions.push([r.default.DRAW_IMAGE,_,x,null,NaN,NaN,this.declutterGroups_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,1,NaN,u.padding==a.defaultPadding?a.defaultPadding:u.padding.map(function(t){return t*b}),!!u.backgroundFill,!!u.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,T]),this.hitDetectionInstructions.push([r.default.DRAW_IMAGE,_,x,null,NaN,NaN,this.declutterGroups_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,1/this.pixelRatio,NaN,u.padding,!!u.backgroundFill,!!u.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,T]),this.endGeometry(e)}}},h.prototype.saveTextStates_=function(){var t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,s=this.strokeKey_;t&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var l=this.textKey_;l in this.textStates||(this.textStates[l]={font:e.font,textAlign:e.textAlign||a.defaultTextAlign,textBaseline:e.textBaseline||a.defaultTextBaseline,scale:e.scale});var r=this.fillKey_;i&&(r in this.fillStates||(this.fillStates[r]={fillStyle:i.fillStyle}))},h.prototype.drawChars_=function(t,e,i){var s=this.textStrokeState_,l=this.textState_,a=this.strokeKey_,o=this.textKey_,n=this.fillKey_;this.saveTextStates_();var h=this.pixelRatio,u=f[l.textBaseline],d=this.textOffsetY_*h,_=this.text_,g=l.scale,c=s?s.lineWidth*g/2:0;this.instructions.push([r.default.DRAW_CHARS,t,e,u,i,l.overflow,n,l.maxAngle,h,d,a,c*h,_,o,1]),this.hitDetectionInstructions.push([r.default.DRAW_CHARS,t,e,u,i,l.overflow,n,l.maxAngle,1,d,a,c,_,o,1/h])},h.prototype.setTextStyle=function(i,s){var l,r,o;if(i){this.declutterGroups_=s;var n=i.getFill();n?((r=this.textFillState_)||(r={},this.textFillState_=r),r.fillStyle=(0,e.asColorLike)(n.getColor()||a.defaultFillStyle)):(r=null,this.textFillState_=r);var h=i.getStroke();if(h){(o=this.textStrokeState_)||(o={},this.textStrokeState_=o);var u=h.getLineDash(),f=h.getLineDashOffset(),d=h.getWidth(),_=h.getMiterLimit();o.lineCap=h.getLineCap()||a.defaultLineCap,o.lineDash=u?u.slice():a.defaultLineDash,o.lineDashOffset=void 0===f?a.defaultLineDashOffset:f,o.lineJoin=h.getLineJoin()||a.defaultLineJoin,o.lineWidth=void 0===d?a.defaultLineWidth:d,o.miterLimit=void 0===_?a.defaultMiterLimit:_,o.strokeStyle=(0,e.asColorLike)(h.getColor()||a.defaultStrokeStyle)}else o=null,this.textStrokeState_=o;l=this.textState_;var g=i.getFont()||a.defaultFont;(0,a.registerFont)(g);var c=i.getScale();l.overflow=i.getOverflow(),l.font=g,l.maxAngle=i.getMaxAngle(),l.placement=i.getPlacement(),l.textAlign=i.getTextAlign(),l.textBaseline=i.getTextBaseline()||a.defaultTextBaseline,l.backgroundFill=i.getBackgroundFill(),l.backgroundStroke=i.getBackgroundStroke(),l.padding=i.getPadding()||a.defaultPadding,l.scale=void 0===c?1:c;var x=i.getOffsetX(),S=i.getOffsetY(),p=i.getRotateWithView(),k=i.getRotation();this.text_=i.getText()||"",this.textOffsetX_=void 0===x?0:x,this.textOffsetY_=void 0===S?0:S,this.textRotateWithView_=void 0!==p&&p,this.textRotation_=void 0===k?0:k,this.strokeKey_=o?("string"==typeof o.strokeStyle?o.strokeStyle:(0,t.getUid)(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.textKey_=l.font+l.scale+(l.textAlign||"?")+(l.textBaseline||"?"),this.fillKey_=r?"string"==typeof r.fillStyle?r.fillStyle:"|"+(0,t.getUid)(r.fillStyle):""}else this.text_=""},h}(o.default),_=d;exports.default=_;
},{"../../util.js":"KniQ","../../colorlike.js":"V5XN","../../extent.js":"QDir","../../geom/flat/straightchunk.js":"hCfl","../../geom/GeometryType.js":"lmV0","../canvas.js":"iAG7","./Instruction.js":"kTJv","./Builder.js":"QBj4","../../style/TextPlacement.js":"AXKs"}],"vqHd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../../extent.js"),t=s(require("./Builder.js")),r=s(require("./ImageBuilder.js")),i=s(require("./LineStringBuilder.js")),u=s(require("./PolygonBuilder.js")),n=s(require("./TextBuilder.js"));function s(e){return e&&e.__esModule?e:{default:e}}var l={Circle:u.default,Default:t.default,Image:r.default,LineString:i.default,Polygon:u.default,Text:n.default},o=function(){function t(e,t,r,i,u){this.declutter_=u,this.declutterGroups_=null,this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=i,this.resolution_=r,this.buildersByZIndex_={}}return t.prototype.addDeclutter=function(t){var r=null;return this.declutter_&&(t?(r=this.declutterGroups_)[0][4]++:(r=[(0,e.createEmpty)()],this.declutterGroups_=r,r[0].push(1))),r},t.prototype.finish=function(){var e={};for(var t in this.buildersByZIndex_){e[t]=e[t]||{};var r=this.buildersByZIndex_[t];for(var i in r){var u=r[i].finish();e[t][i]=u}}return e},t.prototype.getBuilder=function(e,t){var r=void 0!==e?e.toString():"0",i=this.buildersByZIndex_[r];void 0===i&&(i={},this.buildersByZIndex_[r]=i);var u=i[t];void 0===u&&(u=new(0,l[t])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[t]=u);return u},t}(),d=o;exports.default=d;
},{"../../extent.js":"QDir","./Builder.js":"QBj4","./ImageBuilder.js":"JWDt","./LineStringBuilder.js":"ppsk","./PolygonBuilder.js":"e19k","./TextBuilder.js":"DEzw"}],"irm1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"};exports.default=e;
},{}],"ZZrx":[function(require,module,exports) {
"use strict";function r(r,t,e,n){for(var i=r[t],o=r[t+1],s=0,a=t+n;a<e;a+=n){var u=r[a],c=r[a+1];s+=Math.sqrt((u-i)*(u-i)+(c-o)*(c-o)),i=u,o=c}return s}function t(t,e,n,i){var o=r(t,e,n,i),s=t[n-i]-t[e],a=t[n-i+1]-t[e+1];return o+=Math.sqrt(s*s+a*a)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.lineStringLength=r,exports.linearRingLength=t;
},{}],"JxN9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.drawTextOnPath=a;var t=require("../../math.js");function a(a,r,e,h,M,o,n,p,s,u,v){for(var P,i,l=[],f=a[r]>a[e-h],I=M.length,w=a[r],d=a[r+1],c=a[r+=h],q=a[r+1],x=0,b=Math.sqrt(Math.pow(c-w,2)+Math.pow(q-d,2)),j=!1,O=0;O<I;++O){for(var _=M[P=f?I-O-1:O],g=p*s(u,_,v),m=o+g/2;r<e-h&&x+b<m;)w=c,d=q,c=a[r+=h],q=a[r+1],x+=b,b=Math.sqrt(Math.pow(c-w,2)+Math.pow(q-d,2));var y=m-x,T=Math.atan2(q-d,c-w);if(f&&(T+=T>0?-Math.PI:Math.PI),void 0!==i){var k=T-i;if(j=j||0!==k,k+=k>Math.PI?-2*Math.PI:k<-Math.PI?2*Math.PI:0,Math.abs(k)>n)return null}i=T;var z=y/b,A=(0,t.lerp)(w,c,z),B=(0,t.lerp)(d,q,z);l[P]=[A,B,g/2,T,_],o+=g}return j?l:[[l[0][0],l[0][1],l[0][2],l[0][3],M]]}
},{"../../math.js":"B96G"}],"C6Up":[function(require,module,exports) {
var define;
var global = arguments[3];
var t,i=arguments[3];!function(i,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof t&&t.amd?t(n):(i=i||self).RBush=n()}(this,function(){"use strict";function t(t,r,e,a,h){!function t(n,r,e,a,h){for(;a>e;){if(a-e>600){var o=a-e+1,s=r-e+1,l=Math.log(o),f=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*f*(o-f)/o)*(s-o/2<0?-1:1),m=Math.max(e,Math.floor(r-s*f/o+u)),c=Math.min(a,Math.floor(r+(o-s)*f/o+u));t(n,r,m,c,h)}var p=n[r],d=e,x=a;for(i(n,e,r),h(n[a],p)>0&&i(n,e,a);d<x;){for(i(n,d,x),d++,x--;h(n[d],p)<0;)d++;for(;h(n[x],p)>0;)x--}0===h(n[e],p)?i(n,e,x):i(n,++x,a),x<=r&&(e=x+1),r<=x&&(a=x-1)}}(t,r,e||0,a||t.length-1,h||n)}function i(t,i,n){var r=t[i];t[i]=t[n],t[n]=r}function n(t,i){return t<i?-1:t>i?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function e(t,i,n){if(!n)return i.indexOf(t);for(var r=0;r<i.length;r++)if(n(t,i[r]))return r;return-1}function a(t,i){h(t,0,t.children.length,i,t)}function h(t,i,n,r,e){e||(e=p(null)),e.minX=1/0,e.minY=1/0,e.maxX=-1/0,e.maxY=-1/0;for(var a=i;a<n;a++){var h=t.children[a];o(e,t.leaf?r(h):h)}return e}function o(t,i){return t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY),t}function s(t,i){return t.minX-i.minX}function l(t,i){return t.minY-i.minY}function f(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function m(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function c(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function p(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d(i,n,r,e,a){for(var h=[n,r];h.length;)if(!((r=h.pop())-(n=h.pop())<=e)){var o=n+Math.ceil((r-n)/e/2)*e;t(i,o,n,r,a),h.push(n,o,o,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var i=this.data,n=[];if(!c(t,i))return n;for(var r=this.toBBox,e=[];i;){for(var a=0;a<i.children.length;a++){var h=i.children[a],o=i.leaf?r(h):h;c(t,o)&&(i.leaf?n.push(h):m(t,o)?this._all(h,n):e.push(h))}i=e.pop()}return n},r.prototype.collides=function(t){var i=this.data;if(!c(t,i))return!1;for(var n=[];i;){for(var r=0;r<i.children.length;r++){var e=i.children[r],a=i.leaf?this.toBBox(e):e;if(c(t,a)){if(i.leaf||m(t,a))return!0;n.push(e)}}i=n.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var i=0;i<t.length;i++)this.insert(t[i]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=p([]),this},r.prototype.remove=function(t,i){if(!t)return this;for(var n,r,a,h=this.data,o=this.toBBox(t),s=[],l=[];h||s.length;){if(h||(h=s.pop(),r=s[s.length-1],n=l.pop(),a=!0),h.leaf){var f=e(t,h.children,i);if(-1!==f)return h.children.splice(f,1),s.push(h),this._condense(s),this}a||h.leaf||!m(h,o)?r?(n++,h=r.children[n],a=!1):h=null:(s.push(h),l.push(n),n=0,r=h,h=h.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,i){return t.minX-i.minX},r.prototype.compareMinY=function(t,i){return t.minY-i.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,i){for(var n=[];t;)t.leaf?i.push.apply(i,t.children):n.push.apply(n,t.children),t=n.pop();return i},r.prototype._build=function(t,i,n,r){var e,h=n-i+1,o=this._maxEntries;if(h<=o)return a(e=p(t.slice(i,n+1)),this.toBBox),e;r||(r=Math.ceil(Math.log(h)/Math.log(o)),o=Math.ceil(h/Math.pow(o,r-1))),(e=p([])).leaf=!1,e.height=r;var s=Math.ceil(h/o),l=s*Math.ceil(Math.sqrt(o));d(t,i,n,l,this.compareMinX);for(var f=i;f<=n;f+=l){var u=Math.min(f+l-1,n);d(t,f,u,s,this.compareMinY);for(var m=f;m<=u;m+=s){var c=Math.min(m+s-1,u);e.children.push(this._build(t,m,c,r-1))}}return a(e,this.toBBox),e},r.prototype._chooseSubtree=function(t,i,n,r){for(;r.push(i),!i.leaf&&r.length-1!==n;){for(var e=1/0,a=1/0,h=void 0,o=0;o<i.children.length;o++){var s=i.children[o],l=f(s),u=(m=t,c=s,(Math.max(c.maxX,m.maxX)-Math.min(c.minX,m.minX))*(Math.max(c.maxY,m.maxY)-Math.min(c.minY,m.minY))-l);u<a?(a=u,e=l<e?l:e,h=s):u===a&&l<e&&(e=l,h=s)}i=h||i.children[0]}var m,c;return i},r.prototype._insert=function(t,i,n){var r=n?t:this.toBBox(t),e=[],a=this._chooseSubtree(r,this.data,i,e);for(a.children.push(t),o(a,r);i>=0&&e[i].children.length>this._maxEntries;)this._split(e,i),i--;this._adjustParentBBoxes(r,e,i)},r.prototype._split=function(t,i){var n=t[i],r=n.children.length,e=this._minEntries;this._chooseSplitAxis(n,e,r);var h=this._chooseSplitIndex(n,e,r),o=p(n.children.splice(h,n.children.length-h));o.height=n.height,o.leaf=n.leaf,a(n,this.toBBox),a(o,this.toBBox),i?t[i-1].children.push(o):this._splitRoot(n,o)},r.prototype._splitRoot=function(t,i){this.data=p([t,i]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,i,n){for(var r,e,a,o,s,l,u,m=1/0,c=1/0,p=i;p<=n-i;p++){var d=h(t,0,p,this.toBBox),x=h(t,p,n,this.toBBox),v=(e=d,a=x,o=void 0,s=void 0,l=void 0,u=void 0,o=Math.max(e.minX,a.minX),s=Math.max(e.minY,a.minY),l=Math.min(e.maxX,a.maxX),u=Math.min(e.maxY,a.maxY),Math.max(0,l-o)*Math.max(0,u-s)),M=f(d)+f(x);v<m?(m=v,r=p,c=M<c?M:c):v===m&&M<c&&(c=M,r=p)}return r||n-i},r.prototype._chooseSplitAxis=function(t,i,n){var r=t.leaf?this.compareMinX:s,e=t.leaf?this.compareMinY:l;this._allDistMargin(t,i,n,r)<this._allDistMargin(t,i,n,e)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,i,n,r){t.children.sort(r);for(var e=this.toBBox,a=h(t,0,i,e),s=h(t,n-i,n,e),l=u(a)+u(s),f=i;f<n-i;f++){var m=t.children[f];o(a,t.leaf?e(m):m),l+=u(a)}for(var c=n-i-1;c>=i;c--){var p=t.children[c];o(s,t.leaf?e(p):p),l+=u(s)}return l},r.prototype._adjustParentBBoxes=function(t,i,n){for(var r=n;r>=0;r--)o(i[r],t)},r.prototype._condense=function(t){for(var i=t.length-1,n=void 0;i>=0;i--)0===t[i].children.length?i>0?(n=t[i-1].children).splice(n.indexOf(t[i]),1):this.clear():a(t[i],this.toBBox)},r});
},{}],"pZKE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../../array.js"),e=require("../../extent.js"),i=require("../../geom/flat/length.js"),a=require("../../geom/flat/textpath.js"),s=require("../../geom/flat/transform.js"),r=require("../canvas.js"),l=d(require("./Instruction.js")),n=require("./TextBuilder.js"),h=require("../../transform.js"),o=d(require("rbush/rbush.js")),u=require("../../has.js");function d(t){return t&&t.__esModule?t:{default:t}}var p=(0,e.createEmpty)(),f=(0,h.create)(),c=[],v=[],_=[],g=[],x=function(){function d(t,e,i,a){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.declutterItems=[],this.instructions=a.instructions,this.coordinates=a.coordinates,this.coordinateCache_={},this.renderedTransform_=(0,h.create)(),this.hitDetectionInstructions=a.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=a.fillStates||{},this.strokeStates=a.strokeStates||{},this.textStates=a.textStates||{},this.widths_={},this.labels_={}}return d.prototype.createLabel=function(t,e,i,a){var s=t+e+i+a;if(this.labels_[s])return this.labels_[s];var l=a?this.strokeStates[a]:null,h=i?this.fillStates[i]:null,o=this.textStates[e],d=this.pixelRatio,p=o.scale*d,f=n.TEXT_ALIGN[o.textAlign||r.defaultTextAlign],c=a&&l.lineWidth?l.lineWidth:0,v=t.split("\n"),_=v.length,g=[],x=(0,r.measureTextWidths)(o.font,v,g),m=(0,r.measureTextHeight)(o.font),T=m*_,y=x+c,b=[],S={width:Math.ceil((y+2)*p),height:Math.ceil((T+c)*p),contextInstructions:b};(1!=p&&b.push("scale",[p,p]),b.push("font",o.font),a)&&(b.push("strokeStyle",l.strokeStyle),b.push("lineWidth",c),b.push("lineCap",l.lineCap),b.push("lineJoin",l.lineJoin),b.push("miterLimit",l.miterLimit),(u.WORKER_OFFSCREEN_CANVAS?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(b.push("setLineDash",[l.lineDash]),b.push("lineDashOffset",l.lineDashOffset)));i&&b.push("fillStyle",h.fillStyle),b.push("textBaseline","middle"),b.push("textAlign","center");var k,L=.5-f,E=f*y+L*c;if(a)for(k=0;k<_;++k)b.push("strokeText",[v[k],E+L*g[k],.5*(c+m)+k*m]);if(i)for(k=0;k<_;++k)b.push("fillText",[v[k],E+L*g[k],.5*(c+m)+k*m]);return this.labels_[s]=S,S},d.prototype.replayTextBackground_=function(t,e,i,a,s,r,l){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,a),t.lineTo.apply(t,s),t.lineTo.apply(t,e),r&&(this.alignFill_=r[2],this.fill_(t)),l&&(this.setStrokeStyle_(t,l),t.stroke())},d.prototype.replayImageOrLabel_=function(t,i,a,s,l,n,o,u,d,x,m,T,y,b,S,k,L,E){var I=L||E;i-=l*=y,a-=n*=y;var R=S+x>s.width?s.width-x:S,O=u+m>s.height?s.height-m:u,w=k[3]+R*y+k[1],A=k[0]+O*y+k[2],C=i-k[3],M=a-k[0];(I||0!==T)&&(c[0]=C,g[0]=C,c[1]=M,v[1]=M,v[0]=C+w,_[0]=v[0],_[1]=M+A,g[1]=_[1]);var D=null;if(0!==T){var P=i+l,N=a+n;D=(0,h.compose)(f,P,N,1,1,T,-P,-N),(0,h.apply)(f,c),(0,h.apply)(f,v),(0,h.apply)(f,_),(0,h.apply)(f,g),(0,e.createOrUpdate)(Math.min(c[0],v[0],_[0],g[0]),Math.min(c[1],v[1],_[1],g[1]),Math.max(c[0],v[0],_[0],g[0]),Math.max(c[1],v[1],_[1],g[1]),p)}else(0,e.createOrUpdate)(C,M,C+w,M+A,p);var W=t.canvas,q=E?E[2]*y/2:0,j=p[0]-q<=W.width&&p[2]+q>=0&&p[1]-q<=W.height&&p[3]+q>=0;if(b&&(i=Math.round(i),a=Math.round(a)),o){if(!j&&1==o[4])return;(0,e.extend)(o,p);var F=j?[t,D?D.slice(0):null,d,s,x,m,R,O,i,a,y]:null;F&&(I&&F.push(L,E,c.slice(0),v.slice(0),_.slice(0),g.slice(0)),o.push(F))}else j&&(I&&this.replayTextBackground_(t,c,v,_,g,L,E),(0,r.drawImageOrLabel)(t,D,d,s,x,m,R,O,i,a,y))},d.prototype.fill_=function(t){if(this.alignFill_){var e=(0,h.apply)(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()},d.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.setLineDash&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},d.prototype.renderDeclutter=function(t,i,a,s){if(t&&t.length>5){var l=t[4];if(1==l||l==t.length-5){var n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:i};if(s||(s=new o.default(9)),!s.collides(n)){s.insert(n);for(var h=5,u=t.length;h<u;++h){var d=t[h],p=d[0],f=p.globalAlpha;f!==a&&(p.globalAlpha=a),d.length>11&&this.replayTextBackground_(d[0],d[13],d[14],d[15],d[16],d[11],d[12]),r.drawImageOrLabel.apply(void 0,d),f!==a&&(p.globalAlpha=f)}}t.length=5,(0,e.createOrUpdateEmpty)(t)}}return s},d.prototype.drawLabelWithPointPlacement_=function(t,e,i,a){var s=this.textStates[e],l=this.createLabel(t,e,a,i),h=this.strokeStates[i],o=this.pixelRatio,u=n.TEXT_ALIGN[s.textAlign||r.defaultTextAlign],d=n.TEXT_ALIGN[s.textBaseline||r.defaultTextBaseline],p=h&&h.lineWidth?h.lineWidth:0;return{label:l,anchorX:u*(l.width/o-2*s.scale)+2*(.5-u)*p,anchorY:d*l.height/o+2*(.5-d)*p}},d.prototype.execute_=function(o,u,d,p,f,c){var v;this.declutterItems.length=0,this.pixelCoordinates_&&(0,t.equals)(u,this.renderedTransform_)?v=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),v=(0,s.transform2D)(this.coordinates,0,this.coordinates.length,2,u,this.pixelCoordinates_),(0,h.setFromArray)(this.renderedTransform_,u));for(var _,g,x,m,T,y,b,S,k,L,E,I,R,O,w,A,C,M=0,D=d.length,P=0,N=0,W=0,q=null,j=null,F=this.coordinateCache_,G=this.viewRotation_,B=Math.round(1e12*Math.atan2(-u[1],u[0]))/1e12,X={context:o,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:G},Y=this.instructions!=d||this.overlaps?0:200;M<D;){var H=d[M];switch(H[0]){case l.default.BEGIN_GEOMETRY:(w=H[1]).getGeometry()?void 0===c||(0,e.intersects)(c,H[3])?++M:M=H[2]+1:M=H[2];break;case l.default.BEGIN_PATH:N>Y&&(this.fill_(o),N=0),W>Y&&(o.stroke(),W=0),N||W||(o.beginPath(),m=NaN,T=NaN),++M;break;case l.default.CIRCLE:var U=v[P=H[1]],J=v[P+1],K=v[P+2]-U,V=v[P+3]-J,z=Math.sqrt(K*K+V*V);o.moveTo(U+z,J),o.arc(U,J,z,0,2*Math.PI,!0),++M;break;case l.default.CLOSE_PATH:o.closePath(),++M;break;case l.default.CUSTOM:P=H[1],_=H[2];var Q=H[3],Z=H[4],$=6==H.length?H[5]:void 0;X.geometry=Q,X.feature=w,M in F||(F[M]=[]);var tt=F[M];$?$(v,P,_,2,tt):(tt[0]=v[P],tt[1]=v[P+1],tt.length=2),Z(tt,X),++M;break;case l.default.DRAW_IMAGE:P=H[1],_=H[2],L=H[3],g=H[4],x=H[5],k=f?null:H[6];var et=H[7],it=H[8],at=H[9],st=H[10],rt=H[11],lt=H[12],nt=H[13],ht=H[14];if(!L&&H.length>=19){E=H[18],I=H[19],R=H[20],O=H[21];var ot=this.drawLabelWithPointPlacement_(E,I,R,O);L=ot.label,H[3]=L;var ut=H[22];g=(ot.anchorX-ut)*this.pixelRatio,H[4]=g;var dt=H[23];x=(ot.anchorY-dt)*this.pixelRatio,H[5]=x,et=L.height,H[7]=et,ht=L.width,H[14]=ht}var pt=void 0;H.length>24&&(pt=H[24]);var ft=void 0,ct=void 0,vt=void 0;H.length>16?(ft=H[15],ct=H[16],vt=H[17]):(ft=r.defaultPadding,ct=!1,vt=!1),rt&&B?lt+=G:rt||B||(lt-=G);for(var _t=0,gt=0;P<_;P+=2)if(!(pt&&pt[_t++]<ht/this.pixelRatio)){if(k){var xt=Math.floor(gt);k.length<xt+1&&((S=(0,e.createEmpty)()).push(k[0][4]),k.push(S)),S=k[xt]}this.replayImageOrLabel_(o,v[P],v[P+1],L,g,x,S,et,it,at,st,lt,nt,p,ht,ft,ct?q:null,vt?j:null),S&&(gt===Math.floor(gt)&&this.declutterItems.push(this,S,w),gt+=1/S[4])}++M;break;case l.default.DRAW_CHARS:var mt=H[1],Tt=H[2],yt=H[3];S=f?null:H[4];var bt=H[5];O=H[6];var St=H[7],kt=H[8],Lt=H[9];R=H[10];var Et=H[11];E=H[12],I=H[13];var It=H[14],Rt=this.textStates[I],Ot=Rt.font,wt=Rt.scale*kt,At=void 0;Ot in this.widths_?At=this.widths_[Ot]:(At={},this.widths_[Ot]=At);var Ct=(0,i.lineStringLength)(v,mt,Tt,2),Mt=wt*(0,r.measureAndCacheTextWidth)(Ot,E,At);if(bt||Mt<=Ct){var Dt=this.textStates[I].textAlign,Pt=(Ct-Mt)*n.TEXT_ALIGN[Dt],Nt=(0,a.drawTextOnPath)(v,mt,Tt,2,E,Pt,St,wt,r.measureAndCacheTextWidth,Ot,At);if(Nt){var Wt=void 0,qt=void 0,jt=void 0,Ft=void 0,Gt=void 0;if(R)for(Wt=0,qt=Nt.length;Wt<qt;++Wt)jt=(Gt=Nt[Wt])[4],Ft=this.createLabel(jt,I,"",R),g=Gt[2]+Et,x=yt*Ft.height+2*(.5-yt)*Et-Lt,this.replayImageOrLabel_(o,Gt[0],Gt[1],Ft,g,x,S,Ft.height,1,0,0,Gt[3],It,!1,Ft.width,r.defaultPadding,null,null);if(O)for(Wt=0,qt=Nt.length;Wt<qt;++Wt)jt=(Gt=Nt[Wt])[4],Ft=this.createLabel(jt,I,O,""),g=Gt[2],x=yt*Ft.height-Lt,this.replayImageOrLabel_(o,Gt[0],Gt[1],Ft,g,x,S,Ft.height,1,0,0,Gt[3],It,!1,Ft.width,r.defaultPadding,null,null)}}this.declutterItems.push(this,S,w),++M;break;case l.default.END_GEOMETRY:if(void 0!==f){var Bt=f(w=H[1]);if(Bt)return Bt}++M;break;case l.default.FILL:Y?N++:this.fill_(o),++M;break;case l.default.MOVE_TO_LINE_TO:for(P=H[1],_=H[2],A=v[P],b=(C=v[P+1])+.5|0,(y=A+.5|0)===m&&b===T||(o.moveTo(A,C),m=y,T=b),P+=2;P<_;P+=2)y=(A=v[P])+.5|0,b=(C=v[P+1])+.5|0,P!=_-2&&y===m&&b===T||(o.lineTo(A,C),m=y,T=b);++M;break;case l.default.SET_FILL_STYLE:q=H,this.alignFill_=H[2],N&&(this.fill_(o),N=0,W&&(o.stroke(),W=0)),o.fillStyle=H[1],++M;break;case l.default.SET_STROKE_STYLE:j=H,W&&(o.stroke(),W=0),this.setStrokeStyle_(o,H),++M;break;case l.default.STROKE:Y?W++:o.stroke(),++M;break;default:++M}}N&&this.fill_(o),W&&o.stroke()},d.prototype.execute=function(t,e,i,a){this.viewRotation_=i,this.execute_(t,e,this.instructions,a,void 0,void 0)},d.prototype.executeHitDetection=function(t,e,i,a,s){return this.viewRotation_=i,this.execute_(t,e,this.hitDetectionInstructions,!0,a,s)},d}(),m=x;exports.default=m;
},{"../../array.js":"luEr","../../extent.js":"QDir","../../geom/flat/length.js":"ZZrx","../../geom/flat/textpath.js":"JxN9","../../geom/flat/transform.js":"LGwr","../canvas.js":"iAG7","./Instruction.js":"kTJv","./TextBuilder.js":"DEzw","../../transform.js":"P4eA","rbush/rbush.js":"C6Up","../../has.js":"f3Nv"}],"ngEc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getCircleArray=d,exports.replayDeclutter=v,exports.default=void 0;var e=require("../../array.js"),t=require("../../dom.js"),r=require("../../extent.js"),o=require("../../geom/flat/transform.js"),i=require("../../obj.js"),n=u(require("./BuilderType.js")),a=require("../../transform.js"),s=u(require("./Executor.js"));function u(e){return e&&e.__esModule?e:{default:e}}var f=[n.default.POLYGON,n.default.CIRCLE,n.default.LINE_STRING,n.default.IMAGE,n.default.TEXT,n.default.DEFAULT],c=function(){function u(e,t,r,o,i,n){this.maxExtent_=e,this.overlaps_=o,this.pixelRatio_=r,this.resolution_=t,this.renderBuffer_=n,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,a.create)(),this.createExecutors_(i)}return u.prototype.clip=function(e,t){var r=this.getClipCoords(t);e.beginPath(),e.moveTo(r[0],r[1]),e.lineTo(r[2],r[3]),e.lineTo(r[4],r[5]),e.lineTo(r[6],r[7]),e.clip()},u.prototype.createExecutors_=function(e){for(var t in e){var r=this.executorsByZIndex_[t];void 0===r&&(r={},this.executorsByZIndex_[t]=r);var o=e[t];for(var i in o){var n=o[i];r[i]=new s.default(this.resolution_,this.pixelRatio_,this.overlaps_,n)}}},u.prototype.hasExecutors=function(e){for(var t in this.executorsByZIndex_)for(var r=this.executorsByZIndex_[t],o=0,i=e.length;o<i;++o)if(e[o]in r)return!0;return!1},u.prototype.forEachFeatureAtCoordinate=function(o,i,s,u,c,h){var l=2*(u=Math.round(u))+1,v=(0,a.compose)(this.hitDetectionTransform_,u+.5,u+.5,1/i,-1/i,-s,-o[0],-o[1]);this.hitDetectionContext_||(this.hitDetectionContext_=(0,t.createCanvasContext2D)(l,l));var x,p=this.hitDetectionContext_;p.canvas.width!==l||p.canvas.height!==l?(p.canvas.width=l,p.canvas.height=l):p.clearRect(0,0,l,l),void 0!==this.renderBuffer_&&(x=(0,r.createEmpty)(),(0,r.extendCoordinate)(x,o),(0,r.buffer)(x,i*(this.renderBuffer_+u),x));var _,m=d(u);function y(e){for(var t=p.getImageData(0,0,l,l).data,r=0;r<l;r++)for(var o=0;o<l;o++)if(m[r][o]&&t[4*(o*l+r)+3]>0){var i=void 0;return(!h||_!=n.default.IMAGE&&_!=n.default.TEXT||-1!==h.indexOf(e))&&(i=c(e)),i||void p.clearRect(0,0,l,l)}}var E,g,C,I,T,B=Object.keys(this.executorsByZIndex_).map(Number);for(B.sort(e.numberSafeCompareFunction),E=B.length-1;E>=0;--E){var b=B[E].toString();for(C=this.executorsByZIndex_[b],g=f.length-1;g>=0;--g)if(void 0!==(I=C[_=f[g]])&&(T=I.executeHitDetection(p,v,s,y,x)))return T}},u.prototype.getClipCoords=function(e){var t=this.maxExtent_;if(!t)return null;var r=t[0],i=t[1],n=t[2],a=t[3],s=[r,i,r,a,n,a,n,i];return(0,o.transform2D)(s,0,8,2,e,s),s},u.prototype.isEmpty=function(){return(0,i.isEmpty)(this.executorsByZIndex_)},u.prototype.execute=function(t,r,o,i,a,s){var u=Object.keys(this.executorsByZIndex_).map(Number);u.sort(e.numberSafeCompareFunction),this.maxExtent_&&(t.save(),this.clip(t,r));var c,h,l,d,v,x,p=a||f;for(c=0,h=u.length;c<h;++c){var _=u[c].toString();for(v=this.executorsByZIndex_[_],l=0,d=p.length;l<d;++l){var m=p[l];if(void 0!==(x=v[m]))if(!s||m!=n.default.IMAGE&&m!=n.default.TEXT)x.execute(t,r,o,i);else{var y=s[_];y?y.push(x,r.slice(0)):s[_]=[x,r.slice(0)]}}}this.maxExtent_&&t.restore()},u}(),h={0:[[!0]]};function l(e,t,r){var o,i=Math.floor(e.length/2);if(t>=i)for(o=i;o<t;o++)e[o][r]=!0;else if(t<i)for(o=t+1;o<i;o++)e[o][r]=!0}function d(e){if(void 0!==h[e])return h[e];for(var t=2*e+1,r=new Array(t),o=0;o<t;o++)r[o]=new Array(t);for(var i=e,n=0,a=0;i>=n;)l(r,e+i,e+n),l(r,e+n,e+i),l(r,e-n,e+i),l(r,e-i,e+n),l(r,e-i,e-n),l(r,e-n,e-i),l(r,e+n,e-i),l(r,e+i,e-n),2*((a+=1+2*++n)-i)+1>0&&(a+=1-2*(i-=1));return h[e]=r,r}function v(t,r,o,i,n,a){for(var s=Object.keys(t).map(Number).sort(e.numberSafeCompareFunction),u=0,f=s.length;u<f;++u)for(var c=t[s[u].toString()],h=void 0,l=0,d=c.length;l<d;){var v=c[l++];v!==h&&(h=v,a.push({items:v.declutterItems,opacity:i}));var x=c[l++];v.execute(r,x,o,n)}}var x=c;exports.default=x;
},{"../../array.js":"luEr","../../dom.js":"Xno5","../../extent.js":"QDir","../../geom/flat/transform.js":"LGwr","../../obj.js":"mH6q","./BuilderType.js":"irm1","../../transform.js":"P4eA","./Executor.js":"pZKE"}],"EB6P":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("../events/Event.js"));function e(t){return t&&t.__esModule?t:{default:t}}var r=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),n=function(t){function e(e,r,n,o){var u=t.call(this,e)||this;return u.inversePixelTransform=r,u.frameState=n,u.context=o,u}return r(e,t),e}(t.default),o=n;exports.default=o;
},{"../events/Event.js":"fKNg"}],"fpOz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../util.js"),t=a(require("../ImageState.js")),r=a(require("../Observable.js")),n=a(require("../events/EventType.js")),o=a(require("../source/State.js"));function a(e){return e&&e.__esModule?e:{default:e}}var u=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=function(r){function a(e){var t=r.call(this)||this;return t.boundHandleImageChange_=t.handleImageChange_.bind(t),t.layer_=e,t}return u(a,r),a.prototype.getFeatures=function(t){return(0,e.abstract)()},a.prototype.prepareFrame=function(t){return(0,e.abstract)()},a.prototype.renderFrame=function(t,r){return(0,e.abstract)()},a.prototype.loadedTileCallback=function(e,t,r){e[t]||(e[t]={}),e[t][r.tileCoord.toString()]=r},a.prototype.createLoadedTileFinder=function(e,t,r){return function(n,o){var a=this.loadedTileCallback.bind(this,r,n);return e.forEachLoadedTile(t,n,o,a)}.bind(this)},a.prototype.forEachFeatureAtCoordinate=function(e,t,r,n,o){},a.prototype.getDataAtPixel=function(t,r,n){return(0,e.abstract)()},a.prototype.getLayer=function(){return this.layer_},a.prototype.handleFontsChanged=function(){},a.prototype.handleImageChange_=function(e){e.target.getState()===t.default.LOADED&&this.renderIfReadyAndVisible()},a.prototype.loadImage=function(e){var r=e.getState();return r!=t.default.LOADED&&r!=t.default.ERROR&&e.addEventListener(n.default.CHANGE,this.boundHandleImageChange_),r==t.default.IDLE&&(e.load(),r=e.getState()),r==t.default.LOADED},a.prototype.renderIfReadyAndVisible=function(){var e=this.getLayer();e.getVisible()&&e.getSourceState()==o.default.READY&&e.changed()},a}(r.default),d=i;exports.default=d;
},{"../util.js":"KniQ","../ImageState.js":"u3kG","../Observable.js":"IdSm","../events/EventType.js":"C8cu","../source/State.js":"iC8j"}],"vPfl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../../extent.js"),e=require("../../dom.js"),r=s(require("../../render/Event.js")),o=s(require("../../render/EventType.js")),n=require("../../render/canvas.js"),a=s(require("../Layer.js")),i=require("../../transform.js");function s(t){return t&&t.__esModule?t:{default:t}}var p=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),l=function(a){function s(t){var e=a.call(this,t)||this;return e.container=null,e.renderedResolution,e.tempTransform_=(0,i.create)(),e.pixelTransform=(0,i.create)(),e.inversePixelTransform=(0,i.create)(),e.context=null,e.containerReused=!1,e}return p(s,a),s.prototype.useContainer=function(t,r,o){var n,a,i=this.getLayer().getClassName();t&&""===t.style.opacity&&t.className===i&&((p=t.firstElementChild)instanceof HTMLCanvasElement&&(a=p.getContext("2d")));if(a&&a.canvas.style.transform===r?(this.container=t,this.context=a,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){(n=document.createElement("div")).className=i;var s=n.style;s.position="absolute",s.width="100%",s.height="100%";var p=(a=(0,e.createCanvasContext2D)()).canvas;n.appendChild(p),(s=p.style).position="absolute",s.left="0",s.transformOrigin="top left",this.container=n,this.context=a}},s.prototype.clip=function(e,r,o){var a=r.pixelRatio,s=r.size[0]*a/2,p=r.size[1]*a/2,l=r.viewState.rotation,c=(0,t.getTopLeft)(o),u=(0,t.getTopRight)(o),f=(0,t.getBottomRight)(o),d=(0,t.getBottomLeft)(o);(0,i.apply)(r.coordinateToPixelTransform,c),(0,i.apply)(r.coordinateToPixelTransform,u),(0,i.apply)(r.coordinateToPixelTransform,f),(0,i.apply)(r.coordinateToPixelTransform,d),e.save(),(0,n.rotateAtOffset)(e,-l,s,p),e.beginPath(),e.moveTo(c[0]*a,c[1]*a),e.lineTo(u[0]*a,u[1]*a),e.lineTo(f[0]*a,f[1]*a),e.lineTo(d[0]*a,d[1]*a),e.clip(),(0,n.rotateAtOffset)(e,l,s,p)},s.prototype.clipUnrotated=function(e,r,o){var n=(0,t.getTopLeft)(o),a=(0,t.getTopRight)(o),s=(0,t.getBottomRight)(o),p=(0,t.getBottomLeft)(o);(0,i.apply)(r.coordinateToPixelTransform,n),(0,i.apply)(r.coordinateToPixelTransform,a),(0,i.apply)(r.coordinateToPixelTransform,s),(0,i.apply)(r.coordinateToPixelTransform,p);var l=this.inversePixelTransform;(0,i.apply)(l,n),(0,i.apply)(l,a),(0,i.apply)(l,s),(0,i.apply)(l,p),e.save(),e.beginPath(),e.moveTo(Math.round(n[0]),Math.round(n[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(p[0]),Math.round(p[1])),e.clip()},s.prototype.dispatchRenderEvent_=function(t,e,o){var n=this.getLayer();if(n.hasListener(t)){var a=new r.default(t,this.inversePixelTransform,o,e);n.dispatchEvent(a)}},s.prototype.preRender=function(t,e){this.dispatchRenderEvent_(o.default.PRERENDER,t,e)},s.prototype.postRender=function(t,e){this.dispatchRenderEvent_(o.default.POSTRENDER,t,e)},s.prototype.getRenderTransform=function(t,e,r,o,n,a,s){var p=n/2,l=a/2,c=o/e,u=-c,f=-t[0]+s,d=-t[1];return(0,i.compose)(this.tempTransform_,p,l,c,u,-r,f,d)},s.prototype.getDataAtPixel=function(t,e,r){var o,n=(0,i.apply)(this.inversePixelTransform,t.slice()),a=this.context;try{o=a.getImageData(Math.round(n[0]),Math.round(n[1]),1,1).data}catch(s){return"SecurityError"===s.name?new Uint8Array:o}return 0===o[3]?null:o},s}(a.default),c=l;exports.default=c;
},{"../../extent.js":"QDir","../../dom.js":"Xno5","../../render/Event.js":"EB6P","../../render/EventType.js":"z39m","../../render/canvas.js":"iAG7","../Layer.js":"fpOz","../../transform.js":"P4eA"}],"UCah":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultOrder=u,exports.getSquaredTolerance=n,exports.getTolerance=g,exports.renderFeature=o;var e=require("../util.js"),t=l(require("../ImageState.js")),r=l(require("../geom/GeometryType.js")),a=l(require("../render/canvas/BuilderType.js"));function l(e){return e&&e.__esModule?e:{default:e}}var d=.5,i={Point:c,LineString:v,Polygon:m,MultiPoint:y,MultiLineString:I,MultiPolygon:S,GeometryCollection:s,Circle:f};function u(t,r){return parseInt((0,e.getUid)(t),10)-parseInt((0,e.getUid)(r),10)}function n(e,t){var r=g(e,t);return r*r}function g(e,t){return d*e/t}function f(e,t,r,l){var d=r.getFill(),i=r.getStroke();if(d||i){var u=e.getBuilder(r.getZIndex(),a.default.CIRCLE);u.setFillStrokeStyle(d,i),u.drawCircle(t,l)}var n=r.getText();if(n){var g=e.getBuilder(r.getZIndex(),a.default.TEXT);g.setTextStyle(n,e.addDeclutter(!1)),g.drawText(t,l)}}function o(e,r,a,l,d,i){var u=!1,n=a.getImage();if(n){var g=n.getImageState();g==t.default.LOADED||g==t.default.ERROR?n.unlistenImageChange(d):(g==t.default.IDLE&&n.load(),g=n.getImageState(),n.listenImageChange(d),u=!0)}return T(e,r,a,l,i),u}function T(e,t,r,a,l){var d=r.getGeometryFunction()(t);if(d){var u=d.simplifyTransformed(a,l);if(r.getRenderer())x(e,u,r,t);else(0,i[u.getType()])(e,u,r,t)}}function x(e,t,l,d){if(t.getType()!=r.default.GEOMETRY_COLLECTION)e.getBuilder(l.getZIndex(),a.default.DEFAULT).drawCustom(t,d,l.getRenderer());else for(var i=t.getGeometries(),u=0,n=i.length;u<n;++u)x(e,i[u],l,d)}function s(e,t,r,a){var l,d,u=t.getGeometriesArray();for(l=0,d=u.length;l<d;++l){(0,i[u[l].getType()])(e,u[l],r,a)}}function v(e,t,r,l){var d=r.getStroke();if(d){var i=e.getBuilder(r.getZIndex(),a.default.LINE_STRING);i.setFillStrokeStyle(null,d),i.drawLineString(t,l)}var u=r.getText();if(u){var n=e.getBuilder(r.getZIndex(),a.default.TEXT);n.setTextStyle(u,e.addDeclutter(!1)),n.drawText(t,l)}}function I(e,t,r,l){var d=r.getStroke();if(d){var i=e.getBuilder(r.getZIndex(),a.default.LINE_STRING);i.setFillStrokeStyle(null,d),i.drawMultiLineString(t,l)}var u=r.getText();if(u){var n=e.getBuilder(r.getZIndex(),a.default.TEXT);n.setTextStyle(u,e.addDeclutter(!1)),n.drawText(t,l)}}function S(e,t,r,l){var d=r.getFill(),i=r.getStroke();if(i||d){var u=e.getBuilder(r.getZIndex(),a.default.POLYGON);u.setFillStrokeStyle(d,i),u.drawMultiPolygon(t,l)}var n=r.getText();if(n){var g=e.getBuilder(r.getZIndex(),a.default.TEXT);g.setTextStyle(n,e.addDeclutter(!1)),g.drawText(t,l)}}function c(e,r,l,d){var i=l.getImage();if(i){if(i.getImageState()!=t.default.LOADED)return;var u=e.getBuilder(l.getZIndex(),a.default.IMAGE);u.setImageStyle(i,e.addDeclutter(!1)),u.drawPoint(r,d)}var n=l.getText();if(n){var g=e.getBuilder(l.getZIndex(),a.default.TEXT);g.setTextStyle(n,e.addDeclutter(!!i)),g.drawText(r,d)}}function y(e,r,l,d){var i=l.getImage();if(i){if(i.getImageState()!=t.default.LOADED)return;var u=e.getBuilder(l.getZIndex(),a.default.IMAGE);u.setImageStyle(i,e.addDeclutter(!1)),u.drawMultiPoint(r,d)}var n=l.getText();if(n){var g=e.getBuilder(l.getZIndex(),a.default.TEXT);g.setTextStyle(n,e.addDeclutter(!!i)),g.drawText(r,d)}}function m(e,t,r,l){var d=r.getFill(),i=r.getStroke();if(d||i){var u=e.getBuilder(r.getZIndex(),a.default.POLYGON);u.setFillStrokeStyle(d,i),u.drawPolygon(t,l)}var n=r.getText();if(n){var g=e.getBuilder(r.getZIndex(),a.default.TEXT);g.setTextStyle(n,e.addDeclutter(!1)),g.drawText(t,l)}}
},{"../util.js":"KniQ","../ImageState.js":"u3kG","../geom/GeometryType.js":"lmV0","../render/canvas/BuilderType.js":"irm1"}],"fo6K":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../../array.js"),e=require("../../colorlike.js"),i=require("../../extent.js"),s=h(require("../../geom/GeometryType.js")),a=require("../../geom/SimpleGeometry.js"),o=require("../../geom/flat/transform.js"),n=h(require("../VectorContext.js")),r=require("../canvas.js"),l=require("../../transform.js");function h(t){return t&&t.__esModule?t:{default:t}}var _=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),f=function(n){function h(t,e,i,s,a,o,r){var h=n.call(this)||this;return h.context_=t,h.pixelRatio_=e,h.extent_=i,h.transform_=s,h.viewRotation_=a,h.squaredTolerance_=o,h.userTransform_=r,h.contextFillState_=null,h.contextStrokeState_=null,h.contextTextState_=null,h.fillState_=null,h.strokeState_=null,h.image_=null,h.imageAnchorX_=0,h.imageAnchorY_=0,h.imageHeight_=0,h.imageOpacity_=0,h.imageOriginX_=0,h.imageOriginY_=0,h.imageRotateWithView_=!1,h.imageRotation_=0,h.imageScale_=0,h.imageWidth_=0,h.text_="",h.textOffsetX_=0,h.textOffsetY_=0,h.textRotateWithView_=!1,h.textRotation_=0,h.textScale_=0,h.textFillState_=null,h.textStrokeState_=null,h.textState_=null,h.pixelCoordinates_=[],h.tmpLocalTransform_=(0,l.create)(),h}return _(h,n),h.prototype.drawImages_=function(t,e,i,s){if(this.image_){var a=(0,o.transform2D)(t,e,i,2,this.transform_,this.pixelCoordinates_),n=this.context_,r=this.tmpLocalTransform_,h=n.globalAlpha;1!=this.imageOpacity_&&(n.globalAlpha=h*this.imageOpacity_);var _=this.imageRotation_;this.imageRotateWithView_&&(_+=this.viewRotation_);for(var f=0,g=a.length;f<g;f+=2){var S=a[f]-this.imageAnchorX_,x=a[f+1]-this.imageAnchorY_;if(0!==_||1!=this.imageScale_){var d=S+this.imageAnchorX_,m=x+this.imageAnchorY_;(0,l.compose)(r,d,m,this.imageScale_,this.imageScale_,_,-d,-m),n.setTransform.apply(n,r)}n.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,S,x,this.imageWidth_,this.imageHeight_)}0===_&&1==this.imageScale_||n.setTransform(1,0,0,1,0,0),1!=this.imageOpacity_&&(n.globalAlpha=h)}},h.prototype.drawText_=function(t,e,i,s){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var a=(0,o.transform2D)(t,e,i,s,this.transform_,this.pixelCoordinates_),n=this.context_,r=this.textRotation_;for(this.textRotateWithView_&&(r+=this.viewRotation_);e<i;e+=s){var h=a[e]+this.textOffsetX_,_=a[e+1]+this.textOffsetY_;if(0!==r||1!=this.textScale_){var f=(0,l.compose)(this.tmpLocalTransform_,h,_,this.textScale_,this.textScale_,r,-h,-_);n.setTransform.apply(n,f)}this.textStrokeState_&&n.strokeText(this.text_,h,_),this.textFillState_&&n.fillText(this.text_,h,_)}0===r&&1==this.textScale_||n.setTransform(1,0,0,1,0,0)}},h.prototype.moveToLineTo_=function(t,e,i,s,a){var n=this.context_,r=(0,o.transform2D)(t,e,i,s,this.transform_,this.pixelCoordinates_);n.moveTo(r[0],r[1]);var l=r.length;a&&(l-=2);for(var h=2;h<l;h+=2)n.lineTo(r[h],r[h+1]);return a&&n.closePath(),i},h.prototype.drawRings_=function(t,e,i,s){for(var a=0,o=i.length;a<o;++a)e=this.moveToLineTo_(t,e,i[a],s,!0);return e},h.prototype.drawCircle=function(t){if((0,i.intersects)(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=(0,a.transformGeom2D)(t,this.transform_,this.pixelCoordinates_),s=e[2]-e[0],o=e[3]-e[1],n=Math.sqrt(s*s+o*o),r=this.context_;r.beginPath(),r.arc(e[0],e[1],n,0,2*Math.PI),this.fillState_&&r.fill(),this.strokeState_&&r.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},h.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},h.prototype.setTransform=function(t){this.transform_=t},h.prototype.drawGeometry=function(t){switch(t.getType()){case s.default.POINT:this.drawPoint(t);break;case s.default.LINE_STRING:this.drawLineString(t);break;case s.default.POLYGON:this.drawPolygon(t);break;case s.default.MULTI_POINT:this.drawMultiPoint(t);break;case s.default.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case s.default.MULTI_POLYGON:this.drawMultiPolygon(t);break;case s.default.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case s.default.CIRCLE:this.drawCircle(t)}},h.prototype.drawFeature=function(t,e){var s=e.getGeometryFunction()(t);s&&(0,i.intersects)(this.extent_,s.getExtent())&&(this.setStyle(e),this.drawGeometry(s))},h.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),i=0,s=e.length;i<s;++i)this.drawGeometry(e[i])},h.prototype.drawPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},h.prototype.drawMultiPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},h.prototype.drawLineString=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,i.intersects)(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,s=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(s,0,s.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var a=t.getFlatMidpoint();this.drawText_(a,0,2,2)}}},h.prototype.drawMultiLineString=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getExtent();if((0,i.intersects)(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var s=this.context_,a=t.getFlatCoordinates(),o=0,n=t.getEnds(),r=t.getStride();s.beginPath();for(var l=0,h=n.length;l<h;++l)o=this.moveToLineTo_(a,o,n[l],r,!1);s.stroke()}if(""!==this.text_){var _=t.getFlatMidpoints();this.drawText_(_,0,_.length,2)}}},h.prototype.drawPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,i.intersects)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var s=t.getFlatInteriorPoint();this.drawText_(s,0,2,2)}}},h.prototype.drawMultiPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,i.intersects)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,s=t.getOrientedFlatCoordinates(),a=0,o=t.getEndss(),n=t.getStride();e.beginPath();for(var r=0,l=o.length;r<l;++r){var h=o[r];a=this.drawRings_(s,a,h,n)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var _=t.getFlatInteriorPoints();this.drawText_(_,0,_.length,2)}}},h.prototype.setContextFillState_=function(t){var e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},h.prototype.setContextStrokeState_=function(e){var i=this.context_,s=this.contextStrokeState_;s?(s.lineCap!=e.lineCap&&(s.lineCap=e.lineCap,i.lineCap=e.lineCap),i.setLineDash&&((0,t.equals)(s.lineDash,e.lineDash)||i.setLineDash(s.lineDash=e.lineDash),s.lineDashOffset!=e.lineDashOffset&&(s.lineDashOffset=e.lineDashOffset,i.lineDashOffset=e.lineDashOffset)),s.lineJoin!=e.lineJoin&&(s.lineJoin=e.lineJoin,i.lineJoin=e.lineJoin),s.lineWidth!=e.lineWidth&&(s.lineWidth=e.lineWidth,i.lineWidth=e.lineWidth),s.miterLimit!=e.miterLimit&&(s.miterLimit=e.miterLimit,i.miterLimit=e.miterLimit),s.strokeStyle!=e.strokeStyle&&(s.strokeStyle=e.strokeStyle,i.strokeStyle=e.strokeStyle)):(i.lineCap=e.lineCap,i.setLineDash&&(i.setLineDash(e.lineDash),i.lineDashOffset=e.lineDashOffset),i.lineJoin=e.lineJoin,i.lineWidth=e.lineWidth,i.miterLimit=e.miterLimit,i.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})},h.prototype.setContextTextState_=function(t){var e=this.context_,i=this.contextTextState_,s=t.textAlign?t.textAlign:r.defaultTextAlign;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=s&&(i.textAlign=s,e.textAlign=s),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=s,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:s,textBaseline:t.textBaseline})},h.prototype.setFillStrokeStyle=function(t,i){if(t){var s=t.getColor();this.fillState_={fillStyle:(0,e.asColorLike)(s||r.defaultFillStyle)}}else this.fillState_=null;if(i){var a=i.getColor(),o=i.getLineCap(),n=i.getLineDash(),l=i.getLineDashOffset(),h=i.getLineJoin(),_=i.getWidth(),f=i.getMiterLimit();this.strokeState_={lineCap:void 0!==o?o:r.defaultLineCap,lineDash:n||r.defaultLineDash,lineDashOffset:l||r.defaultLineDashOffset,lineJoin:void 0!==h?h:r.defaultLineJoin,lineWidth:this.pixelRatio_*(void 0!==_?_:r.defaultLineWidth),miterLimit:void 0!==f?f:r.defaultMiterLimit,strokeStyle:(0,e.asColorLike)(a||r.defaultStrokeStyle)}}else this.strokeState_=null},h.prototype.setImageStyle=function(t){if(t){var e=t.getAnchor(),i=t.getImage(1),s=t.getOrigin(),a=t.getSize();this.imageAnchorX_=e[0],this.imageAnchorY_=e[1],this.imageHeight_=a[1],this.image_=i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScale()*this.pixelRatio_,this.imageWidth_=a[0]}else this.image_=null},h.prototype.setTextStyle=function(t){if(t){var i=t.getFill();if(i){var s=i.getColor();this.textFillState_={fillStyle:(0,e.asColorLike)(s||r.defaultFillStyle)}}else this.textFillState_=null;var a=t.getStroke();if(a){var o=a.getColor(),n=a.getLineCap(),l=a.getLineDash(),h=a.getLineDashOffset(),_=a.getLineJoin(),f=a.getWidth(),g=a.getMiterLimit();this.textStrokeState_={lineCap:void 0!==n?n:r.defaultLineCap,lineDash:l||r.defaultLineDash,lineDashOffset:h||r.defaultLineDashOffset,lineJoin:void 0!==_?_:r.defaultLineJoin,lineWidth:void 0!==f?f:r.defaultLineWidth,miterLimit:void 0!==g?g:r.defaultMiterLimit,strokeStyle:(0,e.asColorLike)(o||r.defaultStrokeStyle)}}else this.textStrokeState_=null;var S=t.getFont(),x=t.getOffsetX(),d=t.getOffsetY(),m=t.getRotateWithView(),c=t.getRotation(),u=t.getScale(),p=t.getText(),y=t.getTextAlign(),T=t.getTextBaseline();this.textState_={font:void 0!==S?S:r.defaultFont,textAlign:void 0!==y?y:r.defaultTextAlign,textBaseline:void 0!==T?T:r.defaultTextBaseline},this.text_=void 0!==p?p:"",this.textOffsetX_=void 0!==x?this.pixelRatio_*x:0,this.textOffsetY_=void 0!==d?this.pixelRatio_*d:0,this.textRotateWithView_=void 0!==m&&m,this.textRotation_=void 0!==c?c:0,this.textScale_=this.pixelRatio_*(void 0!==u?u:1)}else this.text_=""},h}(n.default),g=f;exports.default=g;
},{"../../array.js":"luEr","../../colorlike.js":"V5XN","../../extent.js":"QDir","../../geom/GeometryType.js":"lmV0","../../geom/SimpleGeometry.js":"pnrv","../../geom/flat/transform.js":"LGwr","../VectorContext.js":"LQER","../canvas.js":"iAG7","../../transform.js":"P4eA"}],"Rlas":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={FRACTION:"fraction",PIXELS:"pixels"};exports.default=e;
},{}],"V0oB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shared=exports.default=void 0;var e=require("../color.js"),t=function(){function e(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return e.prototype.clear=function(){this.cache_={},this.cacheSize_=0},e.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},e.prototype.expire=function(){if(this.canExpireCache()){var e=0;for(var t in this.cache_){var i=this.cache_[t];0!=(3&e++)||i.hasListener()||(delete this.cache_[t],--this.cacheSize_)}}},e.prototype.get=function(e,t,c){var r=i(e,t,c);return r in this.cache_?this.cache_[r]:null},e.prototype.set=function(e,t,c,r){var a=i(e,t,c);this.cache_[a]=r,++this.cacheSize_},e.prototype.setSize=function(e){this.maxCacheSize_=e,this.expire()},e}();function i(t,i,c){return i+":"+t+":"+(c?(0,e.asString)(c):"null")}var c=t;exports.default=c;var r=new t;exports.shared=r;
},{"../color.js":"eucy"}],"Ojbp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./util.js"),e=r(require("./events/Target.js")),o=r(require("./events/EventType.js"));function r(t){return t&&t.__esModule?t:{default:t}}var n=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),u=function(e){function r(t,o,r,n){var u=e.call(this)||this;return u.extent=t,u.pixelRatio_=r,u.resolution=o,u.state=n,u}return n(r,e),r.prototype.changed=function(){this.dispatchEvent(o.default.CHANGE)},r.prototype.getExtent=function(){return this.extent},r.prototype.getImage=function(){return(0,t.abstract)()},r.prototype.getPixelRatio=function(){return this.pixelRatio_},r.prototype.getResolution=function(){return this.resolution},r.prototype.getState=function(){return this.state},r.prototype.load=function(){(0,t.abstract)()},r}(e.default),i=u;exports.default=i;
},{"./util.js":"KniQ","./events/Target.js":"CR4Y","./events/EventType.js":"C8cu"}],"DHWK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.listenImage=h,exports.default=void 0;var t=a(require("./ImageBase.js")),e=a(require("./ImageState.js")),n=require("./events.js"),i=a(require("./events/EventType.js")),r=require("./extent.js"),s=require("./has.js");function a(t){return t&&t.__esModule?t:{default:t}}var o=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),u=function(t){function n(n,i,r,s,a,o){var u=t.call(this,n,i,r,e.default.IDLE)||this;return u.src_=s,u.image_=new Image,null!==a&&(u.image_.crossOrigin=a),u.unlisten_=null,u.state=e.default.IDLE,u.imageLoadFunction_=o,u}return o(n,t),n.prototype.getImage=function(){return this.image_},n.prototype.handleImageError_=function(){this.state=e.default.ERROR,this.unlistenImage_(),this.changed()},n.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=(0,r.getHeight)(this.extent)/this.image_.height),this.state=e.default.LOADED,this.unlistenImage_(),this.changed()},n.prototype.load=function(){this.state!=e.default.IDLE&&this.state!=e.default.ERROR||(this.state=e.default.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=h(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},n.prototype.setImage=function(t){this.image_=t},n.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},n}(t.default);function h(t,e,r){var a=t;if(a.src&&s.IMAGE_DECODE){var o=a.decode(),u=!0;return o.then(function(){u&&e()}).catch(function(t){u&&("EncodingError"===t.name&&"Invalid image type."===t.message?e():r())}),function(){u=!1}}var h=[(0,n.listenOnce)(a,i.default.LOAD,e),(0,n.listenOnce)(a,i.default.ERROR,r)];return function(){h.forEach(n.unlistenByKey)}}var l=u;exports.default=l;
},{"./ImageBase.js":"Ojbp","./ImageState.js":"u3kG","./events.js":"UqnM","./events/EventType.js":"C8cu","./extent.js":"QDir","./has.js":"f3Nv"}],"XCOy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.get=_,exports.default=void 0;var t=require("../dom.js"),e=r(require("../events/Target.js")),i=r(require("../events/EventType.js")),a=r(require("../ImageState.js")),n=require("./IconImageCache.js"),s=require("../Image.js");function r(t){return t&&t.__esModule?t:{default:t}}var o=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function a(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(a.prototype=i.prototype,new a)}}(),h=function(e){function n(t,i,a,n,s,r){var o=e.call(this)||this;return o.hitDetectionImage_=null,o.image_=t||new Image,null!==n&&(o.image_.crossOrigin=n),o.canvas_=r?document.createElement("canvas"):null,o.color_=r,o.unlisten_=null,o.imageState_=s,o.size_=a,o.src_=i,o.tainted_,o}return o(n,e),n.prototype.isTainted_=function(e){if(void 0===this.tainted_&&this.imageState_===a.default.LOADED){e||(e=(0,t.createCanvasContext2D)(1,1)).drawImage(this.image_,0,0);try{e.getImageData(0,0,1,1),this.tainted_=!1}catch(i){this.tainted_=!0}}return!0===this.tainted_},n.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(i.default.CHANGE)},n.prototype.handleImageError_=function(){this.imageState_=a.default.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},n.prototype.handleImageLoad_=function(){this.imageState_=a.default.LOADED,this.size_&&(this.image_.width=this.size_[0],this.image_.height=this.size_[1]),this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.replaceColor_(),this.dispatchChangeEvent_()},n.prototype.getImage=function(t){return this.canvas_?this.canvas_:this.image_},n.prototype.getImageState=function(){return this.imageState_},n.prototype.getHitDetectionImage=function(e){if(!this.hitDetectionImage_)if(this.isTainted_()){var i=this.size_[0],a=this.size_[1],n=(0,t.createCanvasContext2D)(i,a);n.fillRect(0,0,i,a),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},n.prototype.getSize=function(){return this.size_},n.prototype.getSrc=function(){return this.src_},n.prototype.load=function(){if(this.imageState_==a.default.IDLE){this.imageState_=a.default.LOADING;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=(0,s.listenImage)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},n.prototype.replaceColor_=function(){if(this.color_){this.canvas_.width=this.image_.width,this.canvas_.height=this.image_.height;var t=this.canvas_.getContext("2d");if(t.drawImage(this.image_,0,0),this.isTainted_(t)){var e=this.color_;return t.globalCompositeOperation="multiply",t.fillStyle="rgb("+e[0]+","+e[1]+","+e[2]+")",t.fillRect(0,0,this.image_.width,this.image_.height),t.globalCompositeOperation="destination-in",void t.drawImage(this.image_,0,0)}for(var i=t.getImageData(0,0,this.image_.width,this.image_.height),a=i.data,n=this.color_[0]/255,s=this.color_[1]/255,r=this.color_[2]/255,o=0,h=a.length;o<h;o+=4)a[o]*=n,a[o+1]*=s,a[o+2]*=r;t.putImageData(i,0,0)}},n.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},n}(e.default);function _(t,e,i,a,s,r){var o=n.shared.get(e,a,r);return o||(o=new h(t,e,i,a,s,r),n.shared.set(e,a,r,o)),o}var g=h;exports.default=g;
},{"../dom.js":"Xno5","../events/Target.js":"CR4Y","../events/EventType.js":"C8cu","../ImageState.js":"u3kG","./IconImageCache.js":"V0oB","../Image.js":"DHWK"}],"z2xv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../util.js"),i=h(require("../ImageState.js")),e=require("../asserts.js"),o=require("../color.js"),r=h(require("../events/EventType.js")),n=h(require("./IconAnchorUnits.js")),s=require("./IconImage.js"),a=h(require("./IconOrigin.js")),c=h(require("./Image.js"));function h(t){return t&&t.__esModule?t:{default:t}}var l=function(){var t=function(i,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(i,e)};return function(i,e){function o(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),u=function(c){function h(r){var h=this,l=r||{},u=void 0!==l.opacity?l.opacity:1,f=void 0!==l.rotation?l.rotation:0,g=void 0!==l.scale?l.scale:1,_=void 0!==l.rotateWithView&&l.rotateWithView;(h=c.call(this,{opacity:u,rotation:f,scale:g,displacement:void 0!==l.displacement?l.displacement:[0,0],rotateWithView:_})||this).anchor_=void 0!==l.anchor?l.anchor:[.5,.5],h.normalizedAnchor_=null,h.anchorOrigin_=void 0!==l.anchorOrigin?l.anchorOrigin:a.default.TOP_LEFT,h.anchorXUnits_=void 0!==l.anchorXUnits?l.anchorXUnits:n.default.FRACTION,h.anchorYUnits_=void 0!==l.anchorYUnits?l.anchorYUnits:n.default.FRACTION,h.crossOrigin_=void 0!==l.crossOrigin?l.crossOrigin:null;var d=void 0!==l.img?l.img:null,O=void 0!==l.imgSize?l.imgSize:null,p=l.src;(0,e.assert)(!(void 0!==p&&d),4),(0,e.assert)(!d||d&&O,5),void 0!==p&&0!==p.length||!d||(p=d.src||(0,t.getUid)(d)),(0,e.assert)(void 0!==p&&p.length>0,6);var I=void 0!==l.src?i.default.IDLE:i.default.LOADED;return h.color_=void 0!==l.color?(0,o.asArray)(l.color):null,h.iconImage_=(0,s.get)(d,p,O,h.crossOrigin_,I,h.color_),h.offset_=void 0!==l.offset?l.offset:[0,0],h.offsetOrigin_=void 0!==l.offsetOrigin?l.offsetOrigin:a.default.TOP_LEFT,h.origin_=null,h.size_=void 0!==l.size?l.size:null,h}return l(h,c),h.prototype.clone=function(){return new h({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},h.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var t=this.anchor_,i=this.getSize();if(this.anchorXUnits_==n.default.FRACTION||this.anchorYUnits_==n.default.FRACTION){if(!i)return null;t=this.anchor_.slice(),this.anchorXUnits_==n.default.FRACTION&&(t[0]*=i[0]),this.anchorYUnits_==n.default.FRACTION&&(t[1]*=i[1])}if(this.anchorOrigin_!=a.default.TOP_LEFT){if(!i)return null;t===this.anchor_&&(t=this.anchor_.slice()),this.anchorOrigin_!=a.default.TOP_RIGHT&&this.anchorOrigin_!=a.default.BOTTOM_RIGHT||(t[0]=-t[0]+i[0]),this.anchorOrigin_!=a.default.BOTTOM_LEFT&&this.anchorOrigin_!=a.default.BOTTOM_RIGHT||(t[1]=-t[1]+i[1])}return this.normalizedAnchor_=t,this.normalizedAnchor_},h.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},h.prototype.getColor=function(){return this.color_},h.prototype.getImage=function(t){return this.iconImage_.getImage(t)},h.prototype.getImageSize=function(){return this.iconImage_.getSize()},h.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},h.prototype.getImageState=function(){return this.iconImage_.getImageState()},h.prototype.getHitDetectionImage=function(t){return this.iconImage_.getHitDetectionImage(t)},h.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_,i=this.getDisplacement();if(this.offsetOrigin_!=a.default.TOP_LEFT){var e=this.getSize(),o=this.iconImage_.getSize();if(!e||!o)return null;t=t.slice(),this.offsetOrigin_!=a.default.TOP_RIGHT&&this.offsetOrigin_!=a.default.BOTTOM_RIGHT||(t[0]=o[0]-e[0]-t[0]),this.offsetOrigin_!=a.default.BOTTOM_LEFT&&this.offsetOrigin_!=a.default.BOTTOM_RIGHT||(t[1]=o[1]-e[1]-t[1])}return t[0]+=i[0],t[1]+=i[1],this.origin_=t,this.origin_},h.prototype.getSrc=function(){return this.iconImage_.getSrc()},h.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},h.prototype.listenImageChange=function(t){this.iconImage_.addEventListener(r.default.CHANGE,t)},h.prototype.load=function(){this.iconImage_.load()},h.prototype.unlistenImageChange=function(t){this.iconImage_.removeEventListener(r.default.CHANGE,t)},h}(c.default),f=u;exports.default=f;
},{"../util.js":"KniQ","../ImageState.js":"u3kG","../asserts.js":"fLG6","../color.js":"eucy","../events/EventType.js":"C8cu","./IconAnchorUnits.js":"Rlas","./IconImage.js":"XCOy","./IconOrigin.js":"urGY","./Image.js":"S8ow"}],"RPsG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("./Fill.js")),e=o(require("./TextPlacement.js"));function o(t){return t&&t.__esModule?t:{default:t}}var i="#333",n=function(){function o(o){var n=o||{};this.font_=n.font,this.rotation_=n.rotation,this.rotateWithView_=n.rotateWithView,this.scale_=n.scale,this.text_=n.text,this.textAlign_=n.textAlign,this.textBaseline_=n.textBaseline,this.fill_=void 0!==n.fill?n.fill:new t.default({color:i}),this.maxAngle_=void 0!==n.maxAngle?n.maxAngle:Math.PI/4,this.placement_=void 0!==n.placement?n.placement:e.default.POINT,this.overflow_=!!n.overflow,this.stroke_=void 0!==n.stroke?n.stroke:null,this.offsetX_=void 0!==n.offsetX?n.offsetX:0,this.offsetY_=void 0!==n.offsetY?n.offsetY:0,this.backgroundFill_=n.backgroundFill?n.backgroundFill:null,this.backgroundStroke_=n.backgroundStroke?n.backgroundStroke:null,this.padding_=void 0===n.padding?null:n.padding}return o.prototype.clone=function(){return new o({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:this.getScale(),text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()})},o.prototype.getOverflow=function(){return this.overflow_},o.prototype.getFont=function(){return this.font_},o.prototype.getMaxAngle=function(){return this.maxAngle_},o.prototype.getPlacement=function(){return this.placement_},o.prototype.getOffsetX=function(){return this.offsetX_},o.prototype.getOffsetY=function(){return this.offsetY_},o.prototype.getFill=function(){return this.fill_},o.prototype.getRotateWithView=function(){return this.rotateWithView_},o.prototype.getRotation=function(){return this.rotation_},o.prototype.getScale=function(){return this.scale_},o.prototype.getStroke=function(){return this.stroke_},o.prototype.getText=function(){return this.text_},o.prototype.getTextAlign=function(){return this.textAlign_},o.prototype.getTextBaseline=function(){return this.textBaseline_},o.prototype.getBackgroundFill=function(){return this.backgroundFill_},o.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},o.prototype.getPadding=function(){return this.padding_},o.prototype.setOverflow=function(t){this.overflow_=t},o.prototype.setFont=function(t){this.font_=t},o.prototype.setMaxAngle=function(t){this.maxAngle_=t},o.prototype.setOffsetX=function(t){this.offsetX_=t},o.prototype.setOffsetY=function(t){this.offsetY_=t},o.prototype.setPlacement=function(t){this.placement_=t},o.prototype.setRotateWithView=function(t){this.rotateWithView_=t},o.prototype.setFill=function(t){this.fill_=t},o.prototype.setRotation=function(t){this.rotation_=t},o.prototype.setScale=function(t){this.scale_=t},o.prototype.setStroke=function(t){this.stroke_=t},o.prototype.setText=function(t){this.text_=t},o.prototype.setTextAlign=function(t){this.textAlign_=t},o.prototype.setTextBaseline=function(t){this.textBaseline_=t},o.prototype.setBackgroundFill=function(t){this.backgroundFill_=t},o.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t},o.prototype.setPadding=function(t){this.padding_=t},o}(),r=n;exports.default=r;
},{"./Fill.js":"AFcg","./TextPlacement.js":"AXKs"}],"qeKX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Circle",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"Fill",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"Icon",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"IconImage",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"Image",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"RegularShape",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"Stroke",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"Style",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"Text",{enumerable:!0,get:function(){return s.default}});var e=f(require("./style/Circle.js")),t=f(require("./style/Fill.js")),r=f(require("./style/Icon.js")),u=f(require("./style/IconImage.js")),n=f(require("./style/Image.js")),l=f(require("./style/RegularShape.js")),o=f(require("./style/Stroke.js")),i=f(require("./style/Style.js")),s=f(require("./style/Text.js"));function f(e){return e&&e.__esModule?e:{default:e}}
},{"./style/Circle.js":"cdf1","./style/Fill.js":"AFcg","./style/Icon.js":"z2xv","./style/IconImage.js":"XCOy","./style/Image.js":"S8ow","./style/RegularShape.js":"il3X","./style/Stroke.js":"TXDt","./style/Style.js":"he4w","./style/Text.js":"RPsG"}],"MrCe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createHitDetectionImageData=s,exports.hitDetect=g;var e=l(require("./Immediate.js")),t=require("../../dom.js"),a=require("../../style.js"),r=l(require("../../style/IconAnchorUnits.js")),n=l(require("../../geom/GeometryType.js")),i=require("../../extent.js"),o=require("../../array.js");function l(e){return e&&e.__esModule?e:{default:e}}function s(l,s,g,u,c,h,d){var f=l[0]/2,v=l[1]/2,m=(0,t.createCanvasContext2D)(f,v);m.imageSmoothingEnabled=!1;for(var y=m.canvas,p=new e.default(m,.5,c,null,d),I=g.length,S=Math.floor(16777215/I),w={},C=1;C<=I;++C){var x=g[C-1],j=x.getStyleFunction()||u;if(u){var b=j(x,h);if(b){Array.isArray(b)||(b=[b]);for(var q="#"+("000000"+(C*S).toString(16)).slice(-6),E=0,M=b.length;E<M;++E){var O=b[E],D=O.clone(),N=D.getFill();N&&N.setColor(q);var T=D.getStroke();T&&T.setColor(q),D.setText(void 0);var G=O.getImage();if(G){var L=G.getImageSize();if(!L)continue;var P=document.createElement("canvas");P.width=L[0],P.height=L[1];var R=P.getContext("2d",{alpha:!1});R.fillStyle=q;var _=R.canvas;R.fillRect(0,0,_.width,_.height);var z=L?L[0]:_.width,A=L?L[1]:_.height;(0,t.createCanvasContext2D)(z,A).drawImage(_,0,0),D.setImage(new a.Icon({img:_,imgSize:L,anchor:G.getAnchor(),anchorXUnits:r.default.PIXELS,anchorYUnits:r.default.PIXELS,offset:G.getOrigin(),size:G.getSize(),opacity:G.getOpacity(),scale:G.getScale(),rotation:G.getRotation(),rotateWithView:G.getRotateWithView()}))}var F=Number(D.getZIndex());(V=w[F])||(V={},w[F]=V,V[n.default.POLYGON]=[],V[n.default.CIRCLE]=[],V[n.default.LINE_STRING]=[],V[n.default.POINT]=[]);var U=D.getGeometryFunction()(x);U&&(0,i.intersects)(c,U.getExtent())&&V[U.getType().replace("Multi","")].push(U,D)}}}}for(var X=Object.keys(w).map(Number).sort(o.numberSafeCompareFunction),k=(C=0,X.length);C<k;++C){var V=w[X[C]];for(var W in V){var Y=V[W];for(E=0,M=Y.length;E<M;E+=2){p.setStyle(Y[E+1]);for(var H=0,Z=s.length;H<Z;++H)p.setTransform(s[H]),p.drawGeometry(Y[E])}}}return document.body.appendChild(m.canvas),m.getImageData(0,0,y.width,y.height)}function g(e,t,a){var r=[];if(a){var n=4*(Math.round(e[0]/2)+Math.round(e[1]/2)*a.width),i=a.data[n],o=a.data[n+1],l=a.data[n+2]+256*(o+256*i),s=Math.floor(16777215/t.length);l&&l%s==0&&r.push(t[l/s-1])}return r}
},{"./Immediate.js":"fo6K","../../dom.js":"Xno5","../../style.js":"qeKX","../../style/IconAnchorUnits.js":"Rlas","../../geom/GeometryType.js":"lmV0","../../extent.js":"QDir","../../array.js":"luEr"}],"F2e3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../../util.js"),t=p(require("../../ViewHint.js")),r=require("../../extent.js"),n=require("../../coordinate.js"),i=require("../../proj.js"),a=p(require("../../render/canvas/BuilderGroup.js")),o=c(require("../../render/canvas/ExecutorGroup.js")),s=p(require("./Layer.js")),u=require("../vector.js"),d=require("../../transform.js"),h=require("../../render/canvas/hitdetect.js");function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function c(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}function p(e){return e&&e.__esModule?e:{default:e}}var f=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),g=function(s){function l(e){var t=s.call(this,e)||this;return t.boundHandleStyleImageChange_=t.handleStyleImageChange_.bind(t),t.animatingOrInteracting_,t.dirty_=!1,t.hitDetectionImageData_=null,t.renderedFeatures_=null,t.renderedRevision_=-1,t.renderedResolution_=NaN,t.renderedExtent_=(0,r.createEmpty)(),t.renderedRotation_,t.renderedCenter_=null,t.renderedProjection_=null,t.renderedRenderOrder_=null,t.replayGroup_=null,t.replayGroupChanged=!0,t}return f(l,s),l.prototype.useContainer=function(e,t,r){r<1&&(e=null),s.prototype.useContainer.call(this,e,t,r)},l.prototype.renderFrame=function(e,n){var a=e.pixelRatio,s=e.layerStatesArray[e.layerIndex];(0,d.makeScale)(this.pixelTransform,1/a,1/a),(0,d.makeInverse)(this.inversePixelTransform,this.pixelTransform);var u=(0,d.toString)(this.pixelTransform);this.useContainer(n,u,s.opacity);var h=this.context,l=h.canvas,c=this.replayGroup_;if(!c||c.isEmpty())return!this.containerReused&&l.width>0&&(l.width=0),this.container;var p=Math.round(e.size[0]*a),f=Math.round(e.size[1]*a);l.width!=p||l.height!=f?(l.width=p,l.height=f,l.style.transform!==u&&(l.style.transform=u)):this.containerReused||h.clearRect(0,0,p,f),this.preRender(h,e);var g=e.extent,y=e.viewState,v=y.center,_=y.resolution,x=y.projection,m=y.rotation,R=x.getExtent(),I=this.getLayer().getSource(),j=!1;if(s.extent){var w=(0,i.fromUserExtent)(s.extent,x);(j=!(0,r.containsExtent)(w,e.extent)&&(0,r.intersects)(w,e.extent))&&this.clip(h,e,w)}var E=e.viewHints,O=!(E[t.default.ANIMATING]||E[t.default.INTERACTING]),T=this.getRenderTransform(v,_,m,a,p,f,0),F=this.getLayer().getDeclutter()?{}:null;if(c.execute(h,T,m,O,void 0,F),I.getWrapX()&&x.canWrapX()&&!(0,r.containsExtent)(R,g)){for(var C=g[0],D=(0,r.getWidth)(R),S=0,b=void 0;C<R[0];){b=D*--S;var G=this.getRenderTransform(v,_,m,a,p,f,b);c.execute(h,G,m,O,void 0,F),C+=D}for(S=0,C=g[2];C>R[2];){b=D*++S;var A=this.getRenderTransform(v,_,m,a,p,f,b);c.execute(h,A,m,O,void 0,F),C-=D}}if(F){var P=e.viewHints,N=!(P[t.default.ANIMATING]||P[t.default.INTERACTING]);(0,o.replayDeclutter)(F,h,m,1,N,e.declutterItems)}j&&h.restore(),this.postRender(h,e);var W=s.opacity,q=this.container;return W!==parseFloat(q.style.opacity)&&(q.style.opacity=1===W?"":W),this.container},l.prototype.getFeatures=function(e){return new Promise(function(t,n){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var i=[this.context.canvas.width,this.context.canvas.height];(0,d.apply)(this.pixelTransform,i);var a=this.renderedCenter_,o=this.renderedResolution_,s=this.renderedRotation_,u=this.renderedProjection_,l=this.renderedExtent_,c=this.getLayer(),p=[],f=i[0]/2,g=i[1]/2;p.push(this.getRenderTransform(a,o,s,.5,f,g,0).slice());var y=c.getSource(),v=u.getExtent();if(y.getWrapX()&&u.canWrapX()&&!(0,r.containsExtent)(v,l)){for(var _=l[0],x=(0,r.getWidth)(v),m=0,R=void 0;_<v[0];)R=x*--m,p.push(this.getRenderTransform(a,o,s,.5,f,g,R).slice()),_+=x;for(m=0,_=l[2];_>v[2];)R=x*++m,p.push(this.getRenderTransform(a,o,s,.5,f,g,R).slice()),_-=x}this.hitDetectionImageData_=(0,h.createHitDetectionImageData)(i,p,this.renderedFeatures_,c.getStyleFunction(),l,o,s)}t((0,h.hitDetect)(e,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},l.prototype.forEachFeatureAtCoordinate=function(t,r,n,i,a){if(this.replayGroup_){var o=r.viewState.resolution,s=r.viewState.rotation,u=this.getLayer(),d={};return this.replayGroup_.forEachFeatureAtCoordinate(t,o,s,n,function(t){var r=(0,e.getUid)(t);if(!(r in d))return d[r]=!0,i(t,u)},u.getDeclutter()?a:null)}},l.prototype.handleFontsChanged=function(){var e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()},l.prototype.handleStyleImageChange_=function(e){this.renderIfReadyAndVisible()},l.prototype.prepareFrame=function(e){var s=this.getLayer(),d=s.getSource();if(!d)return!1;var h=e.viewHints[t.default.ANIMATING],l=e.viewHints[t.default.INTERACTING],c=s.getUpdateWhileAnimating(),p=s.getUpdateWhileInteracting();if(!this.dirty_&&!c&&h||!p&&l)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var f=e.extent,g=e.viewState,y=g.projection,v=g.resolution,_=e.pixelRatio,x=s.getRevision(),m=s.getRenderBuffer(),R=s.getRenderOrder();void 0===R&&(R=u.defaultOrder);var I=g.center.slice(),j=(0,r.buffer)(f,m*v),w=[j.slice()],E=y.getExtent();if(d.getWrapX()&&y.canWrapX()&&!(0,r.containsExtent)(E,e.extent)){var O=(0,r.getWidth)(E),T=Math.max((0,r.getWidth)(j)/2,O);j[0]=E[0]-T,j[2]=E[2]+T,(0,n.wrapX)(I,y);var F=(0,r.wrapX)(w[0],y);F[0]<E[0]&&F[2]<E[2]?w.push([F[0]+O,F[1],F[2]+O,F[3]]):F[0]>E[0]&&F[2]>E[2]&&w.push([F[0]-O,F[1],F[2]-O,F[3]])}if(!this.dirty_&&this.renderedResolution_==v&&this.renderedRevision_==x&&this.renderedRenderOrder_==R&&(0,r.containsExtent)(this.renderedExtent_,j))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var C,D=new a.default((0,u.getTolerance)(v,_),j,v,_,s.getDeclutter()),S=(0,i.getUserProjection)();if(S){for(var b=0,G=w.length;b<G;++b)d.loadFeatures((0,i.toUserExtent)(w[b],y),v,S);C=(0,i.getTransformFromProjections)(S,y)}else for(b=0,G=w.length;b<G;++b)d.loadFeatures(w[b],v,y);var A=(0,u.getSquaredTolerance)(v,_),P=function(e){var t,r=e.getStyleFunction()||s.getStyleFunction();if(r&&(t=r(e,v)),t){var n=this.renderFeature(e,A,t,D,C);this.dirty_=this.dirty_||n}}.bind(this),N=(0,i.toUserExtent)(j,y),W=d.getFeaturesInExtent(N);R&&W.sort(R);for(b=0,G=W.length;b<G;++b)P(W[b]);this.renderedFeatures_=W;var q=D.finish(),M=new o.default(j,v,_,d.getOverlaps(),q,s.getRenderBuffer());return this.renderedResolution_=v,this.renderedRevision_=x,this.renderedRenderOrder_=R,this.renderedExtent_=j,this.renderedRotation_=g.rotation,this.renderedCenter_=I,this.renderedProjection_=y,this.replayGroup_=M,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},l.prototype.renderFeature=function(e,t,r,n,i){if(!r)return!1;var a=!1;if(Array.isArray(r))for(var o=0,s=r.length;o<s;++o)a=(0,u.renderFeature)(n,e,r[o],t,this.boundHandleStyleImageChange_,i)||a;else a=(0,u.renderFeature)(n,e,r,t,this.boundHandleStyleImageChange_,i);return a},l}(s.default),y=g;exports.default=y;
},{"../../util.js":"KniQ","../../ViewHint.js":"cuLW","../../extent.js":"QDir","../../coordinate.js":"nGsj","../../proj.js":"Diht","../../render/canvas/BuilderGroup.js":"vqHd","../../render/canvas/ExecutorGroup.js":"ngEc","./Layer.js":"vPfl","../vector.js":"UCah","../../transform.js":"P4eA","../../render/canvas/hitdetect.js":"MrCe"}],"dflx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./BaseVector.js")),e=r(require("../renderer/canvas/VectorLayer.js"));function r(t){return t&&t.__esModule?t:{default:t}}var n=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=function(t){function r(e){return t.call(this,e)||this}return n(r,t),r.prototype.createRenderer=function(){return new e.default(this)},r}(t.default),u=o;exports.default=u;
},{"./BaseVector.js":"pskK","../renderer/canvas/VectorLayer.js":"F2e3"}],"rDTq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.interpolatePoint=n,exports.lineStringCoordinateAtM=t,exports.lineStringsCoordinateAtM=i;var r=require("../../array.js"),e=require("../../math.js");function n(n,t,i,l,u,a){var f=NaN,s=NaN,o=(i-t)/l;if(1===o)f=n[t],s=n[t+1];else if(2==o)f=(1-u)*n[t]+u*n[t+l],s=(1-u)*n[t+1]+u*n[t+l+1];else if(0!==o){for(var v=n[t],c=n[t+1],p=0,h=[0],g=t+l;g<i;g+=l){var d=n[g],x=n[g+1];p+=Math.sqrt((d-v)*(d-v)+(x-c)*(x-c)),h.push(p),v=d,c=x}var M=u*p,N=(0,r.binarySearch)(h,M);if(N<0){var j=(M-h[-N-2])/(h[-N-1]-h[-N-2]),q=t+(-N-2)*l;f=(0,e.lerp)(n[q],n[q+l],j),s=(0,e.lerp)(n[q+1],n[q+l+1],j)}else f=n[t+N*l],s=n[t+N*l+1]}return a?(a[0]=f,a[1]=s,a):[f,s]}function t(r,n,t,i,l,u){if(t==n)return null;var a;if(l<r[n+i-1])return u?((a=r.slice(n,n+i))[i-1]=l,a):null;if(r[t-1]<l)return u?((a=r.slice(t-i,t))[i-1]=l,a):null;if(l==r[n+i-1])return r.slice(n,n+i);for(var f=n/i,s=t/i;f<s;){var o=f+s>>1;l<r[(o+1)*i-1]?s=o:f=o+1}var v=r[f*i-1];if(l==v)return r.slice((f-1)*i,(f-1)*i+i);var c=(l-v)/(r[(f+1)*i-1]-v);a=[];for(var p=0;p<i-1;++p)a.push((0,e.lerp)(r[(f-1)*i+p],r[f*i+p],c));return a.push(l),a}function i(r,e,n,i,l,u,a){if(a)return t(r,e,n[n.length-1],i,l,u);var f;if(l<r[i-1])return u?((f=r.slice(0,i))[i-1]=l,f):null;if(r[r.length-1]<l)return u?((f=r.slice(r.length-i))[i-1]=l,f):null;for(var s=0,o=n.length;s<o;++s){var v=n[s];if(e!=v){if(l<r[e+i-1])return null;if(l<=r[v-1])return t(r,e,v,i,l,!1);e=v}}return null}
},{"../../array.js":"luEr","../../math.js":"B96G"}],"DfxW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../array.js"),e=require("../extent.js"),i=p(require("./GeometryLayout.js")),o=p(require("./GeometryType.js")),n=p(require("./SimpleGeometry.js")),r=require("./flat/closest.js"),s=require("./flat/deflate.js"),a=require("./flat/inflate.js"),l=require("./flat/interpolate.js"),f=require("./flat/intersectsextent.js"),h=require("./flat/length.js"),d=require("./flat/segments.js"),u=require("./flat/simplify.js");function p(t){return t&&t.__esModule?t:{default:t}}var c=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),C=function(n){function p(t,e){var i=n.call(this)||this;return i.flatMidpoint_=null,i.flatMidpointRevision_=-1,i.maxDelta_=-1,i.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?i.setCoordinates(t,e):i.setFlatCoordinates(e,t),i}return c(p,n),p.prototype.appendCoordinate=function(e){this.flatCoordinates?(0,t.extend)(this.flatCoordinates,e):this.flatCoordinates=e.slice(),this.changed()},p.prototype.clone=function(){return new p(this.flatCoordinates.slice(),this.layout)},p.prototype.closestPointXY=function(t,i,o,n){return n<(0,e.closestSquaredDistanceXY)(this.getExtent(),t,i)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,r.maxSquaredDelta)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,r.assignClosestPoint)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,i,o,n))},p.prototype.forEachSegment=function(t){return(0,d.forEach)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},p.prototype.getCoordinateAtM=function(t,e){if(this.layout!=i.default.XYM&&this.layout!=i.default.XYZM)return null;var o=void 0!==e&&e;return(0,l.lineStringCoordinateAtM)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,o)},p.prototype.getCoordinates=function(){return(0,a.inflateCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},p.prototype.getCoordinateAt=function(t,e){return(0,l.interpolatePoint)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e)},p.prototype.getLength=function(){return(0,h.lineStringLength)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},p.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},p.prototype.getSimplifiedGeometryInternal=function(t){var e=[];return e.length=(0,u.douglasPeucker)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new p(e,i.default.XY)},p.prototype.getType=function(){return o.default.LINE_STRING},p.prototype.intersectsExtent=function(t){return(0,f.intersectsLineString)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},p.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,s.deflateCoordinates)(this.flatCoordinates,0,t,this.stride),this.changed()},p}(n.default),g=C;exports.default=g;
},{"../array.js":"luEr","../extent.js":"QDir","./GeometryLayout.js":"Utvi","./GeometryType.js":"lmV0","./SimpleGeometry.js":"pnrv","./flat/closest.js":"rMra","./flat/deflate.js":"FNhl","./flat/inflate.js":"znXl","./flat/interpolate.js":"rDTq","./flat/intersectsextent.js":"GZir","./flat/length.js":"ZZrx","./flat/segments.js":"U8i0","./flat/simplify.js":"IEpt"}],"AbO3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"};exports.default=e;
},{}],"U3JP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadFeaturesXhr=n,exports.xhr=o,exports.setWithCredentials=a;var e=require("./functions.js"),t=r(require("./format/FormatType.js"));function r(e){return e&&e.__esModule?e:{default:e}}var s=!1;function n(e,r,n,o){return function(a,i,u){var f=new XMLHttpRequest;f.open("GET","function"==typeof e?e(a,i,u):e,!0),r.getType()==t.default.ARRAY_BUFFER&&(f.responseType="arraybuffer"),f.withCredentials=s,f.onload=function(e){if(!f.status||f.status>=200&&f.status<300){var s=r.getType(),i=void 0;s==t.default.JSON||s==t.default.TEXT?i=f.responseText:s==t.default.XML?(i=f.responseXML)||(i=(new DOMParser).parseFromString(f.responseText,"application/xml")):s==t.default.ARRAY_BUFFER&&(i=f.response),i?n.call(this,r.readFeatures(i,{extent:a,featureProjection:u}),r.readProjection(i)):o.call(this)}else o.call(this)}.bind(this),f.onerror=function(){o.call(this)}.bind(this),f.send()}}function o(t,r){return n(t,r,function(e,t){"function"==typeof this.addFeatures&&this.addFeatures(e)},e.VOID)}function a(e){s=e}
},{"./functions.js":"RgA2","./format/FormatType.js":"AbO3"}],"JpXE":[function(require,module,exports) {
"use strict";function e(e,t){return[[-1/0,-1/0,1/0,1/0]]}function t(e,t){return[e]}function r(e){return function(t,r){var n=e.getZForResolution(r),o=e.getTileRangeForExtentAndZ(t,n),u=[],i=[n,0,0];for(i[1]=o.minX;i[1]<=o.maxX;++i[1])for(i[2]=o.minY;i[2]<=o.maxY;++i[2])u.push(e.getTileCoordExtent(i));return u}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.all=e,exports.bbox=t,exports.tile=r;
},{}],"H38a":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../util.js"),r=n(require("../Object.js")),o=require("../proj.js"),e=n(require("./State.js"));function n(t){return t&&t.__esModule?t:{default:t}}var i=function(){var t=function(r,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])})(r,o)};return function(r,o){function e(){this.constructor=r}t(r,o),r.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}}(),u=function(r){function n(t){var n=r.call(this)||this;return n.projection_=(0,o.get)(t.projection),n.attributions_=s(t.attributions),n.attributionsCollapsible_=void 0===t.attributionsCollapsible||t.attributionsCollapsible,n.loading=!1,n.state_=void 0!==t.state?t.state:e.default.READY,n.wrapX_=void 0!==t.wrapX&&t.wrapX,n}return i(n,r),n.prototype.getAttributions=function(){return this.attributions_},n.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},n.prototype.getProjection=function(){return this.projection_},n.prototype.getResolutions=function(){return(0,t.abstract)()},n.prototype.getState=function(){return this.state_},n.prototype.getWrapX=function(){return this.wrapX_},n.prototype.refresh=function(){this.changed()},n.prototype.setAttributions=function(t){this.attributions_=s(t),this.changed()},n.prototype.setState=function(t){this.state_=t,this.changed()},n}(r.default);function s(t){return t?Array.isArray(t)?function(r){return t}:"function"==typeof t?t:function(r){return[t]}:null}var a=u;exports.default=a;
},{"../util.js":"KniQ","../Object.js":"PhPh","../proj.js":"Diht","./State.js":"iC8j"}],"s8Fc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature"};exports.default=e;
},{}],"MiUH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../util.js"),e=n(require("rbush/rbush.js")),r=require("../extent.js"),i=require("../obj.js");function n(t){return t&&t.__esModule?t:{default:t}}var o=function(){function n(t){this.rbush_=new e.default(t),this.items_={}}return n.prototype.insert=function(e,r){var i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:r};this.rbush_.insert(i),this.items_[(0,t.getUid)(r)]=i},n.prototype.load=function(e,r){for(var i=new Array(r.length),n=0,o=r.length;n<o;n++){var s=e[n],u=r[n],a={minX:s[0],minY:s[1],maxX:s[2],maxY:s[3],value:u};i[n]=a,this.items_[(0,t.getUid)(u)]=a}this.rbush_.load(i)},n.prototype.remove=function(e){var r=(0,t.getUid)(e),i=this.items_[r];return delete this.items_[r],null!==this.rbush_.remove(i)},n.prototype.update=function(e,i){var n=this.items_[(0,t.getUid)(i)],o=[n.minX,n.minY,n.maxX,n.maxY];(0,r.equals)(o,e)||(this.remove(i),this.insert(e,i))},n.prototype.getAll=function(){return this.rbush_.all().map(function(t){return t.value})},n.prototype.getInExtent=function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(t){return t.value})},n.prototype.forEach=function(t){return this.forEach_(this.getAll(),t)},n.prototype.forEachInExtent=function(t,e){return this.forEach_(this.getInExtent(t),e)},n.prototype.forEach_=function(t,e){for(var r,i=0,n=t.length;i<n;i++)if(r=e(t[i]))return r;return r},n.prototype.isEmpty=function(){return(0,i.isEmpty)(this.items_)},n.prototype.clear=function(){this.rbush_.clear(),this.items_={}},n.prototype.getExtent=function(t){var e=this.rbush_.toJSON();return(0,r.createOrUpdate)(e.minX,e.minY,e.maxX,e.maxY,t)},n.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]},n}(),s=o;exports.default=s;
},{"../util.js":"KniQ","rbush/rbush.js":"C6Up","../extent.js":"QDir","../obj.js":"mH6q"}],"ZS12":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.VectorSourceEvent=void 0;var e=require("../util.js"),t=E(require("../Collection.js")),r=E(require("../CollectionEventType.js")),n=E(require("../ObjectEventType.js")),i=require("../array.js"),o=require("../asserts.js"),s=require("../events.js"),a=E(require("../events/Event.js")),u=E(require("../events/EventType.js")),h=require("../extent.js"),l=require("../featureloader.js"),d=require("../functions.js"),f=require("../loadingstrategy.js"),c=require("../obj.js"),_=E(require("./Source.js")),p=E(require("./State.js")),v=E(require("./VectorEventType.js")),y=E(require("../structs/RBush.js"));function E(e){return e&&e.__esModule?e:{default:e}}var g=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),x=function(e){function t(t,r){var n=e.call(this,t)||this;return n.feature=r,n}return g(t,e),t}(a.default);exports.VectorSourceEvent=x;var F=function(a){function _(e){var r=this,n=e||{};(r=a.call(this,{attributions:n.attributions,projection:void 0,state:p.default.READY,wrapX:void 0===n.wrapX||n.wrapX})||this).loader_=d.VOID,r.format_=n.format,r.overlaps_=void 0===n.overlaps||n.overlaps,r.url_=n.url,void 0!==n.loader?r.loader_=n.loader:void 0!==r.url_&&((0,o.assert)(r.format_,7),r.loader_=(0,l.xhr)(r.url_,r.format_)),r.strategy_=void 0!==n.strategy?n.strategy:f.all;var i,s,u=void 0===n.useSpatialIndex||n.useSpatialIndex;return r.featuresRtree_=u?new y.default:null,r.loadedExtentsRtree_=new y.default,r.nullGeometryFeatures_={},r.idIndex_={},r.uidIndex_={},r.featureChangeKeys_={},r.featuresCollection_=null,Array.isArray(n.features)?s=n.features:n.features&&(s=(i=n.features).getArray()),u||void 0!==i||(i=new t.default(s)),void 0!==s&&r.addFeaturesInternal(s),void 0!==i&&r.bindFeaturesCollection_(i),r}return g(_,a),_.prototype.addFeature=function(e){this.addFeatureInternal(e),this.changed()},_.prototype.addFeatureInternal=function(t){var r=(0,e.getUid)(t);if(this.addToIndex_(r,t)){this.setupChangeEvents_(r,t);var n=t.getGeometry();if(n){var i=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,t)}else this.nullGeometryFeatures_[r]=t;this.dispatchEvent(new x(v.default.ADDFEATURE,t))}else this.featuresCollection_&&this.featuresCollection_.remove(t)},_.prototype.setupChangeEvents_=function(e,t){this.featureChangeKeys_[e]=[(0,s.listen)(t,u.default.CHANGE,this.handleFeatureChange_,this),(0,s.listen)(t,n.default.PROPERTYCHANGE,this.handleFeatureChange_,this)]},_.prototype.addToIndex_=function(e,t){var r=!0,n=t.getId();return void 0!==n&&(n.toString()in this.idIndex_?r=!1:this.idIndex_[n.toString()]=t),r&&((0,o.assert)(!(e in this.uidIndex_),30),this.uidIndex_[e]=t),r},_.prototype.addFeatures=function(e){this.addFeaturesInternal(e),this.changed()},_.prototype.addFeaturesInternal=function(t){for(var r=[],n=[],i=[],o=0,s=t.length;o<s;o++){var a=t[o],u=(0,e.getUid)(a);this.addToIndex_(u,a)&&n.push(a)}o=0;for(var h=n.length;o<h;o++){a=n[o],u=(0,e.getUid)(a);this.setupChangeEvents_(u,a);var l=a.getGeometry();if(l){var d=l.getExtent();r.push(d),i.push(a)}else this.nullGeometryFeatures_[u]=a}this.featuresRtree_&&this.featuresRtree_.load(r,i);o=0;for(var f=n.length;o<f;o++)this.dispatchEvent(new x(v.default.ADDFEATURE,n[o]))},_.prototype.bindFeaturesCollection_=function(e){var t=!1;this.addEventListener(v.default.ADDFEATURE,function(r){t||(t=!0,e.push(r.feature),t=!1)}),this.addEventListener(v.default.REMOVEFEATURE,function(r){t||(t=!0,e.remove(r.feature),t=!1)}),e.addEventListener(r.default.ADD,function(e){t||(t=!0,this.addFeature(e.element),t=!1)}.bind(this)),e.addEventListener(r.default.REMOVE,function(e){t||(t=!0,this.removeFeature(e.element),t=!1)}.bind(this)),this.featuresCollection_=e},_.prototype.clear=function(e){if(e){for(var t in this.featureChangeKeys_){this.featureChangeKeys_[t].forEach(s.unlistenByKey)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_)for(var r in this.featuresRtree_.forEach(this.removeFeatureInternal.bind(this)),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var n=new x(v.default.CLEAR);this.dispatchEvent(n),this.changed()},_.prototype.forEachFeature=function(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},_.prototype.forEachFeatureAtCoordinateDirect=function(e,t){var r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(r){return r.getGeometry().intersectsCoordinate(e)?t(r):void 0})},_.prototype.forEachFeatureInExtent=function(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},_.prototype.forEachFeatureIntersectingExtent=function(e,t){return this.forEachFeatureInExtent(e,function(r){if(r.getGeometry().intersectsExtent(e)){var n=t(r);if(n)return n}})},_.prototype.getFeaturesCollection=function(){return this.featuresCollection_},_.prototype.getFeatures=function(){var e;return this.featuresCollection_?e=this.featuresCollection_.getArray():this.featuresRtree_&&(e=this.featuresRtree_.getAll(),(0,c.isEmpty)(this.nullGeometryFeatures_)||(0,i.extend)(e,(0,c.getValues)(this.nullGeometryFeatures_))),e},_.prototype.getFeaturesAtCoordinate=function(e){var t=[];return this.forEachFeatureAtCoordinateDirect(e,function(e){t.push(e)}),t},_.prototype.getFeaturesInExtent=function(e){return this.featuresRtree_?this.featuresRtree_.getInExtent(e):this.featuresCollection_?this.featuresCollection_.getArray():[]},_.prototype.getClosestFeatureToCoordinate=function(e,t){var r=e[0],n=e[1],i=null,o=[NaN,NaN],s=1/0,a=[-1/0,-1/0,1/0,1/0],u=t||d.TRUE;return this.featuresRtree_.forEachInExtent(a,function(e){if(u(e)){var t=e.getGeometry(),h=s;if((s=t.closestPointXY(r,n,o,s))<h){i=e;var l=Math.sqrt(s);a[0]=r-l,a[1]=n-l,a[2]=r+l,a[3]=n+l}}}),i},_.prototype.getExtent=function(e){return this.featuresRtree_.getExtent(e)},_.prototype.getFeatureById=function(e){var t=this.idIndex_[e.toString()];return void 0!==t?t:null},_.prototype.getFeatureByUid=function(e){var t=this.uidIndex_[e];return void 0!==t?t:null},_.prototype.getFormat=function(){return this.format_},_.prototype.getOverlaps=function(){return this.overlaps_},_.prototype.getUrl=function(){return this.url_},_.prototype.handleFeatureChange_=function(t){var r=t.target,n=(0,e.getUid)(r),i=r.getGeometry();if(i){var o=i.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(o,r)):this.featuresRtree_&&this.featuresRtree_.update(o,r)}else n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(r),this.nullGeometryFeatures_[n]=r);var s=r.getId();if(void 0!==s){var a=s.toString();this.idIndex_[a]!==r&&(this.removeFromIdIndex_(r),this.idIndex_[a]=r)}else this.removeFromIdIndex_(r),this.uidIndex_[n]=r;this.changed(),this.dispatchEvent(new x(v.default.CHANGEFEATURE,r))},_.prototype.hasFeature=function(t){var r=t.getId();return void 0!==r?r in this.idIndex_:(0,e.getUid)(t)in this.uidIndex_},_.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&(0,c.isEmpty)(this.nullGeometryFeatures_)},_.prototype.loadFeatures=function(e,t,r){var n=this.loadedExtentsRtree_,i=this.strategy_(e,t);this.loading=!1;for(var o=function(e,o){var a=i[e];n.forEachInExtent(a,function(e){return(0,h.containsExtent)(e.extent,a)})||(s.loader_.call(s,a,t,r),n.insert(a,{extent:a.slice()}),s.loading=s.loader_!==d.VOID)},s=this,a=0,u=i.length;a<u;++a)o(a)},_.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),a.prototype.refresh.call(this)},_.prototype.removeLoadedExtent=function(e){var t,r=this.loadedExtentsRtree_;r.forEachInExtent(e,function(r){if((0,h.equals)(r.extent,e))return t=r,!0}),t&&r.remove(t)},_.prototype.removeFeature=function(t){var r=(0,e.getUid)(t);r in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[r]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},_.prototype.removeFeatureInternal=function(t){var r=(0,e.getUid)(t);this.featureChangeKeys_[r].forEach(s.unlistenByKey),delete this.featureChangeKeys_[r];var n=t.getId();void 0!==n&&delete this.idIndex_[n.toString()],delete this.uidIndex_[r],this.dispatchEvent(new x(v.default.REMOVEFEATURE,t))},_.prototype.removeFromIdIndex_=function(e){var t=!1;for(var r in this.idIndex_)if(this.idIndex_[r]===e){delete this.idIndex_[r],t=!0;break}return t},_.prototype.setLoader=function(e){this.loader_=e},_.prototype.setUrl=function(e){(0,o.assert)(this.format_,7),this.setLoader((0,l.xhr)(e,this.format_))},_}(_.default),I=F;exports.default=I;
},{"../util.js":"KniQ","../Collection.js":"FnDa","../CollectionEventType.js":"BTrx","../ObjectEventType.js":"zehl","../array.js":"luEr","../asserts.js":"fLG6","../events.js":"UqnM","../events/Event.js":"fKNg","../events/EventType.js":"C8cu","../extent.js":"QDir","../featureloader.js":"U3JP","../functions.js":"RgA2","../loadingstrategy.js":"JpXE","../obj.js":"mH6q","./Source.js":"H38a","./State.js":"iC8j","./VectorEventType.js":"s8Fc","../structs/RBush.js":"MiUH"}],"w0c6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.greatCircleArc=n,exports.meridian=e,exports.parallel=o;var t=require("../../math.js"),a=require("../../proj.js");function r(a,r,n){for(var e,o,s,i,u,p,h=[],c=a(0),M=a(1),f=r(c),g=r(M),d=[M,c],l=[g,f],v=[1,0],R={},m=1e5;--m>0&&v.length>0;)s=v.pop(),c=d.pop(),f=l.pop(),(p=s.toString())in R||(h.push(f[0],f[1]),R[p]=!0),i=v.pop(),M=d.pop(),g=l.pop(),o=r(e=a(u=(s+i)/2)),(0,t.squaredSegmentDistance)(o[0],o[1],f[0],f[1],g[0],g[1])<n?(h.push(g[0],g[1]),R[p=i.toString()]=!0):(v.push(i,u,u,s),l.push(g,o,o,f),d.push(M,e,e,c));return h}function n(n,e,o,s,i,u){var p=(0,a.get)("EPSG:4326"),h=Math.cos((0,t.toRadians)(e)),c=Math.sin((0,t.toRadians)(e)),M=Math.cos((0,t.toRadians)(s)),f=Math.sin((0,t.toRadians)(s)),g=Math.cos((0,t.toRadians)(o-n)),d=Math.sin((0,t.toRadians)(o-n)),l=c*f+h*M*g;return r(function(a){if(1<=l)return[o,s];var r=a*Math.acos(l),e=Math.cos(r),i=Math.sin(r),u=d*M,p=h*f-c*M*g,v=Math.atan2(u,p),R=Math.asin(c*e+h*i*Math.cos(v)),m=(0,t.toRadians)(n)+Math.atan2(Math.sin(v)*i*h,e-c*Math.sin(R));return[(0,t.toDegrees)(m),(0,t.toDegrees)(R)]},(0,a.getTransform)(p,i),u)}function e(t,n,e,o,s){var i=(0,a.get)("EPSG:4326");return r(function(a){return[t,n+(e-n)*a]},(0,a.getTransform)(i,o),s)}function o(t,n,e,o,s){var i=(0,a.get)("EPSG:4326");return r(function(a){return[n+(e-n)*a,t]},(0,a.getTransform)(i,o),s)}
},{"../../math.js":"B96G","../../proj.js":"Diht"}],"RvU2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toContext=a,exports.getVectorContext=s,exports.getRenderPixel=l,exports.renderDeclutterItems=u;var e=require("./has.js"),t=require("./transform.js"),r=o(require("./render/canvas/Immediate.js")),i=require("./renderer/vector.js"),n=require("./proj.js");function o(e){return e&&e.__esModule?e:{default:e}}function a(i,n){var o=i.canvas,a=n||{},s=a.pixelRatio||e.DEVICE_PIXEL_RATIO,l=a.size;l&&(o.width=l[0]*s,o.height=l[1]*s,o.style.width=l[0]+"px",o.style.height=l[1]+"px");var u=[0,0,o.width,o.height],c=(0,t.scale)((0,t.create)(),s,s);return new r.default(i,s,u,c,0)}function s(e){var o,a=e.frameState,s=(0,t.multiply)(e.inversePixelTransform.slice(),a.coordinateToPixelTransform),l=(0,i.getSquaredTolerance)(a.viewState.resolution,a.pixelRatio),u=(0,n.getUserProjection)();return u&&(o=(0,n.getTransformFromProjections)(u,a.viewState.projection)),new r.default(e.context,a.pixelRatio,a.extent,s,a.viewState.rotation,l,o)}function l(e,r){var i=r.slice(0);return(0,t.apply)(e.inversePixelTransform.slice(),i),i}function u(e,t){t&&t.clear();for(var r=e.declutterItems,i=r.length-1;i>=0;--i)for(var n=r[i],o=n.items,a=0,s=o.length;a<s;a+=3)t=o[a].renderDeclutter(o[a+1],o[a+2],n.opacity,t);return r.length=0,t}
},{"./has.js":"f3Nv","./transform.js":"P4eA","./render/canvas/Immediate.js":"fo6K","./renderer/vector.js":"UCah","./proj.js":"Diht"}],"wXs0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=b(require("./Vector.js")),e=require("../obj.js"),a=require("../coordinate.js"),i=b(require("../style/Text.js")),r=b(require("../style/Fill.js")),s=b(require("../style/Stroke.js")),n=b(require("../geom/LineString.js")),l=b(require("../source/Vector.js")),o=require("../proj.js"),h=require("../extent.js"),_=require("../math.js"),m=b(require("../style/Style.js")),L=b(require("../Feature.js")),d=require("../geom/flat/geodesic.js"),u=b(require("../geom/GeometryLayout.js")),p=b(require("../geom/Point.js")),f=b(require("../Collection.js")),c=require("../render.js"),g=b(require("../render/EventType.js"));function b(t){return t&&t.__esModule?t:{default:t}}var x=function(){var t=function(e,a){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(e,a)};return function(e,a){function i(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(i.prototype=a.prototype,new i)}}(),v=new s.default({color:"rgba(0,0,0,0.2)"}),y=[90,45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001],S=function(t){function b(n){var o=this,h=n||{},_=(0,e.assign)({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},h);return delete _.maxLines,delete _.strokeStyle,delete _.targetSize,delete _.showLabels,delete _.lonLabelFormatter,delete _.latLabelFormatter,delete _.lonLabelPosition,delete _.latLabelPosition,delete _.lonLabelStyle,delete _.latLabelStyle,delete _.intervals,(o=t.call(this,_)||this).projection_=null,o.maxLat_=1/0,o.maxLon_=1/0,o.minLat_=-1/0,o.minLon_=-1/0,o.maxX_=1/0,o.maxY_=1/0,o.minX_=-1/0,o.minY_=-1/0,o.targetSize_=void 0!==h.targetSize?h.targetSize:100,o.maxLines_=void 0!==h.maxLines?h.maxLines:100,o.meridians_=[],o.parallels_=[],o.strokeStyle_=void 0!==h.strokeStyle?h.strokeStyle:v,o.fromLonLatTransform_=void 0,o.toLonLatTransform_=void 0,o.projectionCenterLonLat_=null,o.bottomLeft_=null,o.bottomRight_=null,o.topLeft_=null,o.topRight_=null,o.meridiansLabels_=null,o.parallelsLabels_=null,h.showLabels&&(o.lonLabelFormatter_=null==h.lonLabelFormatter?a.degreesToStringHDMS.bind(o,"EW"):h.lonLabelFormatter,o.latLabelFormatter_=null==h.latLabelFormatter?a.degreesToStringHDMS.bind(o,"NS"):h.latLabelFormatter,o.lonLabelPosition_=null==h.lonLabelPosition?0:h.lonLabelPosition,o.latLabelPosition_=null==h.latLabelPosition?1:h.latLabelPosition,o.lonLabelStyleBase_=new m.default({text:void 0!==h.lonLabelStyle?h.lonLabelStyle.clone():new i.default({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new r.default({color:"rgba(0,0,0,1)"}),stroke:new s.default({color:"rgba(255,255,255,1)",width:3})})}),o.lonLabelStyle_=function(t){var e=t.get("graticule_label");return this.lonLabelStyleBase_.getText().setText(e),this.lonLabelStyleBase_}.bind(o),o.latLabelStyleBase_=new m.default({text:void 0!==h.latLabelStyle?h.latLabelStyle.clone():new i.default({font:"12px Calibri,sans-serif",textAlign:"right",fill:new r.default({color:"rgba(0,0,0,1)"}),stroke:new s.default({color:"rgba(255,255,255,1)",width:3})})}),o.latLabelStyle_=function(t){var e=t.get("graticule_label");return this.latLabelStyleBase_.getText().setText(e),this.latLabelStyleBase_}.bind(o),o.meridiansLabels_=[],o.parallelsLabels_=[],o.addEventListener(g.default.POSTRENDER,o.drawLabels_.bind(o))),o.intervals_=void 0!==h.intervals?h.intervals:y,o.setSource(new l.default({loader:o.loaderFunction.bind(o),strategy:o.strategyFunction.bind(o),features:new f.default,overlaps:!1,useSpatialIndex:!1,wrapX:h.wrapX})),o.featurePool_=[],o.lineStyle_=new m.default({stroke:o.strokeStyle_}),o.loadedExtent_=null,o.renderedExtent_=null,o.setRenderOrder(null),o}return x(b,t),b.prototype.strategyFunction=function(t,e){var a=t.slice();return this.projection_&&this.getSource().getWrapX()&&(0,h.wrapX)(a,this.projection_),this.loadedExtent_&&((0,h.approximatelyEquals)(this.loadedExtent_,a,e)?a=this.loadedExtent_.slice():this.getSource().removeLoadedExtent(this.loadedExtent_)),[a]},b.prototype.loaderFunction=function(t,e,a){this.loadedExtent_=t;var i=this.getSource(),r=this.getExtent()||[-1/0,-1/0,1/0,1/0],s=(0,h.getIntersection)(r,t);if(!(this.renderedExtent_&&(0,h.equals)(this.renderedExtent_,s)||(this.renderedExtent_=s,(0,h.isEmpty)(s)))){var n=(0,h.getCenter)(s),l=e*e/4;(!this.projection_||!(0,o.equivalent)(this.projection_,a))&&this.updateProjectionInfo_(a),this.createGraticule_(s,n,e,l);var _,m=this.meridians_.length+this.parallels_.length;for(this.meridiansLabels_&&(m+=this.meridians_.length),this.parallelsLabels_&&(m+=this.parallels_.length);m>this.featurePool_.length;)_=new L.default,this.featurePool_.push(_);var d=i.getFeaturesCollection();d.clear();var u,p,f=0;for(u=0,p=this.meridians_.length;u<p;++u)(_=this.featurePool_[f++]).setGeometry(this.meridians_[u]),_.setStyle(this.lineStyle_),d.push(_);for(u=0,p=this.parallels_.length;u<p;++u)(_=this.featurePool_[f++]).setGeometry(this.parallels_[u]),_.setStyle(this.lineStyle_),d.push(_)}},b.prototype.addMeridian_=function(t,e,a,i,r,s){var n=this.getMeridian_(t,e,a,i,s);if((0,h.intersects)(n.getExtent(),r)){if(this.meridiansLabels_){var l=this.lonLabelFormatter_(t);s in this.meridiansLabels_?this.meridiansLabels_[s].text=l:this.meridiansLabels_[s]={geom:new p.default([]),text:l}}this.meridians_[s++]=n}return s},b.prototype.addParallel_=function(t,e,a,i,r,s){var n=this.getParallel_(t,e,a,i,s);if((0,h.intersects)(n.getExtent(),r)){if(this.parallelsLabels_){var l=this.latLabelFormatter_(t);s in this.parallelsLabels_?this.parallelsLabels_[s].text=l:this.parallelsLabels_[s]={geom:new p.default([]),text:l}}this.parallels_[s++]=n}return s},b.prototype.drawLabels_=function(t){var e=t.frameState.viewState.rotation,a=t.frameState.extent,i=(0,h.getCenter)(a),r=a;if(e){var s=(0,h.getWidth)(a),n=(0,h.getHeight)(a),l=Math.abs(Math.cos(e)),o=Math.abs(Math.sin(e)),_=(o*n-l*s)/(o*o-l*l),m=(o*s-l*n)/(o*o-l*l);r=[i[0]-_/2,i[1]-m/2,i[0]+_/2,i[1]+m/2]}var L=0,d=0,u=this.latLabelPosition_<.5,p=this.projection_.getExtent(),f=(0,h.getWidth)(p);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!(0,h.containsExtent)(p,a)&&(L=Math.floor((a[0]-p[0])/f),d=Math.ceil((a[2]-p[2])/f),u=u!==Math.abs(e)>Math.PI/2);for(var g=(0,c.getVectorContext)(t),b=L;b<=d;++b){var x=this.meridians_.length+this.parallels_.length,v=void 0,y=void 0,S=void 0,j=void 0;if(this.meridiansLabels_)for(y=0,S=this.meridiansLabels_.length;y<S;++y){var M=this.meridians_[y];if(e||0!==b)(P=M.clone()).translate(b*f,0),P.rotate(-e,i),(j=this.getMeridianPoint_(P,r,y)).rotate(e,i);else j=this.getMeridianPoint_(M,a,y);(v=this.featurePool_[x++]).setGeometry(j),v.set("graticule_label",this.meridiansLabels_[y].text),g.drawFeature(v,this.lonLabelStyle_(v))}if(this.parallelsLabels_&&(b===L&&u||b===d&&!u))for(y=0,S=this.parallels_.length;y<S;++y){var P;M=this.parallels_[y];if(e||0!==b)(P=M.clone()).translate(b*f,0),P.rotate(-e,i),(j=this.getParallelPoint_(P,r,y)).rotate(e,i);else j=this.getParallelPoint_(M,a,y);(v=this.featurePool_[x++]).setGeometry(j),v.set("graticule_label",this.parallelsLabels_[y].text),g.drawFeature(v,this.latLabelStyle_(v))}}},b.prototype.createGraticule_=function(t,e,a,i){var r=this.getInterval_(a);if(-1==r)return this.meridians_.length=0,this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),void(this.parallelsLabels_&&(this.parallelsLabels_.length=0));var s=!1,n=this.projection_.getExtent(),l=(0,h.getWidth)(n);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!(0,h.containsExtent)(n,t)&&((0,h.getWidth)(t)>=l?(t[0]=n[0],t[2]=n[2]):s=!0);var o=[(0,_.clamp)(e[0],this.minX_,this.maxX_),(0,_.clamp)(e[1],this.minY_,this.maxY_)],m=this.toLonLatTransform_(o);isNaN(m[1])&&(m[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_);var L,d,u,p,f=(0,_.clamp)(m[0],this.minLon_,this.maxLon_),c=(0,_.clamp)(m[1],this.minLat_,this.maxLat_),g=this.maxLines_,b=t;s||(b=[(0,_.clamp)(t[0],this.minX_,this.maxX_),(0,_.clamp)(t[1],this.minY_,this.maxY_),(0,_.clamp)(t[2],this.minX_,this.maxX_),(0,_.clamp)(t[3],this.minY_,this.maxY_)]);var x=(0,h.applyTransform)(b,this.toLonLatTransform_,void 0,8),v=x[3],y=x[2],S=x[1],j=x[0];if(s||((0,h.containsCoordinate)(b,this.bottomLeft_)&&(j=this.minLon_,S=this.minLat_),(0,h.containsCoordinate)(b,this.bottomRight_)&&(y=this.maxLon_,S=this.minLat_),(0,h.containsCoordinate)(b,this.topLeft_)&&(j=this.minLon_,v=this.maxLat_),(0,h.containsCoordinate)(b,this.topRight_)&&(y=this.maxLon_,v=this.maxLat_),v=(0,_.clamp)(v,c,this.maxLat_),y=(0,_.clamp)(y,f,this.maxLon_),S=(0,_.clamp)(S,this.minLat_,c),j=(0,_.clamp)(j,this.minLon_,f)),f=Math.floor(f/r)*r,p=(0,_.clamp)(f,this.minLon_,this.maxLon_),d=this.addMeridian_(p,S,v,i,t,0),L=0,s)for(;(p-=r)>=j&&L++<g;)d=this.addMeridian_(p,S,v,i,t,d);else for(;p!=this.minLon_&&L++<g;)p=Math.max(p-r,this.minLon_),d=this.addMeridian_(p,S,v,i,t,d);if(p=(0,_.clamp)(f,this.minLon_,this.maxLon_),L=0,s)for(;(p+=r)<=y&&L++<g;)d=this.addMeridian_(p,S,v,i,t,d);else for(;p!=this.maxLon_&&L++<g;)p=Math.min(p+r,this.maxLon_),d=this.addMeridian_(p,S,v,i,t,d);for(this.meridians_.length=d,this.meridiansLabels_&&(this.meridiansLabels_.length=d),c=Math.floor(c/r)*r,u=(0,_.clamp)(c,this.minLat_,this.maxLat_),d=this.addParallel_(u,j,y,i,t,0),L=0;u!=this.minLat_&&L++<g;)u=Math.max(u-r,this.minLat_),d=this.addParallel_(u,j,y,i,t,d);for(u=(0,_.clamp)(c,this.minLat_,this.maxLat_),L=0;u!=this.maxLat_&&L++<g;)u=Math.min(u+r,this.maxLat_),d=this.addParallel_(u,j,y,i,t,d);this.parallels_.length=d,this.parallelsLabels_&&(this.parallelsLabels_.length=d)},b.prototype.getInterval_=function(t){for(var e=this.projectionCenterLonLat_[0],a=this.projectionCenterLonLat_[1],i=-1,r=Math.pow(this.targetSize_*t,2),s=[],n=[],l=0,o=this.intervals_.length;l<o;++l){var h=(0,_.clamp)(this.intervals_[l]/2,0,90),m=(0,_.clamp)(a,-90+h,90-h);if(s[0]=e-h,s[1]=m-h,n[0]=e+h,n[1]=m+h,this.fromLonLatTransform_(s,s),this.fromLonLatTransform_(n,n),Math.pow(n[0]-s[0],2)+Math.pow(n[1]-s[1],2)<=r)break;i=this.intervals_[l]}return i},b.prototype.getMeridian_=function(t,e,a,i,r){var s=(0,d.meridian)(t,e,a,this.projection_,i),l=this.meridians_[r];return l?(l.setFlatCoordinates(u.default.XY,s),l.changed()):(l=new n.default(s,u.default.XY),this.meridians_[r]=l),l},b.prototype.getMeridianPoint_=function(t,e,a){var i=t.getFlatCoordinates(),r=1,s=i.length-1;i[r]>i[s]&&(r=s,s=1);var n=Math.max(e[1],i[r]),l=Math.min(e[3],i[s]),o=(0,_.clamp)(e[1]+Math.abs(e[1]-e[3])*this.lonLabelPosition_,n,l),h=[i[r-1]+(i[s-1]-i[r-1])*(o-i[r])/(i[s]-i[r]),o],m=this.meridiansLabels_[a].geom;return m.setCoordinates(h),m},b.prototype.getMeridians=function(){return this.meridians_},b.prototype.getParallel_=function(t,e,a,i,r){var s=(0,d.parallel)(t,e,a,this.projection_,i),l=this.parallels_[r];return l?(l.setFlatCoordinates(u.default.XY,s),l.changed()):l=new n.default(s,u.default.XY),l},b.prototype.getParallelPoint_=function(t,e,a){var i=t.getFlatCoordinates(),r=0,s=i.length-2;i[r]>i[s]&&(r=s,s=0);var n=Math.max(e[0],i[r]),l=Math.min(e[2],i[s]),o=(0,_.clamp)(e[0]+Math.abs(e[0]-e[2])*this.latLabelPosition_,n,l),h=[o,i[r+1]+(i[s+1]-i[r+1])*(o-i[r])/(i[s]-i[r])],m=this.parallelsLabels_[a].geom;return m.setCoordinates(h),m},b.prototype.getParallels=function(){return this.parallels_},b.prototype.updateProjectionInfo_=function(t){var e=(0,o.get)("EPSG:4326"),a=t.getWorldExtent();this.maxLat_=a[3],this.maxLon_=a[2],this.minLat_=a[1],this.minLon_=a[0];var i=(0,o.getTransform)(t,e);if(this.minLon_<this.maxLon_)this.toLonLatTransform_=i;else{var r=this.minLon_+this.maxLon_/2;this.maxLon_+=360,this.toLonLatTransform_=function(t,e,a){for(var s=a||2,n=i(t,e,s),l=0,o=n.length;l<o;l+=s)n[l]<r&&(n[l]+=360);return n}}this.fromLonLatTransform_=(0,o.getTransform)(e,t);var s=(0,h.applyTransform)([this.minLon_,this.minLat_,this.maxLon_,this.maxLat_],this.fromLonLatTransform_,void 0,8);this.minX_=s[0],this.maxX_=s[2],this.minY_=s[1],this.maxY_=s[3],this.bottomLeft_=this.fromLonLatTransform_([this.minLon_,this.minLat_]),this.bottomRight_=this.fromLonLatTransform_([this.maxLon_,this.minLat_]),this.topLeft_=this.fromLonLatTransform_([this.minLon_,this.maxLat_]),this.topRight_=this.fromLonLatTransform_([this.maxLon_,this.maxLat_]),this.projectionCenterLonLat_=this.toLonLatTransform_((0,h.getCenter)(t.getExtent())),isNaN(this.projectionCenterLonLat_[1])&&(this.projectionCenterLonLat_[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_),this.projection_=t},b}(t.default),j=S;exports.default=j;
},{"./Vector.js":"dflx","../obj.js":"mH6q","../coordinate.js":"nGsj","../style/Text.js":"RPsG","../style/Fill.js":"AFcg","../style/Stroke.js":"TXDt","../geom/LineString.js":"DfxW","../source/Vector.js":"ZS12","../proj.js":"Diht","../extent.js":"QDir","../math.js":"B96G","../style/Style.js":"he4w","../Feature.js":"mYW9","../geom/flat/geodesic.js":"w0c6","../geom/GeometryLayout.js":"Utvi","../geom/Point.js":"gLcY","../Collection.js":"FnDa","../render.js":"RvU2","../render/EventType.js":"z39m"}],"K7j2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./ImageBase.js")),e=r(require("./ImageState.js"));function r(t){return t&&t.__esModule?t:{default:t}}var o=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),n=function(t){function r(r,o,n,a,u){var i=this,s=void 0!==u?e.default.IDLE:e.default.LOADED;return(i=t.call(this,r,o,n,s)||this).loader_=void 0!==u?u:null,i.canvas_=a,i.error_=null,i}return o(r,t),r.prototype.getError=function(){return this.error_},r.prototype.handleLoad_=function(t){t?(this.error_=t,this.state=e.default.ERROR):this.state=e.default.LOADED,this.changed()},r.prototype.load=function(){this.state==e.default.IDLE&&(this.state=e.default.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))},r.prototype.getImage=function(){return this.canvas_},r}(t.default),a=n;exports.default=a;
},{"./ImageBase.js":"Ojbp","./ImageState.js":"u3kG"}],"IeCz":[function(require,module,exports) {
"use strict";function e(e){return Math.pow(e,3)}function t(t){return 1-e(1-t)}function n(e){return 3*e*e-2*e*e*e}function r(e){return e}function u(e){return e<.5?n(2*e):1-n(2*(e-.5))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.easeIn=e,exports.easeOut=t,exports.inAndOut=n,exports.linear=r,exports.upAndDown=u;
},{}],"IWZI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("./TileState.js")),e=require("./easing.js"),i=o(require("./events/Target.js")),r=o(require("./events/EventType.js")),n=require("./util.js");function o(t){return t&&t.__esModule?t:{default:t}}var s=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),a=function(i){function o(t,e,r){var n=i.call(this)||this,o=r||{};return n.tileCoord=t,n.state=e,n.interimTile=null,n.hifi=!0,n.key="",n.transition_=void 0===o.transition?250:o.transition,n.transitionStarts_={},n}return s(o,i),o.prototype.changed=function(){this.dispatchEvent(r.default.CHANGE)},o.prototype.release=function(){},o.prototype.getKey=function(){return this.key+"/"+this.tileCoord},o.prototype.getInterimTile=function(){if(!this.interimTile)return this;var e=this.interimTile;do{if(e.getState()==t.default.LOADED)return this.transition_=0,e;e=e.interimTile}while(e);return this},o.prototype.refreshInterimChain=function(){if(this.interimTile){var e=this.interimTile,i=this;do{if(e.getState()==t.default.LOADED){e.interimTile=null;break}e.getState()==t.default.LOADING?i=e:e.getState()==t.default.IDLE?i.interimTile=e.interimTile:i=e,e=i.interimTile}while(e)}},o.prototype.getTileCoord=function(){return this.tileCoord},o.prototype.getState=function(){return this.state},o.prototype.setState=function(e){if(this.state!==t.default.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()},o.prototype.load=function(){(0,n.abstract)()},o.prototype.getAlpha=function(t,i){if(!this.transition_)return 1;var r=this.transitionStarts_[t];if(r){if(-1===r)return 1}else r=i,this.transitionStarts_[t]=r;var n=i-r+1e3/60;return n>=this.transition_?1:(0,e.easeIn)(n/this.transition_)},o.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},o.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},o}(i.default),u=a;exports.default=u;
},{"./TileState.js":"u3kG","./easing.js":"IeCz","./events/Target.js":"CR4Y","./events/EventType.js":"C8cu","./util.js":"KniQ"}],"TOsW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./Tile.js")),e=r(require("./TileState.js")),i=require("./dom.js"),n=require("./Image.js");function r(t){return t&&t.__esModule?t:{default:t}}var s=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),a=function(t){function i(e,i,n,r,s,a){var o=t.call(this,e,i,a)||this;return o.crossOrigin_=r,o.src_=n,o.image_=new Image,null!==r&&(o.image_.crossOrigin=r),o.unlisten_=null,o.tileLoadFunction_=s,o}return s(i,t),i.prototype.getImage=function(){return this.image_},i.prototype.getKey=function(){return this.src_},i.prototype.handleImageError_=function(){this.state=e.default.ERROR,this.unlistenImage_(),this.image_=o(),this.changed()},i.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=e.default.LOADED:this.state=e.default.EMPTY,this.unlistenImage_(),this.changed()},i.prototype.load=function(){this.state==e.default.ERROR&&(this.state=e.default.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==e.default.IDLE&&(this.state=e.default.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=(0,n.listenImage)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},i.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},i}(t.default);function o(){var t=(0,i.createCanvasContext2D)(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}var u=a;exports.default=u;
},{"./Tile.js":"IWZI","./TileState.js":"u3kG","./dom.js":"Xno5","./Image.js":"DHWK"}],"gAnK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=function(){function t(t,i,n){this.decay_=t,this.minVelocity_=i,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}return t.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},t.prototype.update=function(t,i){this.points_.push(t,i,Date.now())},t.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,i=this.points_.length-3;if(this.points_[i+2]<t)return!1;for(var n=i-3;n>0&&this.points_[n+2]>t;)n-=3;var e=this.points_[i+2]-this.points_[n+2];if(e<1e3/60)return!1;var s=this.points_[i]-this.points_[n],o=this.points_[i+1]-this.points_[n+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/e,this.initialVelocity_>this.minVelocity_},t.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},t.prototype.getAngle=function(){return this.angle_},t}(),i=t;exports.default=i;
},{}],"vFcA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./events/Event.js"));function e(t){return t&&t.__esModule?t:{default:t}}var r=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),n=function(t){function e(e,r,n){var o=t.call(this,e)||this;return o.map=r,o.frameState=void 0!==n?n:null,o}return r(e,t),e}(t.default),o=n;exports.default=o;
},{"./events/Event.js":"fKNg"}],"HMLS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./MapEvent.js"));function e(t){return t&&t.__esModule?t:{default:t}}var o=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),n=function(t){function e(e,o,n,r,i){var p=t.call(this,e,o,i)||this;return p.originalEvent=n,p.pixel_=null,p.coordinate_=null,p.dragging=void 0!==r&&r,p}return o(e,t),Object.defineProperty(e.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t},enumerable:!0,configurable:!0}),e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},e}(t.default),r=n;exports.default=r;
},{"./MapEvent.js":"vFcA"}],"tMKf":[function(require,module,exports) {
var e=null,t=null;function n(){Element.prototype.setPointerCapture=Element.prototype.setCapture,Element.prototype.releasePointerCapture=Element.prototype.releaseCapture}function o(e,n,o){e.addEventListener(n,function(e){var r=new MouseEvent(o,e);r.pointerId=1,r.isPrimary=!0,r.pointerType="mouse",r.width=1,r.height=1,r.tiltX=0,r.tiltY=0,"buttons"in e&&0!==e.buttons?r.pressure=.5:r.pressure=0;var i=e.target;null!==t&&(i=t,"mouseup"===n&&(t=null)),i.dispatchEvent(r),r.defaultPrevented&&e.preventDefault()})}function r(t,n,o){t.addEventListener(n,function(t){for(var r=t.changedTouches,i=r.length,u=0;u<i;u++){var l=new CustomEvent(o,{bubbles:!0,cancelable:!0});l.ctrlKey=t.ctrlKey,l.shiftKey=t.shiftKey,l.altKey=t.altKey,l.metaKey=t.metaKey;var a=r.item(u);l.clientX=a.clientX,l.clientY=a.clientY,l.screenX=a.screenX,l.screenY=a.screenY,l.pageX=a.pageX,l.pageY=a.pageY;var p=a.target.getBoundingClientRect();l.offsetX=a.clientX-p.left,l.offsetY=a.clientY-p.top,l.pointerId=1+a.identifier,l.button=0,l.buttons=1,l.movementX=0,l.movementY=0,l.region=null,l.relatedTarget=null,l.x=l.clientX,l.y=l.clientY,l.pointerType="touch",l.width=1,l.height=1,l.tiltX=0,l.tiltY=0,l.pressure=1,"touchstart"===n&&null===e&&(e=a.identifier),l.isPrimary=a.identifier===e,"touchend"===n&&l.isPrimary&&(e=null),t.target.dispatchEvent(l),l.defaultPrevented&&t.preventDefault()}})}"PointerEvent"in window||(n(),"TouchEvent"in window||(o(document,"mousedown","pointerdown"),o(document,"mousemove","pointermove"),o(document,"mouseup","pointerup")),r(document,"touchstart","pointerdown"),r(document,"touchmove","pointermove"),r(document,"touchend","pointerup"));
},{}],"YhDM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./events/EventType.js"));function t(e){return e&&e.__esModule?e:{default:e}}var r={SINGLECLICK:"singleclick",CLICK:e.default.CLICK,DBLCLICK:e.default.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};exports.default=r;
},{"./events/EventType.js":"C8cu"}],"J1WQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./MapBrowserEvent.js"));function e(t){return t&&t.__esModule?t:{default:t}}var r=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),o=function(t){function e(e,r,o,n,u){var i=t.call(this,e,r,o,n,u)||this;return i.pointerEvent=o,i}return r(e,t),e}(t.default),n=o;exports.default=n;
},{"./MapBrowserEvent.js":"HMLS"}],"TaSm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};exports.default=e;
},{}],"ohHk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("elm-pep");var e=require("./has.js"),t=a(require("./MapBrowserEventType.js")),i=a(require("./MapBrowserPointerEvent.js")),n=require("./events.js"),o=a(require("./events/Target.js")),s=a(require("./pointer/EventType.js")),r=a(require("./events/EventType.js"));function a(e){return e&&e.__esModule?e:{default:e}}var u=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),d=function(o){function a(t,i){var a=o.call(this,t)||this;a.map_=t,a.clickTimeoutId_,a.dragging_=!1,a.dragListenerKeys_=[],a.moveTolerance_=i?i*e.DEVICE_PIXEL_RATIO:e.DEVICE_PIXEL_RATIO,a.down_=null;var u=a.map_.getViewport();return a.activePointers_=0,a.trackedTouches_={},a.element_=u,a.pointerdownListenerKey_=(0,n.listen)(u,s.default.POINTERDOWN,a.handlePointerDown_,a),a.originalPointerMoveEvent_,a.relayedListenerKey_=(0,n.listen)(u,s.default.POINTERMOVE,a.relayEvent_,a),a.boundHandleTouchMove_=a.handleTouchMove_.bind(a),a.element_.addEventListener(r.default.TOUCHMOVE,a.boundHandleTouchMove_,!!e.PASSIVE_EVENT_LISTENERS&&{passive:!1}),a}return u(a,o),a.prototype.emulateClick_=function(e){var n=new i.default(t.default.CLICK,this.map_,e);this.dispatchEvent(n),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,n=new i.default(t.default.DBLCLICK,this.map_,e),this.dispatchEvent(n)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var n=new i.default(t.default.SINGLECLICK,this.map_,e);this.dispatchEvent(n)}.bind(this),250)},a.prototype.updateActivePointers_=function(e){var i=e;i.type==t.default.POINTERUP||i.type==t.default.POINTERCANCEL?delete this.trackedTouches_[i.pointerId]:i.type==t.default.POINTERDOWN&&(this.trackedTouches_[i.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},a.prototype.handlePointerUp_=function(e){this.updateActivePointers_(e);var o=new i.default(t.default.POINTERUP,this.map_,e);this.dispatchEvent(o),o.propagationStopped||this.dragging_||!this.isMouseActionButton_(e)||this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(n.unlistenByKey),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},a.prototype.isMouseActionButton_=function(e){return 0===e.button},a.prototype.handlePointerDown_=function(e){this.updateActivePointers_(e);var o=new i.default(t.default.POINTERDOWN,this.map_,e);this.dispatchEvent(o),this.down_=e,0===this.dragListenerKeys_.length&&this.dragListenerKeys_.push((0,n.listen)(document,t.default.POINTERMOVE,this.handlePointerMove_,this),(0,n.listen)(document,t.default.POINTERUP,this.handlePointerUp_,this),(0,n.listen)(this.element_,t.default.POINTERCANCEL,this.handlePointerUp_,this))},a.prototype.handlePointerMove_=function(e){if(this.isMoving_(e)){this.dragging_=!0;var n=new i.default(t.default.POINTERDRAG,this.map_,e,this.dragging_);this.dispatchEvent(n)}},a.prototype.relayEvent_=function(e){this.originalPointerMoveEvent_=e;var t=!(!this.down_||!this.isMoving_(e));this.dispatchEvent(new i.default(e.type,this.map_,e,t))},a.prototype.handleTouchMove_=function(e){this.originalPointerMoveEvent_&&!this.originalPointerMoveEvent_.defaultPrevented||e.preventDefault()},a.prototype.isMoving_=function(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_},a.prototype.disposeInternal=function(){this.relayedListenerKey_&&((0,n.unlistenByKey)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(r.default.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&((0,n.unlistenByKey)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(n.unlistenByKey),this.dragListenerKeys_.length=0,this.element_=null,o.prototype.disposeInternal.call(this)},a}(o.default),l=d;exports.default=l;
},{"elm-pep":"tMKf","./has.js":"f3Nv","./MapBrowserEventType.js":"YhDM","./MapBrowserPointerEvent.js":"J1WQ","./events.js":"UqnM","./events/Target.js":"CR4Y","./pointer/EventType.js":"TaSm","./events/EventType.js":"C8cu"}],"xLGm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend"};exports.default=e;
},{}],"zlNQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};exports.default=e;
},{}],"RQLY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.DROP=void 0;var t=require("../asserts.js"),e=require("../obj.js"),i=1/0;exports.DROP=i;var n=function(){function n(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return n.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,(0,e.clear)(this.queuedElements_)},n.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,i=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var n=this.keyFunction_(i);return delete this.queuedElements_[n],i},n.prototype.enqueue=function(e){(0,t.assert)(!(this.keyFunction_(e)in this.queuedElements_),31);var n=this.priorityFunction_(e);return n!=i&&(this.elements_.push(e),this.priorities_.push(n),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},n.prototype.getCount=function(){return this.elements_.length},n.prototype.getLeftChildIndex_=function(t){return 2*t+1},n.prototype.getRightChildIndex_=function(t){return 2*t+2},n.prototype.getParentIndex_=function(t){return t-1>>1},n.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},n.prototype.isEmpty=function(){return 0===this.elements_.length},n.prototype.isKeyQueued=function(t){return t in this.queuedElements_},n.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},n.prototype.siftUp_=function(t){for(var e=this.elements_,i=this.priorities_,n=e.length,s=e[t],r=i[t],o=t;t<n>>1;){var u=this.getLeftChildIndex_(t),h=this.getRightChildIndex_(t),p=h<n&&i[h]<i[u]?h:u;e[t]=e[p],i[t]=i[p],t=p}e[t]=s,i[t]=r,this.siftDown_(o,t)},n.prototype.siftDown_=function(t,e){for(var i=this.elements_,n=this.priorities_,s=i[e],r=n[e];e>t;){var o=this.getParentIndex_(e);if(!(n[o]>r))break;i[e]=i[o],n[e]=n[o],e=o}i[e]=s,n[e]=r},n.prototype.reprioritize=function(){var t,e,n,s=this.priorityFunction_,r=this.elements_,o=this.priorities_,u=0,h=r.length;for(e=0;e<h;++e)(n=s(t=r[e]))==i?delete this.queuedElements_[this.keyFunction_(t)]:(o[u]=n,r[u++]=t);r.length=u,o.length=u,this.heapify_()},n}(),s=n;exports.default=s;
},{"../asserts.js":"fLG6","../obj.js":"mH6q"}],"tHOl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getTilePriority=s,exports.default=void 0;var e=o(require("./TileState.js")),t=o(require("./events/EventType.js")),n=i(require("./structs/PriorityQueue.js"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function o(e){return e&&e.__esModule?e:{default:e}}var a=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),u=function(n){function r(e,t){var r=n.call(this,function(t){return e.apply(null,t)},function(e){return e[0].getKey()})||this;return r.boundHandleTileChange_=r.handleTileChange.bind(r),r.tileChangeCallback_=t,r.tilesLoading_=0,r.tilesLoadingKeys_={},r}return a(r,n),r.prototype.enqueue=function(e){var r=n.prototype.enqueue.call(this,e);r&&e[0].addEventListener(t.default.CHANGE,this.boundHandleTileChange_);return r},r.prototype.getTilesLoading=function(){return this.tilesLoading_},r.prototype.handleTileChange=function(n){var r=n.target,i=r.getState();if(r.hifi&&i===e.default.LOADED||i===e.default.ERROR||i===e.default.EMPTY){r.removeEventListener(t.default.CHANGE,this.boundHandleTileChange_);var o=r.getKey();o in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[o],--this.tilesLoading_),this.tileChangeCallback_()}},r.prototype.loadMoreTiles=function(t,n){for(var r,i,o=0;this.tilesLoading_<t&&o<n&&this.getCount()>0;)i=(r=this.dequeue()[0]).getKey(),r.getState()!==e.default.IDLE||i in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[i]=!0,++this.tilesLoading_,++o,r.load())},r}(n.default),l=u;function s(e,t,r,i,o){if(!(e&&r in e.wantedTiles))return n.DROP;if(!e.wantedTiles[r][t.getKey()])return n.DROP;var a=e.viewState.center,u=i[0]-a[0],l=i[1]-a[1];return 65536*Math.log(o)+Math.sqrt(u*u+l*l)/o}exports.default=l;
},{"./TileState.js":"u3kG","./events/EventType.js":"C8cu","./structs/PriorityQueue.js":"RQLY"}],"mOEX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_TILE_SIZE=exports.DEFAULT_MAX_ZOOM=void 0;var e=42;exports.DEFAULT_MAX_ZOOM=e;var r=256;exports.DEFAULT_TILE_SIZE=r;
},{}],"Rc7z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createExtent=a,exports.none=e;var t=require("./math.js");function a(a,e,r){return function(n,o,u,h){if(n){var M=e?0:u[0]*o,c=e?0:u[1]*o,l=a[0]+M/2,x=a[2]-M/2,i=a[1]+c/2,m=a[3]-c/2;l>x&&(x=l=(x+l)/2),i>m&&(m=i=(m+i)/2);var s=(0,t.clamp)(n[0],l,x),p=(0,t.clamp)(n[1],i,m),f=30*o;return h&&r&&(s+=-f*Math.log(1+Math.max(0,l-n[0])/f)+f*Math.log(1+Math.max(0,n[0]-x)/f),p+=-f*Math.log(1+Math.max(0,i-n[1])/f)+f*Math.log(1+Math.max(0,n[1]-m)/f)),[s,p]}}}function e(t){return t}
},{"./math.js":"B96G"}],"o7nl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSnapToResolutions=i,exports.createSnapToPower=o,exports.createMinMaxResolution=h;var t=require("./array.js"),a=require("./extent.js"),r=require("./math.js");function e(t,r,e,n){var i=(0,a.getWidth)(r)/e[0],o=(0,a.getHeight)(r)/e[1];return n?Math.min(t,Math.max(i,o)):Math.min(t,Math.min(i,o))}function n(t,a,e){var n=Math.min(t,a);return n*=Math.log(1+50*Math.max(0,t/a-1))/50+1,e&&(n=Math.max(n,e),n/=Math.log(1+50*Math.max(0,e/t-1))/50+1),(0,r.clamp)(n,e/2,2*a)}function i(a,i,o,h){return function(u,M,l,c){if(void 0!==u){var m=a[0],f=a[a.length-1],v=o?e(m,o,l,h):m;if(c)return void 0===i||i?n(u,v,f):(0,r.clamp)(u,f,v);var s=Math.min(v,u),p=Math.floor((0,t.linearFindNearest)(a,s,M));return a[p]>v&&p<a.length-1?a[p+1]:a[p]}}}function o(t,a,i,o,h,u){return function(M,l,c,m){if(void 0!==M){var f=h?e(a,h,c,u):a,v=void 0!==i?i:0;if(m)return void 0===o||o?n(M,f,v):(0,r.clamp)(M,v,f);var s=Math.ceil(Math.log(a/f)/Math.log(t)-1e-9),p=-l*(.5-1e-9)+.5,d=Math.min(f,M),g=Math.floor(Math.log(a/d)/Math.log(t)+p),x=Math.max(s,g),j=a/Math.pow(t,x);return(0,r.clamp)(j,v,f)}}}function h(t,a,i,o,h){return function(u,M,l,c){if(void 0!==u){var m=o?e(t,o,l,h):t;return(void 0===i||i)&&c?n(u,m,a):(0,r.clamp)(u,a,m)}}}
},{"./array.js":"luEr","./extent.js":"QDir","./math.js":"B96G"}],"EKd0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.disable=e,exports.none=o,exports.createSnapToN=t,exports.createSnapToZero=n;var r=require("./math.js");function e(r){return void 0!==r?0:void 0}function o(r){return void 0!==r?r:void 0}function t(r){var e=2*Math.PI/r;return function(r,o){return o?r:void 0!==r?r=Math.floor(r/e+.5)*e:void 0}}function n(e){var o=e||(0,r.toRadians)(5);return function(r,e){return e?r:void 0!==r?Math.abs(r)<=o?0:r:void 0}}
},{"./math.js":"B96G"}],"cE7c":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};exports.default=e;
},{}],"hNqE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCenterConstraint=j,exports.createResolutionConstraint=x,exports.createRotationConstraint=A,exports.isNoopAnimation=E,exports.default=void 0;var t=require("./tilegrid/common.js"),o=require("./functions.js"),e=require("./centerconstraint.js"),n=v(require("./Object.js")),i=require("./resolutionconstraint.js"),r=require("./rotationconstraint.js"),s=v(require("./ViewHint.js")),a=v(require("./ViewProperty.js")),u=require("./array.js"),h=require("./asserts.js"),l=require("./coordinate.js"),c=require("./easing.js"),p=require("./extent.js"),g=v(require("./geom/GeometryType.js")),m=require("./geom/Polygon.js"),f=require("./math.js"),_=require("./obj.js"),d=require("./proj.js"),R=v(require("./proj/Units.js"));function v(t){return t&&t.__esModule?t:{default:t}}var y=function(){var t=function(o,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(o,e)};return function(o,e){function n(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),C=0,I=function(t){function e(o){var e=t.call(this)||this,n=(0,_.assign)({},o);return e.hints_=[0,0],e.animations_=[],e.updateAnimationKey_,e.projection_=(0,d.createProjection)(n.projection,"EPSG:3857"),e.viewportSize_=[100,100],e.targetCenter_=null,e.targetResolution_,e.targetRotation_,e.cancelAnchor_=void 0,n.center&&(n.center=(0,d.fromUserCoordinate)(n.center,e.projection_)),n.extent&&(n.extent=(0,d.fromUserExtent)(n.extent,e.projection_)),e.applyOptions_(n),e}return y(e,t),e.prototype.applyOptions_=function(t){var o=x(t);this.maxResolution_=o.maxResolution,this.minResolution_=o.minResolution,this.zoomFactor_=o.zoomFactor,this.resolutions_=t.resolutions,this.minZoom_=o.minZoom;var e=j(t),n=o.constraint,i=A(t);this.constraints_={center:e,resolution:n,rotation:i},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom),this.setProperties({}),this.options_=t},e.prototype.getUpdatedOptions_=function(t){var o=(0,_.assign)({},this.options_);return void 0!==o.resolution?o.resolution=this.getResolution():o.zoom=this.getZoom(),o.center=this.getCenterInternal(),o.rotation=this.getRotation(),(0,_.assign)({},o,t)},e.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var o=new Array(arguments.length),e=0;e<o.length;++e){var n=arguments[e];n.center&&((n=(0,_.assign)({},n)).center=(0,d.fromUserCoordinate)(n.center,this.getProjection())),n.anchor&&((n=(0,_.assign)({},n)).anchor=(0,d.fromUserCoordinate)(n.anchor,this.getProjection())),o[e]=n}this.animateInternal.apply(this,o)},e.prototype.animateInternal=function(t){var o,e=arguments.length;if(e>1&&"function"==typeof arguments[e-1]&&(o=arguments[e-1],--e),!this.isDef()){var n=arguments[e-1];return n.center&&this.setCenterInternal(n.center),void 0!==n.zoom&&this.setZoom(n.zoom),void 0!==n.rotation&&this.setRotation(n.rotation),void(o&&M(o,!0))}for(var i=Date.now(),r=this.targetCenter_.slice(),a=this.targetResolution_,u=this.targetRotation_,h=[],l=0;l<e;++l){var p=arguments[l],g={start:i,complete:!1,anchor:p.anchor,duration:void 0!==p.duration?p.duration:1e3,easing:p.easing||c.inAndOut,callback:o};if(p.center&&(g.sourceCenter=r,g.targetCenter=p.center.slice(),r=g.targetCenter),void 0!==p.zoom?(g.sourceResolution=a,g.targetResolution=this.getResolutionForZoom(p.zoom),a=g.targetResolution):p.resolution&&(g.sourceResolution=a,g.targetResolution=p.resolution,a=g.targetResolution),void 0!==p.rotation){g.sourceRotation=u;var m=(0,f.modulo)(p.rotation-u+Math.PI,2*Math.PI)-Math.PI;g.targetRotation=u+m,u=g.targetRotation}E(g)?g.complete=!0:i+=g.duration,h.push(g)}this.animations_.push(h),this.setHint(s.default.ANIMATING,1),this.updateAnimations_()},e.prototype.getAnimating=function(){return this.hints_[s.default.ANIMATING]>0},e.prototype.getInteracting=function(){return this.hints_[s.default.INTERACTING]>0},e.prototype.cancelAnimations=function(){var t;this.setHint(s.default.ANIMATING,-this.hints_[s.default.ANIMATING]);for(var o=0,e=this.animations_.length;o<e;++o){var n=this.animations_[o];if(n[0].callback&&M(n[0].callback,!1),!t)for(var i=0,r=n.length;i<r;++i){var a=n[i];if(!a.complete){t=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t},e.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),o=!1,e=this.animations_.length-1;e>=0;--e){for(var n=this.animations_[e],i=!0,r=0,a=n.length;r<a;++r){var u=n[r];if(!u.complete){var h=t-u.start,l=u.duration>0?h/u.duration:1;l>=1?(u.complete=!0,l=1):i=!1;var c=u.easing(l);if(u.sourceCenter){var p=u.sourceCenter[0],g=u.sourceCenter[1],m=p+c*(u.targetCenter[0]-p),_=g+c*(u.targetCenter[1]-g);this.targetCenter_=[m,_]}if(u.sourceResolution&&u.targetResolution){var d=1===c?u.targetResolution:u.sourceResolution+c*(u.targetResolution-u.sourceResolution);if(u.anchor){var R=this.getViewportSize_(this.getRotation()),v=this.constraints_.resolution(d,0,R,!0);this.targetCenter_=this.calculateCenterZoom(v,u.anchor)}this.targetResolution_=d,this.applyTargetState_(!0)}if(void 0!==u.sourceRotation&&void 0!==u.targetRotation){var y=1===c?(0,f.modulo)(u.targetRotation+Math.PI,2*Math.PI)-Math.PI:u.sourceRotation+c*(u.targetRotation-u.sourceRotation);if(u.anchor){var C=this.constraints_.rotation(y,!0);this.targetCenter_=this.calculateCenterRotate(C,u.anchor)}this.targetRotation_=y}if(this.applyTargetState_(!0),o=!0,!u.complete)break}}if(i){this.animations_[e]=null,this.setHint(s.default.ANIMATING,-1);var I=n[0].callback;I&&M(I,!0)}}this.animations_=this.animations_.filter(Boolean),o&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},e.prototype.calculateCenterRotate=function(t,o){var e,n=this.getCenterInternal();return void 0!==n&&(e=[n[0]-o[0],n[1]-o[1]],(0,l.rotate)(e,t-this.getRotation()),(0,l.add)(e,o)),e},e.prototype.calculateCenterZoom=function(t,o){var e,n=this.getCenterInternal(),i=this.getResolution();void 0!==n&&void 0!==i&&(e=[o[0]-t*(o[0]-n[0])/i,o[1]-t*(o[1]-n[1])/i]);return e},e.prototype.getViewportSize_=function(t){var o=this.viewportSize_;if(t){var e=o[0],n=o[1];return[Math.abs(e*Math.cos(t))+Math.abs(n*Math.sin(t)),Math.abs(e*Math.sin(t))+Math.abs(n*Math.cos(t))]}return o},e.prototype.setViewportSize=function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.resolveConstraints(0)},e.prototype.getCenter=function(){var t=this.getCenterInternal();return t?(0,d.toUserCoordinate)(t,this.getProjection()):t},e.prototype.getCenterInternal=function(){return this.get(a.default.CENTER)},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getConstrainResolution=function(){return this.options_.constrainResolution},e.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},e.prototype.calculateExtent=function(t){var o=this.calculateExtentInternal(t);return(0,d.toUserExtent)(o,this.getProjection())},e.prototype.calculateExtentInternal=function(t){var o=t||this.getViewportSize_(),e=this.getCenterInternal();(0,h.assert)(e,1);var n=this.getResolution();(0,h.assert)(void 0!==n,2);var i=this.getRotation();return(0,h.assert)(void 0!==i,3),(0,p.getForViewAndSize)(e,n,i,o)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},e.prototype.setConstrainResolution=function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get(a.default.RESOLUTION)},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(t,o){return this.getResolutionForExtentInternal((0,d.fromUserExtent)(t,this.getProjection()),o)},e.prototype.getResolutionForExtentInternal=function(t,o){var e=o||this.getViewportSize_(),n=(0,p.getWidth)(t)/e[0],i=(0,p.getHeight)(t)/e[1];return Math.max(n,i)},e.prototype.getResolutionForValueFunction=function(t){var o=t||2,e=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,i=Math.log(e/n)/Math.log(o);return function(t){return e/Math.pow(o,t*i)}},e.prototype.getRotation=function(){return this.get(a.default.ROTATION)},e.prototype.getValueForResolutionFunction=function(t){var o=Math.log(t||2),e=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,i=Math.log(e/n)/o;return function(t){return Math.log(e/t)/o/i}},e.prototype.getState=function(){var t=this.getCenterInternal(),o=this.getProjection(),e=this.getResolution(),n=this.getRotation();return{center:t.slice(0),projection:void 0!==o?o:null,resolution:e,rotation:n,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,o=this.getResolution();return void 0!==o&&(t=this.getZoomForResolution(o)),t},e.prototype.getZoomForResolution=function(t){var o,e,n=this.minZoom_||0;if(this.resolutions_){var i=(0,u.linearFindNearest)(this.resolutions_,t,1);n=i,o=this.resolutions_[i],e=i==this.resolutions_.length-1?2:o/this.resolutions_[i+1]}else o=this.maxResolution_,e=this.zoomFactor_;return n+Math.log(o/t)/Math.log(e)},e.prototype.getResolutionForZoom=function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var o=(0,f.clamp)(Math.floor(t),0,this.resolutions_.length-2),e=this.resolutions_[o]/this.resolutions_[o+1];return this.resolutions_[o]/Math.pow(e,(0,f.clamp)(t-o,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)},e.prototype.fit=function(t,o){var e,n=(0,_.assign)({size:this.getViewportSize_()},o||{});if((0,h.assert)(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t)){(0,h.assert)(!(0,p.isEmpty)(t),25);var i=(0,d.fromUserExtent)(t,this.getProjection());e=(0,m.fromExtent)(i)}else if(t.getType()===g.default.CIRCLE){i=(0,d.fromUserExtent)(t.getExtent(),this.getProjection());(e=(0,m.fromExtent)(i)).rotate(this.getRotation(),(0,p.getCenter)(i))}else{var r=(0,d.getUserProjection)();e=r?t.clone().transform(r,this.getProjection()):t}this.fitInternal(e,n)},e.prototype.fitInternal=function(t,e){var n=e||{},i=n.size;i||(i=this.getViewportSize_());var r,s=void 0!==n.padding?n.padding:[0,0,0,0],a=void 0!==n.nearest&&n.nearest;r=void 0!==n.minResolution?n.minResolution:void 0!==n.maxZoom?this.getResolutionForZoom(n.maxZoom):0;for(var u=t.getFlatCoordinates(),h=this.getRotation(),l=Math.cos(-h),c=Math.sin(-h),p=1/0,g=1/0,m=-1/0,f=-1/0,_=t.getStride(),d=0,R=u.length;d<R;d+=_){var v=u[d]*l-u[d+1]*c,y=u[d]*c+u[d+1]*l;p=Math.min(p,v),g=Math.min(g,y),m=Math.max(m,v),f=Math.max(f,y)}var C=this.getResolutionForExtentInternal([p,g,m,f],[i[0]-s[1]-s[3],i[1]-s[0]-s[2]]);C=isNaN(C)?r:Math.max(C,r),C=this.getConstrainedResolution(C,a?0:1),c=-c;var I=(p+m)/2,j=(g+f)/2,x=[(I+=(s[1]-s[3])/2*C)*l-(j+=(s[0]-s[2])/2*C)*c,j*l+I*c],A=n.callback?n.callback:o.VOID;void 0!==n.duration?this.animateInternal({resolution:C,center:this.getConstrainedCenter(x,C),duration:n.duration,easing:n.easing},A):(this.targetResolution_=C,this.targetCenter_=x,this.applyTargetState_(!1,!0),M(A,!0))},e.prototype.centerOn=function(t,o,e){this.centerOnInternal((0,d.fromUserCoordinate)(t,this.getProjection()),o,e)},e.prototype.centerOnInternal=function(t,o,e){var n=this.getRotation(),i=Math.cos(-n),r=Math.sin(-n),s=t[0]*i-t[1]*r,a=t[1]*i+t[0]*r,u=this.getResolution(),h=(s+=(o[0]/2-e[0])*u)*i-(a+=(e[1]-o[1]/2)*u)*(r=-r),l=a*i+s*r;this.setCenterInternal([h,l])},e.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},e.prototype.adjustCenter=function(t){var o=(0,d.toUserCoordinate)(this.targetCenter_,this.getProjection());this.setCenter([o[0]+t[0],o[1]+t[1]])},e.prototype.adjustCenterInternal=function(t){var o=this.targetCenter_;this.setCenterInternal([o[0]+t[0],o[1]+t[1]])},e.prototype.adjustResolution=function(t,o){var e=o&&(0,d.fromUserCoordinate)(o,this.getProjection());this.adjustResolutionInternal(t,e)},e.prototype.adjustResolutionInternal=function(t,o){var e=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),i=this.constraints_.resolution(this.targetResolution_*t,0,n,e);o&&(this.targetCenter_=this.calculateCenterZoom(i,o)),this.targetResolution_*=t,this.applyTargetState_()},e.prototype.adjustZoom=function(t,o){this.adjustResolution(Math.pow(this.zoomFactor_,-t),o)},e.prototype.adjustRotation=function(t,o){o&&(o=(0,d.fromUserCoordinate)(o,this.getProjection())),this.adjustRotationInternal(t,o)},e.prototype.adjustRotationInternal=function(t,o){var e=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+t,e);o&&(this.targetCenter_=this.calculateCenterRotate(n,o)),this.targetRotation_+=t,this.applyTargetState_()},e.prototype.setCenter=function(t){this.setCenterInternal((0,d.fromUserCoordinate)(t,this.getProjection()))},e.prototype.setCenterInternal=function(t){this.targetCenter_=t,this.applyTargetState_()},e.prototype.setHint=function(t,o){return this.hints_[t]+=o,this.changed(),this.hints_[t]},e.prototype.setResolution=function(t){this.targetResolution_=t,this.applyTargetState_()},e.prototype.setRotation=function(t){this.targetRotation_=t,this.applyTargetState_()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e.prototype.applyTargetState_=function(t,o){var e=this.getAnimating()||this.getInteracting()||o,n=this.constraints_.rotation(this.targetRotation_,e),i=this.getViewportSize_(n),r=this.constraints_.resolution(this.targetResolution_,0,i,e),s=this.constraints_.center(this.targetCenter_,r,i,e);this.get(a.default.ROTATION)!==n&&this.set(a.default.ROTATION,n),this.get(a.default.RESOLUTION)!==r&&this.set(a.default.RESOLUTION,r),this.get(a.default.CENTER)&&(0,l.equals)(this.get(a.default.CENTER),s)||this.set(a.default.CENTER,s),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0},e.prototype.resolveConstraints=function(t,o,e){var n=void 0!==t?t:200,i=o||0,r=this.constraints_.rotation(this.targetRotation_),s=this.getViewportSize_(r),a=this.constraints_.resolution(this.targetResolution_,i,s),u=this.constraints_.center(this.targetCenter_,a,s);if(0===n&&!this.cancelAnchor_)return this.targetResolution_=a,this.targetRotation_=r,this.targetCenter_=u,void this.applyTargetState_();var h=e||(0===n?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,this.getResolution()===a&&this.getRotation()===r&&this.getCenterInternal()&&(0,l.equals)(this.getCenterInternal(),u)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:u,resolution:a,duration:n,easing:c.easeOut,anchor:h}))},e.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(s.default.INTERACTING,1)},e.prototype.endInteraction=function(t,o,e){var n=e&&(0,d.fromUserCoordinate)(e,this.getProjection());this.endInteractionInternal(t,o,n)},e.prototype.endInteractionInternal=function(t,o,e){this.setHint(s.default.INTERACTING,-1),this.resolveConstraints(t,o,e)},e.prototype.getConstrainedCenter=function(t,o){var e=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,o||this.getResolution(),e)},e.prototype.getConstrainedZoom=function(t,o){var e=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(e,o))},e.prototype.getConstrainedResolution=function(t,o){var e=o||0,n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,n)},e}(n.default);function M(t,o){setTimeout(function(){t(o)},0)}function j(t){if(void 0!==t.extent){var o=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return(0,e.createExtent)(t.extent,t.constrainOnlyCenter,o)}var n=(0,d.createProjection)(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&n.isGlobal()){var i=n.getExtent().slice();return i[0]=-1/0,i[2]=1/0,(0,e.createExtent)(i,!1,!1)}return e.none}function x(o){var e,n,r,s=void 0!==o.minZoom?o.minZoom:C,a=void 0!==o.maxZoom?o.maxZoom:28,u=void 0!==o.zoomFactor?o.zoomFactor:2,h=void 0!==o.multiWorld&&o.multiWorld,l=void 0===o.smoothResolutionConstraint||o.smoothResolutionConstraint,c=void 0!==o.showFullExtent&&o.showFullExtent,g=(0,d.createProjection)(o.projection,"EPSG:3857"),m=g.getExtent(),f=o.constrainOnlyCenter,_=o.extent;if(h||_||!g.isGlobal()||(f=!1,_=m),void 0!==o.resolutions){var v=o.resolutions;n=v[s],r=void 0!==v[a]?v[a]:v[v.length-1],e=o.constrainResolution?(0,i.createSnapToResolutions)(v,l,!f&&_,c):(0,i.createMinMaxResolution)(n,r,l,!f&&_,c)}else{var y=(m?Math.max((0,p.getWidth)(m),(0,p.getHeight)(m)):360*d.METERS_PER_UNIT[R.default.DEGREES]/g.getMetersPerUnit())/t.DEFAULT_TILE_SIZE/Math.pow(2,C),I=y/Math.pow(2,28-C);void 0!==(n=o.maxResolution)?s=0:n=y/Math.pow(u,s),void 0===(r=o.minResolution)&&(r=void 0!==o.maxZoom?void 0!==o.maxResolution?n/Math.pow(u,a):y/Math.pow(u,a):I),a=s+Math.floor(Math.log(n/r)/Math.log(u)),r=n/Math.pow(u,a-s),e=o.constrainResolution?(0,i.createSnapToPower)(u,n,r,l,!f&&_,c):(0,i.createMinMaxResolution)(n,r,l,!f&&_,c)}return{constraint:e,maxResolution:n,minResolution:r,minZoom:s,zoomFactor:u}}function A(t){if(void 0===t.enableRotation||t.enableRotation){var o=t.constrainRotation;return void 0===o||!0===o?(0,r.createSnapToZero)():!1===o?r.none:"number"==typeof o?(0,r.createSnapToN)(o):r.none}return r.disable}function E(t){return!(t.sourceCenter&&t.targetCenter&&!(0,l.equals)(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}var T=I;exports.default=T;
},{"./tilegrid/common.js":"mOEX","./functions.js":"RgA2","./centerconstraint.js":"Rc7z","./Object.js":"PhPh","./resolutionconstraint.js":"o7nl","./rotationconstraint.js":"EKd0","./ViewHint.js":"cuLW","./ViewProperty.js":"cE7c","./array.js":"luEr","./asserts.js":"fLG6","./coordinate.js":"nGsj","./easing.js":"IeCz","./extent.js":"QDir","./geom/GeometryType.js":"lmV0","./geom/Polygon.js":"Nwwk","./math.js":"B96G","./obj.js":"mH6q","./proj.js":"Diht","./proj/Units.js":"yZx6"}],"q0nK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../util.js"),t=c(require("../Collection.js")),r=c(require("../CollectionEventType.js")),n=require("../Object.js"),s=c(require("../ObjectEventType.js")),i=require("../asserts.js"),a=require("../events.js"),o=c(require("../events/EventType.js")),l=require("../extent.js"),u=c(require("./Base.js")),y=require("../obj.js"),h=c(require("../source/State.js"));function c(e){return e&&e.__esModule?e:{default:e}}var d=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),f={LAYERS:"layers"},p=function(u){function c(e){var r=this,s=e||{},a=(0,y.assign)({},s);delete a.layers;var o=s.layers;return(r=u.call(this,a)||this).layersListenerKeys_=[],r.listenerKeys_={},r.addEventListener((0,n.getChangeEventType)(f.LAYERS),r.handleLayersChanged_),o?Array.isArray(o)?o=new t.default(o.slice(),{unique:!0}):(0,i.assert)("function"==typeof o.getArray,43):o=new t.default(void 0,{unique:!0}),r.setLayers(o),r}return d(c,u),c.prototype.handleLayerChange_=function(){this.changed()},c.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(a.unlistenByKey),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var n in this.layersListenerKeys_.push((0,a.listen)(t,r.default.ADD,this.handleLayersAdd_,this),(0,a.listen)(t,r.default.REMOVE,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[n].forEach(a.unlistenByKey);(0,y.clear)(this.listenerKeys_);for(var i=t.getArray(),l=0,u=i.length;l<u;l++){var h=i[l];this.listenerKeys_[(0,e.getUid)(h)]=[(0,a.listen)(h,s.default.PROPERTYCHANGE,this.handleLayerChange_,this),(0,a.listen)(h,o.default.CHANGE,this.handleLayerChange_,this)]}this.changed()},c.prototype.handleLayersAdd_=function(t){var r=t.element;this.listenerKeys_[(0,e.getUid)(r)]=[(0,a.listen)(r,s.default.PROPERTYCHANGE,this.handleLayerChange_,this),(0,a.listen)(r,o.default.CHANGE,this.handleLayerChange_,this)],this.changed()},c.prototype.handleLayersRemove_=function(t){var r=t.element,n=(0,e.getUid)(r);this.listenerKeys_[n].forEach(a.unlistenByKey),delete this.listenerKeys_[n],this.changed()},c.prototype.getLayers=function(){return this.get(f.LAYERS)},c.prototype.setLayers=function(e){this.set(f.LAYERS,e)},c.prototype.getLayersArray=function(e){var t=void 0!==e?e:[];return this.getLayers().forEach(function(e){e.getLayersArray(t)}),t},c.prototype.getLayerStatesArray=function(e){var t=void 0!==e?e:[],r=t.length;this.getLayers().forEach(function(e){e.getLayerStatesArray(t)});for(var n=this.getLayerState(),s=r,i=t.length;s<i;s++){var a=t[s];a.opacity*=n.opacity,a.visible=a.visible&&n.visible,a.maxResolution=Math.min(a.maxResolution,n.maxResolution),a.minResolution=Math.max(a.minResolution,n.minResolution),a.minZoom=Math.max(a.minZoom,n.minZoom),a.maxZoom=Math.min(a.maxZoom,n.maxZoom),void 0!==n.extent&&(void 0!==a.extent?a.extent=(0,l.getIntersection)(a.extent,n.extent):a.extent=n.extent)}return t},c.prototype.getSourceState=function(){return h.default.READY},c}(u.default),g=p;exports.default=g;
},{"../util.js":"KniQ","../Collection.js":"FnDa","../CollectionEventType.js":"BTrx","../Object.js":"PhPh","../ObjectEventType.js":"zehl","../asserts.js":"fLG6","../events.js":"UqnM","../events/EventType.js":"C8cu","../extent.js":"QDir","./Base.js":"T6DQ","../obj.js":"mH6q","../source/State.js":"iC8j"}],"TAHd":[function(require,module,exports) {
"use strict";function r(r,e,t){return void 0===t&&(t=[0,0]),t[0]=r[0]+2*e,t[1]=r[1]+2*e,t}function e(r){return r[0]>0&&r[1]>0}function t(r,e,t){return void 0===t&&(t=[0,0]),t[0]=r[0]*e+.5|0,t[1]=r[1]*e+.5|0,t}function o(r,e){return Array.isArray(r)?r:(void 0===e?e=[r,r]:(e[0]=r,e[1]=r),e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.buffer=r,exports.hasArea=e,exports.scale=t,exports.toSize=o;
},{}],"kRwz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=x(require("./Collection.js")),t=x(require("./CollectionEventType.js")),r=x(require("./MapBrowserEvent.js")),n=x(require("./MapBrowserEventHandler.js")),i=x(require("./MapBrowserEventType.js")),o=x(require("./MapEvent.js")),a=x(require("./MapEventType.js")),s=x(require("./MapProperty.js")),l=x(require("./render/EventType.js")),d=S(require("./Object.js")),u=x(require("./ObjectEventType.js")),p=S(require("./TileQueue.js")),h=x(require("./View.js")),y=x(require("./ViewHint.js")),v=require("./asserts.js"),f=require("./dom.js"),c=require("./events.js"),_=x(require("./events/EventType.js")),g=require("./extent.js"),E=require("./functions.js"),m=require("./has.js"),w=x(require("./layer/Group.js")),T=require("./size.js"),C=require("./transform.js"),R=require("./proj.js");function L(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return L=function(){return e},e}function S(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=L();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=n?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}function x(e){return e&&e.__esModule?e:{default:e}}var P=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),I=function(h){function v(r){var o=h.call(this)||this,a=A(r);o.boundHandleBrowserEvent_=o.handleBrowserEvent.bind(o),o.maxTilesLoading_=void 0!==r.maxTilesLoading?r.maxTilesLoading:16,o.pixelRatio_=void 0!==r.pixelRatio?r.pixelRatio:m.DEVICE_PIXEL_RATIO,o.postRenderTimeoutHandle_,o.animationDelayKey_,o.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(o),o.coordinateToPixelTransform_=(0,C.create)(),o.pixelToCoordinateTransform_=(0,C.create)(),o.frameIndex_=0,o.frameState_=null,o.previousExtent_=null,o.viewPropertyListenerKey_=null,o.viewChangeListenerKey_=null,o.layerGroupPropertyListenerKeys_=null,o.viewport_=document.createElement("div"),o.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),o.viewport_.style.position="relative",o.viewport_.style.overflow="hidden",o.viewport_.style.width="100%",o.viewport_.style.height="100%",o.overlayContainer_=document.createElement("div"),o.overlayContainer_.style.position="absolute",o.overlayContainer_.style.zIndex="0",o.overlayContainer_.style.width="100%",o.overlayContainer_.style.height="100%",o.overlayContainer_.className="ol-overlaycontainer",o.viewport_.appendChild(o.overlayContainer_),o.overlayContainerStopEvent_=document.createElement("div"),o.overlayContainerStopEvent_.style.position="absolute",o.overlayContainerStopEvent_.style.zIndex="0",o.overlayContainerStopEvent_.style.width="100%",o.overlayContainerStopEvent_.style.height="100%",o.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",o.viewport_.appendChild(o.overlayContainerStopEvent_),o.mapBrowserEventHandler_=new n.default(o,r.moveTolerance);var l=o.handleMapBrowserEvent.bind(o);for(var u in i.default)o.mapBrowserEventHandler_.addEventListener(i.default[u],l);o.keyboardEventTarget_=a.keyboardEventTarget,o.keyHandlerKeys_=null;var y=o.handleBrowserEvent.bind(o);return o.viewport_.addEventListener(_.default.CONTEXTMENU,y,!1),o.viewport_.addEventListener(_.default.WHEEL,y,!!m.PASSIVE_EVENT_LISTENERS&&{passive:!1}),o.controls=a.controls||new e.default,o.interactions=a.interactions||new e.default,o.overlays_=a.overlays,o.overlayIdIndex_={},o.renderer_=null,o.handleResize_,o.postRenderFunctions_=[],o.tileQueue_=new p.default(o.getTilePriority.bind(o),o.handleTileChange_.bind(o)),o.addEventListener((0,d.getChangeEventType)(s.default.LAYERGROUP),o.handleLayerGroupChanged_),o.addEventListener((0,d.getChangeEventType)(s.default.VIEW),o.handleViewChanged_),o.addEventListener((0,d.getChangeEventType)(s.default.SIZE),o.handleSizeChanged_),o.addEventListener((0,d.getChangeEventType)(s.default.TARGET),o.handleTargetChanged_),o.setProperties(a.values),o.controls.forEach(function(e){e.setMap(this)}.bind(o)),o.controls.addEventListener(t.default.ADD,function(e){e.element.setMap(this)}.bind(o)),o.controls.addEventListener(t.default.REMOVE,function(e){e.element.setMap(null)}.bind(o)),o.interactions.forEach(function(e){e.setMap(this)}.bind(o)),o.interactions.addEventListener(t.default.ADD,function(e){e.element.setMap(this)}.bind(o)),o.interactions.addEventListener(t.default.REMOVE,function(e){e.element.setMap(null)}.bind(o)),o.overlays_.forEach(o.addOverlayInternal_.bind(o)),o.overlays_.addEventListener(t.default.ADD,function(e){this.addOverlayInternal_(e.element)}.bind(o)),o.overlays_.addEventListener(t.default.REMOVE,function(e){var t=e.element.getId();void 0!==t&&delete this.overlayIdIndex_[t.toString()],e.element.setMap(null)}.bind(o)),o}return P(v,h),v.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},v.prototype.addControl=function(e){this.getControls().push(e)},v.prototype.addInteraction=function(e){this.getInteractions().push(e)},v.prototype.addLayer=function(e){this.getLayerGroup().getLayers().push(e)},v.prototype.addOverlay=function(e){this.getOverlays().push(e)},v.prototype.addOverlayInternal_=function(e){var t=e.getId();void 0!==t&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)},v.prototype.disposeInternal=function(){this.mapBrowserEventHandler_.dispose(),this.viewport_.removeEventListener(_.default.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(_.default.WHEEL,this.boundHandleBrowserEvent_),void 0!==this.handleResize_&&(removeEventListener(_.default.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.setTarget(null),h.prototype.disposeInternal.call(this)},v.prototype.forEachFeatureAtPixel=function(e,t,r){if(this.frameState_){var n=this.getCoordinateFromPixelInternal(e),i=void 0!==(r=void 0!==r?r:{}).hitTolerance?r.hitTolerance*this.frameState_.pixelRatio:0,o=void 0!==r.layerFilter?r.layerFilter:E.TRUE,a=!1!==r.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,i,a,t,null,o,null)}},v.prototype.getFeaturesAtPixel=function(e,t){var r=[];return this.forEachFeatureAtPixel(e,function(e){r.push(e)},t),r},v.prototype.forEachLayerAtPixel=function(e,t,r){if(this.frameState_){var n=r||{},i=void 0!==n.hitTolerance?n.hitTolerance*this.frameState_.pixelRatio:0,o=n.layerFilter||E.TRUE;return this.renderer_.forEachLayerAtPixel(e,this.frameState_,i,t,o)}},v.prototype.hasFeatureAtPixel=function(e,t){if(!this.frameState_)return!1;var r=this.getCoordinateFromPixelInternal(e),n=void 0!==(t=void 0!==t?t:{}).layerFilter?t.layerFilter:E.TRUE,i=void 0!==t.hitTolerance?t.hitTolerance*this.frameState_.pixelRatio:0,o=!1!==t.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,i,o,n,null)},v.prototype.getEventCoordinate=function(e){return this.getCoordinateFromPixel(this.getEventPixel(e))},v.prototype.getEventCoordinateInternal=function(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))},v.prototype.getEventPixel=function(e){var t=this.viewport_.getBoundingClientRect(),r="changedTouches"in e?e.changedTouches[0]:e;return[r.clientX-t.left,r.clientY-t.top]},v.prototype.getTarget=function(){return this.get(s.default.TARGET)},v.prototype.getTargetElement=function(){var e=this.getTarget();return void 0!==e?"string"==typeof e?document.getElementById(e):e:null},v.prototype.getCoordinateFromPixel=function(e){return(0,R.toUserCoordinate)(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())},v.prototype.getCoordinateFromPixelInternal=function(e){var t=this.frameState_;return t?(0,C.apply)(t.pixelToCoordinateTransform,e.slice()):null},v.prototype.getControls=function(){return this.controls},v.prototype.getOverlays=function(){return this.overlays_},v.prototype.getOverlayById=function(e){var t=this.overlayIdIndex_[e.toString()];return void 0!==t?t:null},v.prototype.getInteractions=function(){return this.interactions},v.prototype.getLayerGroup=function(){return this.get(s.default.LAYERGROUP)},v.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},v.prototype.getLoading=function(){for(var e=this.getLayerGroup().getLayerStatesArray(),t=0,r=e.length;t<r;++t){var n=e[t].layer.getSource();if(n&&n.loading)return!0}return!1},v.prototype.getPixelFromCoordinate=function(e){var t=(0,R.fromUserCoordinate)(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)},v.prototype.getPixelFromCoordinateInternal=function(e){var t=this.frameState_;return t?(0,C.apply)(t.coordinateToPixelTransform,e.slice(0,2)):null},v.prototype.getRenderer=function(){return this.renderer_},v.prototype.getSize=function(){return this.get(s.default.SIZE)},v.prototype.getView=function(){return this.get(s.default.VIEW)},v.prototype.getViewport=function(){return this.viewport_},v.prototype.getOverlayContainer=function(){return this.overlayContainer_},v.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},v.prototype.getTilePriority=function(e,t,r,n){return(0,p.getTilePriority)(this.frameState_,e,t,r,n)},v.prototype.handleBrowserEvent=function(e,t){var n=t||e.type,i=new r.default(n,this,e);this.handleMapBrowserEvent(i)},v.prototype.handleMapBrowserEvent=function(e){if(this.frameState_){var t=e.originalEvent.target;if(e.dragging||!this.overlayContainerStopEvent_.contains(t)&&(document.body.contains(t)||this.viewport_.getRootNode&&this.viewport_.getRootNode().contains(t))){e.frameState=this.frameState_;var r=this.getInteractions().getArray();if(!1!==this.dispatchEvent(e))for(var n=r.length-1;n>=0;n--){var i=r[n];if(i.getActive())if(!i.handleEvent(e))break}}}},v.prototype.handlePostRender=function(){var e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){var r=this.maxTilesLoading_,n=r;if(e){var i=e.viewHints;if(i[y.default.ANIMATING]||i[y.default.INTERACTING]){var o=!m.IMAGE_DECODE&&Date.now()-e.time>8;r=o?0:8,n=o?0:2}}t.getTilesLoading()<r&&(t.reprioritize(),t.loadMoreTiles(r,n))}!e||!this.hasListener(l.default.RENDERCOMPLETE)||e.animate||this.tileQueue_.getTilesLoading()||this.getLoading()||this.renderer_.dispatchRenderEvent(l.default.RENDERCOMPLETE,e);for(var a=this.postRenderFunctions_,s=0,d=a.length;s<d;++s)a[s](this,e);a.length=0},v.prototype.handleSizeChanged_=function(){this.getView()&&this.getView().resolveConstraints(0),this.render()},v.prototype.handleTargetChanged_=function(){var e;if(this.getTarget()&&(e=this.getTargetElement()),this.keyHandlerKeys_){for(var t=0,r=this.keyHandlerKeys_.length;t<r;++t)(0,c.unlistenByKey)(this.keyHandlerKeys_[t]);this.keyHandlerKeys_=null}if(e){e.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer());var n=this.keyboardEventTarget_?this.keyboardEventTarget_:e;this.keyHandlerKeys_=[(0,c.listen)(n,_.default.KEYDOWN,this.handleBrowserEvent,this),(0,c.listen)(n,_.default.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener(_.default.RESIZE,this.handleResize_,!1))}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0),(0,f.removeNode)(this.viewport_),void 0!==this.handleResize_&&(removeEventListener(_.default.RESIZE,this.handleResize_,!1),this.handleResize_=void 0);this.updateSize()},v.prototype.handleTileChange_=function(){this.render()},v.prototype.handleViewPropertyChanged_=function(){this.render()},v.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&((0,c.unlistenByKey)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&((0,c.unlistenByKey)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var e=this.getView();e&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=(0,c.listen)(e,u.default.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=(0,c.listen)(e,_.default.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()},v.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(c.unlistenByKey),this.layerGroupPropertyListenerKeys_=null);var e=this.getLayerGroup();e&&(this.layerGroupPropertyListenerKeys_=[(0,c.listen)(e,u.default.PROPERTYCHANGE,this.render,this),(0,c.listen)(e,_.default.CHANGE,this.render,this)]),this.render()},v.prototype.isRendered=function(){return!!this.frameState_},v.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},v.prototype.redrawText=function(){for(var e=this.getLayerGroup().getLayerStatesArray(),t=0,r=e.length;t<r;++t){var n=e[t].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}},v.prototype.render=function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},v.prototype.removeControl=function(e){return this.getControls().remove(e)},v.prototype.removeInteraction=function(e){return this.getInteractions().remove(e)},v.prototype.removeLayer=function(e){return this.getLayerGroup().getLayers().remove(e)},v.prototype.removeOverlay=function(e){return this.getOverlays().remove(e)},v.prototype.renderFrame_=function(e){var t=this.getSize(),r=this.getView(),n=this.frameState_,i=null;if(void 0!==t&&(0,T.hasArea)(t)&&r&&r.isDef()){var s=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),l=r.getState();i={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterItems:n?n.declutterItems:[],extent:(0,g.getForViewAndSize)(l.center,l.resolution,l.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:l,viewHints:s,wantedTiles:{}}}if(this.frameState_=i,this.renderer_.renderFrame(i),i){if(i.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,i.postRenderFunctions),n)(!this.previousExtent_||!(0,g.isEmpty)(this.previousExtent_)&&!(0,g.equals)(i.extent,this.previousExtent_))&&(this.dispatchEvent(new o.default(a.default.MOVESTART,this,n)),this.previousExtent_=(0,g.createOrUpdateEmpty)(this.previousExtent_));this.previousExtent_&&!i.viewHints[y.default.ANIMATING]&&!i.viewHints[y.default.INTERACTING]&&!(0,g.equals)(i.extent,this.previousExtent_)&&(this.dispatchEvent(new o.default(a.default.MOVEEND,this,i)),(0,g.clone)(i.extent,this.previousExtent_))}this.dispatchEvent(new o.default(a.default.POSTRENDER,this,i)),this.postRenderTimeoutHandle_=setTimeout(this.handlePostRender.bind(this),0)},v.prototype.setLayerGroup=function(e){this.set(s.default.LAYERGROUP,e)},v.prototype.setSize=function(e){this.set(s.default.SIZE,e)},v.prototype.setTarget=function(e){this.set(s.default.TARGET,e)},v.prototype.setView=function(e){this.set(s.default.VIEW,e)},v.prototype.updateSize=function(){var e=this.getTargetElement();if(e){var t=getComputedStyle(e);this.setSize([e.offsetWidth-parseFloat(t.borderLeftWidth)-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight)-parseFloat(t.borderRightWidth),e.offsetHeight-parseFloat(t.borderTopWidth)-parseFloat(t.paddingTop)-parseFloat(t.paddingBottom)-parseFloat(t.borderBottomWidth)])}else this.setSize(void 0);this.updateViewportSize_()},v.prototype.updateViewportSize_=function(){var e=this.getView();if(e){var t=void 0,r=getComputedStyle(this.viewport_);r.width&&r.height&&(t=[parseInt(r.width,10),parseInt(r.height,10)]),e.setViewportSize(t)}},v}(d.default);function A(t){var r=null;void 0!==t.keyboardEventTarget&&(r="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var n,i,o,a={},l=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new w.default({layers:t.layers});return a[s.default.LAYERGROUP]=l,a[s.default.TARGET]=t.target,a[s.default.VIEW]=void 0!==t.view?t.view:new h.default,void 0!==t.controls&&(Array.isArray(t.controls)?n=new e.default(t.controls.slice()):((0,v.assert)("function"==typeof t.controls.getArray,47),n=t.controls)),void 0!==t.interactions&&(Array.isArray(t.interactions)?i=new e.default(t.interactions.slice()):((0,v.assert)("function"==typeof t.interactions.getArray,48),i=t.interactions)),void 0!==t.overlays?Array.isArray(t.overlays)?o=new e.default(t.overlays.slice()):((0,v.assert)("function"==typeof t.overlays.getArray,49),o=t.overlays):o=new e.default,{controls:n,interactions:i,keyboardEventTarget:r,overlays:o,values:a}}var b=I;exports.default=b;
},{"./Collection.js":"FnDa","./CollectionEventType.js":"BTrx","./MapBrowserEvent.js":"HMLS","./MapBrowserEventHandler.js":"ohHk","./MapBrowserEventType.js":"YhDM","./MapEvent.js":"vFcA","./MapEventType.js":"xLGm","./MapProperty.js":"zlNQ","./render/EventType.js":"z39m","./Object.js":"PhPh","./ObjectEventType.js":"zehl","./TileQueue.js":"tHOl","./View.js":"hNqE","./ViewHint.js":"cuLW","./asserts.js":"fLG6","./dom.js":"Xno5","./events.js":"UqnM","./events/EventType.js":"C8cu","./extent.js":"QDir","./functions.js":"RgA2","./has.js":"f3Nv","./layer/Group.js":"q0nK","./size.js":"TAHd","./transform.js":"P4eA","./proj.js":"Diht"}],"xxE2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../functions.js"),t=s(require("../MapEventType.js")),r=s(require("../Object.js")),n=require("../dom.js"),o=require("../events.js");function s(e){return e&&e.__esModule?e:{default:e}}var i=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),u=function(r){function s(t){var n=r.call(this)||this;return n.element=t.element?t.element:null,n.target_=null,n.map_=null,n.listenerKeys=[],n.render_=t.render?t.render:e.VOID,t.target&&n.setTarget(t.target),n}return i(s,r),s.prototype.disposeInternal=function(){(0,n.removeNode)(this.element),r.prototype.disposeInternal.call(this)},s.prototype.getMap=function(){return this.map_},s.prototype.setMap=function(r){this.map_&&(0,n.removeNode)(this.element);for(var s=0,i=this.listenerKeys.length;s<i;++s)(0,o.unlistenByKey)(this.listenerKeys[s]);(this.listenerKeys.length=0,this.map_=r,this.map_)&&((this.target_?this.target_:r.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==e.VOID&&this.listenerKeys.push((0,o.listen)(r,t.default.POSTRENDER,this.render,this)),r.render())},s.prototype.render=function(e){this.render_.call(this,e)},s.prototype.setTarget=function(e){this.target_="string"==typeof e?document.getElementById(e):e},s}(r.default),l=u;exports.default=l;
},{"../functions.js":"RgA2","../MapEventType.js":"xLGm","../Object.js":"PhPh","../dom.js":"Xno5","../events.js":"UqnM"}],"Q4Cf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.render=p,exports.default=void 0;var e=require("../array.js"),t=s(require("./Control.js")),l=require("../css.js"),i=require("../dom.js"),o=s(require("../events/EventType.js")),r=require("../layer/Layer.js");function s(e){return e&&e.__esModule?e:{default:e}}var a=function(){var e=function(t,l){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var l in t)t.hasOwnProperty(l)&&(e[l]=t[l])})(t,l)};return function(t,l){function i(){this.constructor=t}e(t,l),t.prototype=null===l?Object.create(l):(i.prototype=l.prototype,new i)}}(),n=function(t){function s(e){var i=this,r=e||{};(i=t.call(this,{element:document.createElement("div"),render:r.render||p,target:r.target})||this).ulElement_=document.createElement("ul"),i.collapsed_=void 0===r.collapsed||r.collapsed,i.overrideCollapsible_=void 0!==r.collapsible,i.collapsible_=void 0===r.collapsible||r.collapsible,i.collapsible_||(i.collapsed_=!1);var s=void 0!==r.className?r.className:"ol-attribution",a=void 0!==r.tipLabel?r.tipLabel:"Attributions",n=void 0!==r.collapseLabel?r.collapseLabel:"»";"string"==typeof n?(i.collapseLabel_=document.createElement("span"),i.collapseLabel_.textContent=n):i.collapseLabel_=n;var c=void 0!==r.label?r.label:"i";"string"==typeof c?(i.label_=document.createElement("span"),i.label_.textContent=c):i.label_=c;var d=i.collapsible_&&!i.collapsed_?i.collapseLabel_:i.label_,u=document.createElement("button");u.setAttribute("type","button"),u.title=a,u.appendChild(d),u.addEventListener(o.default.CLICK,i.handleClick_.bind(i),!1);var _=s+" "+l.CLASS_UNSELECTABLE+" "+l.CLASS_CONTROL+(i.collapsed_&&i.collapsible_?" "+l.CLASS_COLLAPSED:"")+(i.collapsible_?"":" ol-uncollapsible"),b=i.element;return b.className=_,b.appendChild(i.ulElement_),b.appendChild(u),i.renderedAttributions_=[],i.renderedVisible_=!0,i}return a(s,t),s.prototype.collectSourceAttributions_=function(e){for(var t={},l=[],i=e.layerStatesArray,o=0,s=i.length;o<s;++o){var a=i[o];if((0,r.inView)(a,e.viewState)){var n=a.layer.getSource();if(n){var p=n.getAttributions();if(p){var c=p(e);if(c)if(this.overrideCollapsible_||!1!==n.getAttributionsCollapsible()||this.setCollapsible(!1),Array.isArray(c))for(var d=0,u=c.length;d<u;++d)c[d]in t||(l.push(c[d]),t[c[d]]=!0);else c in t||(l.push(c),t[c]=!0)}}}}return l},s.prototype.updateElement_=function(t){if(t){var l=this.collectSourceAttributions_(t),o=l.length>0;if(this.renderedVisible_!=o&&(this.element.style.display=o?"":"none",this.renderedVisible_=o),!(0,e.equals)(l,this.renderedAttributions_)){(0,i.removeChildren)(this.ulElement_);for(var r=0,s=l.length;r<s;++r){var a=document.createElement("li");a.innerHTML=l[r],this.ulElement_.appendChild(a)}this.renderedAttributions_=l}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},s.prototype.handleClick_=function(e){e.preventDefault(),this.handleToggle_()},s.prototype.handleToggle_=function(){this.element.classList.toggle(l.CLASS_COLLAPSED),this.collapsed_?(0,i.replaceNode)(this.collapseLabel_,this.label_):(0,i.replaceNode)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},s.prototype.getCollapsible=function(){return this.collapsible_},s.prototype.setCollapsible=function(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())},s.prototype.setCollapsed=function(e){this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()},s.prototype.getCollapsed=function(){return this.collapsed_},s}(t.default);function p(e){this.updateElement_(e.frameState)}var c=n;exports.default=c;
},{"../array.js":"luEr","./Control.js":"xxE2","../css.js":"HgMV","../dom.js":"Xno5","../events/EventType.js":"C8cu","../layer/Layer.js":"GCgv"}],"sCgw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.render=s,exports.default=void 0;var t=o(require("./Control.js")),e=require("../css.js"),a=require("../easing.js"),r=o(require("../events/EventType.js"));function o(t){return t&&t.__esModule?t:{default:t}}var i=function(){var t=function(e,a){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(e,a)};return function(e,a){function r(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(r.prototype=a.prototype,new r)}}(),n=function(t){function o(a){var o=this,i=a||{};o=t.call(this,{element:document.createElement("div"),render:i.render||s,target:i.target})||this;var n=void 0!==i.className?i.className:"ol-rotate",l=void 0!==i.label?i.label:"⇧";o.label_=null,"string"==typeof l?(o.label_=document.createElement("span"),o.label_.className="ol-compass",o.label_.textContent=l):(o.label_=l,o.label_.classList.add("ol-compass"));var u=i.tipLabel?i.tipLabel:"Reset rotation",d=document.createElement("button");d.className=n+"-reset",d.setAttribute("type","button"),d.title=u,d.appendChild(o.label_),d.addEventListener(r.default.CLICK,o.handleClick_.bind(o),!1);var c=n+" "+e.CLASS_UNSELECTABLE+" "+e.CLASS_CONTROL,_=o.element;return _.className=c,_.appendChild(d),o.callResetNorth_=i.resetNorth?i.resetNorth:void 0,o.duration_=void 0!==i.duration?i.duration:250,o.autoHide_=void 0===i.autoHide||i.autoHide,o.rotation_=void 0,o.autoHide_&&o.element.classList.add(e.CLASS_HIDDEN),o}return i(o,t),o.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},o.prototype.resetNorth_=function(){var t=this.getMap().getView();if(t){var e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:a.easeOut}):t.setRotation(0))}},o}(t.default);function s(t){var a=t.frameState;if(a){var r=a.viewState.rotation;if(r!=this.rotation_){var o="rotate("+r+"rad)";if(this.autoHide_){var i=this.element.classList.contains(e.CLASS_HIDDEN);i||0!==r?i&&0!==r&&this.element.classList.remove(e.CLASS_HIDDEN):this.element.classList.add(e.CLASS_HIDDEN)}this.label_.style.transform=o}this.rotation_=r}}var l=n;exports.default=l;
},{"./Control.js":"xxE2","../css.js":"HgMV","../easing.js":"IeCz","../events/EventType.js":"C8cu"}],"L3CO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=a(require("../events/EventType.js")),e=a(require("./Control.js")),o=require("../css.js"),n=require("../easing.js");function a(t){return t&&t.__esModule?t:{default:t}}var i=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=function(e){function a(n){var a=this,i=n||{};a=e.call(this,{element:document.createElement("div"),target:i.target})||this;var r=void 0!==i.className?i.className:"ol-zoom",u=void 0!==i.delta?i.delta:1,d=void 0!==i.zoomInLabel?i.zoomInLabel:"+",l=void 0!==i.zoomOutLabel?i.zoomOutLabel:"−",s=void 0!==i.zoomInTipLabel?i.zoomInTipLabel:"Zoom in",c=void 0!==i.zoomOutTipLabel?i.zoomOutTipLabel:"Zoom out",p=document.createElement("button");p.className=r+"-in",p.setAttribute("type","button"),p.title=s,p.appendChild("string"==typeof d?document.createTextNode(d):d),p.addEventListener(t.default.CLICK,a.handleClick_.bind(a,u),!1);var m=document.createElement("button");m.className=r+"-out",m.setAttribute("type","button"),m.title=c,m.appendChild("string"==typeof l?document.createTextNode(l):l),m.addEventListener(t.default.CLICK,a.handleClick_.bind(a,-u),!1);var v=r+" "+o.CLASS_UNSELECTABLE+" "+o.CLASS_CONTROL,f=a.element;return f.className=v,f.appendChild(p),f.appendChild(m),a.duration_=void 0!==i.duration?i.duration:250,a}return i(a,e),a.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},a.prototype.zoomByDelta_=function(t){var e=this.getMap().getView();if(e){var o=e.getZoom();if(void 0!==o){var a=e.getConstrainedZoom(o+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:a,duration:this.duration_,easing:n.easeOut})):e.setZoom(a)}}},a}(e.default),u=r;exports.default=u;
},{"../events/EventType.js":"C8cu","./Control.js":"xxE2","../css.js":"HgMV","../easing.js":"IeCz"}],"dOoh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./Control.js")),t=require("../css.js"),s=require("../dom.js"),n=require("../events.js"),l=r(require("../events/EventType.js"));function r(e){return e&&e.__esModule?e:{default:e}}var u=function(){var e=function(t,s){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(t,s)};return function(t,s){function n(){this.constructor=t}e(t,s),t.prototype=null===s?Object.create(s):(n.prototype=s.prototype,new n)}}(),o=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],c={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"},i=function(e){function r(s){var n=this,r=s||{};(n=e.call(this,{element:document.createElement("div"),target:r.target})||this).cssClassName_=void 0!==r.className?r.className:"ol-full-screen";var u=void 0!==r.label?r.label:"⤢";n.labelNode_="string"==typeof u?document.createTextNode(u):u;var o=void 0!==r.labelActive?r.labelActive:"×";n.labelActiveNode_="string"==typeof o?document.createTextNode(o):o,n.button_=document.createElement("button");var c=r.tipLabel?r.tipLabel:"Toggle full-screen";n.setClassName_(n.button_,d()),n.button_.setAttribute("type","button"),n.button_.title=c,n.button_.appendChild(n.labelNode_),n.button_.addEventListener(l.default.CLICK,n.handleClick_.bind(n),!1);var i=n.cssClassName_+" "+t.CLASS_UNSELECTABLE+" "+t.CLASS_CONTROL+" "+(a()?"":t.CLASS_UNSUPPORTED),_=n.element;return _.className=i,_.appendChild(n.button_),n.keys_=void 0!==r.keys&&r.keys,n.source_=r.source,n}return u(r,e),r.prototype.handleClick_=function(e){e.preventDefault(),this.handleFullScreen_()},r.prototype.handleFullScreen_=function(){if(a()){var e=this.getMap();if(e)if(d())m();else{var t=void 0;t=this.source_?"string"==typeof this.source_?document.getElementById(this.source_):this.source_:e.getTargetElement(),this.keys_?p(t):_(t)}}},r.prototype.handleFullScreenChange_=function(){var e=this.getMap();d()?(this.setClassName_(this.button_,!0),(0,s.replaceNode)(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(c.ENTERFULLSCREEN)):(this.setClassName_(this.button_,!1),(0,s.replaceNode)(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(c.LEAVEFULLSCREEN)),e&&e.updateSize()},r.prototype.setClassName_=function(e,t){var s=this.cssClassName_+"-true",n=this.cssClassName_+"-false",l=t?s:n;e.classList.remove(s),e.classList.remove(n),e.classList.add(l)},r.prototype.setMap=function(t){if(e.prototype.setMap.call(this,t),t)for(var s=0,l=o.length;s<l;++s)this.listenerKeys.push((0,n.listen)(document,o[s],this.handleFullScreenChange_,this))},r}(e.default);function a(){var e=document.body;return!!(e.webkitRequestFullscreen||e.msRequestFullscreen&&document.msFullscreenEnabled||e.requestFullscreen&&document.fullscreenEnabled)}function d(){return!!(document.webkitIsFullScreen||document.msFullscreenElement||document.fullscreenElement)}function _(e){e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}function p(e){e.webkitRequestFullscreen?e.webkitRequestFullscreen():_(e)}function m(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}var f=i;exports.default=f;
},{"./Control.js":"xxE2","../css.js":"HgMV","../dom.js":"Xno5","../events.js":"UqnM","../events/EventType.js":"C8cu"}],"Cbl8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.render=c,exports.default=void 0,require("elm-pep");var t=require("../events.js"),e=i(require("../pointer/EventType.js")),r=require("../Object.js"),o=i(require("./Control.js")),n=require("../proj.js");function i(t){return t&&t.__esModule?t:{default:t}}var s=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),a="projection",u="coordinateFormat",p=function(o){function i(t){var e=this,n=t||{},i=document.createElement("div");return i.className=void 0!==n.className?n.className:"ol-mouse-position",(e=o.call(this,{element:i,render:n.render||c,target:n.target})||this).addEventListener((0,r.getChangeEventType)(a),e.handleProjectionChanged_),n.coordinateFormat&&e.setCoordinateFormat(n.coordinateFormat),n.projection&&e.setProjection(n.projection),e.undefinedHTML_=void 0!==n.undefinedHTML?n.undefinedHTML:"&#160;",e.renderOnMouseOut_=!!e.undefinedHTML_,e.renderedHTML_=i.innerHTML,e.mapProjection_=null,e.transform_=null,e}return s(i,o),i.prototype.handleProjectionChanged_=function(){this.transform_=null},i.prototype.getCoordinateFormat=function(){return this.get(u)},i.prototype.getProjection=function(){return this.get(a)},i.prototype.handleMouseMove=function(t){var e=this.getMap();this.updateHTML_(e.getEventPixel(t))},i.prototype.handleMouseOut=function(t){this.updateHTML_(null)},i.prototype.setMap=function(r){if(o.prototype.setMap.call(this,r),r){var n=r.getViewport();this.listenerKeys.push((0,t.listen)(n,e.default.POINTERMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push((0,t.listen)(n,e.default.POINTEROUT,this.handleMouseOut,this))}},i.prototype.setCoordinateFormat=function(t){this.set(u,t)},i.prototype.setProjection=function(t){this.set(a,(0,n.get)(t))},i.prototype.updateHTML_=function(t){var e=this.undefinedHTML_;if(t&&this.mapProjection_){if(!this.transform_){var r=this.getProjection();this.transform_=r?(0,n.getTransformFromProjections)(this.mapProjection_,r):n.identityTransform}var o=this.getMap().getCoordinateFromPixelInternal(t);if(o){var i=(0,n.getUserProjection)();i&&(this.transform_=(0,n.getTransformFromProjections)(this.mapProjection_,i)),this.transform_(o,o);var s=this.getCoordinateFormat();e=s?s(o):o.toString()}}this.renderedHTML_&&e===this.renderedHTML_||(this.element.innerHTML=e,this.renderedHTML_=e)},i}(o.default);function c(t){var e=t.frameState;e?this.mapProjection_!=e.viewState.projection&&(this.mapProjection_=e.viewState.projection,this.transform_=null):this.mapProjection_=null}var d=p;exports.default=d;
},{"elm-pep":"tMKf","../events.js":"UqnM","../pointer/EventType.js":"TaSm","../Object.js":"PhPh","./Control.js":"xxE2","../proj.js":"Diht"}],"oIh9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../util.js"),r=s(require("../Disposable.js")),t=require("../extent.js"),o=require("../functions.js"),n=require("../layer/Layer.js"),a=require("../style/IconImageCache.js"),i=require("../transform.js"),u=require("../render.js"),c=require("../coordinate.js");function s(e){return e&&e.__esModule?e:{default:e}}var p=function(){var e=function(r,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(r,t)};return function(r,t){function o(){this.constructor=r}e(r,t),r.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),l=function(r){function s(e){var t=r.call(this)||this;return t.map_=e,t.declutterTree_=null,t}return p(s,r),s.prototype.dispatchRenderEvent=function(r,t){(0,e.abstract)()},s.prototype.calculateMatrices2D=function(e){var r=e.viewState,t=e.coordinateToPixelTransform,o=e.pixelToCoordinateTransform;(0,i.compose)(t,e.size[0]/2,e.size[1]/2,1/r.resolution,-1/r.resolution,-r.rotation,-r.center[0],-r.center[1]),(0,i.makeInverse)(o,t)},s.prototype.forEachFeatureAtCoordinate=function(e,r,o,a,i,u,s,p){var l,f=r.viewState;function d(e,r,t){return i.call(u,r,e?t:null)}var h=f.projection,v=(0,c.wrapX)(e.slice(),h),y=[[0,0]];if(h.canWrapX()&&a){var _=h.getExtent(),j=(0,t.getWidth)(_);y.push([-j,0],[j,0])}var m,x=r.layerStatesArray,g=x.length;this.declutterTree_&&(m=this.declutterTree_.all().map(function(e){return e.value}));for(var T=[],q=0;q<y.length;q++)for(var E=g-1;E>=0;--E){var C=x[E],b=C.layer;if(b.hasRenderer()&&(0,n.inView)(C,f)&&s.call(p,b)){var A=b.getRenderer(),w=b.getSource();if(A&&w){var F=w.getWrapX()?v:e,I=d.bind(null,C.managed);T[0]=F[0]+y[q][0],T[1]=F[1]+y[q][1],l=A.forEachFeatureAtCoordinate(T,r,o,I,m)}if(l)return l}}},s.prototype.forEachLayerAtPixel=function(r,t,o,n,a){return(0,e.abstract)()},s.prototype.hasFeatureAtCoordinate=function(e,r,t,n,a,i){return void 0!==this.forEachFeatureAtCoordinate(e,r,t,n,o.TRUE,this,a,i)},s.prototype.getMap=function(){return this.map_},s.prototype.renderFrame=function(e){this.declutterTree_=(0,u.renderDeclutterItems)(e,this.declutterTree_)},s.prototype.scheduleExpireIconCache=function(e){a.shared.canExpireCache()&&e.postRenderFunctions.push(f)},s}(r.default);function f(e,r){a.shared.expire()}var d=l;exports.default=d;
},{"../util.js":"KniQ","../Disposable.js":"DDda","../extent.js":"QDir","../functions.js":"RgA2","../layer/Layer.js":"GCgv","../style/IconImageCache.js":"V0oB","../transform.js":"P4eA","../render.js":"RvU2","../coordinate.js":"nGsj"}],"MHsB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../css.js"),t=require("../layer/Layer.js"),r=u(require("../render/Event.js")),n=u(require("../render/EventType.js")),i=u(require("./Map.js")),s=u(require("../source/State.js")),a=require("../dom.js"),l=require("../events.js"),o=require("../render/canvas.js"),d=u(require("../ObjectEventType.js"));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),h=function(i){function u(t){var r=i.call(this,t)||this;r.fontChangeListenerKey_=(0,l.listen)(o.checkedFonts,d.default.PROPERTYCHANGE,t.redrawText.bind(t)),r.element_=document.createElement("div");var n=r.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",r.element_.className=e.CLASS_UNSELECTABLE+" ol-layers";var s=t.getViewport();return s.insertBefore(r.element_,s.firstChild||null),r.children_=[],r.renderedVisible_=!0,r}return c(u,i),u.prototype.dispatchRenderEvent=function(e,t){var n=this.getMap();if(n.hasListener(e)){var i=new r.default(e,void 0,t);n.dispatchEvent(i)}},u.prototype.disposeInternal=function(){(0,l.unlistenByKey)(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),i.prototype.disposeInternal.call(this)},u.prototype.renderFrame=function(e){if(e){this.calculateMatrices2D(e),this.dispatchRenderEvent(n.default.PRECOMPOSE,e);var r=e.layerStatesArray.sort(function(e,t){return e.zIndex-t.zIndex}),l=e.viewState;this.children_.length=0;for(var o=null,d=0,u=r.length;d<u;++d){var c=r[d];if(e.layerIndex=d,(0,t.inView)(c,l)&&(c.sourceState==s.default.READY||c.sourceState==s.default.UNDEFINED)){var h=c.layer.render(e,o);h&&h!==o&&(this.children_.push(h),o=h)}}i.prototype.renderFrame.call(this,e),(0,a.replaceChildren)(this.element_,this.children_),this.dispatchRenderEvent(n.default.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)},u.prototype.forEachLayerAtPixel=function(e,r,n,i,s){for(var a=r.viewState,l=r.layerStatesArray,o=l.length-1;o>=0;--o){var d=l[o],u=d.layer;if(u.hasRenderer()&&(0,t.inView)(d,a)&&s(u)){var c=u.getRenderer().getDataAtPixel(e,r,n);if(c){var h=i(u,c);if(h)return h}}}},u}(i.default),p=h;exports.default=p;
},{"../css.js":"HgMV","../layer/Layer.js":"GCgv","../render/Event.js":"EB6P","../render/EventType.js":"z39m","./Map.js":"oIh9","../source/State.js":"iC8j","../dom.js":"Xno5","../events.js":"UqnM","../render/canvas.js":"iAG7","../ObjectEventType.js":"zehl"}],"VpAM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"};exports.default=t;
},{}],"qWcX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("./MapEventType.js")),t=p(require("./Object.js")),n=u(require("./OverlayPositioning.js")),i=require("./css.js"),o=require("./dom.js"),r=require("./events.js"),s=require("./extent.js");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function p(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var r=i?Object.getOwnPropertyDescriptor(e,o):null;r&&(r.get||r.set)?Object.defineProperty(n,o,r):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function u(e){return e&&e.__esModule?e:{default:e}}var d=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),l={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"},f=function(a){function p(e){var o=a.call(this)||this;o.options=e,o.id=e.id,o.insertFirst=void 0===e.insertFirst||e.insertFirst,o.stopEvent=void 0===e.stopEvent||e.stopEvent,o.element=document.createElement("div"),o.element.className=void 0!==e.className?e.className:"ol-overlay-container "+i.CLASS_SELECTABLE,o.element.style.position="absolute";var r=e.autoPan;return r&&"object"!=typeof r&&(r={animation:e.autoPanAnimation,margin:e.autoPanMargin}),o.autoPan=r||!1,o.rendered={transform_:"",visible:!0},o.mapPostrenderListenerKey=null,o.addEventListener((0,t.getChangeEventType)(l.ELEMENT),o.handleElementChanged),o.addEventListener((0,t.getChangeEventType)(l.MAP),o.handleMapChanged),o.addEventListener((0,t.getChangeEventType)(l.OFFSET),o.handleOffsetChanged),o.addEventListener((0,t.getChangeEventType)(l.POSITION),o.handlePositionChanged),o.addEventListener((0,t.getChangeEventType)(l.POSITIONING),o.handlePositioningChanged),void 0!==e.element&&o.setElement(e.element),o.setOffset(void 0!==e.offset?e.offset:[0,0]),o.setPositioning(void 0!==e.positioning?e.positioning:n.default.TOP_LEFT),void 0!==e.position&&o.setPosition(e.position),o}return d(p,a),p.prototype.getElement=function(){return this.get(l.ELEMENT)},p.prototype.getId=function(){return this.id},p.prototype.getMap=function(){return this.get(l.MAP)},p.prototype.getOffset=function(){return this.get(l.OFFSET)},p.prototype.getPosition=function(){return this.get(l.POSITION)},p.prototype.getPositioning=function(){return this.get(l.POSITIONING)},p.prototype.handleElementChanged=function(){(0,o.removeChildren)(this.element);var e=this.getElement();e&&this.element.appendChild(e)},p.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&((0,o.removeNode)(this.element),(0,r.unlistenByKey)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=(0,r.listen)(t,e.default.POSTRENDER,this.render,this),this.updatePixelPosition();var n=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?n.insertBefore(this.element,n.childNodes[0]||null):n.appendChild(this.element),this.performAutoPan()}},p.prototype.render=function(){this.updatePixelPosition()},p.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},p.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},p.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},p.prototype.setElement=function(e){this.set(l.ELEMENT,e)},p.prototype.setMap=function(e){this.set(l.MAP,e)},p.prototype.setOffset=function(e){this.set(l.OFFSET,e)},p.prototype.setPosition=function(e){this.set(l.POSITION,e)},p.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},p.prototype.panIntoView=function(e){var t=this.getMap();if(t&&t.getTargetElement()&&this.get(l.POSITION)){var n=this.getRect(t.getTargetElement(),t.getSize()),i=this.getElement(),r=this.getRect(i,[(0,o.outerWidth)(i),(0,o.outerHeight)(i)]),a=void 0===e.margin?20:e.margin;if(!(0,s.containsExtent)(n,r)){var p=r[0]-n[0],u=n[2]-r[2],d=r[1]-n[1],f=n[3]-r[3],h=[0,0];if(p<0?h[0]=p-a:u<0&&(h[0]=Math.abs(u)+a),d<0?h[1]=d-a:f<0&&(h[1]=Math.abs(f)+a),0!==h[0]||0!==h[1]){var g=t.getView().getCenterInternal(),c=t.getPixelFromCoordinateInternal(g),E=[c[0]+h[0],c[1]+h[1]],P=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(E),duration:P.duration,easing:P.easing})}}}},p.prototype.getRect=function(e,t){var n=e.getBoundingClientRect(),i=n.left+window.pageXOffset,o=n.top+window.pageYOffset;return[i,o,i+t[0],o+t[1]]},p.prototype.setPositioning=function(e){this.set(l.POSITIONING,e)},p.prototype.setVisible=function(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)},p.prototype.updatePixelPosition=function(){var e=this.getMap(),t=this.getPosition();if(e&&e.isRendered()&&t){var n=e.getPixelFromCoordinate(t),i=e.getSize();this.updateRenderedPosition(n,i)}else this.setVisible(!1)},p.prototype.updateRenderedPosition=function(e,t){var i=this.element.style,o=this.getOffset(),r=this.getPositioning();this.setVisible(!0);var s=Math.round(e[0]+o[0])+"px",a=Math.round(e[1]+o[1])+"px",p="0%",u="0%";r==n.default.BOTTOM_RIGHT||r==n.default.CENTER_RIGHT||r==n.default.TOP_RIGHT?p="-100%":r!=n.default.BOTTOM_CENTER&&r!=n.default.CENTER_CENTER&&r!=n.default.TOP_CENTER||(p="-50%"),r==n.default.BOTTOM_LEFT||r==n.default.BOTTOM_CENTER||r==n.default.BOTTOM_RIGHT?u="-100%":r!=n.default.CENTER_LEFT&&r!=n.default.CENTER_CENTER&&r!=n.default.CENTER_RIGHT||(u="-50%");var d="translate("+p+", "+u+") translate("+s+", "+a+")";this.rendered.transform_!=d&&(this.rendered.transform_=d,i.transform=d,i.msTransform=d)},p.prototype.getOptions=function(){return this.options},p}(t.default),h=f;exports.default=h;
},{"./MapEventType.js":"xLGm","./Object.js":"PhPh","./OverlayPositioning.js":"VpAM","./css.js":"HgMV","./dom.js":"Xno5","./events.js":"UqnM","./extent.js":"QDir"}],"KMhA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.render=C,exports.default=void 0;var e=f(require("../PluggableMap.js")),t=f(require("../renderer/Composite.js")),i=f(require("../MapEventType.js")),o=f(require("../MapProperty.js")),n=require("../Object.js"),a=f(require("../ObjectEventType.js")),l=f(require("../Overlay.js")),r=f(require("../OverlayPositioning.js")),s=f(require("../ViewProperty.js")),p=f(require("./Control.js")),d=require("../geom/Polygon.js"),h=require("../css.js"),u=require("../dom.js"),c=require("../events.js"),v=f(require("../events/EventType.js")),_=require("../extent.js"),g=f(require("../View.js"));function f(e){return e&&e.__esModule?e:{default:e}}var w=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),m=.75,b=.1,y=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return w(i,e),i.prototype.createRenderer=function(){return new t.default(this)},i}(e.default),E=function(e){function t(t){var i=this,o=t||{};(i=e.call(this,{element:document.createElement("div"),render:o.render||C,target:o.target})||this).boundHandleRotationChanged_=i.handleRotationChanged_.bind(i),i.collapsed_=void 0===o.collapsed||o.collapsed,i.collapsible_=void 0===o.collapsible||o.collapsible,i.collapsible_||(i.collapsed_=!1),i.rotateWithView_=void 0!==o.rotateWithView&&o.rotateWithView,i.viewExtent_=void 0;var n=void 0!==o.className?o.className:"ol-overviewmap",a=void 0!==o.tipLabel?o.tipLabel:"Overview map",s=void 0!==o.collapseLabel?o.collapseLabel:"«";"string"==typeof s?(i.collapseLabel_=document.createElement("span"),i.collapseLabel_.textContent=s):i.collapseLabel_=s;var p=void 0!==o.label?o.label:"»";"string"==typeof p?(i.label_=document.createElement("span"),i.label_.textContent=p):i.label_=p;var d=i.collapsible_&&!i.collapsed_?i.collapseLabel_:i.label_,u=document.createElement("button");u.setAttribute("type","button"),u.title=a,u.appendChild(d),u.addEventListener(v.default.CLICK,i.handleClick_.bind(i),!1),i.ovmapDiv_=document.createElement("div"),i.ovmapDiv_.className="ol-overviewmap-map",i.view_=o.view,i.ovmap_=new y({view:o.view});var c=i.ovmap_;o.layers&&o.layers.forEach(function(e){c.addLayer(e)});var _=document.createElement("div");_.className="ol-overviewmap-box",_.style.boxSizing="border-box",i.boxOverlay_=new l.default({position:[0,0],positioning:r.default.CENTER_CENTER,element:_}),i.ovmap_.addOverlay(i.boxOverlay_);var g=n+" "+h.CLASS_UNSELECTABLE+" "+h.CLASS_CONTROL+(i.collapsed_&&i.collapsible_?" "+h.CLASS_COLLAPSED:"")+(i.collapsible_?"":" ol-uncollapsible"),f=i.element;f.className=g,f.appendChild(i.ovmapDiv_),f.appendChild(u);var w=i,m=i.boxOverlay_,b=i.boxOverlay_.getElement(),E=function(e){var t,i={clientX:(t=e).clientX,clientY:t.clientY},o=c.getEventCoordinateInternal(i);m.setPosition(o)},x=function(e){var t=c.getEventCoordinateInternal(e);w.getMap().getView().setCenterInternal(t),window.removeEventListener("mousemove",E),window.removeEventListener("mouseup",x)};return b.addEventListener("mousedown",function(){window.addEventListener("mousemove",E),window.addEventListener("mouseup",x)}),i}return w(t,e),t.prototype.setMap=function(t){var i=this.getMap();if(t!==i){if(i){var o=i.getView();o&&this.unbindView_(o),this.ovmap_.setTarget(null)}if(e.prototype.setMap.call(this,t),t){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push((0,c.listen)(t,a.default.PROPERTYCHANGE,this.handleMapPropertyChange_,this));var n=t.getView();n&&(this.bindView_(n),n.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_()))}}},t.prototype.handleMapPropertyChange_=function(e){if(e.key===o.default.VIEW){var t=e.oldValue;t&&this.unbindView_(t);var i=this.getMap().getView();this.bindView_(i)}},t.prototype.bindView_=function(e){if(!this.view_){var t=new g.default({projection:e.getProjection()});this.ovmap_.setView(t)}e.addEventListener((0,n.getChangeEventType)(s.default.ROTATION),this.boundHandleRotationChanged_),this.handleRotationChanged_()},t.prototype.unbindView_=function(e){e.removeEventListener((0,n.getChangeEventType)(s.default.ROTATION),this.boundHandleRotationChanged_)},t.prototype.handleRotationChanged_=function(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())},t.prototype.validateExtent_=function(){var e=this.getMap(),t=this.ovmap_;if(e.isRendered()&&t.isRendered()){var i=e.getSize(),o=e.getView().calculateExtentInternal(i);if(!this.viewExtent_||!(0,_.equals)(o,this.viewExtent_)){this.viewExtent_=o;var n=t.getSize(),a=t.getView().calculateExtentInternal(n),l=t.getPixelFromCoordinateInternal((0,_.getTopLeft)(o)),r=t.getPixelFromCoordinateInternal((0,_.getBottomRight)(o)),s=Math.abs(l[0]-r[0]),p=Math.abs(l[1]-r[1]),d=n[0],h=n[1];s<d*b||p<h*b||s>d*m||p>h*m?this.resetExtent_():(0,_.containsExtent)(a,o)||this.recenter_()}}},t.prototype.resetExtent_=function(){if(0!==m&&0!==b){var e=this.getMap(),t=this.ovmap_,i=e.getSize(),o=e.getView().calculateExtentInternal(i),n=t.getView(),a=Math.log(m/b)/Math.LN2,l=1/(Math.pow(2,a/2)*b);(0,_.scaleFromCenter)(o,l),n.fitInternal((0,d.fromExtent)(o))}},t.prototype.recenter_=function(){var e=this.getMap(),t=this.ovmap_,i=e.getView();t.getView().setCenterInternal(i.getCenterInternal())},t.prototype.updateBox_=function(){var e=this.getMap(),t=this.ovmap_;if(e.isRendered()&&t.isRendered()){var i=e.getSize(),o=e.getView(),n=t.getView(),a=this.rotateWithView_?0:-o.getRotation(),l=this.boxOverlay_,r=this.boxOverlay_.getElement(),s=o.getCenterInternal(),p=o.getResolution(),d=n.getResolution(),h=i[0]*p/d,u=i[1]*p/d;if(l.setPosition(s),r){r.style.width=h+"px",r.style.height=u+"px";var c="rotate("+a+"rad)";r.style.transform=c}}},t.prototype.handleClick_=function(e){e.preventDefault(),this.handleToggle_()},t.prototype.handleToggle_=function(){this.element.classList.toggle(h.CLASS_COLLAPSED),this.collapsed_?(0,u.replaceNode)(this.collapseLabel_,this.label_):(0,u.replaceNode)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;var e=this.ovmap_;if(!this.collapsed_){if(e.isRendered())return this.viewExtent_=void 0,void e.render();e.updateSize(),this.resetExtent_(),(0,c.listenOnce)(e,i.default.POSTRENDER,function(e){this.updateBox_()},this)}},t.prototype.getCollapsible=function(){return this.collapsible_},t.prototype.setCollapsible=function(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())},t.prototype.setCollapsed=function(e){this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()},t.prototype.getCollapsed=function(){return this.collapsed_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.setRotateWithView=function(e){this.rotateWithView_!==e&&(this.rotateWithView_=e,0!==this.getMap().getView().getRotation()&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))},t.prototype.getOverviewMap=function(){return this.ovmap_},t}(p.default);function C(e){this.validateExtent_(),this.updateBox_()}var x=E;exports.default=x;
},{"../PluggableMap.js":"kRwz","../renderer/Composite.js":"MHsB","../MapEventType.js":"xLGm","../MapProperty.js":"zlNQ","../Object.js":"PhPh","../ObjectEventType.js":"zehl","../Overlay.js":"qWcX","../OverlayPositioning.js":"VpAM","../ViewProperty.js":"cE7c","./Control.js":"xxE2","../geom/Polygon.js":"Nwwk","../css.js":"HgMV","../dom.js":"Xno5","../events.js":"UqnM","../events/EventType.js":"C8cu","../extent.js":"QDir","../View.js":"hNqE"}],"DK5d":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.render=h,exports.default=exports.Units=void 0;var e=require("../Object.js"),t=require("../asserts.js"),r=a(require("./Control.js")),i=require("../css.js"),s=require("../proj.js"),n=a(require("../proj/Units.js"));function a(e){return e&&e.__esModule?e:{default:e}}var o=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),l="units",d={DEGREES:"degrees",IMPERIAL:"imperial",NAUTICAL:"nautical",METRIC:"metric",US:"us"};exports.Units=d;var c=[1,2,5],p=function(r){function a(t){var s=this,n=t||{},a=void 0!==n.className?n.className:n.bar?"ol-scale-bar":"ol-scale-line";return(s=r.call(this,{element:document.createElement("div"),render:n.render||h,target:n.target})||this).innerElement_=document.createElement("div"),s.innerElement_.className=a+"-inner",s.element.className=a+" "+i.CLASS_UNSELECTABLE,s.element.appendChild(s.innerElement_),s.viewState_=null,s.minWidth_=void 0!==n.minWidth?n.minWidth:64,s.renderedVisible_=!1,s.renderedWidth_=void 0,s.renderedHTML_="",s.addEventListener((0,e.getChangeEventType)(l),s.handleUnitsChanged_),s.setUnits(n.units||d.METRIC),s.scaleBar_=n.bar||!1,s.scaleBarSteps_=n.steps||4,s.scaleBarText_=n.text||!1,s}return o(a,r),a.prototype.getUnits=function(){return this.get(l)},a.prototype.handleUnitsChanged_=function(){this.updateElement_()},a.prototype.setUnits=function(e){this.set(l,e)},a.prototype.updateElement_=function(){var e=this.viewState_;if(e){var r=e.center,i=e.projection,a=this.getUnits(),o=a==d.DEGREES?n.default.DEGREES:n.default.METERS,l=(0,s.getPointResolution)(i,e.resolution,r,o),p=this.minWidth_*l,h="";if(a==d.DEGREES){var u=s.METERS_PER_UNIT[n.default.DEGREES];(p*=u)<u/60?(h="″",l*=3600):p<u?(h="′",l*=60):h="°"}else a==d.IMPERIAL?p<.9144?(h="in",l/=.0254):p<1609.344?(h="ft",l/=.3048):(h="mi",l/=1609.344):a==d.NAUTICAL?(l/=1852,h="nm"):a==d.METRIC?p<.001?(h="μm",l*=1e6):p<1?(h="mm",l*=1e3):p<1e3?h="m":(h="km",l/=1e3):a==d.US?p<.9144?(h="in",l*=39.37):p<1609.344?(h="ft",l/=.30480061):(h="mi",l/=1609.3472):(0,t.assert)(!1,33);for(var f,_,v,m,E=3*Math.floor(Math.log(this.minWidth_*l)/Math.log(10));;){v=Math.floor(E/3);var S=Math.pow(10,v);if(f=c[(E%3+3)%3]*S,_=Math.round(f/l),isNaN(_))return this.element.style.display="none",void(this.renderedVisible_=!1);if(_>=this.minWidth_)break;++E}m=this.scaleBar_?this.createScaleBar(_,f,h):f.toFixed(v<0?-v:0)+" "+h,this.renderedHTML_!=m&&(this.innerElement_.innerHTML=m,this.renderedHTML_=m),this.renderedWidth_!=_&&(this.innerElement_.style.width=_+"px",this.renderedWidth_=_),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},a.prototype.createScaleBar=function(e,t,r){for(var i="1 : "+Math.round(this.getScaleForResolution()).toLocaleString(),s=[],n=e/this.scaleBarSteps_,a="#ffffff",o=0;o<this.scaleBarSteps_;o++)0===o&&s.push(this.createMarker("absolute",o)),s.push('<div><div class="ol-scale-singlebar" style="width: '+n+"px;background-color: "+a+';"></div>'+this.createMarker("relative",o)+(o%2==0||2===this.scaleBarSteps_?this.createStepText(o,e,!1,t,r):"")+"</div>"),o===this.scaleBarSteps_-1&&s.push(this.createStepText(o+1,e,!0,t,r)),a="#ffffff"===a?"#000000":"#ffffff";return'<div style="display: flex;">'+(this.scaleBarText_?'<div class="ol-scale-text" style="width: '+e+'px;">'+i+"</div>":"")+s.join("")+"</div>"},a.prototype.createMarker=function(e,t){return'<div class="ol-scale-step-marker" style="position: '+e+";top: "+("absolute"===e?3:-10)+'px;"></div>'},a.prototype.createStepText=function(e,t,r,i,s){var n=(0===e?0:Math.round(i/this.scaleBarSteps_*e*100)/100)+(0===e?"":" "+s);return'<div class="ol-scale-step-text" style="margin-left: '+(0===e?-3:t/this.scaleBarSteps_*-1)+"px;text-align: "+(0===e?"left":"center")+"; min-width: "+(0===e?0:t/this.scaleBarSteps_*2)+"px;left: "+(r?t+"px":"unset")+';">'+n+"</div>"},a.prototype.getScaleForResolution=function(){var e=this.getMap().getView().getResolution(),t=this.viewState_.projection.getMetersPerUnit();return parseFloat(e.toString())*t*39.37*(25.4/.28)},a}(r.default);function h(e){var t=e.frameState;this.viewState_=t?t.viewState:null,this.updateElement_()}var u=p;exports.default=u;
},{"../Object.js":"PhPh","../asserts.js":"fLG6","./Control.js":"xxE2","../css.js":"HgMV","../proj.js":"Diht","../proj/Units.js":"yZx6"}],"AKwM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.render=g,exports.default=void 0,require("elm-pep");var t=l(require("./Control.js")),e=require("../css.js"),i=require("../easing.js"),n=require("../events.js"),r=require("../events/Event.js"),o=l(require("../events/EventType.js")),s=require("../math.js"),a=l(require("../pointer/EventType.js"));function l(t){return t&&t.__esModule?t:{default:t}}var h=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),d={VERTICAL:0,HORIZONTAL:1},u=function(t){function l(i){var n=this,s=i||{};(n=t.call(this,{element:document.createElement("div"),render:s.render||g})||this).dragListenerKeys_=[],n.currentResolution_=void 0,n.direction_=d.VERTICAL,n.dragging_,n.heightLimit_=0,n.widthLimit_=0,n.startX_,n.startY_,n.thumbSize_=null,n.sliderInitialized_=!1,n.duration_=void 0!==s.duration?s.duration:200;var l=void 0!==s.className?s.className:"ol-zoomslider",h=document.createElement("button");h.setAttribute("type","button"),h.className=l+"-thumb "+e.CLASS_UNSELECTABLE;var u=n.element;return u.className=l+" "+e.CLASS_UNSELECTABLE+" "+e.CLASS_CONTROL,u.appendChild(h),u.addEventListener(a.default.POINTERDOWN,n.handleDraggerStart_.bind(n),!1),u.addEventListener(a.default.POINTERMOVE,n.handleDraggerDrag_.bind(n),!1),u.addEventListener(a.default.POINTERUP,n.handleDraggerEnd_.bind(n),!1),u.addEventListener(o.default.CLICK,n.handleContainerClick_.bind(n),!1),h.addEventListener(o.default.CLICK,r.stopPropagation,!1),n}return h(l,t),l.prototype.setMap=function(e){t.prototype.setMap.call(this,e),e&&e.render()},l.prototype.initSlider_=function(){var t=this.element,e=t.offsetWidth,i=t.offsetHeight,n=t.firstElementChild,r=getComputedStyle(n),o=n.offsetWidth+parseFloat(r.marginRight)+parseFloat(r.marginLeft),s=n.offsetHeight+parseFloat(r.marginTop)+parseFloat(r.marginBottom);this.thumbSize_=[o,s],e>i?(this.direction_=d.HORIZONTAL,this.widthLimit_=e-o):(this.direction_=d.VERTICAL,this.heightLimit_=i-s),this.sliderInitialized_=!0},l.prototype.handleContainerClick_=function(t){var e=this.getMap().getView(),n=this.getRelativePosition_(t.offsetX-this.thumbSize_[0]/2,t.offsetY-this.thumbSize_[1]/2),r=this.getResolutionForPosition_(n),o=e.getConstrainedZoom(e.getZoomForResolution(r));e.animateInternal({zoom:o,duration:this.duration_,easing:i.easeOut})},l.prototype.handleDraggerStart_=function(t){if(!this.dragging_&&t.target===this.element.firstElementChild){var e=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.startX_=t.clientX-parseFloat(e.style.left),this.startY_=t.clientY-parseFloat(e.style.top),this.dragging_=!0,0===this.dragListenerKeys_.length){var i=this.handleDraggerDrag_,r=this.handleDraggerEnd_;this.dragListenerKeys_.push((0,n.listen)(document,a.default.POINTERMOVE,i,this),(0,n.listen)(document,a.default.POINTERUP,r,this))}}},l.prototype.handleDraggerDrag_=function(t){if(this.dragging_){var e=t.clientX-this.startX_,i=t.clientY-this.startY_,n=this.getRelativePosition_(e,i);this.currentResolution_=this.getResolutionForPosition_(n),this.getMap().getView().setResolution(this.currentResolution_)}},l.prototype.handleDraggerEnd_=function(t){this.dragging_&&(this.getMap().getView().endInteraction(),this.dragging_=!1,this.startX_=void 0,this.startY_=void 0,this.dragListenerKeys_.forEach(n.unlistenByKey),this.dragListenerKeys_.length=0)},l.prototype.setThumbPosition_=function(t){var e=this.getPositionForResolution_(t),i=this.element.firstElementChild;this.direction_==d.HORIZONTAL?i.style.left=this.widthLimit_*e+"px":i.style.top=this.heightLimit_*e+"px"},l.prototype.getRelativePosition_=function(t,e){var i;return i=this.direction_===d.HORIZONTAL?t/this.widthLimit_:e/this.heightLimit_,(0,s.clamp)(i,0,1)},l.prototype.getResolutionForPosition_=function(t){return this.getMap().getView().getResolutionForValueFunction()(1-t)},l.prototype.getPositionForResolution_=function(t){var e=this.getMap().getView().getValueForResolutionFunction();return(0,s.clamp)(1-e(t),0,1)},l}(t.default);function g(t){if(t.frameState){this.sliderInitialized_||this.initSlider_();var e=t.frameState.viewState.resolution;this.currentResolution_=e,this.setThumbPosition_(e)}}var _=u;exports.default=_;
},{"elm-pep":"tMKf","./Control.js":"xxE2","../css.js":"HgMV","../easing.js":"IeCz","../events.js":"UqnM","../events/Event.js":"fKNg","../events/EventType.js":"C8cu","../math.js":"B96G","../pointer/EventType.js":"TaSm"}],"W4Y0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("../events/EventType.js")),e=require("../geom/Polygon.js"),n=r(require("./Control.js")),o=require("../css.js");function r(t){return t&&t.__esModule?t:{default:t}}var i=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=function(n){function r(e){var r=this,i=e||{};(r=n.call(this,{element:document.createElement("div"),target:i.target})||this).extent=i.extent?i.extent:null;var a=void 0!==i.className?i.className:"ol-zoom-extent",l=void 0!==i.label?i.label:"E",u=void 0!==i.tipLabel?i.tipLabel:"Fit to extent",s=document.createElement("button");s.setAttribute("type","button"),s.title=u,s.appendChild("string"==typeof l?document.createTextNode(l):l),s.addEventListener(t.default.CLICK,r.handleClick_.bind(r),!1);var c=a+" "+o.CLASS_UNSELECTABLE+" "+o.CLASS_CONTROL,p=r.element;return p.className=c,p.appendChild(s),r}return i(r,n),r.prototype.handleClick_=function(t){t.preventDefault(),this.handleZoomToExtent()},r.prototype.handleZoomToExtent=function(){var t=this.getMap().getView(),n=this.extent?this.extent:t.getProjection().getExtent();t.fitInternal((0,e.fromExtent)(n))},r}(n.default),l=a;exports.default=l;
},{"../events/EventType.js":"C8cu","../geom/Polygon.js":"Nwwk","./Control.js":"xxE2","../css.js":"HgMV"}],"ucqx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaults=d,Object.defineProperty(exports,"Attribution",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"Rotate",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"Zoom",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"Control",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"FullScreen",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"MousePosition",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"OverviewMap",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"ScaleLine",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"ZoomSlider",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(exports,"ZoomToExtent",{enumerable:!0,get:function(){return f.default}});var e=s(require("./Collection.js")),t=s(require("./control/Attribution.js")),r=s(require("./control/Rotate.js")),o=s(require("./control/Zoom.js")),n=s(require("./control/Control.js")),u=s(require("./control/FullScreen.js")),i=s(require("./control/MousePosition.js")),l=s(require("./control/OverviewMap.js")),a=s(require("./control/ScaleLine.js")),c=s(require("./control/ZoomSlider.js")),f=s(require("./control/ZoomToExtent.js"));function s(e){return e&&e.__esModule?e:{default:e}}function d(n){var u=n||{},i=new e.default;return(void 0===u.zoom||u.zoom)&&i.push(new o.default(u.zoomOptions)),(void 0===u.rotate||u.rotate)&&i.push(new r.default(u.rotateOptions)),(void 0===u.attribution||u.attribution)&&i.push(new t.default(u.attributionOptions)),i}
},{"./Collection.js":"FnDa","./control/Attribution.js":"Q4Cf","./control/Rotate.js":"sCgw","./control/Zoom.js":"L3CO","./control/Control.js":"xxE2","./control/FullScreen.js":"dOoh","./control/MousePosition.js":"Cbl8","./control/OverviewMap.js":"KMhA","./control/ScaleLine.js":"DK5d","./control/ZoomSlider.js":"AKwM","./control/ZoomToExtent.js":"W4Y0"}],"caOi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ACTIVE:"active"};exports.default=e;
},{}],"jB2p":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pan=a,exports.zoomByDelta=u,exports.default=void 0;var t=o(require("../Object.js")),e=require("../easing.js"),n=o(require("./Property.js"));function o(t){return t&&t.__esModule?t:{default:t}}var r=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=function(t){function e(e){var n=t.call(this)||this;return e.handleEvent&&(n.handleEvent=e.handleEvent),n.map_=null,n.setActive(!0),n}return r(e,t),e.prototype.getActive=function(){return this.get(n.default.ACTIVE)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(n.default.ACTIVE,t)},e.prototype.setMap=function(t){this.map_=t},e}(t.default);function a(t,n,o){var r=t.getCenterInternal();if(r){var i=[r[0]+n[0],r[1]+n[1]];t.animateInternal({duration:void 0!==o?o:250,easing:e.linear,center:t.getConstrainedCenter(i)})}}function u(t,n,o,r){var i=t.getZoom();if(void 0!==i){var a=t.getConstrainedZoom(i+n),u=t.getResolutionForZoom(a);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:u,anchor:o,duration:void 0!==r?r:250,easing:e.easeOut})}}var s=i;exports.default=s;
},{"../Object.js":"PhPh","../easing.js":"IeCz","./Property.js":"caOi"}],"NSa4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("../MapBrowserEventType.js")),e=n(require("./Interaction.js"));function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in t)if(Object.prototype.hasOwnProperty.call(t,u)){var a=o?Object.getOwnPropertyDescriptor(t,u):null;a&&(a.get||a.set)?Object.defineProperty(n,u,a):n[u]=t[u]}return n.default=t,e&&e.set(t,n),n}function o(t){return t&&t.__esModule?t:{default:t}}var u=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),a=function(t){function e(e){var r=t.call(this,{handleEvent:i})||this,n=e||{};return r.delta_=n.delta?n.delta:1,r.duration_=void 0!==n.duration?n.duration:250,r}return u(e,t),e}(e.default);function i(r){var n=!1;if(r.type==t.default.DBLCLICK){var o=r.originalEvent,u=r.map,a=r.coordinate,i=o.shiftKey?-this.delta_:this.delta_,f=u.getView();(0,e.zoomByDelta)(f,i,a,this.duration_),r.preventDefault(),n=!0}return!n}var f=a;exports.default=f;
},{"../MapBrowserEventType.js":"YhDM","./Interaction.js":"jB2p"}],"YcID":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.primaryAction=exports.penOnly=exports.touchOnly=exports.mouseOnly=exports.targetNotEditable=exports.shiftKeyOnly=exports.platformModifierKeyOnly=exports.noModifierKeys=exports.doubleClick=exports.singleClick=exports.pointerMove=exports.never=exports.mouseActionButton=exports.click=exports.always=exports.focus=exports.altShiftKeysOnly=exports.altKeyOnly=void 0;var e=o(require("../MapBrowserEventType.js")),t=require("../asserts.js"),r=require("../functions.js"),n=require("../has.js");function o(e){return e&&e.__esModule?e:{default:e}}var i=function(e){var t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey};exports.altKeyOnly=i;var a=function(e){var t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey};exports.altShiftKeysOnly=a;var s=function(e){return e.target.getTargetElement()===document.activeElement};exports.focus=s;var p=r.TRUE;exports.always=p;var u=function(t){return t.type==e.default.CLICK};exports.click=u;var l=function(e){var t=e.originalEvent;return 0==t.button&&!(n.WEBKIT&&n.MAC&&t.ctrlKey)};exports.mouseActionButton=l;var y=r.FALSE;exports.never=y;var v=function(e){return"pointermove"==e.type};exports.pointerMove=v;var c=function(t){return t.type==e.default.SINGLECLICK};exports.singleClick=c;var f=function(t){return t.type==e.default.DBLCLICK};exports.doubleClick=f;var x=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey};exports.noModifierKeys=x;var K=function(e){var t=e.originalEvent;return!t.altKey&&(n.MAC?t.metaKey:t.ctrlKey)&&!t.shiftKey};exports.platformModifierKeyOnly=K;var E=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey};exports.shiftKeyOnly=E;var d=function(e){var t=e.originalEvent.target.tagName;return"INPUT"!==t&&"SELECT"!==t&&"TEXTAREA"!==t};exports.targetNotEditable=d;var m=function(e){var r=e.pointerEvent;return(0,t.assert)(void 0!==r,56),"mouse"==r.pointerType};exports.mouseOnly=m;var g=function(e){var r=e.pointerEvent;return(0,t.assert)(void 0!==r,56),"touch"===r.pointerType};exports.touchOnly=g;var O=function(e){var r=e.pointerEvent;return(0,t.assert)(void 0!==r,56),"pen"===r.pointerType};exports.penOnly=O;var h=function(e){var r=e.pointerEvent;return(0,t.assert)(void 0!==r,56),r.isPrimary&&0===r.button};exports.primaryAction=h;
},{"../MapBrowserEventType.js":"YhDM","../asserts.js":"fLG6","../functions.js":"RgA2","../has.js":"f3Nv"}],"dnA2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.centroid=a,exports.default=void 0;var t=r(require("../MapBrowserEventType.js")),e=r(require("./Interaction.js")),n=require("../obj.js");function r(t){return t&&t.__esModule?t:{default:t}}var o=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=function(e){function r(t){var n=this,r=t||{};return n=e.call(this,r)||this,r.handleDownEvent&&(n.handleDownEvent=r.handleDownEvent),r.handleDragEvent&&(n.handleDragEvent=r.handleDragEvent),r.handleMoveEvent&&(n.handleMoveEvent=r.handleMoveEvent),r.handleUpEvent&&(n.handleUpEvent=r.handleUpEvent),r.stopDown&&(n.stopDown=r.stopDown),n.handlingDownUpSequence=!1,n.trackedPointers_={},n.targetPointers=[],n}return o(r,e),r.prototype.getPointerCount=function(){return this.targetPointers.length},r.prototype.handleDownEvent=function(t){return!1},r.prototype.handleDragEvent=function(t){},r.prototype.handleEvent=function(e){if(!e.pointerEvent)return!0;var n=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==t.default.POINTERDRAG)this.handleDragEvent(e);else if(e.type==t.default.POINTERUP){var r=this.handleUpEvent(e);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(e.type==t.default.POINTERDOWN){var o=this.handleDownEvent(e);this.handlingDownUpSequence=o,n=this.stopDown(o)}else e.type==t.default.POINTERMOVE&&this.handleMoveEvent(e);return!n},r.prototype.handleMoveEvent=function(t){},r.prototype.handleUpEvent=function(t){return!1},r.prototype.stopDown=function(t){return t},r.prototype.updateTrackedPointers_=function(e){if(u(e)){var r=e.pointerEvent,o=r.pointerId.toString();e.type==t.default.POINTERUP?delete this.trackedPointers_[o]:e.type==t.default.POINTERDOWN?this.trackedPointers_[o]=r:o in this.trackedPointers_&&(this.trackedPointers_[o]=r),this.targetPointers=(0,n.getValues)(this.trackedPointers_)}},r}(e.default);function a(t){for(var e=t.length,n=0,r=0,o=0;o<e;o++)n+=t[o].clientX,r+=t[o].clientY;return[n/e,r/e]}function u(e){var n=e.type;return n===t.default.POINTERDOWN||n===t.default.POINTERDRAG||n===t.default.POINTERUP}var p=i;exports.default=p;
},{"../MapBrowserEventType.js":"YhDM","./Interaction.js":"jB2p","../obj.js":"mH6q"}],"N4gU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../coordinate.js"),e=require("../easing.js"),n=require("../events/condition.js"),i=require("../functions.js"),r=a(require("./Pointer.js"));function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}function a(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var a=i?Object.getOwnPropertyDescriptor(t,r):null;a&&(a.get||a.set)?Object.defineProperty(n,r,a):n[r]=t[r]}return n.default=t,e&&e.set(t,n),n}var s=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),c=function(o){function a(t){var e=o.call(this,{stopDown:i.FALSE})||this,n=t||{};return e.kinetic_=n.kinetic,e.lastCentroid=null,e.lastPointersCount_,e.panning_=!1,e.condition_=n.condition?n.condition:u,e.noKinetic_=!1,e}return s(a,o),a.prototype.conditionInternal_=function(t){var e=!0;return t.map.getTargetElement().hasAttribute("tabindex")&&(e=(0,n.focus)(t)),e&&this.condition_(t)},a.prototype.handleDragEvent=function(e){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var n=this.targetPointers,i=(0,r.centroid)(n);if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){var o=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],a=e.map.getView();(0,t.scale)(o,a.getResolution()),(0,t.rotate)(o,a.getRotation()),a.adjustCenterInternal(o)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=n.length,e.originalEvent.preventDefault()},a.prototype.handleUpEvent=function(t){var n=t.map,i=n.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var r=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),a=i.getCenterInternal(),s=n.getPixelFromCoordinateInternal(a),c=n.getCoordinateFromPixelInternal([s[0]-r*Math.cos(o),s[1]-r*Math.sin(o)]);i.animateInternal({center:i.getConstrainedCenter(c),duration:500,easing:e.easeOut})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},a.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.conditionInternal_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},a}(r.default);function u(t){return(0,n.noModifierKeys)(t)&&(0,n.primaryAction)(t)}var l=c;exports.default=l;
},{"../coordinate.js":"nGsj","../easing.js":"IeCz","../events/condition.js":"YcID","../functions.js":"RgA2","./Pointer.js":"dnA2"}],"PgBj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../rotationconstraint.js"),n=require("../events/condition.js"),e=require("../functions.js"),o=i(require("./Pointer.js"));function i(t){return t&&t.__esModule?t:{default:t}}var r=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function o(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),a=function(o){function i(t){var i=this,r=t||{};return(i=o.call(this,{stopDown:e.FALSE})||this).condition_=r.condition?r.condition:n.altShiftKeysOnly,i.lastAngle_=void 0,i.duration_=void 0!==r.duration?r.duration:250,i}return r(i,o),i.prototype.handleDragEvent=function(e){if((0,n.mouseOnly)(e)){var o=e.map,i=o.getView();if(i.getConstraints().rotation!==t.disable){var r=o.getSize(),a=e.pixel,u=Math.atan2(r[1]/2-a[1],a[0]-r[0]/2);if(void 0!==this.lastAngle_){var s=u-this.lastAngle_;i.adjustRotationInternal(-s)}this.lastAngle_=u}}},i.prototype.handleUpEvent=function(t){return!(0,n.mouseOnly)(t)||(t.map.getView().endInteraction(this.duration_),!1)},i.prototype.handleDownEvent=function(t){return!!(0,n.mouseOnly)(t)&&(!(!(0,n.mouseActionButton)(t)||!this.condition_(t))&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0))},i}(o.default),u=a;exports.default=u;
},{"../rotationconstraint.js":"EKd0","../events/condition.js":"YcID","../functions.js":"RgA2","./Pointer.js":"dnA2"}],"bMDg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("../Disposable.js")),e=i(require("../geom/Polygon.js"));function i(t){return t&&t.__esModule?t:{default:t}}var r=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),n=function(t){function i(e){var i=t.call(this)||this;return i.geometry_=null,i.element_=document.createElement("div"),i.element_.style.position="absolute",i.element_.className="ol-box "+e,i.map_=null,i.startPixel_=null,i.endPixel_=null,i}return r(i,t),i.prototype.disposeInternal=function(){this.setMap(null)},i.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,i=this.element_.style;i.left=Math.min(t[0],e[0])+"px",i.top=Math.min(t[1],e[1])+"px",i.width=Math.abs(e[0]-t[0])+"px",i.height=Math.abs(e[1]-t[1])+"px"},i.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},i.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},i.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,i=this.endPixel_,r=[t,[t[0],i[1]],i,[i[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new e.default([r])},i.prototype.getGeometry=function(){return this.geometry_},i}(t.default),o=n;exports.default=o;
},{"../Disposable.js":"DDda","../geom/Polygon.js":"Nwwk"}],"AQRw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("../events/Event.js")),n=require("../events/condition.js"),o=require("../functions.js"),e=r(require("./Pointer.js")),i=r(require("../render/Box.js"));function r(t){return t&&t.__esModule?t:{default:t}}var s=function(){var t=function(n,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])})(n,o)};return function(n,o){function e(){this.constructor=n}t(n,o),n.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}}(),a={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend"},u=function(t){function n(n,o,e){var i=t.call(this,n)||this;return i.coordinate=o,i.mapBrowserEvent=e,i}return s(n,t),n}(t.default),d=function(t){function e(e){var r=t.call(this)||this,s=e||{};return r.box_=new i.default(s.className||"ol-dragbox"),r.minArea_=void 0!==s.minArea?s.minArea:64,r.onBoxEnd_=s.onBoxEnd?s.onBoxEnd:o.VOID,r.startPixel_=null,r.condition_=s.condition?s.condition:n.mouseActionButton,r.boxEndCondition_=s.boxEndCondition?s.boxEndCondition:r.defaultBoxEndCondition,r}return s(e,t),e.prototype.defaultBoxEndCondition=function(t,n,o){var e=o[0]-n[0],i=o[1]-n[1];return e*e+i*i>=this.minArea_},e.prototype.getGeometry=function(){return this.box_.getGeometry()},e.prototype.handleDragEvent=function(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new u(a.BOXDRAG,t.coordinate,t))},e.prototype.handleUpEvent=function(t){return this.box_.setMap(null),this.boxEndCondition_(t,this.startPixel_,t.pixel)&&(this.onBoxEnd_(t),this.dispatchEvent(new u(a.BOXEND,t.coordinate,t))),!1},e.prototype.handleDownEvent=function(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new u(a.BOXSTART,t.coordinate,t)),!0)},e}(e.default),c=d;exports.default=c;
},{"../events/Event.js":"fKNg","../events/condition.js":"YcID","../functions.js":"RgA2","./Pointer.js":"dnA2","../render/Box.js":"bMDg"}],"pTqW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../easing.js"),e=require("../events/condition.js"),n=require("../extent.js"),o=r(require("./DragBox.js"));function r(t){return t&&t.__esModule?t:{default:t}}var i=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=function(t){function n(n){var o=this,r=n||{},i=r.condition?r.condition:e.shiftKeyOnly;return(o=t.call(this,{condition:i,className:r.className||"ol-dragzoom",minArea:r.minArea,onBoxEnd:u})||this).duration_=void 0!==r.duration?r.duration:200,o.out_=void 0!==r.out&&r.out,o}return i(n,t),n}(o.default);function u(){var e=this.getMap(),o=e.getView(),r=e.getSize(),i=this.getGeometry().getExtent();if(this.out_){var a=o.calculateExtentInternal(r),u=(0,n.createOrUpdateFromCoordinates)([e.getPixelFromCoordinateInternal((0,n.getBottomLeft)(i)),e.getPixelFromCoordinateInternal((0,n.getTopRight)(i))]),s=o.getResolutionForExtentInternal(u,r);(0,n.scaleFromCenter)(a,1/s),i=a}var c=o.getConstrainedResolution(o.getResolutionForExtentInternal(i,r)),l=o.getConstrainedCenter((0,n.getCenter)(i),c);o.animateInternal({resolution:c,center:l,duration:this.duration_,easing:t.easeOut})}var s=a;exports.default=s;
},{"../easing.js":"IeCz","../events/condition.js":"YcID","../extent.js":"QDir","./DragBox.js":"AQRw"}],"mmJk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={LEFT:37,UP:38,RIGHT:39,DOWN:40};exports.default=e;
},{}],"CFRo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../coordinate.js"),e=a(require("../events/EventType.js")),r=a(require("../events/KeyCode.js")),n=require("../events/condition.js"),o=u(require("./Interaction.js"));function i(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}function u(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=i();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var u=n?Object.getOwnPropertyDescriptor(t,o):null;u&&(u.get||u.set)?Object.defineProperty(r,o,u):r[o]=t[o]}return r.default=t,e&&e.set(t,r),r}function a(t){return t&&t.__esModule?t:{default:t}}var f=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),l=function(t){function e(e){var r=t.call(this,{handleEvent:d})||this,o=e||{};return r.defaultCondition_=function(t){return(0,n.noModifierKeys)(t)&&(0,n.targetNotEditable)(t)},r.condition_=void 0!==o.condition?o.condition:r.defaultCondition_,r.duration_=void 0!==o.duration?o.duration:100,r.pixelDelta_=void 0!==o.pixelDelta?o.pixelDelta:128,r}return f(e,t),e}(o.default);function d(n){var i=!1;if(n.type==e.default.KEYDOWN){var u=n.originalEvent.keyCode;if(this.condition_(n)&&(u==r.default.DOWN||u==r.default.LEFT||u==r.default.RIGHT||u==r.default.UP)){var a=n.map.getView(),f=a.getResolution()*this.pixelDelta_,l=0,d=0;u==r.default.DOWN?d=-f:u==r.default.LEFT?l=-f:u==r.default.RIGHT?l=f:d=f;var c=[l,d];(0,t.rotate)(c,a.getRotation()),(0,o.pan)(a,c,this.duration_),n.preventDefault(),i=!0}}return!i}var c=l;exports.default=c;
},{"../coordinate.js":"nGsj","../events/EventType.js":"C8cu","../events/KeyCode.js":"mmJk","../events/condition.js":"YcID","./Interaction.js":"jB2p"}],"S8wR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("../events/EventType.js")),e=require("../events/condition.js"),r=o(require("./Interaction.js"));function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var a=o?Object.getOwnPropertyDescriptor(t,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}function i(t){return t&&t.__esModule?t:{default:t}}var a=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),u=function(t){function r(r){var n=t.call(this,{handleEvent:c})||this,o=r||{};return n.condition_=o.condition?o.condition:e.targetNotEditable,n.delta_=o.delta?o.delta:1,n.duration_=void 0!==o.duration?o.duration:100,n}return a(r,t),r}(r.default);function c(e){var n=!1;if(e.type==t.default.KEYDOWN||e.type==t.default.KEYPRESS){var o=e.originalEvent.charCode;if(this.condition_(e)&&(o=="+".charCodeAt(0)||o=="-".charCodeAt(0))){var i=e.map,a=o=="+".charCodeAt(0)?this.delta_:-this.delta_,u=i.getView();(0,r.zoomByDelta)(u,a,void 0,this.duration_),e.preventDefault(),n=!0}}return!n}var f=u;exports.default=f;
},{"../events/EventType.js":"C8cu","../events/condition.js":"YcID","./Interaction.js":"jB2p"}],"kPt6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.Mode=void 0;var t=require("../events/condition.js"),e=s(require("../events/EventType.js")),o=require("../has.js"),i=a(require("./Interaction.js")),n=require("../math.js");function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function a(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var a=i?Object.getOwnPropertyDescriptor(t,n):null;a&&(a.get||a.set)?Object.defineProperty(o,n,a):o[n]=t[n]}return o.default=t,e&&e.set(t,o),o}function s(t){return t&&t.__esModule?t:{default:t}}var u=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),l={TRACKPAD:"trackpad",WHEEL:"wheel"};exports.Mode=l;var d=function(r){function a(e){var o=this,i=e||{};return(o=r.call(this,i)||this).totalDelta_=0,o.lastDelta_=0,o.maxDelta_=void 0!==i.maxDelta?i.maxDelta:1,o.duration_=void 0!==i.duration?i.duration:250,o.timeout_=void 0!==i.timeout?i.timeout:80,o.useAnchor_=void 0===i.useAnchor||i.useAnchor,o.condition_=i.condition?i.condition:t.always,o.lastAnchor_=null,o.startTime_=void 0,o.timeoutId_,o.mode_=void 0,o.trackpadEventGap_=400,o.trackpadTimeoutId_,o.deltaPerZoom_=300,o}return u(a,r),a.prototype.conditionInternal_=function(e){var o=!0;return e.map.getTargetElement().hasAttribute("tabindex")&&(o=(0,t.focus)(e)),o&&this.condition_(e)},a.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)},a.prototype.handleEvent=function(t){if(!this.conditionInternal_(t))return!0;if(t.type!==e.default.WHEEL)return!0;t.preventDefault();var i,n=t.map,r=t.originalEvent;if(this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==e.default.WHEEL&&(i=r.deltaY,o.FIREFOX&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(i/=o.DEVICE_PIXEL_RATIO),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(i*=40)),0===i)return!1;this.lastDelta_=i;var a=Date.now();void 0===this.startTime_&&(this.startTime_=a),(!this.mode_||a-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(i)<4?l.TRACKPAD:l.WHEEL);var s=n.getView();if(this.mode_===l.TRACKPAD&&!s.getConstrainResolution())return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(s.getAnimating()&&s.cancelAnimations(),s.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),s.adjustZoom(-i/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=a,!1;this.totalDelta_+=i;var u=Math.max(this.timeout_-(a-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),u),!1},a.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();var o=-(0,n.clamp)(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;e.getConstrainResolution()&&(o=o?o>0?1:-1:0),(0,i.zoomByDelta)(e,o,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},a.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},a}(i.default),_=d;exports.default=_;
},{"../events/condition.js":"YcID","../events/EventType.js":"C8cu","../has.js":"f3Nv","./Interaction.js":"jB2p","../math.js":"B96G"}],"hbGN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../functions.js"),e=o(require("./Pointer.js")),n=require("../rotationconstraint.js");function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var a=o?Object.getOwnPropertyDescriptor(t,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=t[i]}return n.default=t,e&&e.set(t,n),n}var i=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=function(r){function o(e){var n=this,o=e||{},i=o;return i.stopDown||(i.stopDown=t.FALSE),(n=r.call(this,i)||this).anchor_=null,n.lastAngle_=void 0,n.rotating_=!1,n.rotationDelta_=0,n.threshold_=void 0!==o.threshold?o.threshold:.3,n.duration_=void 0!==o.duration?o.duration:250,n}return i(o,r),o.prototype.handleDragEvent=function(t){var r=0,o=this.targetPointers[0],i=this.targetPointers[1],a=Math.atan2(i.clientY-o.clientY,i.clientX-o.clientX);if(void 0!==this.lastAngle_){var s=a-this.lastAngle_;this.rotationDelta_+=s,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),r=s}this.lastAngle_=a;var l=t.map,u=l.getView();if(u.getConstraints().rotation!==n.disable){var c=l.getViewport().getBoundingClientRect(),h=(0,e.centroid)(this.targetPointers);h[0]-=c.left,h[1]-=c.top,this.anchor_=l.getCoordinateFromPixelInternal(h),this.rotating_&&(l.render(),u.adjustRotationInternal(r,this.anchor_))}},o.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2)||(t.map.getView().endInteraction(this.duration_),!1)},o.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},o}(e.default),s=a;exports.default=s;
},{"../functions.js":"RgA2","./Pointer.js":"dnA2","../rotationconstraint.js":"EKd0"}],"rcXm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../functions.js"),e=r(require("./Pointer.js"));function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}function r(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var a=o?Object.getOwnPropertyDescriptor(t,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}var o=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=function(n){function r(e){var r=this,o=e||{},i=o;return i.stopDown||(i.stopDown=t.FALSE),(r=n.call(this,i)||this).anchor_=null,r.duration_=void 0!==o.duration?o.duration:400,r.lastDistance_=void 0,r.lastScaleDelta_=1,r}return o(r,n),r.prototype.handleDragEvent=function(t){var n=1,r=this.targetPointers[0],o=this.targetPointers[1],i=r.clientX-o.clientX,a=r.clientY-o.clientY,s=Math.sqrt(i*i+a*a);void 0!==this.lastDistance_&&(n=this.lastDistance_/s),this.lastDistance_=s;var u=t.map,c=u.getView();1!=n&&(this.lastScaleDelta_=n);var l=u.getViewport().getBoundingClientRect(),p=(0,e.centroid)(this.targetPointers);p[0]-=l.left,p[1]-=l.top,this.anchor_=u.getCoordinateFromPixelInternal(p),u.render(),c.adjustResolutionInternal(n,this.anchor_)},r.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView(),n=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,n),!1}return!0},r.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},r}(e.default),a=i;exports.default=a;
},{"../functions.js":"RgA2","./Pointer.js":"dnA2"}],"IYO6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../functions.js"),e=require("../events.js"),r=o(require("../events/Event.js")),s=o(require("../events/EventType.js")),n=o(require("./Interaction.js")),i=require("../proj.js");function o(t){return t&&t.__esModule?t:{default:t}}var u=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function s(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(s.prototype=r.prototype,new s)}}(),a={ADD_FEATURES:"addfeatures"},c=function(t){function e(e,r,s,n){var i=t.call(this,e)||this;return i.features=s,i.file=r,i.projection=n,i}return u(e,t),e}(r.default),l=function(r){function n(e){var s=this,n=e||{};return(s=r.call(this,{handleEvent:t.TRUE})||this).formatConstructors_=n.formatConstructors?n.formatConstructors:[],s.projection_=n.projection?(0,i.get)(n.projection):null,s.dropListenKeys_=null,s.source_=n.source||null,s.target=n.target?n.target:null,s}return u(n,r),n.prototype.handleResult_=function(t,e){var r=e.target.result,s=this.getMap(),n=this.projection_;n||(n=s.getView().getProjection());for(var i=this.formatConstructors_,o=[],u=0,l=i.length;u<l;++u){var f=new i[u];if((o=this.tryReadFeatures_(f,r,{featureProjection:n}))&&o.length>0)break}this.source_&&(this.source_.clear(),this.source_.addFeatures(o)),this.dispatchEvent(new c(a.ADD_FEATURES,t,o,n))},n.prototype.registerListeners_=function(){var t=this.getMap();if(t){var r=this.target?this.target:t.getViewport();this.dropListenKeys_=[(0,e.listen)(r,s.default.DROP,f,this),(0,e.listen)(r,s.default.DRAGENTER,p,this),(0,e.listen)(r,s.default.DRAGOVER,p,this),(0,e.listen)(r,s.default.DROP,p,this)]}},n.prototype.setActive=function(t){!this.getActive()&&t&&this.registerListeners_(),this.getActive()&&!t&&this.unregisterListeners_(),r.prototype.setActive.call(this,t)},n.prototype.setMap=function(t){this.unregisterListeners_(),r.prototype.setMap.call(this,t),this.getActive()&&this.registerListeners_()},n.prototype.tryReadFeatures_=function(t,e,r){try{return t.readFeatures(e,r)}catch(s){return null}},n.prototype.unregisterListeners_=function(){this.dropListenKeys_&&(this.dropListenKeys_.forEach(e.unlistenByKey),this.dropListenKeys_=null)},n}(n.default);function f(t){for(var e=t.dataTransfer.files,r=0,n=e.length;r<n;++r){var i=e.item(r),o=new FileReader;o.addEventListener(s.default.LOAD,this.handleResult_.bind(this,i)),o.readAsText(i)}}function p(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"}var h=l;exports.default=h;
},{"../functions.js":"RgA2","../events.js":"UqnM","../events/Event.js":"fKNg","../events/EventType.js":"C8cu","./Interaction.js":"jB2p","../proj.js":"Diht"}],"ITeC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../events/condition.js"),e=n(require("./Pointer.js"));function n(t){return t&&t.__esModule?t:{default:t}}var i=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=function(e){function n(n){var i=this,o=n||{};return(i=e.call(this,o)||this).condition_=o.condition?o.condition:t.shiftKeyOnly,i.lastAngle_=void 0,i.lastMagnitude_=void 0,i.lastScaleDelta_=0,i.duration_=void 0!==o.duration?o.duration:400,i}return i(n,e),n.prototype.handleDragEvent=function(e){if((0,t.mouseOnly)(e)){var n=e.map,i=n.getSize(),o=e.pixel,a=o[0]-i[0]/2,r=i[1]/2-o[1],s=Math.atan2(r,a),l=Math.sqrt(a*a+r*r),u=n.getView();if(void 0!==this.lastAngle_){var d=this.lastAngle_-s;u.adjustRotationInternal(d)}this.lastAngle_=s,void 0!==this.lastMagnitude_&&u.adjustResolutionInternal(this.lastMagnitude_/l),void 0!==this.lastMagnitude_&&(this.lastScaleDelta_=this.lastMagnitude_/l),this.lastMagnitude_=l}},n.prototype.handleUpEvent=function(e){if(!(0,t.mouseOnly)(e))return!0;var n=e.map.getView(),i=this.lastScaleDelta_>1?1:-1;return n.endInteraction(this.duration_,i),this.lastScaleDelta_=0,!1},n.prototype.handleDownEvent=function(e){return!!(0,t.mouseOnly)(e)&&(!!this.condition_(e)&&(e.map.getView().beginInteraction(),this.lastAngle_=void 0,this.lastMagnitude_=void 0,!0))},n}(e.default),a=o;exports.default=a;
},{"../events/condition.js":"YcID","./Pointer.js":"dnA2"}],"AyCw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../extent.js"),e=s(require("./GeometryType.js")),r=s(require("./SimpleGeometry.js")),o=require("./flat/deflate.js"),i=require("./flat/transform.js");function s(t){return t&&t.__esModule?t:{default:t}}var n=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),a=function(r){function s(t,e,o){var i=r.call(this)||this;if(void 0!==o&&void 0===e)i.setFlatCoordinates(o,t);else{var s=e||0;i.setCenterAndRadius(t,s,o)}return i}return n(s,r),s.prototype.clone=function(){return new s(this.flatCoordinates.slice(),void 0,this.layout)},s.prototype.closestPointXY=function(t,e,r,o){var i=this.flatCoordinates,s=t-i[0],n=e-i[1],a=s*s+n*n;if(a<o){if(0===a)for(var u=0;u<this.stride;++u)r[u]=i[u];else{var d=this.getRadius()/Math.sqrt(a);r[0]=i[0]+d*s,r[1]=i[1]+d*n;for(u=2;u<this.stride;++u)r[u]=i[u]}return r.length=this.stride,a}return o},s.prototype.containsXY=function(t,e){var r=this.flatCoordinates,o=t-r[0],i=e-r[1];return o*o+i*i<=this.getRadiusSquared_()},s.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},s.prototype.computeExtent=function(e){var r=this.flatCoordinates,o=r[this.stride]-r[0];return(0,t.createOrUpdate)(r[0]-o,r[1]-o,r[0]+o,r[1]+o,e)},s.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},s.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},s.prototype.getType=function(){return e.default.CIRCLE},s.prototype.intersectsExtent=function(e){var r=this.getExtent();if((0,t.intersects)(e,r)){var o=this.getCenter();return e[0]<=o[0]&&e[2]>=o[0]||(e[1]<=o[1]&&e[3]>=o[1]||(0,t.forEachCorner)(e,this.intersectsCoordinate.bind(this)))}return!1},s.prototype.setCenter=function(t){var e=this.stride,r=this.flatCoordinates[e]-this.flatCoordinates[0],o=t.slice();o[e]=o[0]+r;for(var i=1;i<e;++i)o[e+i]=t[i];this.setFlatCoordinates(this.layout,o),this.changed()},s.prototype.setCenterAndRadius=function(t,e,r){this.setLayout(r,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var i=this.flatCoordinates,s=(0,o.deflateCoordinate)(i,0,t,this.stride);i[s++]=i[0]+e;for(var n=1,a=this.stride;n<a;++n)i[s++]=i[n];i.length=s,this.changed()},s.prototype.getCoordinates=function(){return null},s.prototype.setCoordinates=function(t,e){},s.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},s.prototype.rotate=function(t,e){var r=this.getCenter(),o=this.getStride();this.setCenter((0,i.rotate)(r,0,r.length,o,t,e,r)),this.changed()},s.prototype.translate=function(t,e){var r=this.getCenter(),o=this.getStride();this.setCenter((0,i.translate)(r,0,r.length,o,t,e,r)),this.changed()},s}(r.default);a.prototype.transform;var u=a;exports.default=u;
},{"../extent.js":"QDir","./GeometryType.js":"lmV0","./SimpleGeometry.js":"pnrv","./flat/deflate.js":"FNhl","./flat/transform.js":"LGwr"}],"fbCo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../array.js"),e=require("../extent.js"),i=f(require("./GeometryLayout.js")),r=f(require("./GeometryType.js")),s=f(require("./LineString.js")),n=f(require("./SimpleGeometry.js")),o=require("./flat/closest.js"),a=require("./flat/deflate.js"),l=require("./flat/inflate.js"),d=require("./flat/interpolate.js"),u=require("./flat/intersectsextent.js"),h=require("./flat/simplify.js");function f(t){return t&&t.__esModule?t:{default:t}}var p=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),c=function(n){function f(e,i,r){var s=n.call(this)||this;if(s.ends_=[],s.maxDelta_=-1,s.maxDeltaRevision_=-1,Array.isArray(e[0]))s.setCoordinates(e,i);else if(void 0!==i&&r)s.setFlatCoordinates(i,e),s.ends_=r;else{for(var o=s.getLayout(),a=e,l=[],d=[],u=0,h=a.length;u<h;++u){var f=a[u];0===u&&(o=f.getLayout()),(0,t.extend)(l,f.getFlatCoordinates()),d.push(l.length)}s.setFlatCoordinates(o,l),s.ends_=d}return s}return p(f,n),f.prototype.appendLineString=function(e){this.flatCoordinates?(0,t.extend)(this.flatCoordinates,e.getFlatCoordinates().slice()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},f.prototype.clone=function(){return new f(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},f.prototype.closestPointXY=function(t,i,r,s){return s<(0,e.closestSquaredDistanceXY)(this.getExtent(),t,i)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,o.arrayMaxSquaredDelta)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,o.assignClosestArrayPoint)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,i,r,s))},f.prototype.getCoordinateAtM=function(t,e,r){if(this.layout!=i.default.XYM&&this.layout!=i.default.XYZM||0===this.flatCoordinates.length)return null;var s=void 0!==e&&e,n=void 0!==r&&r;return(0,d.lineStringsCoordinateAtM)(this.flatCoordinates,0,this.ends_,this.stride,t,s,n)},f.prototype.getCoordinates=function(){return(0,l.inflateCoordinatesArray)(this.flatCoordinates,0,this.ends_,this.stride)},f.prototype.getEnds=function(){return this.ends_},f.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new s.default(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},f.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,e=this.ends_,i=this.layout,r=[],n=0,o=0,a=e.length;o<a;++o){var l=e[o],d=new s.default(t.slice(n,l),i);r.push(d),n=l}return r},f.prototype.getFlatMidpoints=function(){for(var e=[],i=this.flatCoordinates,r=0,s=this.ends_,n=this.stride,o=0,a=s.length;o<a;++o){var l=s[o],u=(0,d.interpolatePoint)(i,r,l,n,.5);(0,t.extend)(e,u),r=l}return e},f.prototype.getSimplifiedGeometryInternal=function(t){var e=[],r=[];return e.length=(0,h.douglasPeuckerArray)(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,r),new f(e,i.default.XY,r)},f.prototype.getType=function(){return r.default.MULTI_LINE_STRING},f.prototype.intersectsExtent=function(t){return(0,u.intersectsLineStringArray)(this.flatCoordinates,0,this.ends_,this.stride,t)},f.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=(0,a.deflateCoordinatesArray)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},f}(n.default),y=c;exports.default=y;
},{"../array.js":"luEr","../extent.js":"QDir","./GeometryLayout.js":"Utvi","./GeometryType.js":"lmV0","./LineString.js":"DfxW","./SimpleGeometry.js":"pnrv","./flat/closest.js":"rMra","./flat/deflate.js":"FNhl","./flat/inflate.js":"znXl","./flat/interpolate.js":"rDTq","./flat/intersectsextent.js":"GZir","./flat/simplify.js":"IEpt"}],"dNu5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../array.js"),e=require("../extent.js"),r=u(require("./GeometryType.js")),o=u(require("./Point.js")),i=u(require("./SimpleGeometry.js")),n=require("./flat/deflate.js"),s=require("./flat/inflate.js"),a=require("../math.js");function u(t){return t&&t.__esModule?t:{default:t}}var l=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),f=function(i){function u(t,e){var r=i.call(this)||this;return e&&!Array.isArray(t[0])?r.setFlatCoordinates(e,t):r.setCoordinates(t,e),r}return l(u,i),u.prototype.appendPoint=function(e){this.flatCoordinates?(0,t.extend)(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.changed()},u.prototype.clone=function(){return new u(this.flatCoordinates.slice(),this.layout)},u.prototype.closestPointXY=function(t,r,o,i){if(i<(0,e.closestSquaredDistanceXY)(this.getExtent(),t,r))return i;for(var n=this.flatCoordinates,s=this.stride,u=0,l=n.length;u<l;u+=s){var f=(0,a.squaredDistance)(t,r,n[u],n[u+1]);if(f<i){i=f;for(var d=0;d<s;++d)o[d]=n[u+d];o.length=s}}return i},u.prototype.getCoordinates=function(){return(0,s.inflateCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},u.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new o.default(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},u.prototype.getPoints=function(){for(var t=this.flatCoordinates,e=this.layout,r=this.stride,i=[],n=0,s=t.length;n<s;n+=r){var a=new o.default(t.slice(n,n+r),e);i.push(a)}return i},u.prototype.getType=function(){return r.default.MULTI_POINT},u.prototype.intersectsExtent=function(t){for(var r=this.flatCoordinates,o=this.stride,i=0,n=r.length;i<n;i+=o){var s=r[i],a=r[i+1];if((0,e.containsXY)(t,s,a))return!0}return!1},u.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,n.deflateCoordinates)(this.flatCoordinates,0,t,this.stride),this.changed()},u}(i.default),d=f;exports.default=d;
},{"../array.js":"luEr","../extent.js":"QDir","./GeometryType.js":"lmV0","./Point.js":"gLcY","./SimpleGeometry.js":"pnrv","./flat/deflate.js":"FNhl","./flat/inflate.js":"znXl","../math.js":"B96G"}],"VjQP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearRingss=r;var e=require("../../extent.js");function r(r,t,a,n){for(var s=[],o=(0,e.createEmpty)(),i=0,u=a.length;i<u;++i){var l=a[i];o=(0,e.createOrUpdateFromFlatCoordinates)(r,t,l[0],n),s.push((o[0]+o[2])/2,(o[1]+o[3])/2),t=l[l.length-1]}return s}
},{"../../extent.js":"QDir"}],"ouhF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../array.js"),e=require("../extent.js"),i=y(require("./GeometryLayout.js")),s=y(require("./GeometryType.js")),r=y(require("./MultiPoint.js")),n=y(require("./Polygon.js")),o=y(require("./SimpleGeometry.js")),a=require("./flat/area.js"),l=require("./flat/center.js"),d=require("./flat/closest.js"),h=require("./flat/contains.js"),u=require("./flat/deflate.js"),f=require("./flat/inflate.js"),g=require("./flat/interiorpoint.js"),c=require("./flat/intersectsextent.js"),p=require("./flat/orient.js"),_=require("./flat/simplify.js");function y(t){return t&&t.__esModule?t:{default:t}}var v=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),C=function(o){function y(e,i,s){var r=o.call(this)||this;if(r.endss_=[],r.flatInteriorPointsRevision_=-1,r.flatInteriorPoints_=null,r.maxDelta_=-1,r.maxDeltaRevision_=-1,r.orientedRevision_=-1,r.orientedFlatCoordinates_=null,!s&&!Array.isArray(e[0])){for(var n=r.getLayout(),a=e,l=[],d=[],h=0,u=a.length;h<u;++h){var f=a[h];0===h&&(n=f.getLayout());for(var g=l.length,c=f.getEnds(),p=0,_=c.length;p<_;++p)c[p]+=g;(0,t.extend)(l,f.getFlatCoordinates()),d.push(c)}i=n,e=l,s=d}return void 0!==i&&s?(r.setFlatCoordinates(i,e),r.endss_=s):r.setCoordinates(e,i),r}return v(y,o),y.prototype.appendPolygon=function(e){var i;if(this.flatCoordinates){var s=this.flatCoordinates.length;(0,t.extend)(this.flatCoordinates,e.getFlatCoordinates());for(var r=0,n=(i=e.getEnds().slice()).length;r<n;++r)i[r]+=s}else this.flatCoordinates=e.getFlatCoordinates().slice(),i=e.getEnds().slice(),this.endss_.push();this.endss_.push(i),this.changed()},y.prototype.clone=function(){for(var t=this.endss_.length,e=new Array(t),i=0;i<t;++i)e[i]=this.endss_[i].slice();return new y(this.flatCoordinates.slice(),this.layout,e)},y.prototype.closestPointXY=function(t,i,s,r){return r<(0,e.closestSquaredDistanceXY)(this.getExtent(),t,i)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,d.multiArrayMaxSquaredDelta)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,d.assignClosestMultiArrayPoint)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,i,s,r))},y.prototype.containsXY=function(t,e){return(0,h.linearRingssContainsXY)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},y.prototype.getArea=function(){return(0,a.linearRingss)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},y.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),(0,p.orientLinearRingsArray)(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,(0,f.inflateMultiCoordinatesArray)(e,0,this.endss_,this.stride)},y.prototype.getEndss=function(){return this.endss_},y.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=(0,l.linearRingss)(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=(0,g.getInteriorPointsOfMultiArray)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},y.prototype.getInteriorPoints=function(){return new r.default(this.getFlatInteriorPoints().slice(),i.default.XYM)},y.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;(0,p.linearRingssAreOriented)(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=(0,p.orientLinearRingsArray)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},y.prototype.getSimplifiedGeometryInternal=function(t){var e=[],s=[];return e.length=(0,_.quantizeMultiArray)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,s),new y(e,i.default.XY,s)},y.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var i=this.endss_[t-1];e=i[i.length-1]}var s=this.endss_[t].slice(),r=s[s.length-1];if(0!==e)for(var o=0,a=s.length;o<a;++o)s[o]-=e;return new n.default(this.flatCoordinates.slice(e,r),this.layout,s)},y.prototype.getPolygons=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.endss_,s=[],r=0,o=0,a=i.length;o<a;++o){var l=i[o].slice(),d=l[l.length-1];if(0!==r)for(var h=0,u=l.length;h<u;++h)l[h]-=r;var f=new n.default(e.slice(r,d),t,l);s.push(f),r=d}return s},y.prototype.getType=function(){return s.default.MULTI_POLYGON},y.prototype.intersectsExtent=function(t){return(0,c.intersectsLinearRingMultiArray)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},y.prototype.setCoordinates=function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=(0,u.deflateMultiCoordinatesArray)(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{var s=i[i.length-1];this.flatCoordinates.length=0===s.length?0:s[s.length-1]}this.changed()},y}(o.default),q=C;exports.default=q;
},{"../array.js":"luEr","../extent.js":"QDir","./GeometryLayout.js":"Utvi","./GeometryType.js":"lmV0","./MultiPoint.js":"dNu5","./Polygon.js":"Nwwk","./SimpleGeometry.js":"pnrv","./flat/area.js":"EOSm","./flat/center.js":"VjQP","./flat/closest.js":"rMra","./flat/contains.js":"dzdN","./flat/deflate.js":"FNhl","./flat/inflate.js":"znXl","./flat/interiorpoint.js":"UDvN","./flat/intersectsextent.js":"GZir","./flat/orient.js":"cJkE","./flat/simplify.js":"IEpt"}],"e7i2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createRegularPolygon=R,exports.createBox=j,exports.default=void 0;var t=L(require("../events/EventType.js")),e=L(require("../Feature.js")),i=L(require("../MapBrowserEventType.js")),o=L(require("../MapBrowserPointerEvent.js")),r=require("../Object.js"),s=require("../coordinate.js"),n=L(require("../events/Event.js")),a=require("../events/condition.js"),h=require("../extent.js"),d=require("../functions.js"),u=L(require("../geom/Circle.js")),_=L(require("../geom/GeometryType.js")),c=L(require("../geom/LineString.js")),l=L(require("../geom/MultiLineString.js")),f=L(require("../geom/MultiPoint.js")),p=L(require("../geom/MultiPolygon.js")),g=L(require("../geom/Point.js")),y=O(require("../geom/Polygon.js")),m=L(require("./Pointer.js")),C=L(require("./Property.js")),P=L(require("../layer/Vector.js")),v=L(require("../source/Vector.js")),k=require("../style/Style.js"),T=require("../proj.js");function w(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return w=function(){return t},t}function O(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=w();if(e&&e.has(t))return e.get(t);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var s=o?Object.getOwnPropertyDescriptor(t,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=t[r]}return i.default=t,e&&e.set(t,i),i}function L(t){return t&&t.__esModule?t:{default:t}}var N=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),D={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},I={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"},E=function(t){function e(e,i){var o=t.call(this,e)||this;return o.feature=i,o}return N(e,t),e}(n.default),G=function(n){function h(t){var e=this,i=t;i.stopDown||(i.stopDown=d.FALSE),(e=n.call(this,i)||this).shouldHandle_=!1,e.downPx_=null,e.downTimeout_,e.lastDragTime_,e.freehand_=!1,e.source_=t.source?t.source:null,e.features_=t.features?t.features:null,e.snapTolerance_=t.snapTolerance?t.snapTolerance:12,e.type_=t.type,e.mode_=M(e.type_),e.stopClick_=!!t.stopClick,e.minPoints_=t.minPoints?t.minPoints:e.mode_===D.POLYGON?3:2,e.maxPoints_=t.maxPoints?t.maxPoints:1/0,e.finishCondition_=t.finishCondition?t.finishCondition:d.TRUE;var o=t.geometryFunction;if(!o)if(e.type_===_.default.CIRCLE)o=function(t,e,i){var o=e||new u.default([NaN,NaN]),r=(0,T.fromUserCoordinate)(t[0],i),n=(0,s.squaredDistance)(r,(0,T.fromUserCoordinate)(t[1],i));o.setCenterAndRadius(r,Math.sqrt(n));var a=(0,T.getUserProjection)();return a&&o.transform(i,a),o};else{var h,l=e.mode_;l===D.POINT?h=g.default:l===D.LINE_STRING?h=c.default:l===D.POLYGON&&(h=y.default),o=function(t,e,i){var o=e;return o?l===D.POLYGON?t[0].length?o.setCoordinates([t[0].concat([t[0][0]])]):o.setCoordinates([]):o.setCoordinates(t):o=new h(t),o}}return e.geometryFunction_=o,e.dragVertexDelay_=void 0!==t.dragVertexDelay?t.dragVertexDelay:500,e.finishCoordinate_=null,e.sketchFeature_=null,e.sketchPoint_=null,e.sketchCoords_=null,e.sketchLine_=null,e.sketchLineCoords_=null,e.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,e.overlay_=new P.default({source:new v.default({useSpatialIndex:!1,wrapX:!!t.wrapX&&t.wrapX}),style:t.style?t.style:F(),updateWhileInteracting:!0}),e.geometryName_=t.geometryName,e.condition_=t.condition?t.condition:a.noModifierKeys,e.freehandCondition_,t.freehand?e.freehandCondition_=a.always:e.freehandCondition_=t.freehandCondition?t.freehandCondition:a.shiftKeyOnly,e.addEventListener((0,r.getChangeEventType)(C.default.ACTIVE),e.updateState_),e}return N(h,n),h.prototype.setMap=function(t){n.prototype.setMap.call(this,t),this.updateState_()},h.prototype.getOverlay=function(){return this.overlay_},h.prototype.handleEvent=function(e){e.originalEvent.type===t.default.CONTEXTMENU&&e.preventDefault(),this.freehand_=this.mode_!==D.POINT&&this.freehandCondition_(e);var o=e.type===i.default.POINTERMOVE,r=!0;!this.freehand_&&this.lastDragTime_&&e.type===i.default.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,o=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0));return this.freehand_&&e.type===i.default.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(e.coordinate),r=!1):this.freehand_&&e.type===i.default.POINTERDOWN?r=!1:o?(r=e.type===i.default.POINTERMOVE)&&this.freehand_?r=this.handlePointerMove_(e):("mouse"==e.pointerEvent.pointerType||e.type===i.default.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(e):e.type===i.default.DBLCLICK&&(r=!1),n.prototype.handleEvent.call(this,e)&&r},h.prototype.handleDownEvent=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new o.default(i.default.POINTERMOVE,t.map,t.pointerEvent,!1,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)},h.prototype.handleUpEvent=function(t){var e=!0;this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);var i=this.mode_===D.CIRCLE;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||i?this.finishDrawing():this.atFinish_(t)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t.coordinate):(this.startDrawing_(t),this.mode_===D.POINT&&this.finishDrawing()),e=!1):this.freehand_&&this.abortDrawing(),!e&&this.stopClick_&&t.stopPropagation(),e},h.prototype.handlePointerMove_=function(t){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,i=t.pixel,o=e[0]-i[0],r=e[1]-i[1],s=o*o+r*r;if(this.shouldHandle_=this.freehand_?s>this.squaredClickTolerance_:s<=this.squaredClickTolerance_,!this.shouldHandle_)return!0}return this.finishCoordinate_?this.modifyDrawing_(t):this.createOrUpdateSketchPoint_(t),!0},h.prototype.atFinish_=function(t){var e=!1;if(this.sketchFeature_){var i=!1,o=[this.finishCoordinate_];if(this.mode_===D.LINE_STRING)i=this.sketchCoords_.length>this.minPoints_;else if(this.mode_===D.POLYGON){var r=this.sketchCoords_;i=r[0].length>this.minPoints_,o=[r[0][0],r[0][r[0].length-2]]}if(i)for(var s=t.map,n=0,a=o.length;n<a;n++){var h=o[n],d=s.getPixelFromCoordinate(h),u=t.pixel,_=u[0]-d[0],c=u[1]-d[1],l=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(_*_+c*c)<=l){this.finishCoordinate_=h;break}}}return e},h.prototype.createOrUpdateSketchPoint_=function(t){var i=t.coordinate.slice();this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(i):(this.sketchPoint_=new e.default(new g.default(i)),this.updateSketchFeatures_())},h.prototype.startDrawing_=function(t){var i=t.coordinate,o=t.map.getView().getProjection();this.finishCoordinate_=i,this.mode_===D.POINT?this.sketchCoords_=i.slice():this.mode_===D.POLYGON?(this.sketchCoords_=[[i.slice(),i.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[i.slice(),i.slice()],this.sketchLineCoords_&&(this.sketchLine_=new e.default(new c.default(this.sketchLineCoords_)));var r=this.geometryFunction_(this.sketchCoords_,void 0,o);this.sketchFeature_=new e.default,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(r),this.updateSketchFeatures_(),this.dispatchEvent(new E(I.DRAWSTART,this.sketchFeature_))},h.prototype.modifyDrawing_=function(t){var i,o,r,s=t.coordinate,n=this.sketchFeature_.getGeometry(),a=t.map.getView().getProjection();(this.mode_===D.POINT?o=this.sketchCoords_:this.mode_===D.POLYGON?(o=(i=this.sketchCoords_[0])[i.length-1],this.atFinish_(t)&&(s=this.finishCoordinate_.slice())):o=(i=this.sketchCoords_)[i.length-1],o[0]=s[0],o[1]=s[1],this.geometryFunction_(this.sketchCoords_,n,a),this.sketchPoint_)&&this.sketchPoint_.getGeometry().setCoordinates(s);if(n.getType()==_.default.POLYGON&&this.mode_!==D.POLYGON){this.sketchLine_||(this.sketchLine_=new e.default);var h=n.getLinearRing(0);(r=this.sketchLine_.getGeometry())?(r.setFlatCoordinates(h.getLayout(),h.getFlatCoordinates()),r.changed()):(r=new c.default(h.getFlatCoordinates(),h.getLayout()),this.sketchLine_.setGeometry(r))}else this.sketchLineCoords_&&(r=this.sketchLine_.getGeometry()).setCoordinates(this.sketchLineCoords_);this.updateSketchFeatures_()},h.prototype.addToDrawing_=function(t){var e,i,o=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection();this.mode_===D.LINE_STRING?(this.finishCoordinate_=t.slice(),(i=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(t.slice()),this.geometryFunction_(i,o,r)):this.mode_===D.POLYGON&&((i=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(t.slice()),e&&(this.finishCoordinate_=i[0]),this.geometryFunction_(this.sketchCoords_,o,r)),this.updateSketchFeatures_(),e&&this.finishDrawing()},h.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t,e=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection();this.mode_===D.LINE_STRING?((t=this.sketchCoords_).splice(-2,1),this.geometryFunction_(t,e,i),t.length>=2&&(this.finishCoordinate_=t[t.length-2].slice())):this.mode_===D.POLYGON&&((t=this.sketchCoords_[0]).splice(-2,1),this.sketchLine_.getGeometry().setCoordinates(t),this.geometryFunction_(this.sketchCoords_,e,i)),0===t.length&&this.abortDrawing(),this.updateSketchFeatures_()}},h.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(t){var e=this.sketchCoords_,i=t.getGeometry(),o=this.getMap().getView().getProjection();this.mode_===D.LINE_STRING?(e.pop(),this.geometryFunction_(e,i,o)):this.mode_===D.POLYGON&&(e[0].pop(),this.geometryFunction_(e,i,o),e=i.getCoordinates()),this.type_===_.default.MULTI_POINT?t.setGeometry(new f.default([e])):this.type_===_.default.MULTI_LINE_STRING?t.setGeometry(new l.default([e])):this.type_===_.default.MULTI_POLYGON&&t.setGeometry(new p.default([e])),this.dispatchEvent(new E(I.DRAWEND,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}},h.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),t},h.prototype.abortDrawing=function(){var t=this.abortDrawing_();t&&this.dispatchEvent(new E(I.DRAWABORT,t))},h.prototype.appendCoordinates=function(t){var e=this.mode_,i=[];e===D.LINE_STRING?i=this.sketchCoords_:e===D.POLYGON&&(i=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]);for(var o=i.pop(),r=0;r<t.length;r++)this.addToDrawing_(t[r]);this.addToDrawing_(o)},h.prototype.extend=function(t){var e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();var i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new E(I.DRAWSTART,this.sketchFeature_))},h.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},h.prototype.updateState_=function(){var t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing(),this.overlay_.setMap(e?t:null)},h}(m.default);function F(){var t=(0,k.createEditingStyle)();return function(e,i){return t[e.getGeometry().getType()]}}function R(t,e){return function(i,o,r){var n=(0,T.fromUserCoordinate)(i[0],r),a=(0,T.fromUserCoordinate)(i[1],r),h=Math.sqrt((0,s.squaredDistance)(n,a)),d=o||(0,y.fromCircle)(new u.default(n),t),_=e;if(!e){var c=a[0]-n[0],l=a[1]-n[1];_=Math.atan(l/c)-(c<0?Math.PI:0)}(0,y.makeRegular)(d,n,h,_);var f=(0,T.getUserProjection)();return f&&d.transform(r,f),d}}function j(){return function(t,e,i){var o=(0,h.boundingExtent)(t.map(function(t){return(0,T.fromUserCoordinate)(t,i)})),r=[[(0,h.getBottomLeft)(o),(0,h.getBottomRight)(o),(0,h.getTopRight)(o),(0,h.getTopLeft)(o),(0,h.getBottomLeft)(o)]],s=e;s?s.setCoordinates(r):s=new y.default(r);var n=(0,T.getUserProjection)();return n&&s.transform(i,n),s}}function M(t){var e;return t===_.default.POINT||t===_.default.MULTI_POINT?e=D.POINT:t===_.default.LINE_STRING||t===_.default.MULTI_LINE_STRING?e=D.LINE_STRING:t===_.default.POLYGON||t===_.default.MULTI_POLYGON?e=D.POLYGON:t===_.default.CIRCLE&&(e=D.CIRCLE),e}var S=G;exports.default=S;
},{"../events/EventType.js":"C8cu","../Feature.js":"mYW9","../MapBrowserEventType.js":"YhDM","../MapBrowserPointerEvent.js":"J1WQ","../Object.js":"PhPh","../coordinate.js":"nGsj","../events/Event.js":"fKNg","../events/condition.js":"YcID","../extent.js":"QDir","../functions.js":"RgA2","../geom/Circle.js":"AyCw","../geom/GeometryType.js":"lmV0","../geom/LineString.js":"DfxW","../geom/MultiLineString.js":"fbCo","../geom/MultiPoint.js":"dNu5","../geom/MultiPolygon.js":"ouhF","../geom/Point.js":"gLcY","../geom/Polygon.js":"Nwwk","./Pointer.js":"dnA2","./Property.js":"caOi","../layer/Vector.js":"dflx","../source/Vector.js":"ZS12","../style/Style.js":"he4w","../proj.js":"Diht"}],"o7b8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=x(require("../Feature.js")),t=x(require("../MapBrowserEventType.js")),n=require("../coordinate.js"),r=x(require("../events/Event.js")),o=require("../extent.js"),i=x(require("../geom/GeometryType.js")),a=x(require("../geom/Point.js")),u=require("../geom/Polygon.js"),l=x(require("./Pointer.js")),s=x(require("../layer/Vector.js")),p=x(require("../source/Vector.js")),c=require("../style/Style.js"),d=require("../proj.js");function x(e){return e&&e.__esModule?e:{default:e}}var h=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),f={EXTENTCHANGED:"extentchanged"},_=function(e){function t(t){var n=e.call(this,f.EXTENTCHANGED)||this;return n.extent=t,n}return h(t,e),t}(r.default),v=function(r){function i(e){var t=this,n=e||{};return(t=r.call(this,n)||this).extent_=null,t.pointerHandler_=null,t.pixelTolerance_=void 0!==n.pixelTolerance?n.pixelTolerance:10,t.snappedToVertex_=!1,t.extentFeature_=null,t.vertexFeature_=null,e||(e={}),t.extentOverlay_=new s.default({source:new p.default({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.boxStyle?e.boxStyle:y(),updateWhileAnimating:!0,updateWhileInteracting:!0}),t.vertexOverlay_=new s.default({source:new p.default({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.pointerStyle?e.pointerStyle:g(),updateWhileAnimating:!0,updateWhileInteracting:!0}),e.extent&&t.setExtent(e.extent),t}return h(i,r),i.prototype.snapToVertex_=function(e,t){var r=t.getCoordinateFromPixelInternal(e),o=this.getExtentInternal();if(o){var i=O(o);i.sort(function(e,t){return(0,n.squaredDistanceToSegment)(r,e)-(0,n.squaredDistanceToSegment)(r,t)});var a=i[0],u=(0,n.closestOnSegment)(r,a),l=t.getPixelFromCoordinateInternal(u);if((0,n.distance)(e,l)<=this.pixelTolerance_){var s=t.getPixelFromCoordinateInternal(a[0]),p=t.getPixelFromCoordinateInternal(a[1]),c=(0,n.squaredDistance)(l,s),d=(0,n.squaredDistance)(l,p),x=Math.sqrt(Math.min(c,d));return this.snappedToVertex_=x<=this.pixelTolerance_,this.snappedToVertex_&&(u=c>d?a[1]:a[0]),u}}return null},i.prototype.handlePointerMove_=function(e){var t=e.pixel,n=e.map,r=this.snapToVertex_(t,n);r||(r=n.getCoordinateFromPixelInternal(t)),this.createOrUpdatePointerFeature_(r)},i.prototype.createOrUpdateExtentFeature_=function(t){var n=this.extentFeature_;return n?t?n.setGeometry((0,u.fromExtent)(t)):n.setGeometry(void 0):(n=t?new e.default((0,u.fromExtent)(t)):new e.default({}),this.extentFeature_=n,this.extentOverlay_.getSource().addFeature(n)),n},i.prototype.createOrUpdatePointerFeature_=function(t){var n=this.vertexFeature_;n?n.getGeometry().setCoordinates(t):(n=new e.default(new a.default(t)),this.vertexFeature_=n,this.vertexOverlay_.getSource().addFeature(n));return n},i.prototype.handleEvent=function(e){return!e.pointerEvent||(e.type!=t.default.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),r.prototype.handleEvent.call(this,e),!1)},i.prototype.handleDownEvent=function(e){var t=e.pixel,n=e.map,r=this.getExtentInternal(),o=this.snapToVertex_(t,n),i=function(e){var t=null,n=null;return e[0]==r[0]?t=r[2]:e[0]==r[2]&&(t=r[0]),e[1]==r[1]?n=r[3]:e[1]==r[3]&&(n=r[1]),null!==t&&null!==n?[t,n]:null};if(o&&r){var a=o[0]==r[0]||o[0]==r[2]?o[0]:null,u=o[1]==r[1]||o[1]==r[3]?o[1]:null;null!==a&&null!==u?this.pointerHandler_=E(i(o)):null!==a?this.pointerHandler_=m(i([a,r[1]]),i([a,r[3]])):null!==u&&(this.pointerHandler_=m(i([r[0],u]),i([r[2],u])))}else o=n.getCoordinateFromPixelInternal(t),this.setExtent([o[0],o[1],o[0],o[1]]),this.pointerHandler_=E(o);return!0},i.prototype.handleDragEvent=function(e){if(this.pointerHandler_){var t=e.coordinate;this.setExtent(this.pointerHandler_(t)),this.createOrUpdatePointerFeature_(t)}return!0},i.prototype.handleUpEvent=function(e){this.pointerHandler_=null;var t=this.getExtentInternal();return t&&0!==(0,o.getArea)(t)||this.setExtent(null),!1},i.prototype.setMap=function(e){this.extentOverlay_.setMap(e),this.vertexOverlay_.setMap(e),r.prototype.setMap.call(this,e)},i.prototype.getExtent=function(){return(0,d.toUserExtent)(this.getExtentInternal(),this.getMap().getView().getProjection())},i.prototype.getExtentInternal=function(){return this.extent_},i.prototype.setExtent=function(e){this.extent_=e||null,this.createOrUpdateExtentFeature_(e),this.dispatchEvent(new _(this.extent_))},i}(l.default);function y(){var e=(0,c.createEditingStyle)();return function(t,n){return e[i.default.POLYGON]}}function g(){var e=(0,c.createEditingStyle)();return function(t,n){return e[i.default.POINT]}}function E(e){return function(t){return(0,o.boundingExtent)([e,t])}}function m(e,t){return e[0]==t[0]?function(n){return(0,o.boundingExtent)([e,[n[0],t[1]]])}:e[1]==t[1]?function(n){return(0,o.boundingExtent)([e,[t[0],n[1]]])}:null}function O(e){return[[[e[0],e[1]],[e[0],e[3]]],[[e[0],e[3]],[e[2],e[3]]],[[e[2],e[3]],[e[2],e[1]]],[[e[2],e[1]],[e[0],e[1]]]]}var P=v;exports.default=P;
},{"../Feature.js":"mYW9","../MapBrowserEventType.js":"YhDM","../coordinate.js":"nGsj","../events/Event.js":"fKNg","../extent.js":"QDir","../geom/GeometryType.js":"lmV0","../geom/Point.js":"gLcY","../geom/Polygon.js":"Nwwk","./Pointer.js":"dnA2","../layer/Vector.js":"dflx","../source/Vector.js":"ZS12","../style/Style.js":"he4w","../proj.js":"Diht"}],"qrxo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.ModifyEvent=void 0;var e=require("../util.js"),t=C(require("../Collection.js")),r=C(require("../CollectionEventType.js")),n=C(require("../Feature.js")),i=C(require("../MapBrowserEventType.js")),o=require("../array.js"),a=require("../coordinate.js"),s=C(require("../events/Event.js")),u=C(require("../events/EventType.js")),d=require("../events/condition.js"),l=require("../extent.js"),g=C(require("../geom/GeometryType.js")),h=C(require("../geom/Point.js")),f=require("../geom/Polygon.js"),_=C(require("./Pointer.js")),p=C(require("../layer/Vector.js")),c=C(require("../source/Vector.js")),m=C(require("../source/VectorEventType.js")),v=C(require("../structs/RBush.js")),y=require("../style/Style.js"),x=require("../proj.js");function C(e){return e&&e.__esModule?e:{default:e}}var E=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),S=0,F=1,P=[0,0,0,0],T=[],I={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"},w=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.features=r,i.mapBrowserEvent=n,i}return E(t,e),t}(s.default);exports.ModifyEvent=w;var G=function(s){function _(e){var n,i=s.call(this,e)||this;if(i.boundHandleFeatureChange_=i.handleFeatureChange_.bind(i),i.condition_=e.condition?e.condition:d.primaryAction,i.defaultDeleteCondition_=function(e){return(0,d.altKeyOnly)(e)&&(0,d.singleClick)(e)},i.deleteCondition_=e.deleteCondition?e.deleteCondition:i.defaultDeleteCondition_,i.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:d.always,i.vertexFeature_=null,i.vertexSegments_=null,i.lastPixel_=[0,0],i.ignoreNextSingleClick_=!1,i.modified_=!1,i.rBush_=new v.default,i.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,i.snappedToVertex_=!1,i.changingFeature_=!1,i.dragSegments_=[],i.overlay_=new p.default({source:new c.default({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:b(),updateWhileAnimating:!0,updateWhileInteracting:!0}),i.SEGMENT_WRITERS_={Point:i.writePointGeometry_.bind(i),LineString:i.writeLineStringGeometry_.bind(i),LinearRing:i.writeLineStringGeometry_.bind(i),Polygon:i.writePolygonGeometry_.bind(i),MultiPoint:i.writeMultiPointGeometry_.bind(i),MultiLineString:i.writeMultiLineStringGeometry_.bind(i),MultiPolygon:i.writeMultiPolygonGeometry_.bind(i),Circle:i.writeCircleGeometry_.bind(i),GeometryCollection:i.writeGeometryCollectionGeometry_.bind(i)},i.source_=null,e.source?(i.source_=e.source,n=new t.default(i.source_.getFeatures()),i.source_.addEventListener(m.default.ADDFEATURE,i.handleSourceAdd_.bind(i)),i.source_.addEventListener(m.default.REMOVEFEATURE,i.handleSourceRemove_.bind(i))):n=e.features,!n)throw new Error("The modify interaction requires features or a source");return i.features_=n,i.features_.forEach(i.addFeature_.bind(i)),i.features_.addEventListener(r.default.ADD,i.handleFeatureAdd_.bind(i)),i.features_.addEventListener(r.default.REMOVE,i.handleFeatureRemove_.bind(i)),i.lastPointerEvent_=null,i}return E(_,s),_.prototype.addFeature_=function(e){var t=e.getGeometry();if(t){var r=this.SEGMENT_WRITERS_[t.getType()];r&&r(e,t)}var n=this.getMap();n&&n.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,n),e.addEventListener(u.default.CHANGE,this.boundHandleFeatureChange_)},_.prototype.willModifyFeatures_=function(e){this.modified_||(this.modified_=!0,this.dispatchEvent(new w(I.MODIFYSTART,this.features_,e)))},_.prototype.removeFeature_=function(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener(u.default.CHANGE,this.boundHandleFeatureChange_)},_.prototype.removeFeatureSegmentData_=function(e){var t=this.rBush_,r=[];t.forEach(function(t){e===t.feature&&r.push(t)});for(var n=r.length-1;n>=0;--n){for(var i=r[n],o=this.dragSegments_.length-1;o>=0;--o)this.dragSegments_[o][0]===i&&this.dragSegments_.splice(o,1);t.remove(i)}},_.prototype.setActive=function(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),s.prototype.setActive.call(this,e)},_.prototype.setMap=function(e){this.overlay_.setMap(e),s.prototype.setMap.call(this,e)},_.prototype.getOverlay=function(){return this.overlay_},_.prototype.handleSourceAdd_=function(e){e.feature&&this.features_.push(e.feature)},_.prototype.handleSourceRemove_=function(e){e.feature&&this.features_.remove(e.feature)},_.prototype.handleFeatureAdd_=function(e){this.addFeature_(e.element)},_.prototype.handleFeatureChange_=function(e){if(!this.changingFeature_){var t=e.target;this.removeFeature_(t),this.addFeature_(t)}},_.prototype.handleFeatureRemove_=function(e){var t=e.element;this.removeFeature_(t)},_.prototype.writePointGeometry_=function(e,t){var r=t.getCoordinates(),n={feature:e,geometry:t,segment:[r,r]};this.rBush_.insert(t.getExtent(),n)},_.prototype.writeMultiPointGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length;n<i;++n){var o=r[n],a={feature:e,geometry:t,depth:[n],index:n,segment:[o,o]};this.rBush_.insert(t.getExtent(),a)}},_.prototype.writeLineStringGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length-1;n<i;++n){var o=r.slice(n,n+2),a={feature:e,geometry:t,index:n,segment:o};this.rBush_.insert((0,l.boundingExtent)(o),a)}},_.prototype.writeMultiLineStringGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length-1;a<s;++a){var u=o.slice(a,a+2),d={feature:e,geometry:t,depth:[n],index:a,segment:u};this.rBush_.insert((0,l.boundingExtent)(u),d)}},_.prototype.writePolygonGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length-1;a<s;++a){var u=o.slice(a,a+2),d={feature:e,geometry:t,depth:[n],index:a,segment:u};this.rBush_.insert((0,l.boundingExtent)(u),d)}},_.prototype.writeMultiPolygonGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length;a<s;++a)for(var u=o[a],d=0,g=u.length-1;d<g;++d){var h=u.slice(d,d+2),f={feature:e,geometry:t,depth:[a,n],index:d,segment:h};this.rBush_.insert((0,l.boundingExtent)(h),f)}},_.prototype.writeCircleGeometry_=function(e,t){var r=t.getCenter(),n={feature:e,geometry:t,index:S,segment:[r,r]},i={feature:e,geometry:t,index:F,segment:[r,r]},o=[n,i];n.featureSegments=o,i.featureSegments=o,this.rBush_.insert((0,l.createOrUpdateFromCoordinate)(r),n);var a=t,s=(0,x.getUserProjection)();if(s&&this.getMap()){var u=this.getMap().getView().getProjection();a=a.clone().transform(s,u),a=(0,f.fromCircle)(a).transform(u,s)}this.rBush_.insert(a.getExtent(),i)},_.prototype.writeGeometryCollectionGeometry_=function(e,t){for(var r=t.getGeometriesArray(),n=0;n<r.length;++n){var i=r[n];(0,this.SEGMENT_WRITERS_[i.getType()])(e,i)}},_.prototype.createOrUpdateVertexFeature_=function(e){var t=this.vertexFeature_;t?t.getGeometry().setCoordinates(e):(t=new n.default(new h.default(e)),this.vertexFeature_=t,this.overlay_.getSource().addFeature(t));return t},_.prototype.handleEvent=function(e){return!e.pointerEvent||(this.lastPointerEvent_=e,e.map.getView().getInteracting()||e.type!=i.default.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(t=!(e.type!=i.default.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),e.type==i.default.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),s.prototype.handleEvent.call(this,e)&&!t);var t},_.prototype.handleDragEvent=function(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e);for(var t=e.coordinate,r=0,n=this.dragSegments_.length;r<n;++r){for(var i=this.dragSegments_[r],o=i[0],s=o.depth,u=o.geometry,d=void 0,l=o.segment,h=i[1];t.length<u.getStride();)t.push(l[h][t.length]);switch(u.getType()){case g.default.POINT:d=t,l[0]=t,l[1]=t;break;case g.default.MULTI_POINT:(d=u.getCoordinates())[o.index]=t,l[0]=t,l[1]=t;break;case g.default.LINE_STRING:(d=u.getCoordinates())[o.index+h]=t,l[h]=t;break;case g.default.MULTI_LINE_STRING:case g.default.POLYGON:(d=u.getCoordinates())[s[0]][o.index+h]=t,l[h]=t;break;case g.default.MULTI_POLYGON:(d=u.getCoordinates())[s[1]][s[0]][o.index+h]=t,l[h]=t;break;case g.default.CIRCLE:if(l[0]=t,l[1]=t,o.index===S)this.changingFeature_=!0,u.setCenter(t),this.changingFeature_=!1;else{this.changingFeature_=!0;var f=e.map.getView().getProjection(),_=(0,a.distance)((0,x.fromUserCoordinate)(u.getCenter(),f),(0,x.fromUserCoordinate)(t,f)),p=(0,x.getUserProjection)();if(p){var c=u.clone().transform(p,f);c.setRadius(_),_=c.transform(f,p).getRadius()}u.setRadius(_),this.changingFeature_=!1}}d&&this.setGeometryCoordinates_(u,d)}this.createOrUpdateVertexFeature_(t)},_.prototype.handleDownEvent=function(t){if(!this.condition_(t))return!1;var r=t.coordinate;this.handlePointerAtPixel_(t.pixel,t.map,r),this.dragSegments_.length=0,this.modified_=!1;var n=this.vertexFeature_;if(n){var i=t.map.getView().getProjection(),o=[],s=n.getGeometry().getCoordinates(),u=(0,l.boundingExtent)([s]),d=this.rBush_.getInExtent(u),h={};d.sort(M);for(var f=0,_=d.length;f<_;++f){var p=d[f],c=p.segment,m=(0,e.getUid)(p.feature),v=p.depth;if(v&&(m+="-"+v.join("-")),h[m]||(h[m]=new Array(2)),p.geometry.getType()!==g.default.CIRCLE||p.index!==F)if(!(0,a.equals)(c[0],s)||h[m][0])if(!(0,a.equals)(c[1],s)||h[m][1])(0,e.getUid)(c)in this.vertexSegments_&&!h[m][0]&&!h[m][1]&&this.insertVertexCondition_(t)&&o.push([p,s]);else{if((p.geometry.getType()===g.default.LINE_STRING||p.geometry.getType()===g.default.MULTI_LINE_STRING)&&h[m][0]&&0===h[m][0].index)continue;this.dragSegments_.push([p,1]),h[m][1]=p}else this.dragSegments_.push([p,0]),h[m][0]=p;else{var y=U(r,p,i);(0,a.equals)(y,s)&&!h[m][0]&&(this.dragSegments_.push([p,0]),h[m][0]=p)}}o.length&&this.willModifyFeatures_(t);for(var x=o.length-1;x>=0;--x)this.insertVertex_.apply(this,o[x])}return!!this.vertexFeature_},_.prototype.handleUpEvent=function(e){for(var t=this.dragSegments_.length-1;t>=0;--t){var r=this.dragSegments_[t][0],n=r.geometry;if(n.getType()===g.default.CIRCLE){var i=n.getCenter(),o=r.featureSegments[0],a=r.featureSegments[1];o.segment[0]=i,o.segment[1]=i,a.segment[0]=i,a.segment[1]=i,this.rBush_.update((0,l.createOrUpdateFromCoordinate)(i),o);var s=n,u=(0,x.getUserProjection)();if(u){var d=e.map.getView().getProjection();s=s.clone().transform(u,d),s=(0,f.fromCircle)(s).transform(d,u)}this.rBush_.update(s.getExtent(),a)}else this.rBush_.update((0,l.boundingExtent)(r.segment),r)}return this.modified_&&(this.dispatchEvent(new w(I.MODIFYEND,this.features_,e)),this.modified_=!1),!1},_.prototype.handlePointerMove_=function(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.pixel,e.map,e.coordinate)},_.prototype.handlePointerAtPixel_=function(t,r,n){var i=n||r.getCoordinateFromPixel(t),o=r.getView().getProjection(),s=(0,x.fromUserExtent)((0,l.createOrUpdateFromCoordinate)(i,P),o),u=r.getView().getResolution()*this.pixelTolerance_,d=(0,x.toUserExtent)((0,l.buffer)(s,u,P),o),h=this.rBush_.getInExtent(d);if(h.length>0){h.sort(function(e,t){return L(i,e,o)-L(i,t,o)});var f=h[0],_=f.segment,p=U(i,f,o),c=r.getPixelFromCoordinate(p),m=(0,a.distance)(t,c);if(m<=this.pixelTolerance_){var v={};if(f.geometry.getType()===g.default.CIRCLE&&f.index===F)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(p);else{var y=r.getPixelFromCoordinate(_[0]),C=r.getPixelFromCoordinate(_[1]),E=(0,a.squaredDistance)(c,y),S=(0,a.squaredDistance)(c,C);m=Math.sqrt(Math.min(E,S)),this.snappedToVertex_=m<=this.pixelTolerance_,this.snappedToVertex_&&(p=E>S?_[1]:_[0]),this.createOrUpdateVertexFeature_(p);for(var T=1,I=h.length;T<I;++T){var w=h[T].segment;if(!((0,a.equals)(_[0],w[0])&&(0,a.equals)(_[1],w[1])||(0,a.equals)(_[0],w[1])&&(0,a.equals)(_[1],w[0])))break;v[(0,e.getUid)(w)]=!0}}return v[(0,e.getUid)(_)]=!0,void(this.vertexSegments_=v)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},_.prototype.insertVertex_=function(e,t){for(var r,n=e.segment,i=e.feature,o=e.geometry,a=e.depth,s=e.index;t.length<o.getStride();)t.push(0);switch(o.getType()){case g.default.MULTI_LINE_STRING:case g.default.POLYGON:(r=o.getCoordinates())[a[0]].splice(s+1,0,t);break;case g.default.MULTI_POLYGON:(r=o.getCoordinates())[a[1]][a[0]].splice(s+1,0,t);break;case g.default.LINE_STRING:(r=o.getCoordinates()).splice(s+1,0,t);break;default:return}this.setGeometryCoordinates_(o,r);var u=this.rBush_;u.remove(e),this.updateSegmentIndices_(o,s,a,1);var d={segment:[n[0],t],feature:i,geometry:o,depth:a,index:s};u.insert((0,l.boundingExtent)(d.segment),d),this.dragSegments_.push([d,1]);var h={segment:[t,n[1]],feature:i,geometry:o,depth:a,index:s+1};u.insert((0,l.boundingExtent)(h.segment),h),this.dragSegments_.push([h,0]),this.ignoreNextSingleClick_=!0},_.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=i.default.POINTERDRAG){var e=this.lastPointerEvent_;this.willModifyFeatures_(e);var t=this.removeVertex_();return this.dispatchEvent(new w(I.MODIFYEND,this.features_,e)),this.modified_=!1,t}return!1},_.prototype.removeVertex_=function(){var t,r,n,i,o,a,s,u,d,h,f,_=this.dragSegments_,p={},c=!1;for(o=_.length-1;o>=0;--o)h=(n=_[o])[0],f=(0,e.getUid)(h.feature),h.depth&&(f+="-"+h.depth.join("-")),f in p||(p[f]={}),0===n[1]?(p[f].right=h,p[f].index=h.index):1==n[1]&&(p[f].left=h,p[f].index=h.index+1);for(f in p){switch(d=p[f].right,s=p[f].left,(u=(a=p[f].index)-1)<0&&(u=0),t=r=(i=(h=void 0!==s?s:d).geometry).getCoordinates(),c=!1,i.getType()){case g.default.MULTI_LINE_STRING:r[h.depth[0]].length>2&&(r[h.depth[0]].splice(a,1),c=!0);break;case g.default.LINE_STRING:r.length>2&&(r.splice(a,1),c=!0);break;case g.default.MULTI_POLYGON:t=t[h.depth[1]];case g.default.POLYGON:(t=t[h.depth[0]]).length>4&&(a==t.length-1&&(a=0),t.splice(a,1),c=!0,0===a&&(t.pop(),t.push(t[0]),u=t.length-1))}if(c){this.setGeometryCoordinates_(i,r);var m=[];if(void 0!==s&&(this.rBush_.remove(s),m.push(s.segment[0])),void 0!==d&&(this.rBush_.remove(d),m.push(d.segment[1])),void 0!==s&&void 0!==d){var v={depth:h.depth,feature:h.feature,geometry:h.geometry,index:u,segment:m};this.rBush_.insert((0,l.boundingExtent)(v.segment),v)}this.updateSegmentIndices_(i,a,h.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),_.length=0}}return c},_.prototype.setGeometryCoordinates_=function(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1},_.prototype.updateSegmentIndices_=function(e,t,r,n){this.rBush_.forEachInExtent(e.getExtent(),function(i){i.geometry===e&&(void 0===r||void 0===i.depth||(0,o.equals)(i.depth,r))&&i.index>t&&(i.index+=n)})},_}(_.default);function M(e,t){return e.index-t.index}function L(e,t,r){var n=t.geometry;if(n.getType()===g.default.CIRCLE){var i=n;if(t.index===F){var o=(0,x.getUserProjection)();o&&(i=i.clone().transform(o,r));var s=(0,a.squaredDistance)(i.getCenter(),(0,x.fromUserCoordinate)(e,r)),u=Math.sqrt(s)-i.getRadius();return u*u}}var d=(0,x.fromUserCoordinate)(e,r);return T[0]=(0,x.fromUserCoordinate)(t.segment[0],r),T[1]=(0,x.fromUserCoordinate)(t.segment[1],r),(0,a.squaredDistanceToSegment)(d,T)}function U(e,t,r){var n=t.geometry;if(n.getType()===g.default.CIRCLE&&t.index===F){var i=n,o=(0,x.getUserProjection)();return o&&(i=i.clone().transform(o,r)),(0,x.toUserCoordinate)(i.getClosestPoint((0,x.fromUserCoordinate)(e,r)),r)}var s=(0,x.fromUserCoordinate)(e,r);return T[0]=(0,x.fromUserCoordinate)(t.segment[0],r),T[1]=(0,x.fromUserCoordinate)(t.segment[1],r),(0,x.toUserCoordinate)((0,a.closestOnSegment)(s,T),r)}function b(){var e=(0,y.createEditingStyle)();return function(t,r){return e[g.default.POINT]}}var N=G;exports.default=N;
},{"../util.js":"KniQ","../Collection.js":"FnDa","../CollectionEventType.js":"BTrx","../Feature.js":"mYW9","../MapBrowserEventType.js":"YhDM","../array.js":"luEr","../coordinate.js":"nGsj","../events/Event.js":"fKNg","../events/EventType.js":"C8cu","../events/condition.js":"YcID","../extent.js":"QDir","../geom/GeometryType.js":"lmV0","../geom/Point.js":"gLcY","../geom/Polygon.js":"Nwwk","./Pointer.js":"dnA2","../layer/Vector.js":"dflx","../source/Vector.js":"ZS12","../source/VectorEventType.js":"s8Fc","../structs/RBush.js":"MiUH","../style/Style.js":"he4w","../proj.js":"Diht"}],"SMGe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../util.js"),t=c(require("../CollectionEventType.js")),r=require("../array.js"),i=c(require("../events/Event.js")),n=require("../events/condition.js"),o=require("../functions.js"),s=c(require("../geom/GeometryType.js")),a=c(require("./Interaction.js")),u=require("../obj.js"),l=require("../style/Style.js"),d=c(require("../Collection.js"));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),h={SELECT:"select"},y=function(e){function t(t,r,i,n){var o=e.call(this,t)||this;return o.selected=r,o.deselected=i,o.mapBrowserEvent=n,o}return f(t,e),t}(i.default),_={},p=function(i){function s(e){var t,s=i.call(this,{handleEvent:v})||this,a=e||{};if(s.boundAddFeature_=s.addFeature_.bind(s),s.boundRemoveFeature_=s.removeFeature_.bind(s),s.condition_=a.condition?a.condition:n.singleClick,s.addCondition_=a.addCondition?a.addCondition:n.never,s.removeCondition_=a.removeCondition?a.removeCondition:n.never,s.toggleCondition_=a.toggleCondition?a.toggleCondition:n.shiftKeyOnly,s.multi_=!!a.multi&&a.multi,s.filter_=a.filter?a.filter:o.TRUE,s.hitTolerance_=a.hitTolerance?a.hitTolerance:0,s.style_=void 0!==a.style?a.style:g(),s.features_=a.features||new d.default,a.layers)if("function"==typeof a.layers)t=a.layers;else{var u=a.layers;t=function(e){return(0,r.includes)(u,e)}}else t=o.TRUE;return s.layerFilter_=t,s.featureLayerAssociation_={},s}return f(s,i),s.prototype.addFeatureLayerAssociation_=function(t,r){this.featureLayerAssociation_[(0,e.getUid)(t)]=r},s.prototype.getFeatures=function(){return this.features_},s.prototype.getHitTolerance=function(){return this.hitTolerance_},s.prototype.getLayer=function(t){return this.featureLayerAssociation_[(0,e.getUid)(t)]},s.prototype.setHitTolerance=function(e){this.hitTolerance_=e},s.prototype.setMap=function(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),i.prototype.setMap.call(this,e),e?(this.features_.addEventListener(t.default.ADD,this.boundAddFeature_),this.features_.addEventListener(t.default.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(t.default.ADD,this.boundAddFeature_),this.features_.removeEventListener(t.default.REMOVE,this.boundRemoveFeature_))},s.prototype.addFeature_=function(e){var t=e.element;this.style_&&this.applySelectedStyle_(t)},s.prototype.removeFeature_=function(e){var t=e.element;this.style_&&this.restorePreviousStyle_(t)},s.prototype.getStyle=function(){return this.style_},s.prototype.applySelectedStyle_=function(t){var r=(0,e.getUid)(t);r in _||(_[r]=t.getStyle()),t.setStyle(this.style_)},s.prototype.restorePreviousStyle_=function(t){var r=(0,e.getUid)(t),i=this.getMap().getInteractions().getArray().filter(function(e){return e instanceof s&&e.getStyle()&&-1!==e.getFeatures().getArray().indexOf(t)});i.length>0?t.setStyle(i[i.length-1].getStyle()):(t.setStyle(_[r]),delete _[r])},s.prototype.removeFeatureLayerAssociation_=function(t){delete this.featureLayerAssociation_[(0,e.getUid)(t)]},s}(a.default);function v(e){if(!this.condition_(e))return!0;var t=this.addCondition_(e),i=this.removeCondition_(e),n=this.toggleCondition_(e),o=!t&&!i&&!n,s=e.map,a=this.getFeatures(),l=[],d=[];if(o){(0,u.clear)(this.featureLayerAssociation_),s.forEachFeatureAtPixel(e.pixel,function(e,t){if(this.filter_(e,t))return d.push(e),this.addFeatureLayerAssociation_(e,t),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var c=a.getLength()-1;c>=0;--c){var f=a.item(c),_=d.indexOf(f);_>-1?d.splice(_,1):(a.remove(f),l.push(f))}0!==d.length&&a.extend(d)}else{s.forEachFeatureAtPixel(e.pixel,function(e,o){if(this.filter_(e,o))return!t&&!n||(0,r.includes)(a.getArray(),e)?(i||n)&&(0,r.includes)(a.getArray(),e)&&(l.push(e),this.removeFeatureLayerAssociation_(e)):(d.push(e),this.addFeatureLayerAssociation_(e,o)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var p=l.length-1;p>=0;--p)a.remove(l[p]);a.extend(d)}return(d.length>0||l.length>0)&&this.dispatchEvent(new y(h.SELECT,d,l,e)),!0}function g(){var e=(0,l.createEditingStyle)();return(0,r.extend)(e[s.default.POLYGON],e[s.default.LINE_STRING]),(0,r.extend)(e[s.default.GEOMETRY_COLLECTION],e[s.default.LINE_STRING]),function(t){return t.getGeometry()?e[t.getGeometry().getType()]:null}}var m=p;exports.default=m;
},{"../util.js":"KniQ","../CollectionEventType.js":"BTrx","../array.js":"luEr","../events/Event.js":"fKNg","../events/condition.js":"YcID","../functions.js":"RgA2","../geom/GeometryType.js":"lmV0","./Interaction.js":"jB2p","../obj.js":"mH6q","../style/Style.js":"he4w","../Collection.js":"FnDa"}],"NnGW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../util.js"),t=p(require("../CollectionEventType.js")),r=require("../coordinate.js"),n=require("../events.js"),i=p(require("../events/EventType.js")),o=require("../extent.js"),s=require("../functions.js"),a=p(require("../geom/GeometryType.js")),u=require("../geom/Polygon.js"),l=p(require("./Pointer.js")),h=require("../obj.js"),d=p(require("../source/VectorEventType.js")),f=p(require("../structs/RBush.js")),g=require("../proj.js");function p(e){return e&&e.__esModule?e:{default:e}}var c=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function _(e){return e.feature?e.feature:e.element?e.element:void 0}var v=[],y=function(l){function p(e){var t=this,r=e||{},n=r;return n.handleDownEvent||(n.handleDownEvent=s.TRUE),n.stopDown||(n.stopDown=s.FALSE),(t=l.call(this,n)||this).source_=r.source?r.source:null,t.vertex_=void 0===r.vertex||r.vertex,t.edge_=void 0===r.edge||r.edge,t.features_=r.features?r.features:null,t.featuresListenerKeys_=[],t.featureChangeListenerKeys_={},t.indexedFeaturesExtents_={},t.pendingFeatures_={},t.pixelTolerance_=void 0!==r.pixelTolerance?r.pixelTolerance:10,t.rBush_=new f.default,t.SEGMENT_WRITERS_={Point:t.writePointGeometry_.bind(t),LineString:t.writeLineStringGeometry_.bind(t),LinearRing:t.writeLineStringGeometry_.bind(t),Polygon:t.writePolygonGeometry_.bind(t),MultiPoint:t.writeMultiPointGeometry_.bind(t),MultiLineString:t.writeMultiLineStringGeometry_.bind(t),MultiPolygon:t.writeMultiPolygonGeometry_.bind(t),GeometryCollection:t.writeGeometryCollectionGeometry_.bind(t),Circle:t.writeCircleGeometry_.bind(t)},t}return c(p,l),p.prototype.addFeature=function(t,r){var s=void 0===r||r,a=(0,e.getUid)(t),u=t.getGeometry();if(u){var l=this.SEGMENT_WRITERS_[u.getType()];l&&(this.indexedFeaturesExtents_[a]=u.getExtent((0,o.createEmpty)()),l(t,u))}s&&(this.featureChangeListenerKeys_[a]=(0,n.listen)(t,i.default.CHANGE,this.handleFeatureChange_,this))},p.prototype.forEachFeatureAdd_=function(e){this.addFeature(e)},p.prototype.forEachFeatureRemove_=function(e){this.removeFeature(e)},p.prototype.getFeatures_=function(){var e;return this.features_?e=this.features_:this.source_&&(e=this.source_.getFeatures()),e},p.prototype.handleEvent=function(e){var t=this.snapTo(e.pixel,e.coordinate,e.map);return t.snapped&&(e.coordinate=t.vertex.slice(0,2),e.pixel=t.vertexPixel),l.prototype.handleEvent.call(this,e)},p.prototype.handleFeatureAdd_=function(e){var t=_(e);this.addFeature(t)},p.prototype.handleFeatureRemove_=function(e){var t=_(e);this.removeFeature(t)},p.prototype.handleFeatureChange_=function(t){var r=t.target;if(this.handlingDownUpSequence){var n=(0,e.getUid)(r);n in this.pendingFeatures_||(this.pendingFeatures_[n]=r)}else this.updateFeature_(r)},p.prototype.handleUpEvent=function(e){var t=(0,h.getValues)(this.pendingFeatures_);return t.length&&(t.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1},p.prototype.removeFeature=function(t,r){var i=void 0===r||r,o=(0,e.getUid)(t),s=this.indexedFeaturesExtents_[o];if(s){var a=this.rBush_,u=[];a.forEachInExtent(s,function(e){t===e.feature&&u.push(e)});for(var l=u.length-1;l>=0;--l)a.remove(u[l])}i&&((0,n.unlistenByKey)(this.featureChangeListenerKeys_[o]),delete this.featureChangeListenerKeys_[o])},p.prototype.setMap=function(e){var r=this.getMap(),i=this.featuresListenerKeys_,o=this.getFeatures_();r&&(i.forEach(n.unlistenByKey),i.length=0,o.forEach(this.forEachFeatureRemove_.bind(this))),l.prototype.setMap.call(this,e),e&&(this.features_?i.push((0,n.listen)(this.features_,t.default.ADD,this.handleFeatureAdd_,this),(0,n.listen)(this.features_,t.default.REMOVE,this.handleFeatureRemove_,this)):this.source_&&i.push((0,n.listen)(this.source_,d.default.ADDFEATURE,this.handleFeatureAdd_,this),(0,n.listen)(this.source_,d.default.REMOVEFEATURE,this.handleFeatureRemove_,this)),o.forEach(this.forEachFeatureAdd_.bind(this)))},p.prototype.snapTo=function(e,t,n){var i=n.getCoordinateFromPixel([e[0]-this.pixelTolerance_,e[1]+this.pixelTolerance_]),s=n.getCoordinateFromPixel([e[0]+this.pixelTolerance_,e[1]-this.pixelTolerance_]),u=(0,o.boundingExtent)([i,s]),l=this.rBush_.getInExtent(u);this.vertex_&&!this.edge_&&(l=l.filter(function(e){return e.feature.getGeometry().getType()!==a.default.CIRCLE}));var h=!1,d=null,f=null;if(0===l.length)return{snapped:h,vertex:d,vertexPixel:f};for(var p,c=n.getView().getProjection(),_=(0,g.fromUserCoordinate)(t,c),y=1/0,m=0;m<l.length;++m){var x=l[m];v[0]=(0,g.fromUserCoordinate)(x.segment[0],c),v[1]=(0,g.fromUserCoordinate)(x.segment[1],c);var E=(0,r.squaredDistanceToSegment)(_,v);E<y&&(p=x,y=E)}var F=p.segment;if(this.vertex_&&!this.edge_){var C=n.getPixelFromCoordinate(F[0]),P=n.getPixelFromCoordinate(F[1]),G=(0,r.squaredDistance)(e,C),T=(0,r.squaredDistance)(e,P);Math.sqrt(Math.min(G,T))<=this.pixelTolerance_&&(h=!0,d=G>T?F[1]:F[0],f=n.getPixelFromCoordinate(d))}else if(this.edge_){var w=p.feature.getGeometry().getType()===a.default.CIRCLE;if(w){var M=p.feature.getGeometry(),j=(0,g.getUserProjection)();j&&(M=M.clone().transform(j,c)),d=(0,g.toUserCoordinate)((0,r.closestOnCircle)(_,M),c)}else v[0]=(0,g.fromUserCoordinate)(F[0],c),v[1]=(0,g.fromUserCoordinate)(F[1],c),d=(0,g.toUserCoordinate)((0,r.closestOnSegment)(_,v),c);if(f=n.getPixelFromCoordinate(d),(0,r.distance)(e,f)<=this.pixelTolerance_&&(h=!0,this.vertex_&&!w)){C=n.getPixelFromCoordinate(F[0]),P=n.getPixelFromCoordinate(F[1]),G=(0,r.squaredDistance)(f,C),T=(0,r.squaredDistance)(f,P);Math.sqrt(Math.min(G,T))<=this.pixelTolerance_&&(d=G>T?F[1]:F[0],f=n.getPixelFromCoordinate(d))}}return h&&(f=[Math.round(f[0]),Math.round(f[1])]),{snapped:h,vertex:d,vertexPixel:f}},p.prototype.updateFeature_=function(e){this.removeFeature(e,!1),this.addFeature(e,!1)},p.prototype.writeCircleGeometry_=function(e,t){var r=this.getMap().getView().getProjection(),n=t,i=(0,g.getUserProjection)();i&&(n=n.clone().transform(i,r));var s=(0,u.fromCircle)(n);i&&s.transform(r,i);for(var a=s.getCoordinates()[0],l=0,h=a.length-1;l<h;++l){var d=a.slice(l,l+2),f={feature:e,segment:d};this.rBush_.insert((0,o.boundingExtent)(d),f)}},p.prototype.writeGeometryCollectionGeometry_=function(e,t){for(var r=t.getGeometriesArray(),n=0;n<r.length;++n){var i=this.SEGMENT_WRITERS_[r[n].getType()];i&&i(e,r[n])}},p.prototype.writeLineStringGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length-1;n<i;++n){var s=r.slice(n,n+2),a={feature:e,segment:s};this.rBush_.insert((0,o.boundingExtent)(s),a)}},p.prototype.writeMultiLineStringGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length;n<i;++n)for(var s=r[n],a=0,u=s.length-1;a<u;++a){var l=s.slice(a,a+2),h={feature:e,segment:l};this.rBush_.insert((0,o.boundingExtent)(l),h)}},p.prototype.writeMultiPointGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length;n<i;++n){var o=r[n],s={feature:e,segment:[o,o]};this.rBush_.insert(t.getExtent(),s)}},p.prototype.writeMultiPolygonGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length;n<i;++n)for(var s=r[n],a=0,u=s.length;a<u;++a)for(var l=s[a],h=0,d=l.length-1;h<d;++h){var f=l.slice(h,h+2),g={feature:e,segment:f};this.rBush_.insert((0,o.boundingExtent)(f),g)}},p.prototype.writePointGeometry_=function(e,t){var r=t.getCoordinates(),n={feature:e,segment:[r,r]};this.rBush_.insert(t.getExtent(),n)},p.prototype.writePolygonGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length;n<i;++n)for(var s=r[n],a=0,u=s.length-1;a<u;++a){var l=s.slice(a,a+2),h={feature:e,segment:l};this.rBush_.insert((0,o.boundingExtent)(l),h)}},p}(l.default),m=y;exports.default=m;
},{"../util.js":"KniQ","../CollectionEventType.js":"BTrx","../coordinate.js":"nGsj","../events.js":"UqnM","../events/EventType.js":"C8cu","../extent.js":"QDir","../functions.js":"RgA2","../geom/GeometryType.js":"lmV0","../geom/Polygon.js":"Nwwk","./Pointer.js":"dnA2","../obj.js":"mH6q","../source/VectorEventType.js":"s8Fc","../structs/RBush.js":"MiUH","../proj.js":"Diht"}],"dAAZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.TranslateEvent=void 0;var t=s(require("../Collection.js")),e=require("../Object.js"),r=s(require("../events/Event.js")),a=require("../functions.js"),n=require("../array.js"),i=s(require("./Pointer.js")),o=s(require("./Property.js"));function s(t){return t&&t.__esModule?t:{default:t}}var l=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function a(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}(),u={TRANSLATESTART:"translatestart",TRANSLATING:"translating",TRANSLATEEND:"translateend"},h=function(t){function e(e,r,a,n,i){var o=t.call(this,e)||this;return o.features=r,o.coordinate=a,o.startCoordinate=n,o.mapBrowserEvent=i,o}return l(e,t),e}(r.default);exports.TranslateEvent=h;var c=function(r){function i(t){var i,s=this,l=t||{};if((s=r.call(this,l)||this).lastCoordinate_=null,s.startCoordinate_=null,s.features_=void 0!==l.features?l.features:null,l.layers)if("function"==typeof l.layers)i=l.layers;else{var u=l.layers;i=function(t){return(0,n.includes)(u,t)}}else i=a.TRUE;return s.layerFilter_=i,s.filter_=l.filter?l.filter:a.TRUE,s.hitTolerance_=l.hitTolerance?l.hitTolerance:0,s.lastFeature_=null,s.addEventListener((0,e.getChangeEventType)(o.default.ACTIVE),s.handleActiveChanged_),s}return l(i,r),i.prototype.handleDownEvent=function(e){if(this.lastFeature_=this.featuresAtPixel_(e.pixel,e.map),!this.lastCoordinate_&&this.lastFeature_){this.startCoordinate_=e.coordinate,this.lastCoordinate_=e.coordinate,this.handleMoveEvent(e);var r=this.features_||new t.default([this.lastFeature_]);return this.dispatchEvent(new h(u.TRANSLATESTART,r,e.coordinate,this.startCoordinate_,e)),!0}return!1},i.prototype.handleUpEvent=function(e){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(e);var r=this.features_||new t.default([this.lastFeature_]);return this.dispatchEvent(new h(u.TRANSLATEEND,r,e.coordinate,this.startCoordinate_,e)),this.startCoordinate_=null,!0}return!1},i.prototype.handleDragEvent=function(e){if(this.lastCoordinate_){var r=e.coordinate,a=r[0]-this.lastCoordinate_[0],n=r[1]-this.lastCoordinate_[1],i=this.features_||new t.default([this.lastFeature_]);i.forEach(function(t){var e=t.getGeometry();e.translate(a,n),t.setGeometry(e)}),this.lastCoordinate_=r,this.dispatchEvent(new h(u.TRANSLATING,i,r,this.startCoordinate_,e))}},i.prototype.handleMoveEvent=function(t){var e=t.map.getViewport();this.featuresAtPixel_(t.pixel,t.map)?(e.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),e.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):e.classList.remove("ol-grab","ol-grabbing")},i.prototype.featuresAtPixel_=function(t,e){return e.forEachFeatureAtPixel(t,function(t,e){if(this.filter_(t,e)&&(!this.features_||(0,n.includes)(this.features_.getArray(),t)))return t}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})},i.prototype.getHitTolerance=function(){return this.hitTolerance_},i.prototype.setHitTolerance=function(t){this.hitTolerance_=t},i.prototype.setMap=function(t){var e=this.getMap();r.prototype.setMap.call(this,t),this.updateState_(e)},i.prototype.handleActiveChanged_=function(){this.updateState_(null)},i.prototype.updateState_=function(t){var e=this.getMap(),r=this.getActive();e&&r||(e=e||t)&&e.getViewport().classList.remove("ol-grab","ol-grabbing")},i}(i.default),f=c;exports.default=f;
},{"../Collection.js":"FnDa","../Object.js":"PhPh","../events/Event.js":"fKNg","../functions.js":"RgA2","../array.js":"luEr","./Pointer.js":"dnA2","./Property.js":"caOi"}],"aMDX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaults=O,Object.defineProperty(exports,"DoubleClickZoom",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"DragPan",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"DragRotate",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"DragZoom",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"KeyboardPan",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"KeyboardZoom",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"MouseWheelZoom",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(exports,"PinchRotate",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(exports,"PinchZoom",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"DragAndDrop",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(exports,"DragBox",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"DragRotateAndZoom",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(exports,"Draw",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(exports,"Extent",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(exports,"Interaction",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(exports,"Modify",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(exports,"Pointer",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(exports,"Select",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(exports,"Snap",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(exports,"Translate",{enumerable:!0,get:function(){return h.default}});var e=q(require("./Collection.js")),t=q(require("./Kinetic.js")),r=q(require("./interaction/DoubleClickZoom.js")),n=q(require("./interaction/DragPan.js")),o=q(require("./interaction/DragRotate.js")),i=q(require("./interaction/DragZoom.js")),u=q(require("./interaction/KeyboardPan.js")),a=q(require("./interaction/KeyboardZoom.js")),d=q(require("./interaction/MouseWheelZoom.js")),c=q(require("./interaction/PinchRotate.js")),f=q(require("./interaction/PinchZoom.js")),l=require("./events/condition.js"),s=q(require("./interaction/DragAndDrop.js")),p=q(require("./interaction/DragBox.js")),b=q(require("./interaction/DragRotateAndZoom.js")),m=q(require("./interaction/Draw.js")),j=q(require("./interaction/Extent.js")),g=q(require("./interaction/Interaction.js")),P=q(require("./interaction/Modify.js")),y=q(require("./interaction/Pointer.js")),D=q(require("./interaction/Select.js")),x=q(require("./interaction/Snap.js")),h=q(require("./interaction/Translate.js"));function q(e){return e&&e.__esModule?e:{default:e}}function O(s){var p=s||{},b=new e.default,m=new t.default(-.005,.05,100);return(void 0===p.altShiftDragRotate||p.altShiftDragRotate)&&b.push(new o.default),(void 0===p.doubleClickZoom||p.doubleClickZoom)&&b.push(new r.default({delta:p.zoomDelta,duration:p.zoomDuration})),(void 0===p.dragPan||p.dragPan)&&b.push(new n.default({condition:p.onFocusOnly?l.focus:void 0,kinetic:m})),(void 0===p.pinchRotate||p.pinchRotate)&&b.push(new c.default),(void 0===p.pinchZoom||p.pinchZoom)&&b.push(new f.default({duration:p.zoomDuration})),(void 0===p.keyboard||p.keyboard)&&(b.push(new u.default),b.push(new a.default({delta:p.zoomDelta,duration:p.zoomDuration}))),(void 0===p.mouseWheelZoom||p.mouseWheelZoom)&&b.push(new d.default({condition:p.onFocusOnly?l.focus:void 0,duration:p.zoomDuration})),(void 0===p.shiftDragZoom||p.shiftDragZoom)&&b.push(new i.default({duration:p.zoomDuration})),b}
},{"./Collection.js":"FnDa","./Kinetic.js":"gAnK","./interaction/DoubleClickZoom.js":"NSa4","./interaction/DragPan.js":"N4gU","./interaction/DragRotate.js":"PgBj","./interaction/DragZoom.js":"pTqW","./interaction/KeyboardPan.js":"CFRo","./interaction/KeyboardZoom.js":"S8wR","./interaction/MouseWheelZoom.js":"kPt6","./interaction/PinchRotate.js":"hbGN","./interaction/PinchZoom.js":"rcXm","./events/condition.js":"YcID","./interaction/DragAndDrop.js":"IYO6","./interaction/DragBox.js":"AQRw","./interaction/DragRotateAndZoom.js":"ITeC","./interaction/Draw.js":"e7i2","./interaction/Extent.js":"o7b8","./interaction/Interaction.js":"jB2p","./interaction/Modify.js":"qrxo","./interaction/Pointer.js":"dnA2","./interaction/Select.js":"SMGe","./interaction/Snap.js":"NnGW","./interaction/Translate.js":"dAAZ"}],"kYy5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=u(require("./PluggableMap.js")),e=require("./control.js"),r=require("./interaction.js"),o=require("./obj.js"),n=u(require("./renderer/Composite.js"));function u(t){return t&&t.__esModule?t:{default:t}}var i=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),s=function(t){function u(n){return(n=(0,o.assign)({},n)).controls||(n.controls=(0,e.defaults)()),n.interactions||(n.interactions=(0,r.defaults)()),t.call(this,n)||this}return i(u,t),u.prototype.createRenderer=function(){return new n.default(this)},u}(t.default),c=s;exports.default=c;
},{"./PluggableMap.js":"kRwz","./control.js":"ucqx","./interaction.js":"aMDX","./obj.js":"mH6q","./renderer/Composite.js":"MHsB"}],"oMDz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../asserts.js"),t=function(){function t(e){this.highWaterMark=void 0!==e?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return t.prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark},t.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},t.prototype.containsKey=function(e){return this.entries_.hasOwnProperty(e)},t.prototype.forEach=function(e){for(var t=this.oldest_;t;)e(t.value_,t.key_,this),t=t.newer},t.prototype.get=function(t,s){var n=this.entries_[t];return(0,e.assert)(void 0!==n,15),n===this.newest_?n.value_:(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n,n.value_)},t.prototype.remove=function(t){var s=this.entries_[t];return(0,e.assert)(void 0!==s,15),s===this.newest_?(this.newest_=s.older,this.newest_&&(this.newest_.newer=null)):s===this.oldest_?(this.oldest_=s.newer,this.oldest_&&(this.oldest_.older=null)):(s.newer.older=s.older,s.older.newer=s.newer),delete this.entries_[t],--this.count_,s.value_},t.prototype.getCount=function(){return this.count_},t.prototype.getKeys=function(){var e,t=new Array(this.count_),s=0;for(e=this.newest_;e;e=e.older)t[s++]=e.key_;return t},t.prototype.getValues=function(){var e,t=new Array(this.count_),s=0;for(e=this.newest_;e;e=e.older)t[s++]=e.value_;return t},t.prototype.peekLast=function(){return this.oldest_.value_},t.prototype.peekLastKey=function(){return this.oldest_.key_},t.prototype.peekFirstKey=function(){return this.newest_.key_},t.prototype.pop=function(){var e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_},t.prototype.replace=function(e,t){this.get(e),this.entries_[e].value_=t},t.prototype.set=function(t,s){(0,e.assert)(!(t in this.entries_),16);var n={key_:t,newer:null,older:this.newest_,value_:s};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_},t.prototype.setSize=function(e){this.highWaterMark=e},t}(),s=t;exports.default=s;
},{"../asserts.js":"fLG6"}],"faTr":[function(require,module,exports) {
"use strict";function e(e,t,n,r){return void 0!==r?(r[0]=e,r[1]=t,r[2]=n,r):[e,t,n]}function t(e,t,n){return e+"/"+t+"/"+n}function n(e){return t(e[0],e[1],e[2])}function r(e){return e.split("/").map(Number)}function o(e){return(e[1]<<e[0])+e[2]}function u(e,t){var n=e[0],r=e[1],o=e[2];if(t.getMinZoom()>n||n>t.getMaxZoom())return!1;var u,i=t.getExtent();return!(u=i?t.getTileRangeForExtentAndZ(i,n):t.getFullTileRange(n))||u.containsXY(r,o)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createOrUpdate=e,exports.getKeyZXY=t,exports.getKey=n,exports.fromKey=r,exports.hash=o,exports.withinExtentAndZ=u;
},{}],"YFDe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./structs/LRUCache.js")),e=require("./tilecoord.js");function r(t){return t&&t.__esModule?t:{default:t}}var o=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),n=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return o(r,t),r.prototype.expireCache=function(t){for(;this.canExpireCache();){if(this.peekLast().getKey()in t)break;this.pop().release()}},r.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=this.peekFirstKey(),r=(0,e.fromKey)(t)[0];this.forEach(function(t){t.tileCoord[0]!==r&&(this.remove((0,e.getKey)(t.tileCoord)),t.release())}.bind(this))}},r}(t.default),i=n;exports.default=i;
},{"./structs/LRUCache.js":"oMDz","./tilecoord.js":"faTr"}],"snev":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createOrUpdate=i,exports.default=void 0;var t=function(){function t(t,i,n,m){this.minX=t,this.maxX=i,this.minY=n,this.maxY=m}return t.prototype.contains=function(t){return this.containsXY(t[1],t[2])},t.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},t.prototype.containsXY=function(t,i){return this.minX<=t&&t<=this.maxX&&this.minY<=i&&i<=this.maxY},t.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},t.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},t.prototype.getHeight=function(){return this.maxY-this.minY+1},t.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},t.prototype.getWidth=function(){return this.maxX-this.minX+1},t.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},t}();function i(i,n,m,e,s){return void 0!==s?(s.minX=i,s.maxX=n,s.minY=m,s.maxY=e,s):new t(i,n,m,e)}var n=t;exports.default=n;
},{}],"C8Du":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./util.js"),t=o(require("./Tile.js")),r=require("./dom.js");function o(e){return e&&e.__esModule?e:{default:e}}var n=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),i=[],u=function(t){function o(e,r,o,n){var i=t.call(this,e,r,{transition:0})||this;return i.context_={},i.executorGroups={},i.loadingSourceTiles=0,i.errorSourceTileKeys={},i.hitDetectionImageData={},i.replayState_={},i.sourceTiles=null,i.wantedResolution,i.getSourceTiles=n.bind(void 0,i),i.sourceZ=-1,i.hifi=!1,i.wrappedTileCoord=o,i}return n(o,t),o.prototype.getContext=function(t){var o=(0,e.getUid)(t);return o in this.context_||(this.context_[o]=(0,r.createCanvasContext2D)(1,1,i)),this.context_[o]},o.prototype.hasContext=function(t){return(0,e.getUid)(t)in this.context_},o.prototype.getImage=function(e){return this.hasContext(e)?this.getContext(e).canvas:null},o.prototype.getReplayState=function(t){var r=(0,e.getUid)(t);return r in this.replayState_||(this.replayState_[r]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedZ:-1,renderedTileZ:-1}),this.replayState_[r]},o.prototype.load=function(){this.getSourceTiles()},o.prototype.release=function(){for(var e in this.context_)i.push(this.context_[e].canvas);t.prototype.release.call(this)},o}(t.default),s=u;exports.default=s;
},{"./util.js":"KniQ","./Tile.js":"IWZI","./dom.js":"Xno5"}],"yj80":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("./Tile.js")),e=o(require("./TileState.js"));function o(t){return t&&t.__esModule?t:{default:t}}var r=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),n=function(t){function o(e,o,r,n,u,i){var s=t.call(this,e,o,i)||this;return s.extent=null,s.format_=n,s.features_=null,s.loader_,s.projection=null,s.resolution,s.tileLoadFunction_=u,s.url_=r,s}return r(o,t),o.prototype.getFormat=function(){return this.format_},o.prototype.getFeatures=function(){return this.features_},o.prototype.getKey=function(){return this.url_},o.prototype.load=function(){this.state==e.default.IDLE&&(this.setState(e.default.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))},o.prototype.onLoad=function(t,e){this.setFeatures(t)},o.prototype.onError=function(){this.setState(e.default.ERROR)},o.prototype.setFeatures=function(t){this.features_=t,this.setState(e.default.LOADED)},o.prototype.setLoader=function(t){this.loader_=t},o}(t.default),u=n;exports.default=u;
},{"./Tile.js":"IWZI","./TileState.js":"u3kG"}],"DRei":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"AssertionError",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"Collection",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"Disposable",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"Feature",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"Geolocation",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"Graticule",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"Image",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"ImageBase",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"ImageCanvas",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"ImageTile",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"Kinetic",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(exports,"Map",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(exports,"MapBrowserEvent",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"MapBrowserEventHandler",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(exports,"MapBrowserPointerEvent",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(exports,"MapEvent",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(exports,"Object",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(exports,"Observable",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(exports,"Overlay",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(exports,"PluggableMap",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(exports,"Tile",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(exports,"TileCache",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(exports,"TileQueue",{enumerable:!0,get:function(){return q.default}}),Object.defineProperty(exports,"TileRange",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(exports,"VectorRenderTile",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(exports,"VectorTile",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(exports,"View",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(exports,"getUid",{enumerable:!0,get:function(){return I.getUid}}),Object.defineProperty(exports,"VERSION",{enumerable:!0,get:function(){return I.VERSION}});var e=w(require("./AssertionError.js")),r=w(require("./Collection.js")),t=w(require("./Disposable.js")),n=w(require("./Feature.js")),u=w(require("./Geolocation.js")),i=w(require("./layer/Graticule.js")),o=w(require("./Image.js")),a=w(require("./ImageBase.js")),l=w(require("./ImageCanvas.js")),f=w(require("./ImageTile.js")),s=w(require("./Kinetic.js")),c=w(require("./Map.js")),p=w(require("./MapBrowserEvent.js")),b=w(require("./MapBrowserEventHandler.js")),d=w(require("./MapBrowserPointerEvent.js")),j=w(require("./MapEvent.js")),g=w(require("./Object.js")),O=w(require("./Observable.js")),m=w(require("./Overlay.js")),P=w(require("./PluggableMap.js")),y=w(require("./Tile.js")),x=w(require("./TileCache.js")),q=w(require("./TileQueue.js")),v=w(require("./TileRange.js")),M=w(require("./VectorRenderTile.js")),T=w(require("./VectorTile.js")),E=w(require("./View.js")),I=require("./util.js");function w(e){return e&&e.__esModule?e:{default:e}}
},{"./AssertionError.js":"ygGQ","./Collection.js":"FnDa","./Disposable.js":"DDda","./Feature.js":"mYW9","./Geolocation.js":"X4ix","./layer/Graticule.js":"wXs0","./Image.js":"DHWK","./ImageBase.js":"Ojbp","./ImageCanvas.js":"K7j2","./ImageTile.js":"TOsW","./Kinetic.js":"gAnK","./Map.js":"kYy5","./MapBrowserEvent.js":"HMLS","./MapBrowserEventHandler.js":"ohHk","./MapBrowserPointerEvent.js":"J1WQ","./MapEvent.js":"vFcA","./Object.js":"PhPh","./Observable.js":"IdSm","./Overlay.js":"qWcX","./PluggableMap.js":"kRwz","./Tile.js":"IWZI","./TileCache.js":"YFDe","./TileQueue.js":"tHOl","./TileRange.js":"snev","./VectorRenderTile.js":"C8Du","./VectorTile.js":"yj80","./View.js":"hNqE","./util.js":"KniQ"}],"M5pz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};exports.default=e;
},{}],"HTO1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("./Layer.js")),t=o(require("./TileProperty.js")),r=require("../obj.js");function o(e){return e&&e.__esModule?e:{default:e}}var n=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),i=function(e){function o(t){var o=this,n=t||{},i=(0,r.assign)({},n);return delete i.preload,delete i.useInterimTilesOnError,(o=e.call(this,i)||this).setPreload(void 0!==n.preload?n.preload:0),o.setUseInterimTilesOnError(void 0===n.useInterimTilesOnError||n.useInterimTilesOnError),o}return n(o,e),o.prototype.getPreload=function(){return this.get(t.default.PRELOAD)},o.prototype.setPreload=function(e){this.set(t.default.PRELOAD,e)},o.prototype.getUseInterimTilesOnError=function(){return this.get(t.default.USE_INTERIM_TILES_ON_ERROR)},o.prototype.setUseInterimTilesOnError=function(e){this.set(t.default.USE_INTERIM_TILES_ON_ERROR,e)},o}(e.default),s=i;exports.default=s;
},{"./Layer.js":"GCgv","./TileProperty.js":"M5pz","../obj.js":"mH6q"}],"hkMV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../../util.js"),t=require("../../proj.js"),r=d(require("../../TileRange.js")),i=d(require("../../TileState.js")),n=require("../../extent.js"),o=d(require("./Layer.js")),a=require("../../transform.js"),s=require("../../array.js"),l=require("../../render/canvas.js");function d(e){return e&&e.__esModule?e:{default:e}}var u=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),h=function(o){function d(e){var t=o.call(this,e)||this;return t.extentChanged=!0,t.renderedExtent_=null,t.renderedPixelRatio,t.renderedProjection=null,t.renderedRevision,t.renderedTiles=[],t.newTiles_=!1,t.tmpExtent=(0,n.createEmpty)(),t.tmpTileRange_=new r.default(0,0,0,0),t}return u(d,o),d.prototype.isDrawableTile=function(e){var t=this.getLayer(),r=e.getState(),n=t.getUseInterimTilesOnError();return r==i.default.LOADED||r==i.default.EMPTY||r==i.default.ERROR&&!n},d.prototype.getTile=function(e,t,r,n){var o=n.pixelRatio,a=n.viewState.projection,s=this.getLayer(),l=s.getSource().getTile(e,t,r,o,a);return l.getState()==i.default.ERROR&&(s.getUseInterimTilesOnError()?s.getPreload()>0&&(this.newTiles_=!0):l.setState(i.default.LOADED)),this.isDrawableTile(l)||(l=l.getInterimTile()),l},d.prototype.loadedTileCallback=function(e,t,r){return!!this.isDrawableTile(r)&&o.prototype.loadedTileCallback.call(this,e,t,r)},d.prototype.prepareFrame=function(e){return!!this.getLayer().getSource()},d.prototype.renderFrame=function(r,o){var d=r.layerStatesArray[r.layerIndex],u=r.viewState,h=u.projection,p=u.resolution,c=u.center,g=u.rotation,T=r.pixelRatio,f=this.getLayer(),m=f.getSource(),v=m.getRevision(),x=m.getTileGridForProjection(h),y=x.getZForResolution(p,m.zDirection),R=x.getResolution(y),w=r.extent,E=d.extent&&(0,t.fromUserExtent)(d.extent,h);E&&(w=(0,n.getIntersection)(w,(0,t.fromUserExtent)(d.extent,h)));var _=m.getTilePixelRatio(T),C=Math.round(r.size[0]*_),j=Math.round(r.size[1]*_);if(g){var P=Math.round(Math.sqrt(C*C+j*j));C=P,j=P}var S=R*C/2/_,b=R*j/2/_,O=[c[0]-S,c[1]-b,c[0]+S,c[1]+b],I=x.getTileRangeForExtentAndZ(w,y),q={};q[y]={};var A=this.createLoadedTileFinder(m,h,q),U=this.tmpExtent,D=this.tmpTileRange_;this.newTiles_=!1;for(var L=I.minX;L<=I.maxX;++L)for(var M=I.minY;M<=I.maxY;++M){var F=this.getTile(y,L,M,r);if(this.isDrawableTile(F)){var z=(0,e.getUid)(this);if(F.getState()==i.default.LOADED){q[y][F.tileCoord.toString()]=F;var Y=F.inTransition(z);this.newTiles_||!Y&&-1!==this.renderedTiles.indexOf(F)||(this.newTiles_=!0)}if(1===F.getAlpha(z,r.time))continue}var Z=x.getTileCoordChildTileRange(F.tileCoord,D,U),k=!1;Z&&(k=A(y+1,Z)),k||x.forEachTileCoordParentTileRange(F.tileCoord,A,D,U)}var K=R/p;(0,a.compose)(this.pixelTransform,r.size[0]/2,r.size[1]/2,1/_,1/_,g,-C/2,-j/2);var X=(0,l.createTransformString)(this.pixelTransform);this.useContainer(o,X,d.opacity);var G=this.context,Q=G.canvas;(0,a.makeInverse)(this.inversePixelTransform,this.pixelTransform),(0,a.compose)(this.tempTransform_,C/2,j/2,K,K,0,-C/2,-j/2),Q.width!=C||Q.height!=j?(Q.width=C,Q.height=j):this.containerReused||G.clearRect(0,0,C,j),E&&this.clipUnrotated(G,r,E),this.preRender(G,r),this.renderedTiles.length=0;var N,B,H,J=Object.keys(q).map(Number);J.sort(s.numberSafeCompareFunction),1!==d.opacity||this.containerReused&&!m.getOpaque(r.viewState.projection)?(N=[],B=[]):J=J.reverse();for(var V=J.length-1;V>=0;--V){var W=J[V],$=m.getTilePixelSize(W,T,h),ee=x.getResolution(W)/R,te=$[0]*ee*K,re=$[1]*ee*K,ie=x.getTileCoordForCoordAndZ((0,n.getTopLeft)(O),W),ne=x.getTileCoordExtent(ie),oe=(0,a.apply)(this.tempTransform_,[_*(ne[0]-O[0])/R,_*(O[3]-ne[3])/R]),ae=_*m.getGutterForProjection(h),se=q[W];for(var le in se){var de=(F=se[le]).tileCoord,ue=oe[0]-(ie[1]-de[1])*te,he=Math.round(ue+te),pe=oe[1]-(ie[2]-de[2])*re,ce=Math.round(pe+re),ge=he-(L=Math.round(ue)),Te=ce-(M=Math.round(pe)),fe=y===W;if(!(Y=fe&&1!==F.getAlpha((0,e.getUid)(this),r.time)))if(N){G.save(),H=[L,M,L+ge,M,L+ge,M+Te,L,M+Te];for(var me=0,ve=N.length;me<ve;++me)if(y!==W&&W<B[me]){var xe=N[me];G.beginPath(),G.moveTo(H[0],H[1]),G.lineTo(H[2],H[3]),G.lineTo(H[4],H[5]),G.lineTo(H[6],H[7]),G.moveTo(xe[6],xe[7]),G.lineTo(xe[4],xe[5]),G.lineTo(xe[2],xe[3]),G.lineTo(xe[0],xe[1]),G.clip()}N.push(H),B.push(W)}else G.clearRect(L,M,ge,Te);this.drawTileImage(F,r,L,M,ge,Te,ae,fe,d.opacity),N&&!Y&&G.restore(),this.renderedTiles.push(F),this.updateUsedTiles(r.usedTiles,m,F)}}return this.renderedRevision=v,this.renderedResolution=R,this.extentChanged=!this.renderedExtent_||!(0,n.equals)(this.renderedExtent_,O),this.renderedExtent_=O,this.renderedPixelRatio=T,this.renderedProjection=h,this.manageTilePyramid(r,m,x,T,h,w,y,f.getPreload()),this.scheduleExpireCache(r,m),this.postRender(G,r),d.extent&&G.restore(),X!==Q.style.transform&&(Q.style.transform=X),this.container},d.prototype.drawTileImage=function(t,r,i,n,o,a,s,l,d){var u=this.getTileImage(t);if(u){var h=(0,e.getUid)(this),p=l?t.getAlpha(h,r.time):1,c=d*p,g=c!==this.context.globalAlpha;g&&(this.context.save(),this.context.globalAlpha=c),this.context.drawImage(u,s,s,u.width-2*s,u.height-2*s,i,n,o,a),g&&this.context.restore(),1!==p?r.animate=!0:l&&t.endTransition(h)}},d.prototype.getImage=function(){var e=this.context;return e?e.canvas:null},d.prototype.getTileImage=function(e){return e.getImage()},d.prototype.scheduleExpireCache=function(t,r){if(r.canExpireCache()){var i=function(t,r,i){var n=(0,e.getUid)(t);n in i.usedTiles&&t.expireCache(i.viewState.projection,i.usedTiles[n])}.bind(null,r);t.postRenderFunctions.push(i)}},d.prototype.updateUsedTiles=function(t,r,i){var n=(0,e.getUid)(r);n in t||(t[n]={}),t[n][i.getKey()]=!0},d.prototype.manageTilePyramid=function(t,r,n,o,a,s,l,d,u){var h=(0,e.getUid)(r);h in t.wantedTiles||(t.wantedTiles[h]={});var p,c,g,T,f,m,v=t.wantedTiles[h],x=t.tileQueue;for(m=n.getMinZoom();m<=l;++m)for(c=n.getTileRangeForExtentAndZ(s,m,c),g=n.getResolution(m),T=c.minX;T<=c.maxX;++T)for(f=c.minY;f<=c.maxY;++f)l-m<=d?((p=r.getTile(m,T,f,o,a)).getState()==i.default.IDLE&&(v[p.getKey()]=!0,x.isKeyQueued(p.getKey())||x.enqueue([p,h,n.getTileCoordCenter(p.tileCoord),g])),void 0!==u&&u(p)):r.useTile(m,T,f,a)},d}(o.default);h.prototype.getLayer;var p=h;exports.default=p;
},{"../../util.js":"KniQ","../../proj.js":"Diht","../../TileRange.js":"snev","../../TileState.js":"u3kG","../../extent.js":"QDir","./Layer.js":"vPfl","../../transform.js":"P4eA","../../array.js":"luEr","../../render/canvas.js":"iAG7"}],"BUEc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./BaseTile.js")),t=r(require("../renderer/canvas/TileLayer.js"));function r(e){return e&&e.__esModule?e:{default:e}}var n=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=function(e){function r(t){return e.call(this,t)||this}return n(r,e),r.prototype.createRenderer=function(){return new t.default(this)},r}(e.default),u=o;exports.default=u;
},{"./BaseTile.js":"HTO1","../renderer/canvas/TileLayer.js":"hkMV"}],"fF5X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ENABLE_RASTER_REPROJECTION=exports.ERROR_THRESHOLD=void 0;var R=.5;exports.ERROR_THRESHOLD=R;var E=!0;exports.ENABLE_RASTER_REPROJECTION=E;
},{}],"U255":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.calculateSourceResolution=n,exports.render=i;var e=require("./dom.js"),t=require("./extent.js"),r=require("./math.js"),a=require("./proj.js");function n(e,r,n,o){var i=(0,a.transform)(n,r,e),s=(0,a.getPointResolution)(r,o,n),u=r.getMetersPerUnit();void 0!==u&&(s*=u);var c=e.getMetersPerUnit();void 0!==c&&(s/=c);var v=e.getExtent();if(!v||(0,t.containsCoordinate)(v,i)){var g=(0,a.getPointResolution)(e,s,i)/s;isFinite(g)&&g>0&&(s/=g)}return s}function o(e,t,r,a){var n=r-e,o=a-t,i=Math.sqrt(n*n+o*o);return[Math.round(r+n/i),Math.round(a+o/i)]}function i(a,n,i,s,u,c,v,g,h,l,d){var f=(0,e.createCanvasContext2D)(Math.round(i*a),Math.round(i*n));if(0===h.length)return f.canvas;f.scale(i,i);var m=(0,t.createEmpty)();h.forEach(function(e,r,a){(0,t.extend)(m,e.extent)});var x=(0,t.getWidth)(m),M=(0,t.getHeight)(m),T=(0,e.createCanvasContext2D)(Math.round(i*x/s),Math.round(i*M/s)),p=i/s;h.forEach(function(e,r,a){var n=e.extent[0]-m[0],o=-(e.extent[3]-m[3]),i=(0,t.getWidth)(e.extent),s=(0,t.getHeight)(e.extent);T.drawImage(e.image,l,l,e.image.width-2*l,e.image.height-2*l,n*p,o*p,i*p,s*p)});var P=(0,t.getTopLeft)(v);return g.getTriangles().forEach(function(e,t,a){var n=e.source,u=e.target,v=n[0][0],g=n[0][1],h=n[1][0],l=n[1][1],d=n[2][0],x=n[2][1],M=(u[0][0]-P[0])/c,p=-(u[0][1]-P[1])/c,j=(u[1][0]-P[0])/c,E=-(u[1][1]-P[1])/c,q=(u[2][0]-P[0])/c,C=-(u[2][1]-P[1])/c,b=v,y=g;v=0,g=0;var k=[[h-=b,l-=y,0,0,j-M],[d-=b,x-=y,0,0,q-M],[0,0,h,l,E-p],[0,0,d,x,C-p]],w=(0,r.solveLinearSystem)(k);if(w){f.save(),f.beginPath();var R=(M+j+q)/3,S=(p+E+C)/3,W=o(R,S,M,p),D=o(R,S,j,E),H=o(R,S,q,C);f.moveTo(D[0],D[1]),f.lineTo(W[0],W[1]),f.lineTo(H[0],H[1]),f.clip(),f.transform(w[0],w[2],w[1],w[3],M,p),f.translate(m[0]-b,m[3]-y),f.scale(s/i,-s/i),f.drawImage(T.canvas,0,0),f.restore()}}),d&&(f.save(),f.strokeStyle="black",f.lineWidth=1,g.getTriangles().forEach(function(e,t,r){var a=e.target,n=(a[0][0]-P[0])/c,o=-(a[0][1]-P[1])/c,i=(a[1][0]-P[0])/c,s=-(a[1][1]-P[1])/c,u=(a[2][0]-P[0])/c,v=-(a[2][1]-P[1])/c;f.beginPath(),f.moveTo(i,s),f.lineTo(n,o),f.lineTo(u,v),f.closePath(),f.stroke()}),f.restore()),f.canvas}
},{"./dom.js":"Xno5","./extent.js":"QDir","./math.js":"B96G","./proj.js":"Diht"}],"BiRY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../extent.js"),r=require("../math.js"),e=require("../proj.js"),i=10,s=.25,o=function(){function o(r,s,o,a,n,h){this.sourceProj_=r,this.targetProj_=s;var u={},d=(0,e.getTransform)(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var r=t[0]+"/"+t[1];return u[r]||(u[r]=d(t)),u[r]},this.maxSourceExtent_=a,this.errorThresholdSquared_=n*n,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!a&&!!this.sourceProj_.getExtent()&&(0,t.getWidth)(a)==(0,t.getWidth)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?(0,t.getWidth)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?(0,t.getWidth)(this.targetProj_.getExtent()):null;var c=(0,t.getTopLeft)(o),_=(0,t.getTopRight)(o),l=(0,t.getBottomRight)(o),f=(0,t.getBottomLeft)(o),g=this.transformInv_(c),W=this.transformInv_(_),v=this.transformInv_(l),m=this.transformInv_(f),x=i+(h?Math.max(0,Math.ceil(Math.log2((0,t.getArea)(o)/(h*h*256*256)))):0);if(this.addQuad_(c,_,l,f,g,W,v,m,x),this.wrapsXInSource_){var p=1/0;this.triangles_.forEach(function(t,r,e){p=Math.min(p,t.source[0][0],t.source[1][0],t.source[2][0])}),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-p>this.sourceWorldWidth_/2){var r=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];r[0][0]-p>this.sourceWorldWidth_/2&&(r[0][0]-=this.sourceWorldWidth_),r[1][0]-p>this.sourceWorldWidth_/2&&(r[1][0]-=this.sourceWorldWidth_),r[2][0]-p>this.sourceWorldWidth_/2&&(r[2][0]-=this.sourceWorldWidth_);var e=Math.min(r[0][0],r[1][0],r[2][0]);Math.max(r[0][0],r[1][0],r[2][0])-e<this.sourceWorldWidth_/2&&(t.source=r)}}.bind(this))}u={}}return o.prototype.addTriangle_=function(t,r,e,i,s,o){this.triangles_.push({source:[i,s,o],target:[t,r,e]})},o.prototype.addQuad_=function(e,i,o,a,n,h,u,d,c){var _=(0,t.boundingExtent)([n,h,u,d]),l=this.sourceWorldWidth_?(0,t.getWidth)(_)/this.sourceWorldWidth_:null,f=this.sourceWorldWidth_,g=this.sourceProj_.canWrapX()&&l>.5&&l<1,W=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var v=(0,t.boundingExtent)([e,i,o,a]);W=(0,t.getWidth)(v)/this.targetWorldWidth_>s||W}!g&&this.sourceProj_.isGlobal()&&l&&(W=l>s||W)}if(W||!this.maxSourceExtent_||(0,t.intersects)(_,this.maxSourceExtent_)){if(!(W||isFinite(n[0])&&isFinite(n[1])&&isFinite(h[0])&&isFinite(h[1])&&isFinite(u[0])&&isFinite(u[1])&&isFinite(d[0])&&isFinite(d[1]))){if(!(c>0))return;W=!0}if(c>0){if(!W){var m=[(e[0]+o[0])/2,(e[1]+o[1])/2],x=this.transformInv_(m),p=void 0;if(g)p=((0,r.modulo)(n[0],f)+(0,r.modulo)(u[0],f))/2-(0,r.modulo)(x[0],f);else p=(n[0]+u[0])/2-x[0];var j=(n[1]+u[1])/2-x[1];W=p*p+j*j>this.errorThresholdSquared_}if(W){if(Math.abs(e[0]-o[0])<=Math.abs(e[1]-o[1])){var E=[(i[0]+o[0])/2,(i[1]+o[1])/2],I=this.transformInv_(E),P=[(a[0]+e[0])/2,(a[1]+e[1])/2],S=this.transformInv_(P);this.addQuad_(e,i,E,P,n,h,I,S,c-1),this.addQuad_(P,E,o,a,S,I,u,d,c-1)}else{var M=[(e[0]+i[0])/2,(e[1]+i[1])/2],T=this.transformInv_(M),b=[(o[0]+a[0])/2,(o[1]+a[1])/2],F=this.transformInv_(b);this.addQuad_(e,M,b,a,n,T,F,d,c-1),this.addQuad_(M,i,o,b,T,h,u,F,c-1)}return}}if(g){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}this.addTriangle_(e,o,a,n,u,d),this.addTriangle_(e,i,o,n,h,u)}},o.prototype.calculateSourceExtent=function(){var r=(0,t.createEmpty)();return this.triangles_.forEach(function(e,i,s){var o=e.source;(0,t.extendCoordinate)(r,o[0]),(0,t.extendCoordinate)(r,o[1]),(0,t.extendCoordinate)(r,o[2])}),r},o.prototype.getTriangles=function(){return this.triangles_},o}(),a=o;exports.default=a;
},{"../extent.js":"QDir","../math.js":"B96G","../proj.js":"Diht"}],"WlOd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./common.js"),t=l(require("../Tile.js")),r=l(require("../TileState.js")),i=require("../events.js"),s=l(require("../events/EventType.js")),o=require("../extent.js"),n=require("../math.js"),u=require("../reproj.js"),a=l(require("./Triangulation.js"));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),d=function(t){function l(i,s,l,c,d,_,f,h,g,p,T){var E=t.call(this,d,r.default.IDLE)||this;E.renderEdges_=void 0!==T&&T,E.pixelRatio_=f,E.gutter_=h,E.canvas_=null,E.sourceTileGrid_=s,E.targetTileGrid_=c,E.wrappedTileCoord_=_||d,E.sourceTiles_=[],E.sourcesListenerKeys_=null,E.sourceZ_=0;var v=c.getTileCoordExtent(E.wrappedTileCoord_),y=E.targetTileGrid_.getExtent(),x=E.sourceTileGrid_.getExtent(),R=y?(0,o.getIntersection)(v,y):v;if(0===(0,o.getArea)(R))return E.state=r.default.EMPTY,E;var j=i.getExtent();j&&(x=x?(0,o.getIntersection)(x,j):j);var m=c.getResolution(E.wrappedTileCoord_[0]),L=(0,o.getCenter)(R),O=(0,u.calculateSourceResolution)(i,l,L,m);if(!isFinite(O)||O<=0)return E.state=r.default.EMPTY,E;var D=void 0!==p?p:e.ERROR_THRESHOLD;if(E.triangulation_=new a.default(i,l,R,x,O*D,m),0===E.triangulation_.getTriangles().length)return E.state=r.default.EMPTY,E;E.sourceZ_=s.getZForResolution(O);var G=E.triangulation_.calculateSourceExtent();if(x&&(i.canWrapX()?(G[1]=(0,n.clamp)(G[1],x[1],x[3]),G[3]=(0,n.clamp)(G[3],x[1],x[3])):G=(0,o.getIntersection)(G,x)),(0,o.getArea)(G)){for(var C=s.getTileRangeForExtentAndZ(G,E.sourceZ_),I=C.minX;I<=C.maxX;I++)for(var S=C.minY;S<=C.maxY;S++){var A=g(E.sourceZ_,I,S,f);A&&E.sourceTiles_.push(A)}0===E.sourceTiles_.length&&(E.state=r.default.EMPTY)}else E.state=r.default.EMPTY;return E}return c(l,t),l.prototype.getImage=function(){return this.canvas_},l.prototype.reproject_=function(){var e=[];if(this.sourceTiles_.forEach(function(t,i,s){t&&t.getState()==r.default.LOADED&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(t.tileCoord),image:t.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===e.length)this.state=r.default.ERROR;else{var t=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(t),s="number"==typeof i?i:i[0],o="number"==typeof i?i:i[1],n=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=(0,u.render)(s,o,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),n,l,this.triangulation_,e,this.gutter_,this.renderEdges_),this.state=r.default.LOADED}this.changed()},l.prototype.load=function(){if(this.state==r.default.IDLE){this.state=r.default.LOADING,this.changed();var e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(t,o,n){var u=t.getState();if(u==r.default.IDLE||u==r.default.LOADING){e++;var a=(0,i.listen)(t,s.default.CHANGE,function(s){var o=t.getState();o!=r.default.LOADED&&o!=r.default.ERROR&&o!=r.default.EMPTY||((0,i.unlistenByKey)(a),0===--e&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(a)}}.bind(this)),this.sourceTiles_.forEach(function(e,t,i){e.getState()==r.default.IDLE&&e.load()}),0===e&&setTimeout(this.reproject_.bind(this),0)}},l.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(i.unlistenByKey),this.sourcesListenerKeys_=null},l}(t.default),_=d;exports.default=_;
},{"./common.js":"fF5X","../Tile.js":"IWZI","../TileState.js":"u3kG","../events.js":"UqnM","../events/EventType.js":"C8cu","../extent.js":"QDir","../math.js":"B96G","../reproj.js":"U255","./Triangulation.js":"BiRY"}],"p1vZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createFromTemplate=n,exports.createFromTemplates=o,exports.createFromTileUrlFunctions=a,exports.nullTileUrlFunction=i,exports.expandUrl=u;var r=require("./asserts.js"),e=require("./math.js"),t=require("./tilecoord.js");function n(e,t){var n=/\{z\}/g,o=/\{x\}/g,a=/\{y\}/g,i=/\{-y\}/g;return function(u,c,l){return u?e.replace(n,u[0].toString()).replace(o,u[1].toString()).replace(a,u[2].toString()).replace(i,function(){var e=u[0],n=t.getFullTileRange(e);return(0,r.assert)(n,55),(n.getHeight()-u[2]-1).toString()}):void 0}}function o(r,e){for(var t=r.length,o=new Array(t),i=0;i<t;++i)o[i]=n(r[i],e);return a(o)}function a(r){return 1===r.length?r[0]:function(n,o,a){if(n){var i=(0,t.hash)(n),u=(0,e.modulo)(i,r.length);return r[u](n,o,a)}}}function i(r,e,t){}function u(r){var e=[],t=/\{([a-z])-([a-z])\}/.exec(r);if(t){var n=t[1].charCodeAt(0),o=t[2].charCodeAt(0),a=void 0;for(a=n;a<=o;++a)e.push(r.replace(t[0],String.fromCharCode(a)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(r)){for(var i=parseInt(t[2],10),u=parseInt(t[1],10);u<=i;u++)e.push(r.replace(t[0],u.toString()));return e}return e.push(r),e}
},{"./asserts.js":"fLG6","./math.js":"B96G","./tilecoord.js":"faTr"}],"dpZ6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./common.js"),e=require("../asserts.js"),i=h(require("../TileRange.js")),o=require("../array.js"),r=require("../extent.js"),n=require("../math.js"),s=require("../size.js"),l=require("../tilecoord.js");function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function h(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=o?Object.getOwnPropertyDescriptor(t,r):null;n&&(n.get||n.set)?Object.defineProperty(i,r,n):i[r]=t[r]}return i.default=t,e&&e.set(t,i),i}var a=[0,0,0],g=function(){function u(n){var s;if(this.minZoom=void 0!==n.minZoom?n.minZoom:0,this.resolutions_=n.resolutions,(0,e.assert)((0,o.isSorted)(this.resolutions_,function(t,e){return e-t},!0),17),!n.origins)for(var l=0,u=this.resolutions_.length-1;l<u;++l)if(s){if(this.resolutions_[l]/this.resolutions_[l+1]!==s){s=void 0;break}}else s=this.resolutions_[l]/this.resolutions_[l+1];this.zoomFactor_=s,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==n.origin?n.origin:null,this.origins_=null,void 0!==n.origins&&(this.origins_=n.origins,(0,e.assert)(this.origins_.length==this.resolutions_.length,20));var h=n.extent;void 0===h||this.origin_||this.origins_||(this.origin_=(0,r.getTopLeft)(h)),(0,e.assert)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==n.tileSizes&&(this.tileSizes_=n.tileSizes,(0,e.assert)(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==n.tileSize?n.tileSize:this.tileSizes_?null:t.DEFAULT_TILE_SIZE,(0,e.assert)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==h?h:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==n.sizes?this.fullTileRanges_=n.sizes.map(function(t,e){return new i.default(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1))},this):h&&this.calculateTileRanges_(h)}return u.prototype.forEachTileCoord=function(t,e,i){for(var o=this.getTileRangeForExtentAndZ(t,e),r=o.minX,n=o.maxX;r<=n;++r)for(var s=o.minY,l=o.maxY;s<=l;++s)i([e,r,s])},u.prototype.forEachTileCoordParentTileRange=function(t,e,o,r){var n,s,l,u=null,h=t[0]-1;for(2===this.zoomFactor_?(s=t[1],l=t[2]):u=this.getTileCoordExtent(t,r);h>=this.minZoom;){if(2===this.zoomFactor_?(s=Math.floor(s/2),l=Math.floor(l/2),n=(0,i.createOrUpdate)(s,s,l,l,o)):n=this.getTileRangeForExtentAndZ(u,h,o),e(h,n))return!0;--h}return!1},u.prototype.getExtent=function(){return this.extent_},u.prototype.getMaxZoom=function(){return this.maxZoom},u.prototype.getMinZoom=function(){return this.minZoom},u.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},u.prototype.getResolution=function(t){return this.resolutions_[t]},u.prototype.getResolutions=function(){return this.resolutions_},u.prototype.getTileCoordChildTileRange=function(t,e,o){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var r=2*t[1],n=2*t[2];return(0,i.createOrUpdate)(r,r+1,n,n+1,e)}var s=this.getTileCoordExtent(t,o);return this.getTileRangeForExtentAndZ(s,t[0]+1,e)}return null},u.prototype.getTileRangeExtent=function(t,e,i){var o=this.getOrigin(t),n=this.getResolution(t),l=(0,s.toSize)(this.getTileSize(t),this.tmpSize_),u=o[0]+e.minX*l[0]*n,h=o[0]+(e.maxX+1)*l[0]*n,a=o[1]+e.minY*l[1]*n,g=o[1]+(e.maxY+1)*l[1]*n;return(0,r.createOrUpdate)(u,a,h,g,i)},u.prototype.getTileRangeForExtentAndZ=function(t,e,o){var r=a;this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,r);var n=r[1],s=r[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,r),(0,i.createOrUpdate)(n,r[1],s,r[2],o)},u.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),i=this.getResolution(t[0]),o=(0,s.toSize)(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*o[0]*i,e[1]-(t[2]+.5)*o[1]*i]},u.prototype.getTileCoordExtent=function(t,e){var i=this.getOrigin(t[0]),o=this.getResolution(t[0]),n=(0,s.toSize)(this.getTileSize(t[0]),this.tmpSize_),l=i[0]+t[1]*n[0]*o,u=i[1]-(t[2]+1)*n[1]*o,h=l+n[0]*o,a=u+n[1]*o;return(0,r.createOrUpdate)(l,u,h,a,e)},u.prototype.getTileCoordForCoordAndResolution=function(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)},u.prototype.getTileCoordForXYAndResolution_=function(t,e,i,o,r){var n=this.getZForResolution(i),u=i/this.getResolution(n),h=this.getOrigin(n),a=(0,s.toSize)(this.getTileSize(n),this.tmpSize_),g=o?.5:0,p=o?.5:0,f=Math.floor((t-h[0])/i+g),_=Math.floor((h[1]-e)/i+p),c=u*f/a[0],d=u*_/a[1];return o?(c=Math.ceil(c)-1,d=Math.ceil(d)-1):(c=Math.floor(c),d=Math.floor(d)),(0,l.createOrUpdate)(n,c,d,r)},u.prototype.getTileCoordForXYAndZ_=function(t,e,i,o,r){var n=this.getOrigin(i),u=this.getResolution(i),h=(0,s.toSize)(this.getTileSize(i),this.tmpSize_),a=o?.5:0,g=o?.5:0,p=Math.floor((t-n[0])/u+a),f=Math.floor((n[1]-e)/u+g),_=p/h[0],c=f/h[1];return o?(_=Math.ceil(_)-1,c=Math.ceil(c)-1):(_=Math.floor(_),c=Math.floor(c)),(0,l.createOrUpdate)(i,_,c,r)},u.prototype.getTileCoordForCoordAndZ=function(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)},u.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},u.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},u.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:null},u.prototype.getZForResolution=function(t,e){var i=(0,o.linearFindNearest)(this.resolutions_,t,e||0);return(0,n.clamp)(i,this.minZoom,this.maxZoom)},u.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,i=new Array(e),o=this.minZoom;o<e;++o)i[o]=this.getTileRangeForExtentAndZ(t,o);this.fullTileRanges_=i},u}(),p=g;exports.default=p;
},{"./common.js":"mOEX","../asserts.js":"fLG6","../TileRange.js":"snev","../array.js":"luEr","../extent.js":"QDir","../math.js":"B96G","../size.js":"TAHd","../tilecoord.js":"faTr"}],"ExRx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getForProjection=s,exports.wrapX=l,exports.createForExtent=d,exports.createXYZ=c,exports.createForProjection=x,exports.extentFromProjection=g;var e=require("./tilegrid/common.js"),t=require("./size.js"),r=require("./extent.js"),o=a(require("./extent/Corner.js")),i=require("./proj.js"),n=a(require("./proj/Units.js")),u=a(require("./tilegrid/TileGrid.js"));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=e.getDefaultTileGrid();return t||(t=x(e),e.setDefaultTileGrid(t)),t}function l(e,t,o){var i=t[0],n=e.getTileCoordCenter(t),u=g(o);if((0,r.containsCoordinate)(u,n))return t;var a=(0,r.getWidth)(u),s=Math.ceil((u[0]-n[0])/a);return n[0]+=a*s,e.getTileCoordForCoordAndZ(n,i)}function d(e,t,i,n){var a=void 0!==n?n:o.default.TOP_LEFT,s=f(e,t,i);return new u.default({extent:e,origin:(0,r.getCorner)(e,a),resolutions:s,tileSize:i})}function c(e){var t=e||{},r=t.extent||(0,i.get)("EPSG:3857").getExtent(),o={extent:r,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:f(r,t.maxZoom,t.tileSize,t.maxResolution)};return new u.default(o)}function f(o,i,n,u){for(var a=void 0!==i?i:e.DEFAULT_MAX_ZOOM,s=(0,r.getHeight)(o),l=(0,r.getWidth)(o),d=(0,t.toSize)(void 0!==n?n:e.DEFAULT_TILE_SIZE),c=u>0?u:Math.max(l/d[0],s/d[1]),f=a+1,x=new Array(f),g=0;g<f;++g)x[g]=c/Math.pow(2,g);return x}function x(e,t,r,o){return d(g(e),t,r,o)}function g(e){var t=(e=(0,i.get)(e)).getExtent();if(!t){var o=180*i.METERS_PER_UNIT[n.default.DEGREES]/e.getMetersPerUnit();t=(0,r.createOrUpdate)(-o,-o,o,o)}return t}
},{"./tilegrid/common.js":"mOEX","./size.js":"TAHd","./extent.js":"QDir","./extent/Corner.js":"urGY","./proj.js":"Diht","./proj/Units.js":"yZx6","./tilegrid/TileGrid.js":"dpZ6"}],"JECm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.TileSourceEvent=void 0;var t=require("../util.js"),e=c(require("../TileCache.js")),i=c(require("../TileState.js")),r=c(require("../events/Event.js")),o=require("../proj.js"),n=require("../size.js"),a=c(require("./Source.js")),u=require("../tilecoord.js"),l=require("../tilegrid.js");function c(t){return t&&t.__esModule?t:{default:t}}var s=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),p=function(r){function a(t){var i=r.call(this,{attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX})||this;i.opaque_=void 0!==t.opaque&&t.opaque,i.tilePixelRatio_=void 0!==t.tilePixelRatio?t.tilePixelRatio:1,i.tileGrid=void 0!==t.tileGrid?t.tileGrid:null;var o=[256,256],a=t.tileGrid;a&&(0,n.toSize)(a.getTileSize(a.getMinZoom()),o);var u="undefined"!=typeof screen,l=u?screen.availWidth||screen.width:1920,c=u?screen.availHeight||screen.height:1080,s=4*Math.ceil(l/o[0])*Math.ceil(c/o[1]);return i.tileCache=new e.default(Math.max(s,t.cacheSize||0)),i.tmpSize=[0,0],i.key_=t.key||"",i.tileOptions={transition:t.transition},i.zDirection=t.zDirection?t.zDirection:0,i}return s(a,r),a.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},a.prototype.expireCache=function(t,e){var i=this.getTileCacheForProjection(t);i&&i.expireCache(e)},a.prototype.forEachLoadedTile=function(t,e,r,o){var n=this.getTileCacheForProjection(t);if(!n)return!1;for(var a,l,c,s=!0,p=r.minX;p<=r.maxX;++p)for(var h=r.minY;h<=r.maxY;++h)l=(0,u.getKeyZXY)(e,p,h),c=!1,n.containsKey(l)&&(c=(a=n.get(l)).getState()===i.default.LOADED)&&(c=!1!==o(a)),c||(s=!1);return s},a.prototype.getGutterForProjection=function(t){return 0},a.prototype.getKey=function(){return this.key_},a.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},a.prototype.getOpaque=function(t){return this.opaque_},a.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},a.prototype.getTile=function(e,i,r,o,n){return(0,t.abstract)()},a.prototype.getTileGrid=function(){return this.tileGrid},a.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:(0,l.getForProjection)(t)},a.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();return e&&!(0,o.equivalent)(e,t)?null:this.tileCache},a.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},a.prototype.getTilePixelSize=function(t,e,i){var r=this.getTileGridForProjection(i),o=this.getTilePixelRatio(e),a=(0,n.toSize)(r.getTileSize(t),this.tmpSize);return 1==o?a:(0,n.scale)(a,o,this.tmpSize)},a.prototype.getTileCoordForTileUrlFunction=function(t,e){var i=void 0!==e?e:this.getProjection(),r=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(t=(0,l.wrapX)(r,t,i)),(0,u.withinExtentAndZ)(t,r)?t:null},a.prototype.clear=function(){this.tileCache.clear()},a.prototype.refresh=function(){this.clear(),r.prototype.refresh.call(this)},a.prototype.useTile=function(t,e,i,r){},a}(a.default),h=function(t){function e(e,i){var r=t.call(this,e)||this;return r.tile=i,r}return s(e,t),e}(r.default);exports.TileSourceEvent=h;var f=p;exports.default=f;
},{"../util.js":"KniQ","../TileCache.js":"YFDe","../TileState.js":"u3kG","../events/Event.js":"fKNg","../proj.js":"Diht","../size.js":"TAHd","./Source.js":"H38a","../tilecoord.js":"faTr","../tilegrid.js":"ExRx"}],"KXhD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};exports.default=e;
},{}],"uv9E":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../util.js"),e=s(require("../TileState.js")),i=require("../tileurlfunction.js"),n=u(require("./Tile.js")),r=s(require("./TileEventType.js")),o=require("../tilecoord.js");function l(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return l=function(){return t},t}function u(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=l();if(e&&e.has(t))return e.get(t);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var o=n?Object.getOwnPropertyDescriptor(t,r):null;o&&(o.get||o.set)?Object.defineProperty(i,r,o):i[r]=t[r]}return i.default=t,e&&e.set(t,i),i}function s(t){return t&&t.__esModule?t:{default:t}}var a=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),c=function(l){function u(t){var e=l.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection})||this;return e.generateTileUrlFunction_=!t.tileUrlFunction,e.tileLoadFunction=t.tileLoadFunction,e.tileUrlFunction=t.tileUrlFunction?t.tileUrlFunction.bind(e):i.nullTileUrlFunction,e.urls=null,t.urls?e.setUrls(t.urls):t.url&&e.setUrl(t.url),e.tileLoadingKeys_={},e}return a(u,l),u.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},u.prototype.getTileUrlFunction=function(){return this.tileUrlFunction},u.prototype.getUrls=function(){return this.urls},u.prototype.handleTileChange=function(i){var o,l=i.target,u=(0,t.getUid)(l),s=l.getState();s==e.default.LOADING?(this.tileLoadingKeys_[u]=!0,o=r.default.TILELOADSTART):u in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[u],o=s==e.default.ERROR?r.default.TILELOADERROR:s==e.default.LOADED?r.default.TILELOADEND:void 0),null!=o&&this.dispatchEvent(new n.TileSourceEvent(o,l))},u.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},u.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},u.prototype.setUrl=function(t){var e=(0,i.expandUrl)(t);this.urls=e,this.setUrls(e)},u.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction((0,i.createFromTemplates)(t,this.tileGrid),e):this.setKey(e)},u.prototype.useTile=function(t,e,i){var n=(0,o.getKeyZXY)(t,e,i);this.tileCache.containsKey(n)&&this.tileCache.get(n)},u}(n.default),p=c;exports.default=p;
},{"../util.js":"KniQ","../TileState.js":"u3kG","../tileurlfunction.js":"p1vZ","./Tile.js":"JECm","./TileEventType.js":"KXhD","../tilecoord.js":"faTr"}],"udAI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../reproj/common.js"),t=require("../util.js"),i=u(require("../ImageTile.js")),r=u(require("../TileCache.js")),o=u(require("../TileState.js")),n=u(require("../events/EventType.js")),l=require("../proj.js"),c=u(require("../reproj/Tile.js")),s=u(require("./UrlTile.js")),a=require("../tilecoord.js"),h=require("../tilegrid.js");function u(e){return e&&e.__esModule?e:{default:e}}var p=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),d=function(s){function u(e){var t=s.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:E,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this;return t.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,t.tileClass=void 0!==e.tileClass?e.tileClass:i.default,t.tileCacheForProjection={},t.tileGridForProjection={},t.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,t.renderReprojectionEdges_=!1,t}return p(u,s),u.prototype.canExpireCache=function(){if(!e.ENABLE_RASTER_REPROJECTION)return s.prototype.canExpireCache.call(this);if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},u.prototype.expireCache=function(t,i){if(e.ENABLE_RASTER_REPROJECTION){var r=this.getTileCacheForProjection(t);for(var o in this.tileCache.expireCache(this.tileCache==r?i:{}),this.tileCacheForProjection){var n=this.tileCacheForProjection[o];n.expireCache(n==r?i:{})}}else s.prototype.expireCache.call(this,t,i)},u.prototype.getGutterForProjection=function(t){return e.ENABLE_RASTER_REPROJECTION&&this.getProjection()&&t&&!(0,l.equivalent)(this.getProjection(),t)?0:this.getGutter()},u.prototype.getGutter=function(){return 0},u.prototype.getOpaque=function(t){return!(e.ENABLE_RASTER_REPROJECTION&&this.getProjection()&&t&&!(0,l.equivalent)(this.getProjection(),t))&&s.prototype.getOpaque.call(this,t)},u.prototype.getTileGridForProjection=function(i){if(!e.ENABLE_RASTER_REPROJECTION)return s.prototype.getTileGridForProjection.call(this,i);var r=this.getProjection();if(!this.tileGrid||r&&!(0,l.equivalent)(r,i)){var o=(0,t.getUid)(i);return o in this.tileGridForProjection||(this.tileGridForProjection[o]=(0,h.getForProjection)(i)),this.tileGridForProjection[o]}return this.tileGrid},u.prototype.getTileCacheForProjection=function(i){if(!e.ENABLE_RASTER_REPROJECTION)return s.prototype.getTileCacheForProjection.call(this,i);var o=this.getProjection();if(!o||(0,l.equivalent)(o,i))return this.tileCache;var n=(0,t.getUid)(i);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new r.default(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]},u.prototype.createTile_=function(e,t,i,r,l,c){var s=[e,t,i],a=this.getTileCoordForTileUrlFunction(s,l),h=a?this.tileUrlFunction(a,r,l):void 0,u=new this.tileClass(s,void 0!==h?o.default.IDLE:o.default.EMPTY,void 0!==h?h:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=c,u.addEventListener(n.default.CHANGE,this.handleTileChange.bind(this)),u},u.prototype.getTile=function(t,i,r,o,n){var s=this.getProjection();if(e.ENABLE_RASTER_REPROJECTION&&s&&n&&!(0,l.equivalent)(s,n)){var h=this.getTileCacheForProjection(n),u=[t,i,r],p=void 0,d=(0,a.getKey)(u);h.containsKey(d)&&(p=h.get(d));var E=this.getKey();if(p&&p.key==E)return p;var j=this.getTileGridForProjection(s),f=this.getTileGridForProjection(n),g=this.getTileCoordForTileUrlFunction(u,n),T=new c.default(s,j,n,f,u,g,this.getTilePixelRatio(o),this.getGutter(),function(e,t,i,r){return this.getTileInternal(e,t,i,r,s)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_);return T.key=E,p?(T.interimTile=p,T.refreshInterimChain(),h.replace(d,T)):h.set(d,T),T}return this.getTileInternal(t,i,r,o,s||n)},u.prototype.getTileInternal=function(e,t,i,r,n){var l=null,c=(0,a.getKeyZXY)(e,t,i),s=this.getKey();if(this.tileCache.containsKey(c)){if((l=this.tileCache.get(c)).key!=s){var h=l;l=this.createTile_(e,t,i,r,n,s),h.getState()==o.default.IDLE?l.interimTile=h.interimTile:l.interimTile=h,l.refreshInterimChain(),this.tileCache.replace(c,l)}}else l=this.createTile_(e,t,i,r,n,s),this.tileCache.set(c,l);return l},u.prototype.setRenderReprojectionEdges=function(t){if(e.ENABLE_RASTER_REPROJECTION&&this.renderReprojectionEdges_!=t){for(var i in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[i].clear();this.changed()}},u.prototype.setTileGridForProjection=function(i,r){if(e.ENABLE_RASTER_REPROJECTION){var o=(0,l.get)(i);if(o){var n=(0,t.getUid)(o);n in this.tileGridForProjection||(this.tileGridForProjection[n]=r)}}},u}(s.default);function E(e,t){e.getImage().src=t}var j=d;exports.default=j;
},{"../reproj/common.js":"fF5X","../util.js":"KniQ","../ImageTile.js":"TOsW","../TileCache.js":"YFDe","../TileState.js":"u3kG","../events/EventType.js":"C8cu","../proj.js":"Diht","../reproj/Tile.js":"WlOd","./UrlTile.js":"uv9E","../tilecoord.js":"faTr","../tilegrid.js":"ExRx"}],"knlU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./TileImage.js")),o=require("../tilegrid.js");function e(t){return t&&t.__esModule?t:{default:t}}var i=function(){var t=function(o,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(o,e)};return function(o,e){function i(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),r=function(t){function e(e){var i=e||{},r=void 0!==i.projection?i.projection:"EPSG:3857",n=void 0!==i.tileGrid?i.tileGrid:(0,o.createXYZ)({extent:(0,o.extentFromProjection)(r),maxResolution:i.maxResolution,maxZoom:i.maxZoom,minZoom:i.minZoom,tileSize:i.tileSize});return t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,opaque:i.opaque,projection:r,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:i.tileLoadFunction,tilePixelRatio:i.tilePixelRatio,tileUrlFunction:i.tileUrlFunction,url:i.url,urls:i.urls,wrapX:void 0===i.wrapX||i.wrapX,transition:i.transition,attributionsCollapsible:i.attributionsCollapsible,zDirection:i.zDirection})||this}return i(e,t),e}(t.default),n=r;exports.default=n;
},{"./TileImage.js":"udAI","../tilegrid.js":"ExRx"}],"Rmo4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.ATTRIBUTION=void 0;var t=o(require("./XYZ.js"));function o(t){return t&&t.__esModule?t:{default:t}}var r=function(){var t=function(o,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var r in o)o.hasOwnProperty(r)&&(t[r]=o[r])})(o,r)};return function(o,r){function e(){this.constructor=o}t(o,r),o.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),e='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';exports.ATTRIBUTION=e;var n=function(t){function o(o){var r,n=o||{};r=void 0!==n.attributions?n.attributions:[e];var i=void 0!==n.crossOrigin?n.crossOrigin:"anonymous",a=void 0!==n.url?n.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";return t.call(this,{attributions:r,cacheSize:n.cacheSize,crossOrigin:i,opaque:void 0===n.opaque||n.opaque,maxZoom:void 0!==n.maxZoom?n.maxZoom:19,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileLoadFunction:n.tileLoadFunction,url:a,wrapX:n.wrapX,attributionsCollapsible:!1})||this}return r(o,t),o}(t.default),i=n;exports.default=i;
},{"./XYZ.js":"knlU"}],"BAXJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.register=o;var e=require("../proj.js"),r=require("./transforms.js"),t=s(require("./Projection.js"));function s(e){return e&&e.__esModule?e:{default:e}}function o(s){var o,i,a=Object.keys(s.defs),n=a.length;for(o=0;o<n;++o){var d=a[o];if(!(0,e.get)(d)){var f=s.defs(d);(0,e.addProjection)(new t.default({code:d,axisOrientation:f.axis,metersPerUnit:f.to_meter,units:f.units}))}}for(o=0;o<n;++o){var u=a[o],v=(0,e.get)(u);for(i=0;i<n;++i){var c=a[i],j=(0,e.get)(c);if(!(0,r.get)(u,c))if(s.defs[u]===s.defs[c])(0,e.addEquivalentProjections)([v,j]);else{var l=s(u,c);(0,e.addCoordinateTransforms)(v,j,l.forward,l.inverse)}}}}
},{"../proj.js":"Diht","./transforms.js":"uhlP","./Projection.js":"WUar"}],"nzid":[function(require,module,exports) {
"use strict";function e(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"LiBj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SPI=exports.TWO_PI=exports.FORTPI=exports.R2D=exports.D2R=exports.EPSLN=exports.RA6=exports.RA4=exports.SIXTH=exports.HALF_PI=exports.SEC_TO_RAD=exports.PJD_NODATUM=exports.PJD_WGS84=exports.PJD_7PARAM=exports.PJD_3PARAM=void 0;var r=1;exports.PJD_3PARAM=r;var e=2;exports.PJD_7PARAM=e;var t=4;exports.PJD_WGS84=t;var o=5;exports.PJD_NODATUM=o;var s=484813681109536e-20;exports.SEC_TO_RAD=s;var p=Math.PI/2;exports.HALF_PI=p;var x=.16666666666666666;exports.SIXTH=x;var P=.04722222222222222;exports.RA4=P;var a=.022156084656084655;exports.RA6=a;var A=1e-10;exports.EPSLN=A;var _=.017453292519943295;exports.D2R=_;var v=57.29577951308232;exports.R2D=v;var D=Math.PI/4;exports.FORTPI=D;var R=2*Math.PI;exports.TWO_PI=R;var I=3.14159265359;exports.SPI=I;
},{}],"mr61":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={};exports.default=e,e.greenwich=0,e.lisbon=-9.131906111111,e.paris=2.337229166667,e.bogota=-74.080916666667,e.madrid=-3.687938888889,e.rome=12.452333333333,e.bern=7.439583333333,e.jakarta=106.807719444444,e.ferro=-17.666666666667,e.brussels=4.367975,e.stockholm=18.058277777778,e.athens=23.7163375,e.oslo=10.722916666667;
},{}],"jm2i":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};exports.default=e;
},{}],"jFbK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=/[\s_\-\/\(\)]/g;function r(r,t){if(r[t])return r[t];for(var o,s=Object.keys(r),a=t.toLowerCase().replace(e,""),u=-1;++u<s.length;)if((o=s[u]).toLowerCase().replace(e,"")===a)return r[o]}
},{}],"yf7I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var t=require("./constants/values"),n=u(require("./constants/PrimeMeridian")),o=u(require("./constants/units")),e=u(require("./match"));function u(t){return t&&t.__esModule?t:{default:t}}function a(u){var a,r,i,s={},f=u.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,n){var o=n.split("=");return o.push(!0),t[o[0].toLowerCase()]=o[1],t},{}),l={proj:"projName",datum:"datumCode",rf:function(t){s.rf=parseFloat(t)},lat_0:function(n){s.lat0=n*t.D2R},lat_1:function(n){s.lat1=n*t.D2R},lat_2:function(n){s.lat2=n*t.D2R},lat_ts:function(n){s.lat_ts=n*t.D2R},lon_0:function(n){s.long0=n*t.D2R},lon_1:function(n){s.long1=n*t.D2R},lon_2:function(n){s.long2=n*t.D2R},alpha:function(n){s.alpha=parseFloat(n)*t.D2R},lonc:function(n){s.longc=n*t.D2R},x_0:function(t){s.x0=parseFloat(t)},y_0:function(t){s.y0=parseFloat(t)},k_0:function(t){s.k0=parseFloat(t)},k:function(t){s.k0=parseFloat(t)},a:function(t){s.a=parseFloat(t)},b:function(t){s.b=parseFloat(t)},r_a:function(){s.R_A=!0},zone:function(t){s.zone=parseInt(t,10)},south:function(){s.utmSouth=!0},towgs84:function(t){s.datum_params=t.split(",").map(function(t){return parseFloat(t)})},to_meter:function(t){s.to_meter=parseFloat(t)},units:function(t){s.units=t;var n=(0,e.default)(o.default,t);n&&(s.to_meter=n.to_meter)},from_greenwich:function(n){s.from_greenwich=n*t.D2R},pm:function(o){var u=(0,e.default)(n.default,o);s.from_greenwich=(u||parseFloat(o))*t.D2R},nadgrids:function(t){"@null"===t?s.datumCode="none":s.nadgrids=t},axis:function(t){3===t.length&&-1!=="ewnsud".indexOf(t.substr(0,1))&&-1!=="ewnsud".indexOf(t.substr(1,1))&&-1!=="ewnsud".indexOf(t.substr(2,1))&&(s.axis=t)}};for(a in f)r=f[a],a in l?"function"==typeof(i=l[a])?i(r):s[i]=r:s[a]=r;return"string"==typeof s.datumCode&&"WGS84"!==s.datumCode&&(s.datumCode=s.datumCode.toLowerCase()),s}
},{"./constants/values":"LiBj","./constants/PrimeMeridian":"mr61","./constants/units":"jm2i","./match":"jFbK"}],"QUL1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=p;exports.default=t;var e=1,r=2,i=3,s=4,h=5,o=-1,n=/\s/,a=/[A-Za-z]/,u=/[A-Za-z84]/,d=/[,\]]/,c=/[\d\.E\-\+]/;function l(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=e}function p(t){return new l(t).output()}l.prototype.readCharicter=function(){var t=this.text[this.place++];if(this.state!==s)for(;n.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case e:return this.neutral(t);case r:return this.keyword(t);case s:return this.quoted(t);case h:return this.afterquote(t);case i:return this.number(t);case o:return}},l.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=s);if(d.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},l.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=e)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=e,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=o))):void 0},l.prototype.number=function(t){if(!c.test(t)){if(d.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},l.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=h},l.prototype.keyword=function(t){if(u.test(t))this.word+=t;else{if("["===t){var r=[];return r.push(this.word),this.level++,null===this.root?this.root=r:this.currentObject.push(r),this.stack.push(this.currentObject),this.currentObject=r,void(this.state=e)}if(!d.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},l.prototype.neutral=function(t){if(a.test(t))return this.word=t,void(this.state=r);if('"'===t)return this.word="",void(this.state=s);if(c.test(t))return this.word=t,void(this.state=i);if(!d.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},l.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===o)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};
},{}],"Wfmr":[function(require,module,exports) {
"use strict";function e(e,a,s){Array.isArray(a)&&(s.unshift(a),a=null);var c=a?{}:e,t=s.reduce(function(e,a){return r(a,e),e},c);a&&(e[a]=t)}function r(a,s){if(Array.isArray(a)){var c=a.shift();if("PARAMETER"===c&&(c=a.shift()),1===a.length)return Array.isArray(a[0])?(s[c]={},void r(a[0],s[c])):void(s[c]=a[0]);if(a.length)if("TOWGS84"!==c){if("AXIS"===c)return c in s||(s[c]=[]),void s[c].push(a);var t;switch(Array.isArray(c)||(s[c]={}),c){case"UNIT":case"PRIMEM":case"VERT_DATUM":return s[c]={name:a[0].toLowerCase(),convert:a[1]},void(3===a.length&&r(a[2],s[c]));case"SPHEROID":case"ELLIPSOID":return s[c]={name:a[0],a:a[1],rf:a[2]},void(4===a.length&&r(a[3],s[c]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return a[0]=["name",a[0]],void e(s,c,a);default:for(t=-1;++t<a.length;)if(!Array.isArray(a[t]))return r(a,s[c]);return e(s,c,a)}}else s[c]=a;else s[c]=!0}else s[a]=!0}Object.defineProperty(exports,"__esModule",{value:!0}),exports.sExpr=r;
},{}],"GYTI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var e=a(require("./parser")),t=require("./process");function a(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=.017453292519943295;function n(e,t){var a=t[0],o=t[1];!(a in e)&&o in e&&(e[a]=e[o],3===t.length&&(e[a]=t[2](e[a])))}function d(e){return e*r}function l(e){if("GEOGCS"===e.type?e.projName="longlat":"LOCAL_CS"===e.type?(e.projName="identity",e.local=!0):"object"===o(e.PROJECTION)?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.AXIS){for(var t="",a=0,r=e.AXIS.length;a<r;++a){var l=e.AXIS[a][0].toLowerCase();-1!==l.indexOf("north")?t+="n":-1!==l.indexOf("south")?t+="s":-1!==l.indexOf("east")?t+="e":-1!==l.indexOf("west")&&(t+="w")}2===t.length&&(t+="u"),3===t.length&&(e.axis=t)}e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),"metre"===e.units&&(e.units="meter"),e.UNIT.convert&&("GEOGCS"===e.type?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var i=e.GEOGCS;function _(t){return t*(e.to_meter||1)}"GEOGCS"===e.type&&(i=e),i&&(i.DATUM?e.datumCode=i.DATUM.name.toLowerCase():e.datumCode=i.name.toLowerCase(),"d_"===e.datumCode.slice(0,2)&&(e.datumCode=e.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==e.datumCode&&"new_zealand_1949"!==e.datumCode||(e.datumCode="nzgd49"),"wgs_1984"!==e.datumCode&&"world_geodetic_system_1984"!==e.datumCode||("Mercator_Auxiliary_Sphere"===e.PROJECTION&&(e.sphere=!0),e.datumCode="wgs84"),"_ferro"===e.datumCode.slice(-6)&&(e.datumCode=e.datumCode.slice(0,-6)),"_jakarta"===e.datumCode.slice(-8)&&(e.datumCode=e.datumCode.slice(0,-8)),~e.datumCode.indexOf("belge")&&(e.datumCode="rnb72"),i.DATUM&&i.DATUM.SPHEROID&&(e.ellps=i.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===e.ellps.toLowerCase().slice(0,13)&&(e.ellps="intl"),e.a=i.DATUM.SPHEROID.a,e.rf=parseFloat(i.DATUM.SPHEROID.rf,10)),i.DATUM&&i.DATUM.TOWGS84&&(e.datum_params=i.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),"ch1903+"===e.datumCode&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a);[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",d],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",d],["x0","false_easting",_],["y0","false_northing",_],["long0","central_meridian",d],["lat0","latitude_of_origin",d],["lat0","standard_parallel_1",d],["lat1","standard_parallel_1",d],["lat2","standard_parallel_2",d],["azimuth","Azimuth"],["alpha","azimuth",d],["srsCode","name"]].forEach(function(t){return n(e,t)}),e.long0||!e.longc||"Albers_Conic_Equal_Area"!==e.projName&&"Lambert_Azimuthal_Equal_Area"!==e.projName||(e.long0=e.longc),e.lat_ts||!e.lat1||"Stereographic_South_Pole"!==e.projName&&"Polar Stereographic (variant B)"!==e.projName||(e.lat0=d(e.lat1>0?90:-90),e.lat_ts=e.lat1)}function i(a){var o=(0,e.default)(a),r=o.shift(),n=o.shift();o.unshift(["name",n]),o.unshift(["type",r]);var d={};return(0,t.sExpr)(o,d),l(d),d}
},{"./parser":"QUL1","./process":"Wfmr"}],"KsYW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("./global")),r=i(require("./projString")),t=i(require("wkt-parser"));function i(e){return e&&e.__esModule?e:{default:e}}function n(e){var i=this;if(2===arguments.length){var a=arguments[1];"string"==typeof a?"+"===a.charAt(0)?n[e]=(0,r.default)(arguments[1]):n[e]=(0,t.default)(arguments[1]):n[e]=a}else if(1===arguments.length){if(Array.isArray(e))return e.map(function(e){Array.isArray(e)?n.apply(i,e):n(e)});if("string"==typeof e){if(e in n)return n[e]}else"EPSG"in e?n["EPSG:"+e.EPSG]=e:"ESRI"in e?n["ESRI:"+e.ESRI]=e:"IAU2000"in e?n["IAU2000:"+e.IAU2000]=e:console.log(e);return}}(0,e.default)(n);var a=n;exports.default=a;
},{"./global":"nzid","./projString":"yf7I","wkt-parser":"GYTI"}],"Ia21":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("./defs")),r=n(require("wkt-parser")),t=n(require("./projString")),u=n(require("./match"));function n(e){return e&&e.__esModule?e:{default:e}}function f(e){return"string"==typeof e}function i(r){return r in e.default}var a=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function o(e){return a.some(function(r){return e.indexOf(r)>-1})}var d=["3857","900913","3785","102113"];function l(e){var r=(0,u.default)(e,"authority");if(r){var t=(0,u.default)(r,"epsg");return t&&d.indexOf(t)>-1}}function C(e){var r=(0,u.default)(e,"extension");if(r)return(0,u.default)(r,"proj4")}function E(e){return"+"===e[0]}function s(u){if(!f(u))return u;if(i(u))return e.default[u];if(o(u)){var n=(0,r.default)(u);if(l(n))return e.default["EPSG:3857"];var a=C(n);return a?(0,t.default)(a):n}return E(u)?(0,t.default)(u):void 0}var c=s;exports.default=c;
},{"./defs":"KsYW","wkt-parser":"GYTI","./projString":"yf7I","./match":"jFbK"}],"wM1P":[function(require,module,exports) {
"use strict";function e(e,r){var t,o;if(e=e||{},!r)return e;for(o in r)void 0!==(t=r[o])&&(e[o]=t);return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"AEhT":[function(require,module,exports) {
"use strict";function e(e,t,r){var s=e*t;return r/Math.sqrt(1-s*s)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"Yu1R":[function(require,module,exports) {
"use strict";function e(e){return e<0?-1:1}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"c0D1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=require("../constants/values"),t=r(require("./sign"));function r(e){return e&&e.__esModule?e:{default:e}}function u(r){return Math.abs(r)<=e.SPI?r:r-(0,t.default)(r)*e.TWO_PI}
},{"../constants/values":"LiBj","./sign":"Yu1R"}],"dGKf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("../constants/values");function t(t,r,a){var s=t*a,u=.5*t;return s=Math.pow((1-s)/(1+s),u),Math.tan(.5*(e.HALF_PI-r))/s}
},{"../constants/values":"LiBj"}],"KCUm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;var t=require("../constants/values");function e(e,a){for(var r,n,s=.5*e,u=t.HALF_PI-2*Math.atan(a),o=0;o<=15;o++)if(r=e*Math.sin(u),u+=n=t.HALF_PI-2*Math.atan(a*Math.pow((1-r)/(1+r),s))-u,Math.abs(n)<=1e-10)return u;return-9999}
},{"../constants/values":"LiBj"}],"qCu6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=r,exports.forward=n,exports.inverse=o,exports.default=exports.names=void 0;var t=a(require("../common/msfnz")),s=a(require("../common/adjust_lon")),i=a(require("../common/tsfnz")),e=a(require("../common/phi2z")),h=require("../constants/values");function a(t){return t&&t.__esModule?t:{default:t}}function r(){var s=this.b/this.a;this.es=1-s*s,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=(0,t.default)(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function n(t){var e,a,r=t.x,n=t.y;if(n*h.R2D>90&&n*h.R2D<-90&&r*h.R2D>180&&r*h.R2D<-180)return null;if(Math.abs(Math.abs(n)-h.HALF_PI)<=h.EPSLN)return null;if(this.sphere)e=this.x0+this.a*this.k0*(0,s.default)(r-this.long0),a=this.y0+this.a*this.k0*Math.log(Math.tan(h.FORTPI+.5*n));else{var o=Math.sin(n),u=(0,i.default)(this.e,n,o);e=this.x0+this.a*this.k0*(0,s.default)(r-this.long0),a=this.y0-this.a*this.k0*Math.log(u)}return t.x=e,t.y=a,t}function o(t){var i,a,r=t.x-this.x0,n=t.y-this.y0;if(this.sphere)a=h.HALF_PI-2*Math.atan(Math.exp(-n/(this.a*this.k0)));else{var o=Math.exp(-n/(this.a*this.k0));if(-9999===(a=(0,e.default)(this.e,o)))return null}return i=(0,s.default)(this.long0+r/(this.a*this.k0)),t.x=i,t.y=a,t}var u=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];exports.names=u;var l={init:r,forward:n,inverse:o,names:u};exports.default=l;
},{"../common/msfnz":"AEhT","../common/adjust_lon":"c0D1","../common/tsfnz":"dGKf","../common/phi2z":"KCUm","../constants/values":"LiBj"}],"mwVT":[function(require,module,exports) {
"use strict";function e(){}function t(e){return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=e,exports.inverse=exports.forward=t,exports.default=exports.names=void 0;var r=["longlat","identity"];exports.names=r;var o={init:e,forward:t,inverse:t,names:r};exports.default=o;
},{}],"USh1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.add=s,exports.get=u,exports.start=i,exports.default=void 0;var e=r(require("./projections/merc")),t=r(require("./projections/longlat"));function r(e){return e&&e.__esModule?e:{default:e}}var o=[e.default,t.default],a={},n=[];function s(e,t){var r=n.length;return e.names?(n[r]=e,e.names.forEach(function(e){a[e.toLowerCase()]=r}),this):(console.log(t),!0)}function u(e){if(!e)return!1;var t=e.toLowerCase();return void 0!==a[t]&&n[a[t]]?n[a[t]]:void 0}function i(){o.forEach(s)}var d={start:i,add:s,get:u};exports.default=d;
},{"./projections/merc":"qCu6","./projections/longlat":"mwVT"}],"FyU7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WGS84=exports.default=void 0;var e={};exports.default=e,e.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},e.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},e.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},e.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},e.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},e.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},e.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},e.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},e.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},e.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},e.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},e.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},e.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},e.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},e.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},e.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},e.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},e.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},e.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},e.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},e.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},e.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},e.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},e.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},e.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},e.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},e.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},e.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},e.hough={a:6378270,rf:297,ellipseName:"Hough"},e.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},e.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},e.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},e.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},e.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},e.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},e.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},e.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},e.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"},e.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},e.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},e.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var a=e.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};exports.WGS84=a,e.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};
},{}],"e0HC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.eccentricity=a,exports.sphere=f;var e=require("./constants/values"),t=o(require("./constants/Ellipsoid")),r=n(require("./match"));function n(e){return e&&e.__esModule?e:{default:e}}function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function a(t,r,n,u){var o=t*t,a=r*r,f=(o-a)/o,i=0;return u?(o=(t*=1-f*(e.SIXTH+f*(e.RA4+f*e.RA6)))*t,f=0):i=Math.sqrt(f),{es:f,e:i,ep2:(o-a)/a}}function f(n,u,o,a,f){if(!n){var i=(0,r.default)(t.default,a);i||(i=t.WGS84),n=i.a,u=i.b,o=i.rf}return o&&!u&&(u=(1-1/o)*n),(0===o||Math.abs(n-u)<e.EPSLN)&&(f=!0,u=n),{a:n,b:u,rf:o,sphere:f}}
},{"./constants/values":"LiBj","./constants/Ellipsoid":"FyU7","./match":"jFbK"}],"yYWe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={};exports.default=e,e.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},e.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},e.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},e.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},e.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},e.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},e.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},e.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},e.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},e.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},e.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},e.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},e.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},e.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},e.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},e.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},e.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};
},{}],"YYTB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var a=require("./constants/values");function t(t,m,_,r,e,u){var s={};return s.datum_type=void 0===t||"none"===t?a.PJD_NODATUM:a.PJD_WGS84,m&&(s.datum_params=m.map(parseFloat),0===s.datum_params[0]&&0===s.datum_params[1]&&0===s.datum_params[2]||(s.datum_type=a.PJD_3PARAM),s.datum_params.length>3&&(0===s.datum_params[3]&&0===s.datum_params[4]&&0===s.datum_params[5]&&0===s.datum_params[6]||(s.datum_type=a.PJD_7PARAM,s.datum_params[3]*=a.SEC_TO_RAD,s.datum_params[4]*=a.SEC_TO_RAD,s.datum_params[5]*=a.SEC_TO_RAD,s.datum_params[6]=s.datum_params[6]/1e6+1))),s.a=_,s.b=r,s.es=e,s.ep2=u,s}var m=t;exports.default=m;
},{"./constants/values":"LiBj"}],"TmNP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=d(require("./parseCode")),t=d(require("./extend")),s=d(require("./projections")),a=require("./deriveConstants"),r=d(require("./constants/Datum")),i=d(require("./datum")),u=d(require("./match"));function d(e){return e&&e.__esModule?e:{default:e}}function o(s,d){if(!(this instanceof o))return new o(s);d=d||function(e){if(e)throw e};var l=(0,e.default)(s);if("object"==typeof l){var n=o.projections.get(l.projName);if(n){if(l.datumCode&&"none"!==l.datumCode){var p=(0,u.default)(r.default,l.datumCode);p&&(l.datum_params=p.towgs84?p.towgs84.split(","):null,l.ellps=p.ellipse,l.datumName=p.datumName?p.datumName:l.datumCode)}l.k0=l.k0||1,l.axis=l.axis||"enu",l.ellps=l.ellps||"wgs84";var f=(0,a.sphere)(l.a,l.b,l.rf,l.ellps,l.sphere),m=(0,a.eccentricity)(f.a,f.b,f.rf,l.R_A),h=l.datum||(0,i.default)(l.datumCode,l.datum_params,f.a,f.b,m.es,m.ep2);(0,t.default)(this,l),(0,t.default)(this,n),this.a=f.a,this.b=f.b,this.rf=f.rf,this.sphere=f.sphere,this.es=m.es,this.e=m.e,this.ep2=m.ep2,this.datum=h,this.init(),d(null,this)}else d(s)}else d(s)}o.projections=s.default,o.projections.start();var l=o;exports.default=l;
},{"./parseCode":"Ia21","./extend":"wM1P","./projections":"USh1","./deriveConstants":"e0HC","./constants/Datum":"yYWe","./datum":"YYTB","./match":"jFbK"}],"AJ6k":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.compareDatums=t,exports.geodeticToGeocentric=r,exports.geocentricToGeodetic=e,exports.geocentricToWgs84=s,exports.geocentricFromWgs84=m;var a=require("./constants/values");function t(t,r){return t.datum_type===r.datum_type&&(!(t.a!==r.a||Math.abs(t.es-r.es)>5e-11)&&(t.datum_type===a.PJD_3PARAM?t.datum_params[0]===r.datum_params[0]&&t.datum_params[1]===r.datum_params[1]&&t.datum_params[2]===r.datum_params[2]:t.datum_type!==a.PJD_7PARAM||t.datum_params[0]===r.datum_params[0]&&t.datum_params[1]===r.datum_params[1]&&t.datum_params[2]===r.datum_params[2]&&t.datum_params[3]===r.datum_params[3]&&t.datum_params[4]===r.datum_params[4]&&t.datum_params[5]===r.datum_params[5]&&t.datum_params[6]===r.datum_params[6]))}function r(t,r,e){var s,m,u,_,p=t.x,n=t.y,d=t.z?t.z:0;if(n<-a.HALF_PI&&n>-1.001*a.HALF_PI)n=-a.HALF_PI;else if(n>a.HALF_PI&&n<1.001*a.HALF_PI)n=a.HALF_PI;else{if(n<-a.HALF_PI)return{x:-1/0,y:-1/0,z:t.z};if(n>a.HALF_PI)return{x:1/0,y:1/0,z:t.z}}return p>Math.PI&&(p-=2*Math.PI),m=Math.sin(n),_=Math.cos(n),u=m*m,{x:((s=e/Math.sqrt(1-r*u))+d)*_*Math.cos(p),y:(s+d)*_*Math.sin(p),z:(s*(1-r)+d)*m}}function e(t,r,e,s){var m,u,_,p,n,d,o,i,x,P,y,M,z,c,A,h=t.x,f=t.y,I=t.z?t.z:0;if(m=Math.sqrt(h*h+f*f),u=Math.sqrt(h*h+f*f+I*I),m/e<1e-12){if(c=0,u/e<1e-12)return a.HALF_PI,A=-s,{x:t.x,y:t.y,z:t.z}}else c=Math.atan2(f,h);_=I/u,i=(p=m/u)*(1-r)*(n=1/Math.sqrt(1-r*(2-r)*p*p)),x=_*n,z=0;do{z++,d=r*(o=e/Math.sqrt(1-r*x*x))/(o+(A=m*i+I*x-o*(1-r*x*x))),M=(y=_*(n=1/Math.sqrt(1-d*(2-d)*p*p)))*i-(P=p*(1-d)*n)*x,i=P,x=y}while(M*M>1e-24&&z<30);return{x:c,y:Math.atan(y/Math.abs(P)),z:A}}function s(t,r,e){if(r===a.PJD_3PARAM)return{x:t.x+e[0],y:t.y+e[1],z:t.z+e[2]};if(r===a.PJD_7PARAM){var s=e[0],m=e[1],u=e[2],_=e[3],p=e[4],n=e[5],d=e[6];return{x:d*(t.x-n*t.y+p*t.z)+s,y:d*(n*t.x+t.y-_*t.z)+m,z:d*(-p*t.x+_*t.y+t.z)+u}}}function m(t,r,e){if(r===a.PJD_3PARAM)return{x:t.x-e[0],y:t.y-e[1],z:t.z-e[2]};if(r===a.PJD_7PARAM){var s=e[0],m=e[1],u=e[2],_=e[3],p=e[4],n=e[5],d=e[6],o=(t.x-s)/d,i=(t.y-m)/d,x=(t.z-u)/d;return{x:o+n*i-p*x,y:-n*o+i+_*x,z:p*o-_*i+x}}}
},{"./constants/values":"LiBj"}],"casK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=require("./constants/values"),t=require("./datumUtils");function a(t){return t===e.PJD_3PARAM||t===e.PJD_7PARAM}function u(u,r,o){return(0,t.compareDatums)(u,r)?o:u.datum_type===e.PJD_NODATUM||r.datum_type===e.PJD_NODATUM?o:u.es!==r.es||u.a!==r.a||a(u.datum_type)||a(r.datum_type)?(o=(0,t.geodeticToGeocentric)(o,u.es,u.a),a(u.datum_type)&&(o=(0,t.geocentricToWgs84)(o,u.datum_type,u.datum_params)),a(r.datum_type)&&(o=(0,t.geocentricFromWgs84)(o,r.datum_type,r.datum_params)),(0,t.geocentricToGeodetic)(o,r.es,r.a,r.b)):o}
},{"./constants/values":"LiBj","./datumUtils":"AJ6k"}],"Trp1":[function(require,module,exports) {
"use strict";function e(e,s,a){var r,i,t,c=a.x,d=a.y,n=a.z||0,u={};for(t=0;t<3;t++)if(!s||2!==t||void 0!==a.z)switch(0===t?(r=c,i=-1!=="ew".indexOf(e.axis[t])?"x":"y"):1===t?(r=d,i=-1!=="ns".indexOf(e.axis[t])?"y":"x"):(r=n,i="z"),e.axis[t]){case"e":case"w":case"n":case"s":u[i]=r;break;case"u":void 0!==a[i]&&(u.z=r);break;case"d":void 0!==a[i]&&(u.z=-r);break;default:return null}return u}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"Q8bn":[function(require,module,exports) {
"use strict";function e(e){var t={x:e[0],y:e[1]};return e.length>2&&(t.z=e[2]),e.length>3&&(t.m=e[3]),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"fxXU":[function(require,module,exports) {
"use strict";function e(e){t(e.x),t(e.y)}function t(e){if("function"==typeof Number.isFinite){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof e||e!=e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"n5UB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=require("./constants/values"),t=d(require("./datum_transform")),r=d(require("./adjust_axis")),u=d(require("./Proj")),a=d(require("./common/toPoint")),o=d(require("./checkSanity"));function d(e){return e&&e.__esModule?e:{default:e}}function m(t,r){return(t.datum.datum_type===e.PJD_3PARAM||t.datum.datum_type===e.PJD_7PARAM)&&"WGS84"!==r.datumCode||(r.datum.datum_type===e.PJD_3PARAM||r.datum.datum_type===e.PJD_7PARAM)&&"WGS84"!==t.datumCode}function n(d,i,_){var f;if(Array.isArray(_)&&(_=(0,a.default)(_)),(0,o.default)(_),d.datum&&i.datum&&m(d,i)&&(_=n(d,f=new u.default("WGS84"),_),d=f),"enu"!==d.axis&&(_=(0,r.default)(d,!1,_)),"longlat"===d.projName)_={x:_.x*e.D2R,y:_.y*e.D2R,z:_.z||0};else if(d.to_meter&&(_={x:_.x*d.to_meter,y:_.y*d.to_meter,z:_.z||0}),!(_=d.inverse(_)))return;return d.from_greenwich&&(_.x+=d.from_greenwich),_=(0,t.default)(d.datum,i.datum,_),i.from_greenwich&&(_={x:_.x-i.from_greenwich,y:_.y,z:_.z||0}),"longlat"===i.projName?_={x:_.x*e.R2D,y:_.y*e.R2D,z:_.z||0}:(_=i.forward(_),i.to_meter&&(_={x:_.x/i.to_meter,y:_.y/i.to_meter,z:_.z||0})),"enu"!==i.axis?(0,r.default)(i,!0,_):_}
},{"./constants/values":"LiBj","./datum_transform":"casK","./adjust_axis":"Trp1","./Proj":"TmNP","./common/toPoint":"Q8bn","./checkSanity":"fxXU"}],"adlr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("./Proj")),r=n(require("./transform"));function n(e){return e&&e.__esModule?e:{default:e}}var t=(0,e.default)("WGS84");function o(e,n,t){var o,a,u;return Array.isArray(t)?(o=(0,r.default)(e,n,t)||{x:NaN,y:NaN},t.length>2?void 0!==e.name&&"geocent"===e.name||void 0!==n.name&&"geocent"===n.name?"number"==typeof o.z?[o.x,o.y,o.z].concat(t.splice(3)):[o.x,o.y,t[2]].concat(t.splice(3)):[o.x,o.y].concat(t.splice(2)):[o.x,o.y]):(a=(0,r.default)(e,n,t),2===(u=Object.keys(t)).length?a:(u.forEach(function(r){if(void 0!==e.name&&"geocent"===e.name||void 0!==n.name&&"geocent"===n.name){if("x"===r||"y"===r||"z"===r)return}else if("x"===r||"y"===r)return;a[r]=t[r]}),a))}function a(r){return r instanceof e.default?r:r.oProj?r.oProj:(0,e.default)(r)}function u(e,r,n){e=a(e);var u,i=!1;return void 0===r?(r=e,e=t,i=!0):(void 0!==r.x||Array.isArray(r))&&(n=r,r=e,e=t,i=!0),r=a(r),n?o(e,r,n):(u={forward:function(n){return o(e,r,n)},inverse:function(n){return o(r,e,n)}},i&&(u.oProj=r),u)}var i=u;exports.default=i;
},{"./Proj":"TmNP","./transform":"n5UB"}],"kAqR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.forward=c,exports.inverse=u,exports.toPoint=f,exports.default=void 0;var t=6,e="AJSAJS",r="AFAFAF",a=65,n=73,o=79,i=86,s=90,h={forward:c,inverse:u,toPoint:f};function c(t,e){return e=e||5,d(b({lat:t[1],lon:t[0]}),e)}function u(t){var e=v(A(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function f(t){var e=v(A(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function l(t){return t*(Math.PI/180)}function M(t){return t/Math.PI*180}function b(t){var e,r,a,n,o,i,s=t.lat,h=t.lon,c=6378137,u=l(s),f=l(h);i=Math.floor((h+180)/6)+1,180===h&&(i=60),s>=56&&s<64&&h>=3&&h<12&&(i=32),s>=72&&s<84&&(h>=0&&h<9?i=31:h>=9&&h<21?i=33:h>=21&&h<33?i=35:h>=33&&h<42&&(i=37)),o=l(6*(i-1)-180+3),e=c/Math.sqrt(1-.00669438*Math.sin(u)*Math.sin(u)),r=Math.tan(u)*Math.tan(u),a=.006739496752268451*Math.cos(u)*Math.cos(u);var M=.9996*e*((n=Math.cos(u)*(f-o))+(1-r+a)*n*n*n/6+(5-18*r+r*r+72*a-.39089081163157013)*n*n*n*n*n/120)+5e5,b=.9996*(c*(.9983242984503243*u-.002514607064228144*Math.sin(2*u)+2639046602129982e-21*Math.sin(4*u)-3.418046101696858e-9*Math.sin(6*u))+e*Math.tan(u)*(n*n/2+(5-r+9*a+4*a*a)*n*n*n*n/24+(61-58*r+r*r+600*a-2.2240339282485886)*n*n*n*n*n*n/720));return s<0&&(b+=1e7),{northing:Math.round(b),easting:Math.round(M),zoneNumber:i,zoneLetter:g(s)}}function v(t){var e=t.northing,r=t.easting,a=t.zoneLetter,n=t.zoneNumber;if(n<0||n>60)return null;var o,i,s,h,c,u,f,l,b=6378137,g=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),d=r-5e5,k=e;a<"N"&&(k-=1e7),u=6*(n-1)-180+3,l=(f=k/.9996/6367449.145945056)+(3*g/2-27*g*g*g/32)*Math.sin(2*f)+(21*g*g/16-55*g*g*g*g/32)*Math.sin(4*f)+151*g*g*g/96*Math.sin(6*f),o=b/Math.sqrt(1-.00669438*Math.sin(l)*Math.sin(l)),i=Math.tan(l)*Math.tan(l),s=.006739496752268451*Math.cos(l)*Math.cos(l),h=.99330562*b/Math.pow(1-.00669438*Math.sin(l)*Math.sin(l),1.5),c=d/(.9996*o);var m=l-o*Math.tan(l)/h*(c*c/2-(5+3*i+10*s-4*s*s-.06065547077041606)*c*c*c*c/24+(61+90*i+298*s+45*i*i-1.6983531815716497-3*s*s)*c*c*c*c*c*c/720);m=M(m);var p,A=(c-(1+2*i+s)*c*c*c/6+(5-2*s+28*i-3*s*s+.05391597401814761+24*i*i)*c*c*c*c*c/120)/Math.cos(l);if(A=u+M(A),t.accuracy){var z=v({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});p={top:z.lat,right:z.lon,bottom:m,left:A}}else p={lat:m,lon:A};return p}function g(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function d(t,e){var r="00000"+t.easting,a="00000"+t.northing;return t.zoneNumber+t.zoneLetter+k(t.easting,t.northing,t.zoneNumber)+r.substr(r.length-5,e)+a.substr(a.length-5,e)}function k(t,e,r){var a=m(r);return p(Math.floor(t/1e5),Math.floor(e/1e5)%20,a)}function m(e){var r=e%t;return 0===r&&(r=t),r}function p(t,h,c){var u=c-1,f=e.charCodeAt(u),l=r.charCodeAt(u),M=f+t-1,b=l+h,v=!1;return M>s&&(M=M-s+a-1,v=!0),(M===n||f<n&&M>n||(M>n||f<n)&&v)&&M++,(M===o||f<o&&M>o||(M>o||f<o)&&v)&&++M===n&&M++,M>s&&(M=M-s+a-1),b>i?(b=b-i+a-1,v=!0):v=!1,(b===n||l<n&&b>n||(b>n||l<n)&&v)&&b++,(b===o||l<o&&b>o||(b>o||l<o)&&v)&&++b===n&&b++,b>i&&(b=b-i+a-1),String.fromCharCode(M)+String.fromCharCode(b)}function A(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,r=t.length,a=null,n="",o=0;!/[A-Z]/.test(e=t.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+t;n+=e,o++}var i=parseInt(n,10);if(0===o||o+3>r)throw"MGRSPoint bad conversion from: "+t;var s=t.charAt(o++);if(s<="A"||"B"===s||"Y"===s||s>="Z"||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+t;a=t.substring(o,o+=2);for(var h=m(i),c=z(a.charAt(0),h),u=w(a.charAt(1),h);u<C(s);)u+=2e6;var f=r-o;if(f%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var l,M,b,v=f/2,g=0,d=0;return v>0&&(l=1e5/Math.pow(10,v),M=t.substring(o,o+v),g=parseFloat(M)*l,b=t.substring(o+v),d=parseFloat(b)*l),{easting:g+c,northing:d+u,zoneLetter:s,zoneNumber:i,accuracy:l}}function z(t,r){for(var i=e.charCodeAt(r-1),h=1e5,c=!1;i!==t.charCodeAt(0);){if(++i===n&&i++,i===o&&i++,i>s){if(c)throw"Bad character: "+t;i=a,c=!0}h+=1e5}return h}function w(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var s=r.charCodeAt(e-1),h=0,c=!1;s!==t.charCodeAt(0);){if(++s===n&&s++,s===o&&s++,s>i){if(c)throw"Bad character: "+t;s=a,c=!0}h+=1e5}return h}function C(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}exports.default=h;
},{}],"wpuw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("mgrs");function e(t,i,r){if(!(this instanceof e))return new e(t,i,r);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===i){var s=t.split(",");this.x=parseFloat(s[0],10),this.y=parseFloat(s[1],10),this.z=parseFloat(s[2],10)||0}else this.x=t,this.y=i,this.z=r||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}e.fromMGRS=function(i){return new e((0,t.toPoint)(i))},e.prototype.toMGRS=function(e){return(0,t.forward)([this.x,this.y],e)};var i=e;exports.default=i;
},{"mgrs":"kAqR"}],"L3DR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var e=1,r=.25,t=.046875,u=.01953125,a=.01068115234375,o=.75,s=.46875,n=.013020833333333334,v=.007120768229166667,c=.3645833333333333,d=.005696614583333333,f=.3076171875;function i(i){var l=[];l[0]=e-i*(r+i*(t+i*(u+i*a))),l[1]=i*(o-i*(t+i*(u+i*a)));var p=i*i;return l[2]=p*(s-i*(n+i*v)),p*=i,l[3]=p*(c-i*d),l[4]=p*i*f,l}
},{}],"SByC":[function(require,module,exports) {
"use strict";function e(e,t,r,u){return r*=t,t*=t,u[0]*e-r*(u[1]+t*(u[2]+t*(u[3]+t*u[4])))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"bfA2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=t(require("./pj_mlfn")),r=require("../constants/values");function t(e){return e&&e.__esModule?e:{default:e}}var a=20;function u(t,u,s){for(var n=1/(1-u),o=t,f=a;f;--f){var i=Math.sin(o),l=1-u*i*i;if(o-=l=((0,e.default)(o,i,Math.cos(o),s)-t)*(l*Math.sqrt(l))*n,Math.abs(l)<r.EPSLN)return o}return o}
},{"./pj_mlfn":"SByC","../constants/values":"LiBj"}],"qgIp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=r,exports.forward=n,exports.inverse=M,exports.default=exports.names=void 0;var t=o(require("../common/pj_enfn")),s=o(require("../common/pj_mlfn")),a=o(require("../common/pj_inv_mlfn")),h=o(require("../common/adjust_lon")),i=require("../constants/values"),e=o(require("../common/sign"));function o(t){return t&&t.__esModule?t:{default:t}}function r(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=(0,t.default)(this.es),this.ml0=(0,s.default)(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function n(t){var a,e,o,r=t.x,n=t.y,M=(0,h.default)(r-this.long0),l=Math.sin(n),u=Math.cos(n);if(this.es){var p=u*M,f=Math.pow(p,2),v=this.ep2*Math.pow(u,2),d=Math.pow(v,2),c=Math.abs(u)>i.EPSLN?Math.tan(n):0,m=Math.pow(c,2),x=Math.pow(m,2);a=1-this.es*Math.pow(l,2),p/=Math.sqrt(a);var w=(0,s.default)(n,l,u,this.en);e=this.a*(this.k0*p*(1+f/6*(1-m+v+f/20*(5-18*m+x+14*v-58*m*v+f/42*(61+179*x-x*m-479*m)))))+this.x0,o=this.a*(this.k0*(w-this.ml0+l*M*p/2*(1+f/12*(5-m+9*v+4*d+f/30*(61+x-58*m+270*v-330*m*v+f/56*(1385+543*x-x*m-3111*m))))))+this.y0}else{var _=u*Math.sin(M);if(Math.abs(Math.abs(_)-1)<i.EPSLN)return 93;if(e=.5*this.a*this.k0*Math.log((1+_)/(1-_))+this.x0,o=u*Math.cos(M)/Math.sqrt(1-Math.pow(_,2)),(_=Math.abs(o))>=1){if(_-1>i.EPSLN)return 93;o=0}else o=Math.acos(o);n<0&&(o=-o),o=this.a*this.k0*(o-this.lat0)+this.y0}return t.x=e,t.y=o,t}function M(t){var s,o,r,n,M=(t.x-this.x0)*(1/this.a),l=(t.y-this.y0)*(1/this.a);if(this.es)if(s=this.ml0+l/this.k0,o=(0,a.default)(s,this.es,this.en),Math.abs(o)<i.HALF_PI){var u=Math.sin(o),p=Math.cos(o),f=Math.abs(p)>i.EPSLN?Math.tan(o):0,v=this.ep2*Math.pow(p,2),d=Math.pow(v,2),c=Math.pow(f,2),m=Math.pow(c,2);s=1-this.es*Math.pow(u,2);var x=M*Math.sqrt(s)/this.k0,w=Math.pow(x,2);r=o-(s*=f)*w/(1-this.es)*.5*(1-w/12*(5+3*c-9*v*c+v-4*d-w/30*(61+90*c-252*v*c+45*m+46*v-w/56*(1385+3633*c+4095*m+1574*m*c)))),n=(0,h.default)(this.long0+x*(1-w/6*(1+2*c+v-w/20*(5+28*c+24*m+8*v*c+6*v-w/42*(61+662*c+1320*m+720*m*c))))/p)}else r=i.HALF_PI*(0,e.default)(l),n=0;else{var _=Math.exp(M/this.k0),y=.5*(_-1/_),q=this.lat0+l/this.k0,g=Math.cos(q);s=Math.sqrt((1-Math.pow(g,2))/(1+Math.pow(y,2))),r=Math.asin(s),l<0&&(r=-r),n=0===y&&0===g?0:(0,h.default)(Math.atan2(y,g)+this.long0)}return t.x=n,t.y=r,t}var l=["Transverse_Mercator","Transverse Mercator","tmerc"];exports.names=l;var u={init:r,forward:n,inverse:M,names:l};exports.default=u;
},{"../common/pj_enfn":"L3DR","../common/pj_mlfn":"SByC","../common/pj_inv_mlfn":"bfA2","../common/adjust_lon":"c0D1","../constants/values":"LiBj","../common/sign":"Yu1R"}],"zIub":[function(require,module,exports) {
"use strict";function e(e){var t=Math.exp(e);return t=(t-1/t)/2}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"AMFr":[function(require,module,exports) {
"use strict";function t(t,a){t=Math.abs(t),a=Math.abs(a);var e=Math.max(t,a),r=Math.min(t,a)/(e||1);return e*Math.sqrt(1+Math.pow(r,2))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"mNE4":[function(require,module,exports) {
"use strict";function e(e){var t=1+e,r=t-1;return 0===r?e:e*Math.log(t)/r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"Z0aI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=r(require("./hypot")),t=r(require("./log1py"));function r(e){return e&&e.__esModule?e:{default:e}}function u(r){var u=Math.abs(r);return u=(0,t.default)(u*(1+u/((0,e.default)(1,u)+1))),r<0?-u:u}
},{"./hypot":"AMFr","./log1py":"mNE4"}],"rPdz":[function(require,module,exports) {
"use strict";function e(e,t){for(var r,o=2*Math.cos(2*t),s=e.length-1,n=e[s],u=0;--s>=0;)r=o*n-u+e[s],u=n,n=r;return t+r*Math.sin(2*t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"La0z":[function(require,module,exports) {
"use strict";function e(e,t){for(var r,o=2*Math.cos(t),s=e.length-1,n=e[s],u=0;--s>=0;)r=o*n-u+e[s],u=n,n=r;return Math.sin(t)*r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"aHjm":[function(require,module,exports) {
"use strict";function e(e){var t=Math.exp(e);return t=(t+1/t)/2}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"ZVBg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=r(require("./sinh")),t=r(require("./cosh"));function r(e){return e&&e.__esModule?e:{default:e}}function u(r,u,n){for(var o,s,a=Math.sin(u),f=Math.cos(u),i=(0,e.default)(n),l=(0,t.default)(n),d=2*f*l,c=-2*a*i,h=r.length-1,M=r[h],_=0,p=0,v=0;--h>=0;)o=p,s=_,M=d*(p=M)-o-c*(_=v)+r[h],v=c*p-s+d*_;return[(d=a*l)*M-(c=f*i)*v,d*v+c*M]}
},{"./sinh":"zIub","./cosh":"aHjm"}],"suR5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=o,exports.forward=u,exports.inverse=c,exports.default=exports.names=void 0;var t=n(require("../common/sinh")),s=n(require("../common/hypot")),i=n(require("../common/asinhy")),h=n(require("../common/gatg")),e=n(require("../common/clens")),a=n(require("../common/clens_cmplx")),r=n(require("../common/adjust_lon"));function n(t){return t&&t.__esModule?t:{default:t}}function o(){if(void 0===this.es||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),s=t/(2-t),i=s;this.cgb[0]=s*(2+s*(-2/3+s*(s*(116/45+s*(26/45+s*(-2854/675)))-2))),this.cbg[0]=s*(s*(2/3+s*(4/3+s*(-82/45+s*(32/45+s*(4642/4725)))))-2),i*=s,this.cgb[1]=i*(7/3+s*(s*(-227/45+s*(2704/315+s*(2323/945)))-1.6)),this.cbg[1]=i*(5/3+s*(-16/15+s*(-13/9+s*(904/315+s*(-1522/945))))),i*=s,this.cgb[2]=i*(56/15+s*(-136/35+s*(-1262/105+s*(73814/2835)))),this.cbg[2]=i*(-26/15+s*(34/21+s*(1.6+s*(-12686/2835)))),i*=s,this.cgb[3]=i*(4279/630+s*(-332/35+s*(-399572/14175))),this.cbg[3]=i*(1237/630+s*(s*(-24832/14175)-2.4)),i*=s,this.cgb[4]=i*(4174/315+s*(-144838/6237)),this.cbg[4]=i*(-734/315+s*(109598/31185)),i*=s,this.cgb[5]=i*(601676/22275),this.cbg[5]=i*(444337/155925),i=Math.pow(s,2),this.Qn=this.k0/(1+s)*(1+i*(.25+i*(1/64+i/256))),this.utg[0]=s*(s*(2/3+s*(-37/96+s*(1/360+s*(81/512+s*(-96199/604800)))))-.5),this.gtu[0]=s*(.5+s*(-2/3+s*(5/16+s*(41/180+s*(-127/288+s*(7891/37800)))))),this.utg[1]=i*(-1/48+s*(-1/15+s*(437/1440+s*(-46/105+s*(1118711/3870720))))),this.gtu[1]=i*(13/48+s*(s*(557/1440+s*(281/630+s*(-1983433/1935360)))-.6)),i*=s,this.utg[2]=i*(-17/480+s*(37/840+s*(209/4480+s*(-5569/90720)))),this.gtu[2]=i*(61/240+s*(-103/140+s*(15061/26880+s*(167603/181440)))),i*=s,this.utg[3]=i*(-4397/161280+s*(11/504+s*(830251/7257600))),this.gtu[3]=i*(49561/161280+s*(-179/168+s*(6601661/7257600))),i*=s,this.utg[4]=i*(-4583/161280+s*(108847/3991680)),this.gtu[4]=i*(34729/80640+s*(-3418889/1995840)),i*=s,this.utg[5]=-.03233083094085698*i,this.gtu[5]=.6650675310896665*i;var a=(0,h.default)(this.cbg,this.lat0);this.Zb=-this.Qn*(a+(0,e.default)(this.gtu,2*a))}function u(t){var e=(0,r.default)(t.x-this.long0),n=t.y;n=(0,h.default)(this.cbg,n);var o=Math.sin(n),u=Math.cos(n),c=Math.sin(e),g=Math.cos(e);n=Math.atan2(o,g*u),e=Math.atan2(c*u,(0,s.default)(o,u*g)),e=(0,i.default)(Math.tan(e));var l,d,f=(0,a.default)(this.gtu,2*n,2*e);return n+=f[0],e+=f[1],Math.abs(e)<=2.623395162778?(l=this.a*(this.Qn*e)+this.x0,d=this.a*(this.Qn*n+this.Zb)+this.y0):(l=1/0,d=1/0),t.x=l,t.y=d,t}function c(i){var e,n,o=(i.x-this.x0)*(1/this.a),u=(i.y-this.y0)*(1/this.a);if(u=(u-this.Zb)/this.Qn,o/=this.Qn,Math.abs(o)<=2.623395162778){var c=(0,a.default)(this.utg,2*u,2*o);u+=c[0],o+=c[1],o=Math.atan((0,t.default)(o));var g=Math.sin(u),l=Math.cos(u),d=Math.sin(o),f=Math.cos(o);u=Math.atan2(g*f,(0,s.default)(d,f*l)),o=Math.atan2(d,f*l),e=(0,r.default)(o+this.long0),n=(0,h.default)(this.cgb,u)}else e=1/0,n=1/0;return i.x=e,i.y=n,i}var g=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"];exports.names=g;var l={init:o,forward:u,inverse:c,names:g};exports.default=l;
},{"../common/sinh":"zIub","../common/hypot":"AMFr","../common/asinhy":"Z0aI","../common/gatg":"rPdz","../common/clens":"La0z","../common/clens_cmplx":"ZVBg","../common/adjust_lon":"c0D1"}],"qFlE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=t(require("./adjust_lon"));function t(e){return e&&e.__esModule?e:{default:e}}function r(t,r){if(void 0===t){if((t=Math.floor(30*((0,e.default)(r)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}
},{"./adjust_lon":"c0D1"}],"F3qh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=i,exports.default=exports.names=exports.dependsOn=void 0;var e=s(require("../common/adjust_zone")),t=s(require("./etmerc")),r=require("../constants/values");function s(e){return e&&e.__esModule?e:{default:e}}var n="etmerc";function i(){var s=(0,e.default)(this.zone,this.long0);if(void 0===s)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(s)-183)*r.D2R,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,t.default.init.apply(this),this.forward=t.default.forward,this.inverse=t.default.inverse}exports.dependsOn=n;var o=["Universal Transverse Mercator System","utm"];exports.names=o;var a={init:i,names:o,dependsOn:n};exports.default=a;
},{"../common/adjust_zone":"qFlE","./etmerc":"suR5","../constants/values":"LiBj"}],"DL1G":[function(require,module,exports) {
"use strict";function e(e,t){return Math.pow((1-e)/(1+e),t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"Vek0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=i,exports.forward=h,exports.inverse=r,exports.default=exports.names=void 0;var t=a(require("../common/srat")),s=require("../constants/values");function a(t){return t&&t.__esModule?t:{default:t}}var e=20;function i(){var a=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*a*a),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(a/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+s.FORTPI)/(Math.pow(Math.tan(.5*this.lat0+s.FORTPI),this.C)*(0,t.default)(this.e*a,this.ratexp))}function h(a){var e=a.x,i=a.y;return a.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*i+s.FORTPI),this.C)*(0,t.default)(this.e*Math.sin(i),this.ratexp))-s.HALF_PI,a.x=this.C*e,a}function r(a){for(var i=a.x/this.C,h=a.y,r=Math.pow(Math.tan(.5*h+s.FORTPI)/this.K,1/this.C),n=e;n>0&&(h=2*Math.atan(r*(0,t.default)(this.e*Math.sin(a.y),-.5*this.e))-s.HALF_PI,!(Math.abs(h-a.y)<1e-14));--n)a.y=h;return n?(a.x=i,a.y=h,a):null}var n=["gauss"];exports.names=n;var o={init:i,forward:h,inverse:r,names:n};exports.default=o;
},{"../common/srat":"DL1G","../constants/values":"LiBj"}],"BtEk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=e,exports.forward=h,exports.inverse=a,exports.default=exports.names=void 0;var t=s(require("./gauss")),i=s(require("../common/adjust_lon"));function s(t){return t&&t.__esModule?t:{default:t}}function e(){t.default.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function h(s){var e,h,a,r;return s.x=(0,i.default)(s.x-this.long0),t.default.forward.apply(this,[s]),e=Math.sin(s.y),h=Math.cos(s.y),a=Math.cos(s.x),r=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*h*a),s.x=r*h*Math.sin(s.x),s.y=r*(this.cosc0*e-this.sinc0*h*a),s.x=this.a*s.x+this.x0,s.y=this.a*s.y+this.y0,s}function a(s){var e,h,a,r,o;if(s.x=(s.x-this.x0)/this.a,s.y=(s.y-this.y0)/this.a,s.x/=this.k0,s.y/=this.k0,o=Math.sqrt(s.x*s.x+s.y*s.y)){var n=2*Math.atan2(o,this.R2);e=Math.sin(n),h=Math.cos(n),r=Math.asin(h*this.sinc0+s.y*e*this.cosc0/o),a=Math.atan2(s.x*e,o*this.cosc0*h-s.y*this.sinc0*e)}else r=this.phic0,a=0;return s.x=a,s.y=r,t.default.inverse.apply(this,[s]),s.x=(0,i.default)(s.x+this.long0),s}var r=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];exports.names=r;var o={init:e,forward:h,inverse:a,names:r};exports.default=o;
},{"./gauss":"Vek0","../common/adjust_lon":"c0D1"}],"nkLl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ssfn_=e,exports.init=l,exports.forward=c,exports.inverse=M,exports.default=exports.names=void 0;var t=require("../constants/values"),s=o(require("../common/sign")),h=o(require("../common/msfnz")),i=o(require("../common/tsfnz")),a=o(require("../common/phi2z")),n=o(require("../common/adjust_lon"));function o(t){return t&&t.__esModule?t:{default:t}}function e(s,h,i){return h*=i,Math.tan(.5*(t.HALF_PI+s))*Math.pow((1-h)/(1+h),.5*i)}function l(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=t.EPSLN&&(this.k0=.5*(1+(0,s.default)(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=t.EPSLN&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=t.EPSLN&&(this.k0=.5*this.cons*(0,h.default)(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/(0,i.default)(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=(0,h.default)(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-t.HALF_PI,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function c(s){var h,a,o,e,l,c,M=s.x,r=s.y,u=Math.sin(r),f=Math.cos(r),x=(0,n.default)(M-this.long0);return Math.abs(Math.abs(M-this.long0)-Math.PI)<=t.EPSLN&&Math.abs(r+this.lat0)<=t.EPSLN?(s.x=NaN,s.y=NaN,s):this.sphere?(h=2*this.k0/(1+this.sinlat0*u+this.coslat0*f*Math.cos(x)),s.x=this.a*h*f*Math.sin(x)+this.x0,s.y=this.a*h*(this.coslat0*u-this.sinlat0*f*Math.cos(x))+this.y0,s):(a=2*Math.atan(this.ssfn_(r,u,this.e))-t.HALF_PI,e=Math.cos(a),o=Math.sin(a),Math.abs(this.coslat0)<=t.EPSLN?(l=(0,i.default)(this.e,r*this.con,this.con*u),c=2*this.a*this.k0*l/this.cons,s.x=this.x0+c*Math.sin(M-this.long0),s.y=this.y0-this.con*c*Math.cos(M-this.long0),s):(Math.abs(this.sinlat0)<t.EPSLN?(h=2*this.a*this.k0/(1+e*Math.cos(x)),s.y=h*o):(h=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*o+this.cosX0*e*Math.cos(x))),s.y=h*(this.cosX0*o-this.sinX0*e*Math.cos(x))+this.y0),s.x=h*e*Math.sin(x)+this.x0,s))}function M(s){var h,i,o,e,l;s.x-=this.x0,s.y-=this.y0;var c=Math.sqrt(s.x*s.x+s.y*s.y);if(this.sphere){var M=2*Math.atan(c/(2*this.a*this.k0));return h=this.long0,i=this.lat0,c<=t.EPSLN?(s.x=h,s.y=i,s):(i=Math.asin(Math.cos(M)*this.sinlat0+s.y*Math.sin(M)*this.coslat0/c),h=Math.abs(this.coslat0)<t.EPSLN?this.lat0>0?(0,n.default)(this.long0+Math.atan2(s.x,-1*s.y)):(0,n.default)(this.long0+Math.atan2(s.x,s.y)):(0,n.default)(this.long0+Math.atan2(s.x*Math.sin(M),c*this.coslat0*Math.cos(M)-s.y*this.sinlat0*Math.sin(M))),s.x=h,s.y=i,s)}if(Math.abs(this.coslat0)<=t.EPSLN){if(c<=t.EPSLN)return i=this.lat0,h=this.long0,s.x=h,s.y=i,s;s.x*=this.con,s.y*=this.con,o=c*this.cons/(2*this.a*this.k0),i=this.con*(0,a.default)(this.e,o),h=this.con*(0,n.default)(this.con*this.long0+Math.atan2(s.x,-1*s.y))}else e=2*Math.atan(c*this.cosX0/(2*this.a*this.k0*this.ms1)),h=this.long0,c<=t.EPSLN?l=this.X0:(l=Math.asin(Math.cos(e)*this.sinX0+s.y*Math.sin(e)*this.cosX0/c),h=(0,n.default)(this.long0+Math.atan2(s.x*Math.sin(e),c*this.cosX0*Math.cos(e)-s.y*this.sinX0*Math.sin(e)))),i=-1*(0,a.default)(this.e,Math.tan(.5*(t.HALF_PI+l)));return s.x=h,s.y=i,s}var r=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"];exports.names=r;var u={init:l,forward:c,inverse:M,names:r,ssfn_:e};exports.default=u;
},{"../constants/values":"LiBj","../common/sign":"Yu1R","../common/msfnz":"AEhT","../common/tsfnz":"dGKf","../common/phi2z":"KCUm","../common/adjust_lon":"c0D1"}],"XMD3":[function(require,module,exports) {
"use strict";function t(){var t=this.lat0;this.lambda0=this.long0;var a=Math.sin(t),h=this.a,s=1/this.rf,i=2*s-Math.pow(s,2),M=this.e=Math.sqrt(i);this.R=this.k0*h*Math.sqrt(1-i)/(1-i*Math.pow(a,2)),this.alpha=Math.sqrt(1+i/(1-i)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(a/this.alpha);var n=Math.log(Math.tan(Math.PI/4+this.b0/2)),o=Math.log(Math.tan(Math.PI/4+t/2)),e=Math.log((1+M*a)/(1-M*a));this.K=n-this.alpha*o+this.alpha*M/2*e}function a(t){var a=Math.log(Math.tan(Math.PI/4-t.y/2)),h=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),s=-this.alpha*(a+h)+this.K,i=2*(Math.atan(Math.exp(s))-Math.PI/4),M=this.alpha*(t.x-this.lambda0),n=Math.atan(Math.sin(M)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(M))),o=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(M));return t.y=this.R/2*Math.log((1+Math.sin(o))/(1-Math.sin(o)))+this.y0,t.x=this.R*n+this.x0,t}function h(t){for(var a=t.x-this.x0,h=t.y-this.y0,s=a/this.R,i=2*(Math.atan(Math.exp(h/this.R))-Math.PI/4),M=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(s)),n=Math.atan(Math.sin(s)/(Math.cos(this.b0)*Math.cos(s)-Math.sin(this.b0)*Math.tan(i))),o=this.lambda0+n/this.alpha,e=0,r=M,l=-1e3,p=0;Math.abs(r-l)>1e-7;){if(++p>20)return;e=1/this.alpha*(Math.log(Math.tan(Math.PI/4+M/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(r))/2)),l=r,r=2*Math.atan(Math.exp(e))-Math.PI/2}return t.x=o,t.y=r,t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=t,exports.forward=a,exports.inverse=h,exports.default=exports.names=void 0;var s=["somerc"];exports.names=s;var i={init:t,forward:a,inverse:h,names:s};exports.default=i;
},{}],"O3Wr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=l,exports.forward=e,exports.inverse=o,exports.default=exports.names=void 0;var t=i(require("../common/tsfnz")),h=i(require("../common/adjust_lon")),s=i(require("../common/phi2z")),a=require("../constants/values");function i(t){return t&&t.__esModule?t:{default:t}}function l(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var s=Math.sin(this.lat0),a=Math.cos(this.lat0),i=this.e*s;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(a,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-i*i);var l,e,o=(0,t.default)(this.e,this.lat0,s),n=this.bl/a*Math.sqrt((1-this.es)/(1-i*i));if(n*n<1&&(n=1),isNaN(this.longc)){var M=(0,t.default)(this.e,this.lat1,Math.sin(this.lat1)),r=(0,t.default)(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(n+Math.sqrt(n*n-1))*Math.pow(o,this.bl):this.el=(n-Math.sqrt(n*n-1))*Math.pow(o,this.bl);var u=Math.pow(M,this.bl),b=Math.pow(r,this.bl);e=.5*((l=this.el/u)-1/l);var m=(this.el*this.el-b*u)/(this.el*this.el+b*u),c=(b-u)/(b+u),g=(0,h.default)(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(m*Math.tan(.5*this.bl*g)/c)/this.bl,this.long0=(0,h.default)(this.long0);var p=(0,h.default)(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*p)/e),this.alpha=Math.asin(n*Math.sin(this.gamma0))}else l=this.lat0>=0?n+Math.sqrt(n*n-1):n-Math.sqrt(n*n-1),this.el=l*Math.pow(o,this.bl),e=.5*(l-1/l),this.gamma0=Math.asin(Math.sin(this.alpha)/n),this.long0=this.longc-Math.asin(e*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(n*n-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(n*n-1),Math.cos(this.alpha))}function e(s){var i,l,e,o=s.x,n=s.y,M=(0,h.default)(o-this.long0);if(Math.abs(Math.abs(n)-a.HALF_PI)<=a.EPSLN)e=n>0?-1:1,l=this.al/this.bl*Math.log(Math.tan(a.FORTPI+e*this.gamma0*.5)),i=-1*e*a.HALF_PI*this.al/this.bl;else{var r=(0,t.default)(this.e,n,Math.sin(n)),u=this.el/Math.pow(r,this.bl),b=.5*(u-1/u),m=.5*(u+1/u),c=Math.sin(this.bl*M),g=(b*Math.sin(this.gamma0)-c*Math.cos(this.gamma0))/m;l=Math.abs(Math.abs(g)-1)<=a.EPSLN?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-g)/(1+g))/this.bl,i=Math.abs(Math.cos(this.bl*M))<=a.EPSLN?this.al*this.bl*M:this.al*Math.atan2(b*Math.cos(this.gamma0)+c*Math.sin(this.gamma0),Math.cos(this.bl*M))/this.bl}return this.no_rot?(s.x=this.x0+i,s.y=this.y0+l):(i-=this.uc,s.x=this.x0+l*Math.cos(this.alpha)+i*Math.sin(this.alpha),s.y=this.y0+i*Math.cos(this.alpha)-l*Math.sin(this.alpha)),s}function o(t){var i,l;this.no_rot?(l=t.y-this.y0,i=t.x-this.x0):(l=(t.x-this.x0)*Math.cos(this.alpha)-(t.y-this.y0)*Math.sin(this.alpha),i=(t.y-this.y0)*Math.cos(this.alpha)+(t.x-this.x0)*Math.sin(this.alpha),i+=this.uc);var e=Math.exp(-1*this.bl*l/this.al),o=.5*(e-1/e),n=.5*(e+1/e),M=Math.sin(this.bl*i/this.al),r=(M*Math.cos(this.gamma0)+o*Math.sin(this.gamma0))/n,u=Math.pow(this.el/Math.sqrt((1+r)/(1-r)),1/this.bl);return Math.abs(r-1)<a.EPSLN?(t.x=this.long0,t.y=a.HALF_PI):Math.abs(r+1)<a.EPSLN?(t.x=this.long0,t.y=-1*a.HALF_PI):(t.y=(0,s.default)(this.e,u),t.x=(0,h.default)(this.long0-Math.atan2(o*Math.cos(this.gamma0)-M*Math.sin(this.gamma0),Math.cos(this.bl*i/this.al))/this.bl)),t}var n=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"];exports.names=n;var M={init:l,forward:e,inverse:o,names:n};exports.default=M;
},{"../common/tsfnz":"dGKf","../common/adjust_lon":"c0D1","../common/phi2z":"KCUm","../constants/values":"LiBj"}],"NMWS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=r,exports.forward=o,exports.inverse=l,exports.default=exports.names=void 0;var t=n(require("../common/msfnz")),s=n(require("../common/tsfnz")),i=n(require("../common/sign")),h=n(require("../common/adjust_lon")),a=n(require("../common/phi2z")),e=require("../constants/values");function n(t){return t&&t.__esModule?t:{default:t}}function r(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<e.EPSLN)){var i=this.b/this.a;this.e=Math.sqrt(1-i*i);var h=Math.sin(this.lat1),a=Math.cos(this.lat1),n=(0,t.default)(this.e,h,a),r=(0,s.default)(this.e,this.lat1,h),o=Math.sin(this.lat2),l=Math.cos(this.lat2),u=(0,t.default)(this.e,o,l),f=(0,s.default)(this.e,this.lat2,o),M=(0,s.default)(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>e.EPSLN?this.ns=Math.log(n/u)/Math.log(r/f):this.ns=h,isNaN(this.ns)&&(this.ns=h),this.f0=n/(this.ns*Math.pow(r,this.ns)),this.rh=this.a*this.f0*Math.pow(M,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function o(t){var a=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=e.EPSLN&&(n=(0,i.default)(n)*(e.HALF_PI-2*e.EPSLN));var r,o,l=Math.abs(Math.abs(n)-e.HALF_PI);if(l>e.EPSLN)r=(0,s.default)(this.e,n,Math.sin(n)),o=this.a*this.f0*Math.pow(r,this.ns);else{if((l=n*this.ns)<=0)return null;o=0}var u=this.ns*(0,h.default)(a-this.long0);return t.x=this.k0*(o*Math.sin(u))+this.x0,t.y=this.k0*(this.rh-o*Math.cos(u))+this.y0,t}function l(t){var s,i,n,r,o,l=(t.x-this.x0)/this.k0,u=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(s=Math.sqrt(l*l+u*u),i=1):(s=-Math.sqrt(l*l+u*u),i=-1);var f=0;if(0!==s&&(f=Math.atan2(i*l,i*u)),0!==s||this.ns>0){if(i=1/this.ns,n=Math.pow(s/(this.a*this.f0),i),-9999===(r=(0,a.default)(this.e,n)))return null}else r=-e.HALF_PI;return o=(0,h.default)(f/this.ns+this.long0),t.x=o,t.y=r,t}var u=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"];exports.names=u;var f={init:r,forward:o,inverse:l,names:u};exports.default=f;
},{"../common/msfnz":"AEhT","../common/tsfnz":"dGKf","../common/sign":"Yu1R","../common/adjust_lon":"c0D1","../common/phi2z":"KCUm","../constants/values":"LiBj"}],"JY2o":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=h,exports.forward=i,exports.inverse=a,exports.default=exports.names=void 0;var t=s(require("../common/adjust_lon"));function s(t){return t&&t.__esModule?t:{default:t}}function h(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function i(s){var h,i,a,n,M,e,o,r=s.x,f=s.y,l=(0,t.default)(r-this.long0);return h=Math.pow((1+this.e*Math.sin(f))/(1-this.e*Math.sin(f)),this.alfa*this.e/2),i=2*(Math.atan(this.k*Math.pow(Math.tan(f/2+this.s45),this.alfa)/h)-this.s45),a=-l*this.alfa,n=Math.asin(Math.cos(this.ad)*Math.sin(i)+Math.sin(this.ad)*Math.cos(i)*Math.cos(a)),M=Math.asin(Math.cos(i)*Math.sin(a)/Math.cos(n)),e=this.n*M,o=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(n/2+this.s45),this.n),s.y=o*Math.cos(e)/1,s.x=o*Math.sin(e)/1,this.czech||(s.y*=-1,s.x*=-1),s}function a(t){var s,h,i,a,n,M,e,o=t.x;t.x=t.y,t.y=o,this.czech||(t.y*=-1,t.x*=-1),n=Math.sqrt(t.x*t.x+t.y*t.y),a=Math.atan2(t.y,t.x)/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/n,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),s=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(a)),h=Math.asin(Math.cos(i)*Math.sin(a)/Math.cos(s)),t.x=this.long0-h/this.alfa,M=s,e=0;var r=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(s/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(M))/(1-this.e*Math.sin(M)),this.e/2))-this.s45),Math.abs(M-t.y)<1e-10&&(e=1),M=t.y,r+=1}while(0===e&&r<15);return r>=15?null:t}var n=["Krovak","krovak"];exports.names=n;var M={init:h,forward:i,inverse:a,names:n};exports.default=M;
},{"../common/adjust_lon":"c0D1"}],"SVmX":[function(require,module,exports) {
"use strict";function e(e,t,s,n,r){return e*r-t*Math.sin(2*r)+s*Math.sin(4*r)-n*Math.sin(6*r)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"GM9p":[function(require,module,exports) {
"use strict";function e(e){return 1-.25*e*(1+e/16*(3+1.25*e))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"tw5q":[function(require,module,exports) {
"use strict";function e(e){return.375*e*(1+.25*e*(1+.46875*e))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"DKVF":[function(require,module,exports) {
"use strict";function e(e){return.05859375*e*e*(1+.75*e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"XZDP":[function(require,module,exports) {
"use strict";function e(e){return e*e*e*(35/3072)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"M8OB":[function(require,module,exports) {
"use strict";function e(e,t,r){var s=t*r;return e/Math.sqrt(1-s*s)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"v1Oe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=require("../constants/values"),t=r(require("./sign"));function r(e){return e&&e.__esModule?e:{default:e}}function u(r){return Math.abs(r)<e.HALF_PI?r:r-(0,t.default)(r)*Math.PI}
},{"../constants/values":"LiBj","./sign":"Yu1R"}],"GBx2":[function(require,module,exports) {
"use strict";function t(t,e,a,r,s){var o,n;o=t/e;for(var M=0;M<15;M++)if(o+=n=(t-(e*o-a*Math.sin(2*o)+r*Math.sin(4*o)-s*Math.sin(6*o)))/(e-2*a*Math.cos(2*o)+4*r*Math.cos(4*o)-6*s*Math.cos(6*o)),Math.abs(n)<=1e-10)return o;return NaN}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"hdfx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=f,exports.forward=m,exports.inverse=M,exports.default=exports.names=void 0;var t=l(require("../common/mlfn")),s=l(require("../common/e0fn")),e=l(require("../common/e1fn")),a=l(require("../common/e2fn")),i=l(require("../common/e3fn")),h=l(require("../common/gN")),n=l(require("../common/adjust_lon")),r=l(require("../common/adjust_lat")),o=l(require("../common/imlfn")),u=require("../constants/values");function l(t){return t&&t.__esModule?t:{default:t}}function f(){this.sphere||(this.e0=(0,s.default)(this.es),this.e1=(0,e.default)(this.es),this.e2=(0,a.default)(this.es),this.e3=(0,i.default)(this.es),this.ml0=this.a*(0,t.default)(this.e0,this.e1,this.e2,this.e3,this.lat0))}function m(s){var e,a,i=s.x,r=s.y;if(i=(0,n.default)(i-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(r)*Math.sin(i)),a=this.a*(Math.atan2(Math.tan(r),Math.cos(i))-this.lat0);else{var o=Math.sin(r),u=Math.cos(r),l=(0,h.default)(this.a,this.e,o),f=Math.tan(r)*Math.tan(r),m=i*Math.cos(r),M=m*m,c=this.es*u*u/(1-this.es);e=l*m*(1-M*f*(1/6-(8-f+8*c)*M/120)),a=this.a*(0,t.default)(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+l*o/u*M*(.5+(5-f+6*c)*M/24)}return s.x=e+this.x0,s.y=a+this.y0,s}function M(t){t.x-=this.x0,t.y-=this.y0;var s,e,a=t.x/this.a,i=t.y/this.a;if(this.sphere){var l=i+this.lat0;s=Math.asin(Math.sin(l)*Math.cos(a)),e=Math.atan2(Math.tan(a),Math.cos(l))}else{var f=this.ml0/this.a+i,m=(0,o.default)(f,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(m)-u.HALF_PI)<=u.EPSLN)return t.x=this.long0,t.y=u.HALF_PI,i<0&&(t.y*=-1),t;var M=(0,h.default)(this.a,this.e,Math.sin(m)),c=M*M*M/this.a/this.a*(1-this.es),d=Math.pow(Math.tan(m),2),x=a*this.a/M,v=x*x;s=m-M*Math.tan(m)/c*x*x*(.5-(1+3*d)*x*x/24),e=x*(1-v*(d/3+(1+3*d)*d*v/15))/Math.cos(m)}return t.x=(0,n.default)(e+this.long0),t.y=(0,r.default)(s),t}var c=["Cassini","Cassini_Soldner","cass"];exports.names=c;var d={init:f,forward:m,inverse:M,names:c};exports.default=d;
},{"../common/mlfn":"SVmX","../common/e0fn":"GM9p","../common/e1fn":"tw5q","../common/e2fn":"DKVF","../common/e3fn":"XZDP","../common/gN":"M8OB","../common/adjust_lon":"c0D1","../common/adjust_lat":"v1Oe","../common/imlfn":"GBx2","../constants/values":"LiBj"}],"Os8Z":[function(require,module,exports) {
"use strict";function e(e,t){var r;return e>1e-7?(1-e*e)*(t/(1-(r=e*t)*r)-.5/e*Math.log((1-r)/(1+r))):2*t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"tT4j":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=n,exports.forward=d,exports.inverse=L,exports.default=exports.names=exports.OBLIQ=exports.EQUIT=exports.N_POLE=exports.S_POLE=void 0;var s=require("../constants/values"),t=h(require("../common/qsfnz")),i=h(require("../common/adjust_lon"));function h(s){return s&&s.__esModule?s:{default:s}}var a=1;exports.S_POLE=a;var e=2;exports.N_POLE=e;var r=3;exports.EQUIT=r;var o=4;function n(){var i,h=Math.abs(this.lat0);if(Math.abs(h-s.HALF_PI)<s.EPSLN?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(h)<s.EPSLN?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=(0,t.default)(this.e,1),this.mmf=.5/(1-this.es),this.apa=p(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),i=Math.sin(this.lat0),this.sinb1=(0,t.default)(this.e,i)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*i*i)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function d(h){var a,e,r,o,n,d,L,m,c,E,M=h.x,l=h.y;if(M=(0,i.default)(M-this.long0),this.sphere){if(n=Math.sin(l),E=Math.cos(l),r=Math.cos(M),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((e=this.mode===this.EQUIT?1+E*r:1+this.sinph0*n+this.cosph0*E*r)<=s.EPSLN)return null;a=(e=Math.sqrt(2/e))*E*Math.sin(M),e*=this.mode===this.EQUIT?n:this.cosph0*n-this.sinph0*E*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(l+this.lat0)<s.EPSLN)return null;e=s.FORTPI-.5*l,a=(e=2*(this.mode===this.S_POLE?Math.cos(e):Math.sin(e)))*Math.sin(M),e*=r}}else{switch(L=0,m=0,c=0,r=Math.cos(M),o=Math.sin(M),n=Math.sin(l),d=(0,t.default)(this.e,n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(L=d/this.qp,m=Math.sqrt(1-L*L)),this.mode){case this.OBLIQ:c=1+this.sinb1*L+this.cosb1*m*r;break;case this.EQUIT:c=1+m*r;break;case this.N_POLE:c=s.HALF_PI+l,d=this.qp-d;break;case this.S_POLE:c=l-s.HALF_PI,d=this.qp+d}if(Math.abs(c)<s.EPSLN)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:c=Math.sqrt(2/c),e=this.mode===this.OBLIQ?this.ymf*c*(this.cosb1*L-this.sinb1*m*r):(c=Math.sqrt(2/(1+m*r)))*L*this.ymf,a=this.xmf*c*m*o;break;case this.N_POLE:case this.S_POLE:d>=0?(a=(c=Math.sqrt(d))*o,e=r*(this.mode===this.S_POLE?c:-c)):a=e=0}}return h.x=this.a*a+this.x0,h.y=this.a*e+this.y0,h}function L(t){t.x-=this.x0,t.y-=this.y0;var h,a,e,r,o,n,d,L=t.x/this.a,m=t.y/this.a;if(this.sphere){var c,E=0,M=0;if((a=.5*(c=Math.sqrt(L*L+m*m)))>1)return null;switch(a=2*Math.asin(a),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(M=Math.sin(a),E=Math.cos(a)),this.mode){case this.EQUIT:a=Math.abs(c)<=s.EPSLN?0:Math.asin(m*M/c),L*=M,m=E*c;break;case this.OBLIQ:a=Math.abs(c)<=s.EPSLN?this.lat0:Math.asin(E*this.sinph0+m*M*this.cosph0/c),L*=M*this.cosph0,m=(E-Math.sin(a)*this.sinph0)*c;break;case this.N_POLE:m=-m,a=s.HALF_PI-a;break;case this.S_POLE:a-=s.HALF_PI}h=0!==m||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(L,m):0}else{if(d=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(L/=this.dd,m*=this.dd,(n=Math.sqrt(L*L+m*m))<s.EPSLN)return t.x=this.long0,t.y=this.lat0,t;r=2*Math.asin(.5*n/this.rq),e=Math.cos(r),L*=r=Math.sin(r),this.mode===this.OBLIQ?(d=e*this.sinb1+m*r*this.cosb1/n,o=this.qp*d,m=n*this.cosb1*e-m*this.sinb1*r):(d=m*r/n,o=this.qp*d,m=n*e)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(m=-m),!(o=L*L+m*m))return t.x=this.long0,t.y=this.lat0,t;d=1-o/this.qp,this.mode===this.S_POLE&&(d=-d)}h=Math.atan2(L,m),a=u(Math.asin(d),this.apa)}return t.x=(0,i.default)(this.long0+h),t.y=a,t}exports.OBLIQ=o;var m=.3333333333333333,c=.17222222222222222,E=.10257936507936508,M=.06388888888888888,l=.0664021164021164,O=.016415012942191543;function p(s){var t,i=[];return i[0]=s*m,t=s*s,i[0]+=t*c,i[1]=t*M,t*=s,i[0]+=t*E,i[1]+=t*l,i[2]=t*O,i}function u(s,t){var i=s+s;return s+t[0]*Math.sin(i)+t[1]*Math.sin(i+i)+t[2]*Math.sin(i+i+i)}var f=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];exports.names=f;var P={init:n,forward:d,inverse:L,names:f,S_POLE:a,N_POLE:e,EQUIT:r,OBLIQ:o};exports.default=P;
},{"../constants/values":"LiBj","../common/qsfnz":"Os8Z","../common/adjust_lon":"c0D1"}],"r3wc":[function(require,module,exports) {
"use strict";function e(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"BQzq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=e,exports.forward=o,exports.inverse=r,exports.phi1z=p,exports.default=exports.names=void 0;var s=n(require("../common/msfnz")),t=n(require("../common/qsfnz")),i=n(require("../common/adjust_lon")),h=n(require("../common/asinz")),a=require("../constants/values");function n(s){return s&&s.__esModule?s:{default:s}}function e(){Math.abs(this.lat1+this.lat2)<a.EPSLN||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=(0,s.default)(this.e3,this.sin_po,this.cos_po),this.qs1=(0,t.default)(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=(0,s.default)(this.e3,this.sin_po,this.cos_po),this.qs2=(0,t.default)(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=(0,t.default)(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>a.EPSLN?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function o(s){var h=s.x,a=s.y;this.sin_phi=Math.sin(a),this.cos_phi=Math.cos(a);var n=(0,t.default)(this.e3,this.sin_phi,this.cos_phi),e=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,o=this.ns0*(0,i.default)(h-this.long0),r=e*Math.sin(o)+this.x0,p=this.rh-e*Math.cos(o)+this.y0;return s.x=r,s.y=p,s}function r(s){var t,h,a,n,e,o;return s.x-=this.x0,s.y=this.rh-s.y+this.y0,this.ns0>=0?(t=Math.sqrt(s.x*s.x+s.y*s.y),a=1):(t=-Math.sqrt(s.x*s.x+s.y*s.y),a=-1),n=0,0!==t&&(n=Math.atan2(a*s.x,a*s.y)),a=t*this.ns0/this.a,this.sphere?o=Math.asin((this.c-a*a)/(2*this.ns0)):(h=(this.c-a*a)/this.ns0,o=this.phi1z(this.e3,h)),e=(0,i.default)(n/this.ns0+this.long0),s.x=e,s.y=o,s}function p(s,t){var i,n,e,o,r=(0,h.default)(.5*t);if(s<a.EPSLN)return r;for(var p=s*s,c=1;c<=25;c++)if(r+=o=.5*(e=1-(n=s*(i=Math.sin(r)))*n)*e/Math.cos(r)*(t/(1-p)-i/e+.5/s*Math.log((1-n)/(1+n))),Math.abs(o)<=1e-7)return r;return null}var c=["Albers_Conic_Equal_Area","Albers","aea"];exports.names=c;var u={init:e,forward:o,inverse:r,names:c,phi1z:p};exports.default=u;
},{"../common/msfnz":"AEhT","../common/qsfnz":"Os8Z","../common/adjust_lon":"c0D1","../common/asinz":"r3wc","../constants/values":"LiBj"}],"hgIf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=n,exports.forward=a,exports.inverse=e,exports.default=exports.names=void 0;var t=h(require("../common/adjust_lon")),s=h(require("../common/asinz")),i=require("../constants/values");function h(t){return t&&t.__esModule?t:{default:t}}function n(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function a(s){var h,n,a,e,o,r,c,p=s.x,u=s.y;return a=(0,t.default)(p-this.long0),h=Math.sin(u),n=Math.cos(u),e=Math.cos(a),1,(o=this.sin_p14*h+this.cos_p14*n*e)>0||Math.abs(o)<=i.EPSLN?(r=this.x0+1*this.a*n*Math.sin(a)/o,c=this.y0+1*this.a*(this.cos_p14*h-this.sin_p14*n*e)/o):(r=this.x0+this.infinity_dist*n*Math.sin(a),c=this.y0+this.infinity_dist*(this.cos_p14*h-this.sin_p14*n*e)),s.x=r,s.y=c,s}function e(i){var h,n,a,e,o,r;return i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a,i.x/=this.k0,i.y/=this.k0,(h=Math.sqrt(i.x*i.x+i.y*i.y))?(e=Math.atan2(h,this.rc),n=Math.sin(e),a=Math.cos(e),r=(0,s.default)(a*this.sin_p14+i.y*n*this.cos_p14/h),o=Math.atan2(i.x*n,h*this.cos_p14*a-i.y*this.sin_p14*n),o=(0,t.default)(this.long0+o)):(r=this.phic0,o=0),i.x=o,i.y=r,i}var o=["gnom"];exports.names=o;var r={init:n,forward:a,inverse:e,names:o};exports.default=r;
},{"../common/adjust_lon":"c0D1","../common/asinz":"r3wc","../constants/values":"LiBj"}],"stIj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var t=require("../constants/values");function a(a,e){var r=1-(1-a*a)/(2*a)*Math.log((1-a)/(1+a));if(Math.abs(Math.abs(e)-r)<1e-6)return e<0?-1*t.HALF_PI:t.HALF_PI;for(var s,o,n,u,M=Math.asin(.5*e),h=0;h<30;h++)if(o=Math.sin(M),n=Math.cos(M),u=a*o,M+=s=Math.pow(1-u*u,2)/(2*n)*(e/(1-a*a)-o/(1-u*u)+.5/a*Math.log((1-u)/(1+u))),Math.abs(s)<=1e-10)return M;return NaN}
},{"../constants/values":"LiBj"}],"qHgu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=h,exports.forward=r,exports.inverse=o,exports.default=exports.names=void 0;var t=a(require("../common/adjust_lon")),s=a(require("../common/qsfnz")),e=a(require("../common/msfnz")),i=a(require("../common/iqsfnz"));function a(t){return t&&t.__esModule?t:{default:t}}function h(){this.sphere||(this.k0=(0,e.default)(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function r(e){var i,a,h=e.x,r=e.y,o=(0,t.default)(h-this.long0);if(this.sphere)i=this.x0+this.a*o*Math.cos(this.lat_ts),a=this.y0+this.a*Math.sin(r)/Math.cos(this.lat_ts);else{var n=(0,s.default)(this.e,Math.sin(r));i=this.x0+this.a*this.k0*o,a=this.y0+this.a*n*.5/this.k0}return e.x=i,e.y=a,e}function o(s){var e,a;return s.x-=this.x0,s.y-=this.y0,this.sphere?(e=(0,t.default)(this.long0+s.x/this.a/Math.cos(this.lat_ts)),a=Math.asin(s.y/this.a*Math.cos(this.lat_ts))):(a=(0,i.default)(this.e,2*s.y*this.k0/this.a),e=(0,t.default)(this.long0+s.x/(this.a*this.k0))),s.x=e,s.y=a,s}var n=["cea"];exports.names=n;var u={init:h,forward:r,inverse:o,names:n};exports.default=u;
},{"../common/adjust_lon":"c0D1","../common/qsfnz":"Os8Z","../common/msfnz":"AEhT","../common/iqsfnz":"stIj"}],"C2W8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=e,exports.forward=a,exports.inverse=r,exports.default=exports.names=void 0;var t=s(require("../common/adjust_lon")),i=s(require("../common/adjust_lat"));function s(t){return t&&t.__esModule?t:{default:t}}function e(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function a(s){var e=s.x,a=s.y,r=(0,t.default)(e-this.long0),l=(0,i.default)(a-this.lat0);return s.x=this.x0+this.a*r*this.rc,s.y=this.y0+this.a*l,s}function r(s){var e=s.x,a=s.y;return s.x=(0,t.default)(this.long0+(e-this.x0)/(this.a*this.rc)),s.y=(0,i.default)(this.lat0+(a-this.y0)/this.a),s}var l=["Equirectangular","Equidistant_Cylindrical","eqc"];exports.names=l;var n={init:e,forward:a,inverse:r,names:l};exports.default=n;
},{"../common/adjust_lon":"c0D1","../common/adjust_lat":"v1Oe"}],"GnT9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=f,exports.forward=M,exports.inverse=m,exports.default=exports.names=void 0;var t=l(require("../common/e0fn")),s=l(require("../common/e1fn")),i=l(require("../common/e2fn")),e=l(require("../common/e3fn")),a=l(require("../common/adjust_lon")),h=l(require("../common/adjust_lat")),n=l(require("../common/mlfn")),r=require("../constants/values"),o=l(require("../common/gN"));function l(t){return t&&t.__esModule?t:{default:t}}var u=20;function f(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=(0,t.default)(this.es),this.e1=(0,s.default)(this.es),this.e2=(0,i.default)(this.es),this.e3=(0,e.default)(this.es),this.ml0=this.a*(0,n.default)(this.e0,this.e1,this.e2,this.e3,this.lat0)}function M(t){var s,i,e,l=t.x,u=t.y,f=(0,a.default)(l-this.long0);if(e=f*Math.sin(u),this.sphere)Math.abs(u)<=r.EPSLN?(s=this.a*f,i=-1*this.a*this.lat0):(s=this.a*Math.sin(e)/Math.tan(u),i=this.a*((0,h.default)(u-this.lat0)+(1-Math.cos(e))/Math.tan(u)));else if(Math.abs(u)<=r.EPSLN)s=this.a*f,i=-1*this.ml0;else{var M=(0,o.default)(this.a,this.e,Math.sin(u))/Math.tan(u);s=M*Math.sin(e),i=this.a*(0,n.default)(this.e0,this.e1,this.e2,this.e3,u)-this.ml0+M*(1-Math.cos(e))}return t.x=s+this.x0,t.y=i+this.y0,t}function m(t){var s,i,e,h,o,l,f,M,m;if(e=t.x-this.x0,h=t.y-this.y0,this.sphere)if(Math.abs(h+this.a*this.lat0)<=r.EPSLN)s=(0,a.default)(e/this.a+this.long0),i=0;else{var d;for(l=this.lat0+h/this.a,f=e*e/this.a/this.a+l*l,M=l,o=u;o;--o)if(M+=m=-1*(l*(M*(d=Math.tan(M))+1)-M-.5*(M*M+f)*d)/((M-l)/d-1),Math.abs(m)<=r.EPSLN){i=M;break}s=(0,a.default)(this.long0+Math.asin(e*Math.tan(M)/this.a)/Math.sin(i))}else if(Math.abs(h+this.ml0)<=r.EPSLN)i=0,s=(0,a.default)(this.long0+e/this.a);else{var c,p,v,x,q;for(l=(this.ml0+h)/this.a,f=e*e/this.a/this.a+l*l,M=l,o=u;o;--o)if(q=this.e*Math.sin(M),c=Math.sqrt(1-q*q)*Math.tan(M),p=this.a*(0,n.default)(this.e0,this.e1,this.e2,this.e3,M),v=this.e0-2*this.e1*Math.cos(2*M)+4*this.e2*Math.cos(4*M)-6*this.e3*Math.cos(6*M),M-=m=(l*(c*(x=p/this.a)+1)-x-.5*c*(x*x+f))/(this.es*Math.sin(2*M)*(x*x+f-2*l*x)/(4*c)+(l-x)*(c*v-2/Math.sin(2*M))-v),Math.abs(m)<=r.EPSLN){i=M;break}c=Math.sqrt(1-this.es*Math.pow(Math.sin(i),2))*Math.tan(i),s=(0,a.default)(this.long0+Math.asin(e*c/this.a)/Math.sin(i))}return t.x=s,t.y=i,t}var d=["Polyconic","poly"];exports.names=d;var c={init:f,forward:M,inverse:m,names:d};exports.default=c;
},{"../common/e0fn":"GM9p","../common/e1fn":"tw5q","../common/e2fn":"DKVF","../common/e3fn":"XZDP","../common/adjust_lon":"c0D1","../common/adjust_lat":"v1Oe","../common/mlfn":"SVmX","../constants/values":"LiBj","../common/gN":"M8OB"}],"IFhf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=s,exports.forward=h,exports.inverse=r,exports.default=exports.names=exports.iterations=void 0;var i=require("../constants/values"),t=1;function s(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function h(t){var s,h=t.x,r=t.y-this.lat0,e=h-this.long0,_=r/i.SEC_TO_RAD*1e-5,a=e,o=1,B=0;for(s=1;s<=10;s++)o*=_,B+=this.A[s]*o;var m,n=B,C=a,v=1,x=0,f=0,A=0;for(s=1;s<=6;s++)m=x*n+v*C,v=v*n-x*C,x=m,f=f+this.B_re[s]*v-this.B_im[s]*x,A=A+this.B_im[s]*v+this.B_re[s]*x;return t.x=A*this.a+this.x0,t.y=f*this.a+this.y0,t}function r(t){var s,h,r=t.x,e=t.y,_=r-this.x0,a=(e-this.y0)/this.a,o=_/this.a,B=1,m=0,n=0,C=0;for(s=1;s<=6;s++)h=m*a+B*o,B=B*a-m*o,m=h,n=n+this.C_re[s]*B-this.C_im[s]*m,C=C+this.C_im[s]*B+this.C_re[s]*m;for(var v=0;v<this.iterations;v++){var x,f=n,A=C,D=a,p=o;for(s=2;s<=6;s++)x=A*n+f*C,f=f*n-A*C,A=x,D+=(s-1)*(this.B_re[s]*f-this.B_im[s]*A),p+=(s-1)*(this.B_im[s]*f+this.B_re[s]*A);f=1,A=0;var u=this.B_re[1],l=this.B_im[1];for(s=2;s<=6;s++)x=A*n+f*C,f=f*n-A*C,A=x,u+=s*(this.B_re[s]*f-this.B_im[s]*A),l+=s*(this.B_im[s]*f+this.B_re[s]*A);var d=u*u+l*l;n=(D*u+p*l)/d,C=(p*u-D*l)/d}var y=n,c=C,g=1,w=0;for(s=1;s<=9;s++)g*=y,w+=this.D[s]*g;var O=this.lat0+w*i.SEC_TO_RAD*1e5,E=this.long0+c;return t.x=E,t.y=O,t}exports.iterations=t;var e=["New_Zealand_Map_Grid","nzmg"];exports.names=e;var _={init:s,forward:h,inverse:r,names:e};exports.default=_;
},{"../constants/values":"LiBj"}],"sJ7j":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=r,exports.forward=a,exports.inverse=i,exports.default=exports.names=void 0;var t=e(require("../common/adjust_lon"));function e(t){return t&&t.__esModule?t:{default:t}}function r(){}function a(e){var r=e.x,a=e.y,i=(0,t.default)(r-this.long0),s=this.x0+this.a*i,n=this.y0+this.a*Math.log(Math.tan(Math.PI/4+a/2.5))*1.25;return e.x=s,e.y=n,e}function i(e){e.x-=this.x0,e.y-=this.y0;var r=(0,t.default)(this.long0+e.x/this.a),a=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=r,e.y=a,e}var s=["Miller_Cylindrical","mill"];exports.names=s;var n={init:r,forward:a,inverse:i,names:s};exports.default=n;
},{"../common/adjust_lon":"c0D1"}],"oaUa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=u,exports.forward=l,exports.inverse=m,exports.default=exports.names=void 0;var t=r(require("../common/adjust_lon")),s=r(require("../common/adjust_lat")),i=r(require("../common/pj_enfn")),e=r(require("../common/pj_mlfn")),h=r(require("../common/pj_inv_mlfn")),a=require("../constants/values"),n=r(require("../common/asinz"));function r(t){return t&&t.__esModule?t:{default:t}}var o=20;function u(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=(0,i.default)(this.es)}function l(s){var i,h,n=s.x,r=s.y;if(n=(0,t.default)(n-this.long0),this.sphere){if(this.m)for(var u=this.n*Math.sin(r),l=o;l;--l){var m=(this.m*r+Math.sin(r)-u)/(this.m+Math.cos(r));if(r-=m,Math.abs(m)<a.EPSLN)break}else r=1!==this.n?Math.asin(this.n*Math.sin(r)):r;i=this.a*this.C_x*n*(this.m+Math.cos(r)),h=this.a*this.C_y*r}else{var f=Math.sin(r),d=Math.cos(r);h=this.a*(0,e.default)(r,f,d,this.en),i=this.a*n*d/Math.sqrt(1-this.es*f*f)}return s.x=i,s.y=h,s}function m(i){var e,r,o,u;return i.x-=this.x0,o=i.x/this.a,i.y-=this.y0,e=i.y/this.a,this.sphere?(e/=this.C_y,o/=this.C_x*(this.m+Math.cos(e)),this.m?e=(0,n.default)((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=(0,n.default)(Math.sin(e)/this.n)),o=(0,t.default)(o+this.long0),e=(0,s.default)(e)):(e=(0,h.default)(i.y/this.a,this.es,this.en),(u=Math.abs(e))<a.HALF_PI?(u=Math.sin(e),r=this.long0+i.x*Math.sqrt(1-this.es*u*u)/(this.a*Math.cos(e)),o=(0,t.default)(r)):u-a.EPSLN<a.HALF_PI&&(o=this.long0)),i.x=o,i.y=e,i}var f=["Sinusoidal","sinu"];exports.names=f;var d={init:u,forward:l,inverse:m,names:f};exports.default=d;
},{"../common/adjust_lon":"c0D1","../common/adjust_lat":"v1Oe","../common/pj_enfn":"L3DR","../common/pj_mlfn":"SByC","../common/pj_inv_mlfn":"bfA2","../constants/values":"LiBj","../common/asinz":"r3wc"}],"vzNE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=e,exports.forward=r,exports.inverse=i,exports.default=exports.names=void 0;var t=s(require("../common/adjust_lon")),a=require("../constants/values");function s(t){return t&&t.__esModule?t:{default:t}}function e(){}function r(s){for(var e=s.x,r=s.y,i=(0,t.default)(e-this.long0),n=r,h=Math.PI*Math.sin(r);;){var o=-(n+Math.sin(n)-h)/(1+Math.cos(n));if(n+=o,Math.abs(o)<a.EPSLN)break}n/=2,Math.PI/2-Math.abs(r)<a.EPSLN&&(i=0);var M=.900316316158*this.a*i*Math.cos(n)+this.x0,u=1.4142135623731*this.a*Math.sin(n)+this.y0;return s.x=M,s.y=u,s}function i(a){var s,e;a.x-=this.x0,a.y-=this.y0,e=a.y/(1.4142135623731*this.a),Math.abs(e)>.999999999999&&(e=.999999999999),s=Math.asin(e);var r=(0,t.default)(this.long0+a.x/(.900316316158*this.a*Math.cos(s)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),e=(2*s+Math.sin(2*s))/Math.PI,Math.abs(e)>1&&(e=1);var i=Math.asin(e);return a.x=r,a.y=i,a}var n=["Mollweide","moll"];exports.names=n;var h={init:e,forward:r,inverse:i,names:n};exports.default=h;
},{"../common/adjust_lon":"c0D1","../constants/values":"LiBj"}],"aWhG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=m,exports.forward=f,exports.inverse=d,exports.default=exports.names=void 0;var t=u(require("../common/e0fn")),s=u(require("../common/e1fn")),i=u(require("../common/e2fn")),h=u(require("../common/e3fn")),e=u(require("../common/msfnz")),a=u(require("../common/mlfn")),r=u(require("../common/adjust_lon")),n=u(require("../common/adjust_lat")),l=u(require("../common/imlfn")),o=require("../constants/values");function u(t){return t&&t.__esModule?t:{default:t}}function m(){Math.abs(this.lat1+this.lat2)<o.EPSLN||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=(0,t.default)(this.es),this.e1=(0,s.default)(this.es),this.e2=(0,i.default)(this.es),this.e3=(0,h.default)(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=(0,e.default)(this.e,this.sinphi,this.cosphi),this.ml1=(0,a.default)(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<o.EPSLN?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=(0,e.default)(this.e,this.sinphi,this.cosphi),this.ml2=(0,a.default)(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=(0,a.default)(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function f(t){var s,i=t.x,h=t.y;if(this.sphere)s=this.a*(this.g-h);else{var e=(0,a.default)(this.e0,this.e1,this.e2,this.e3,h);s=this.a*(this.g-e)}var n=this.ns*(0,r.default)(i-this.long0),l=this.x0+s*Math.sin(n),o=this.y0+this.rh-s*Math.cos(n);return t.x=l,t.y=o,t}function d(t){var s,i,h,e;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(i=Math.sqrt(t.x*t.x+t.y*t.y),s=1):(i=-Math.sqrt(t.x*t.x+t.y*t.y),s=-1);var a=0;if(0!==i&&(a=Math.atan2(s*t.x,s*t.y)),this.sphere)return e=(0,r.default)(this.long0+a/this.ns),h=(0,n.default)(this.g-i/this.a),t.x=e,t.y=h,t;var o=this.g-i/this.a;return h=(0,l.default)(o,this.e0,this.e1,this.e2,this.e3),e=(0,r.default)(this.long0+a/this.ns),t.x=e,t.y=h,t}var c=["Equidistant_Conic","eqdc"];exports.names=c;var p={init:m,forward:f,inverse:d,names:c};exports.default=p;
},{"../common/e0fn":"GM9p","../common/e1fn":"tw5q","../common/e2fn":"DKVF","../common/e3fn":"XZDP","../common/msfnz":"AEhT","../common/mlfn":"SVmX","../common/adjust_lon":"c0D1","../common/adjust_lat":"v1Oe","../common/imlfn":"GBx2","../constants/values":"LiBj"}],"wESf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=e,exports.forward=r,exports.inverse=i,exports.default=exports.names=void 0;var t=h(require("../common/adjust_lon")),a=require("../constants/values"),s=h(require("../common/asinz"));function h(t){return t&&t.__esModule?t:{default:t}}function e(){this.R=this.a}function r(h){var e,r,i=h.x,n=h.y,M=(0,t.default)(i-this.long0);Math.abs(n)<=a.EPSLN&&(e=this.x0+this.R*M,r=this.y0);var o=(0,s.default)(2*Math.abs(n/Math.PI));(Math.abs(M)<=a.EPSLN||Math.abs(Math.abs(n)-a.HALF_PI)<=a.EPSLN)&&(e=this.x0,r=n>=0?this.y0+Math.PI*this.R*Math.tan(.5*o):this.y0+Math.PI*this.R*-Math.tan(.5*o));var u=.5*Math.abs(Math.PI/M-M/Math.PI),P=u*u,x=Math.sin(o),d=Math.cos(o),I=d/(x+d-1),l=I*I,v=I*(2/x-1),c=v*v,f=Math.PI*this.R*(u*(I-c)+Math.sqrt(P*(I-c)*(I-c)-(c+P)*(l-c)))/(c+P);M<0&&(f=-f),e=this.x0+f;var y=P+I;return f=Math.PI*this.R*(v*y-u*Math.sqrt((c+P)*(P+1)-y*y))/(c+P),r=n>=0?this.y0+f:this.y0-f,h.x=e,h.y=r,h}function i(s){var h,e,r,i,n,M,o,u,P,x,d,I;return s.x-=this.x0,s.y-=this.y0,d=Math.PI*this.R,n=(r=s.x/d)*r+(i=s.y/d)*i,d=3*(i*i/(u=-2*(M=-Math.abs(i)*(1+n))+1+2*i*i+n*n)+(2*(o=M-2*i*i+r*r)*o*o/u/u/u-9*M*o/u/u)/27)/(P=(M-o*o/3/u)/u)/(x=2*Math.sqrt(-P/3)),Math.abs(d)>1&&(d=d>=0?1:-1),I=Math.acos(d)/3,e=s.y>=0?(-x*Math.cos(I+Math.PI/3)-o/3/u)*Math.PI:-(-x*Math.cos(I+Math.PI/3)-o/3/u)*Math.PI,h=Math.abs(r)<a.EPSLN?this.long0:(0,t.default)(this.long0+Math.PI*(n-1+Math.sqrt(1+2*(r*r-i*i)+n*n))/2/r),s.x=h,s.y=e,s}var n=["Van_der_Grinten_I","VanDerGrinten","vandg"];exports.names=n;var M={init:e,forward:r,inverse:i,names:n};exports.default=M;
},{"../common/adjust_lon":"c0D1","../constants/values":"LiBj","../common/asinz":"r3wc"}],"UeWW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=l,exports.forward=_,exports.inverse=c,exports.default=exports.names=void 0;var t=u(require("../common/adjust_lon")),s=require("../constants/values"),a=u(require("../common/mlfn")),h=u(require("../common/e0fn")),i=u(require("../common/e1fn")),e=u(require("../common/e2fn")),n=u(require("../common/e3fn")),o=u(require("../common/gN")),M=u(require("../common/asinz")),r=u(require("../common/imlfn"));function u(t){return t&&t.__esModule?t:{default:t}}function l(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function _(M){var r,u,l,_,c,p,f,x,d,y,m,P,L,q,b,A,I,v,E,F,H,N,g=M.x,S=M.y,w=Math.sin(M.y),j=Math.cos(M.y),z=(0,t.default)(g-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=s.EPSLN?(M.x=this.x0+this.a*(s.HALF_PI-S)*Math.sin(z),M.y=this.y0-this.a*(s.HALF_PI-S)*Math.cos(z),M):Math.abs(this.sin_p12+1)<=s.EPSLN?(M.x=this.x0+this.a*(s.HALF_PI+S)*Math.sin(z),M.y=this.y0+this.a*(s.HALF_PI+S)*Math.cos(z),M):(v=this.sin_p12*w+this.cos_p12*j*Math.cos(z),I=(A=Math.acos(v))?A/Math.sin(A):1,M.x=this.x0+this.a*I*j*Math.sin(z),M.y=this.y0+this.a*I*(this.cos_p12*w-this.sin_p12*j*Math.cos(z)),M):(r=(0,h.default)(this.es),u=(0,i.default)(this.es),l=(0,e.default)(this.es),_=(0,n.default)(this.es),Math.abs(this.sin_p12-1)<=s.EPSLN?(c=this.a*(0,a.default)(r,u,l,_,s.HALF_PI),p=this.a*(0,a.default)(r,u,l,_,S),M.x=this.x0+(c-p)*Math.sin(z),M.y=this.y0-(c-p)*Math.cos(z),M):Math.abs(this.sin_p12+1)<=s.EPSLN?(c=this.a*(0,a.default)(r,u,l,_,s.HALF_PI),p=this.a*(0,a.default)(r,u,l,_,S),M.x=this.x0+(c+p)*Math.sin(z),M.y=this.y0+(c+p)*Math.cos(z),M):(f=w/j,x=(0,o.default)(this.a,this.e,this.sin_p12),d=(0,o.default)(this.a,this.e,w),y=Math.atan((1-this.es)*f+this.es*x*this.sin_p12/(d*j)),E=0===(m=Math.atan2(Math.sin(z),this.cos_p12*Math.tan(y)-this.sin_p12*Math.cos(z)))?Math.asin(this.cos_p12*Math.sin(y)-this.sin_p12*Math.cos(y)):Math.abs(Math.abs(m)-Math.PI)<=s.EPSLN?-Math.asin(this.cos_p12*Math.sin(y)-this.sin_p12*Math.cos(y)):Math.asin(Math.sin(z)*Math.cos(y)/Math.sin(m)),P=this.e*this.sin_p12/Math.sqrt(1-this.es),A=x*E*(1-(F=E*E)*(b=(L=this.e*this.cos_p12*Math.cos(m)/Math.sqrt(1-this.es))*L)*(1-b)/6+(H=F*E)/8*(q=P*L)*(1-2*b)+(N=H*E)/120*(b*(4-7*b)-3*P*P*(1-7*b))-N*E/48*q),M.x=this.x0+A*Math.sin(m),M.y=this.y0+A*Math.cos(m),M))}function c(u){var l,_,c,p,f,x,d,y,m,P,L,q,b,A,I,v,E,F,H,N,g,S,w,j;if(u.x-=this.x0,u.y-=this.y0,this.sphere){if((l=Math.sqrt(u.x*u.x+u.y*u.y))>2*s.HALF_PI*this.a)return;return _=l/this.a,c=Math.sin(_),p=Math.cos(_),f=this.long0,Math.abs(l)<=s.EPSLN?x=this.lat0:(x=(0,M.default)(p*this.sin_p12+u.y*c*this.cos_p12/l),d=Math.abs(this.lat0)-s.HALF_PI,f=Math.abs(d)<=s.EPSLN?this.lat0>=0?(0,t.default)(this.long0+Math.atan2(u.x,-u.y)):(0,t.default)(this.long0-Math.atan2(-u.x,u.y)):(0,t.default)(this.long0+Math.atan2(u.x*c,l*this.cos_p12*p-u.y*this.sin_p12*c))),u.x=f,u.y=x,u}return y=(0,h.default)(this.es),m=(0,i.default)(this.es),P=(0,e.default)(this.es),L=(0,n.default)(this.es),Math.abs(this.sin_p12-1)<=s.EPSLN?(b=(q=this.a*(0,a.default)(y,m,P,L,s.HALF_PI))-(l=Math.sqrt(u.x*u.x+u.y*u.y)),x=(0,r.default)(b/this.a,y,m,P,L),f=(0,t.default)(this.long0+Math.atan2(u.x,-1*u.y)),u.x=f,u.y=x,u):Math.abs(this.sin_p12+1)<=s.EPSLN?(q=this.a*(0,a.default)(y,m,P,L,s.HALF_PI),b=(l=Math.sqrt(u.x*u.x+u.y*u.y))-q,x=(0,r.default)(b/this.a,y,m,P,L),f=(0,t.default)(this.long0+Math.atan2(u.x,u.y)),u.x=f,u.y=x,u):(l=Math.sqrt(u.x*u.x+u.y*u.y),v=Math.atan2(u.x,u.y),A=(0,o.default)(this.a,this.e,this.sin_p12),E=Math.cos(v),H=-(F=this.e*this.cos_p12*E)*F/(1-this.es),N=3*this.es*(1-H)*this.sin_p12*this.cos_p12*E/(1-this.es),w=1-H*(S=(g=l/A)-H*(1+H)*Math.pow(g,3)/6-N*(1+3*H)*Math.pow(g,4)/24)*S/2-g*S*S*S/6,I=Math.asin(this.sin_p12*Math.cos(S)+this.cos_p12*Math.sin(S)*E),f=(0,t.default)(this.long0+Math.asin(Math.sin(v)*Math.sin(S)/Math.cos(I))),j=Math.sin(I),x=Math.atan2((j-this.es*w*this.sin_p12)*Math.tan(I),j*(1-this.es)),u.x=f,u.y=x,u)}var p=["Azimuthal_Equidistant","aeqd"];exports.names=p;var f={init:l,forward:_,inverse:c,names:p};exports.default=f;
},{"../common/adjust_lon":"c0D1","../constants/values":"LiBj","../common/mlfn":"SVmX","../common/e0fn":"GM9p","../common/e1fn":"tw5q","../common/e2fn":"DKVF","../common/e3fn":"XZDP","../common/gN":"M8OB","../common/asinz":"r3wc","../common/imlfn":"GBx2"}],"ni3R":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=e,exports.forward=h,exports.inverse=n,exports.default=exports.names=void 0;var t=i(require("../common/adjust_lon")),s=i(require("../common/asinz")),a=require("../constants/values");function i(t){return t&&t.__esModule?t:{default:t}}function e(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function h(s){var i,e,h,n,o,r,u,l=s.x,x=s.y;return h=(0,t.default)(l-this.long0),i=Math.sin(x),e=Math.cos(x),n=Math.cos(h),1,((o=this.sin_p14*i+this.cos_p14*e*n)>0||Math.abs(o)<=a.EPSLN)&&(r=1*this.a*e*Math.sin(h),u=this.y0+1*this.a*(this.cos_p14*i-this.sin_p14*e*n)),s.x=r,s.y=u,s}function n(i){var e,h,n,o,r,u,l;return i.x-=this.x0,i.y-=this.y0,e=Math.sqrt(i.x*i.x+i.y*i.y),h=(0,s.default)(e/this.a),n=Math.sin(h),o=Math.cos(h),u=this.long0,Math.abs(e)<=a.EPSLN?(l=this.lat0,i.x=u,i.y=l,i):(l=(0,s.default)(o*this.sin_p14+i.y*n*this.cos_p14/e),r=Math.abs(this.lat0)-a.HALF_PI,Math.abs(r)<=a.EPSLN?(u=this.lat0>=0?(0,t.default)(this.long0+Math.atan2(i.x,-i.y)):(0,t.default)(this.long0-Math.atan2(-i.x,i.y)),i.x=u,i.y=l,i):(u=(0,t.default)(this.long0+Math.atan2(i.x*n,e*this.cos_p14*o-i.y*this.sin_p14*n)),i.x=u,i.y=l,i))}var o=["ortho"];exports.names=o;var r={init:e,forward:h,inverse:n,names:o};exports.default=r;
},{"../common/adjust_lon":"c0D1","../common/asinz":"r3wc","../constants/values":"LiBj"}],"tdNV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=h,exports.forward=e,exports.inverse=i,exports.default=exports.names=void 0;var a=require("../constants/values"),t={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},s={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function h(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=a.HALF_PI-a.FORTPI/2?this.face=t.TOP:this.lat0<=-(a.HALF_PI-a.FORTPI/2)?this.face=t.BOTTOM:Math.abs(this.long0)<=a.FORTPI?this.face=t.FRONT:Math.abs(this.long0)<=a.HALF_PI+a.FORTPI?this.face=this.long0>0?t.RIGHT:t.LEFT:this.face=t.BACK,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function e(h){var e,i,I,P,l,F,n={x:0,y:0},R={value:0};if(h.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(h.y)):h.y,i=h.x,this.face===t.TOP)P=a.HALF_PI-e,i>=a.FORTPI&&i<=a.HALF_PI+a.FORTPI?(R.value=s.AREA_0,I=i-a.HALF_PI):i>a.HALF_PI+a.FORTPI||i<=-(a.HALF_PI+a.FORTPI)?(R.value=s.AREA_1,I=i>0?i-a.SPI:i+a.SPI):i>-(a.HALF_PI+a.FORTPI)&&i<=-a.FORTPI?(R.value=s.AREA_2,I=i+a.HALF_PI):(R.value=s.AREA_3,I=i);else if(this.face===t.BOTTOM)P=a.HALF_PI+e,i>=a.FORTPI&&i<=a.HALF_PI+a.FORTPI?(R.value=s.AREA_0,I=-i+a.HALF_PI):i<a.FORTPI&&i>=-a.FORTPI?(R.value=s.AREA_1,I=-i):i<-a.FORTPI&&i>=-(a.HALF_PI+a.FORTPI)?(R.value=s.AREA_2,I=-i-a.HALF_PI):(R.value=s.AREA_3,I=i>0?-i+a.SPI:-i-a.SPI);else{var u,M,c,r,o,T;this.face===t.RIGHT?i=_(i,+a.HALF_PI):this.face===t.BACK?i=_(i,+a.SPI):this.face===t.LEFT&&(i=_(i,-a.HALF_PI)),r=Math.sin(e),o=Math.cos(e),T=Math.sin(i),u=o*Math.cos(i),M=o*T,c=r,this.face===t.FRONT?I=A(P=Math.acos(u),c,M,R):this.face===t.RIGHT?I=A(P=Math.acos(M),c,-u,R):this.face===t.BACK?I=A(P=Math.acos(-u),c,-M,R):this.face===t.LEFT?I=A(P=Math.acos(-M),c,u,R):(P=I=0,R.value=s.AREA_0)}return F=Math.atan(12/a.SPI*(I+Math.acos(Math.sin(I)*Math.cos(a.FORTPI))-a.HALF_PI)),l=Math.sqrt((1-Math.cos(P))/(Math.cos(F)*Math.cos(F))/(1-Math.cos(Math.atan(1/Math.cos(I))))),R.value===s.AREA_1?F+=a.HALF_PI:R.value===s.AREA_2?F+=a.SPI:R.value===s.AREA_3&&(F+=1.5*a.SPI),n.x=l*Math.cos(F),n.y=l*Math.sin(F),n.x=n.x*this.a+this.x0,n.y=n.y*this.a+this.y0,h.x=n.x,h.y=n.y,h}function i(h){var e,i,A,I,P,l,F,n,R,u,M,c,r={lam:0,phi:0},o={value:0};if(h.x=(h.x-this.x0)/this.a,h.y=(h.y-this.y0)/this.a,i=Math.atan(Math.sqrt(h.x*h.x+h.y*h.y)),e=Math.atan2(h.y,h.x),h.x>=0&&h.x>=Math.abs(h.y)?o.value=s.AREA_0:h.y>=0&&h.y>=Math.abs(h.x)?(o.value=s.AREA_1,e-=a.HALF_PI):h.x<0&&-h.x>=Math.abs(h.y)?(o.value=s.AREA_2,e=e<0?e+a.SPI:e-a.SPI):(o.value=s.AREA_3,e+=a.HALF_PI),R=a.SPI/12*Math.tan(e),P=Math.sin(R)/(Math.cos(R)-1/Math.sqrt(2)),l=Math.atan(P),(F=1-(A=Math.cos(e))*A*(I=Math.tan(i))*I*(1-Math.cos(Math.atan(1/Math.cos(l)))))<-1?F=-1:F>1&&(F=1),this.face===t.TOP)n=Math.acos(F),r.phi=a.HALF_PI-n,o.value===s.AREA_0?r.lam=l+a.HALF_PI:o.value===s.AREA_1?r.lam=l<0?l+a.SPI:l-a.SPI:o.value===s.AREA_2?r.lam=l-a.HALF_PI:r.lam=l;else if(this.face===t.BOTTOM)n=Math.acos(F),r.phi=n-a.HALF_PI,o.value===s.AREA_0?r.lam=-l+a.HALF_PI:o.value===s.AREA_1?r.lam=-l:o.value===s.AREA_2?r.lam=-l-a.HALF_PI:r.lam=l<0?-l-a.SPI:-l+a.SPI;else{var T,v,f;R=(T=F)*T,v=(R+=(f=R>=1?0:Math.sqrt(1-R)*Math.sin(l))*f)>=1?0:Math.sqrt(1-R),o.value===s.AREA_1?(R=v,v=-f,f=R):o.value===s.AREA_2?(v=-v,f=-f):o.value===s.AREA_3&&(R=v,v=f,f=-R),this.face===t.RIGHT?(R=T,T=-v,v=R):this.face===t.BACK?(T=-T,v=-v):this.face===t.LEFT&&(R=T,T=v,v=-R),r.phi=Math.acos(-f)-a.HALF_PI,r.lam=Math.atan2(v,T),this.face===t.RIGHT?r.lam=_(r.lam,-a.HALF_PI):this.face===t.BACK?r.lam=_(r.lam,-a.SPI):this.face===t.LEFT&&(r.lam=_(r.lam,+a.HALF_PI))}0!==this.es&&(u=r.phi<0?1:0,M=Math.tan(r.phi),c=this.b/Math.sqrt(M*M+this.one_minus_f_squared),r.phi=Math.atan(Math.sqrt(this.a*this.a-c*c)/(this.one_minus_f*c)),u&&(r.phi=-r.phi));return r.lam+=this.long0,h.x=r.lam,h.y=r.phi,h}function A(t,h,e,i){var A;return t<a.EPSLN?(i.value=s.AREA_0,A=0):(A=Math.atan2(h,e),Math.abs(A)<=a.FORTPI?i.value=s.AREA_0:A>a.FORTPI&&A<=a.HALF_PI+a.FORTPI?(i.value=s.AREA_1,A-=a.HALF_PI):A>a.HALF_PI+a.FORTPI||A<=-(a.HALF_PI+a.FORTPI)?(i.value=s.AREA_2,A=A>=0?A-a.SPI:A+a.SPI):(i.value=s.AREA_3,A+=a.HALF_PI)),A}function _(t,s){var h=t+s;return h<-a.SPI?h+=a.TWO_PI:h>+a.SPI&&(h-=a.TWO_PI),h}var I=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];exports.names=I;var P={init:h,forward:e,inverse:i,names:I};exports.default=P;
},{"../constants/values":"LiBj"}],"ebFR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=l,exports.forward=v,exports.inverse=c,exports.default=exports.names=void 0;var e=require("../constants/values"),t=r(require("../common/adjust_lon"));function r(e){return e&&e.__esModule?e:{default:e}}var s=[[1,2.2199e-17,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],i=[[-5.20417e-18,.0124,1.21431e-18,-8.45284e-11],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],n=.8487,o=1.3523,a=e.R2D/5,u=1/a,y=18,f=function(e,t){return e[0]+t*(e[1]+t*(e[2]+t*e[3]))},h=function(e,t){return e[1]+t*(2*e[2]+3*t*e[3])};function x(e,t,r,s){for(var i=t;s;--s){var n=e(i);if(i-=n,Math.abs(n)<r)break}return i}function l(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function v(r){var h=(0,t.default)(r.x-this.long0),x=Math.abs(r.y),l=Math.floor(x*a);l<0?l=0:l>=y&&(l=y-1),x=e.R2D*(x-u*l);var v={x:f(s[l],x)*h,y:f(i[l],x)};return r.y<0&&(v.y=-v.y),v.x=v.x*this.a*n+this.x0,v.y=v.y*this.a*o+this.y0,v}function c(r){var a={x:(r.x-this.x0)/(this.a*n),y:Math.abs(r.y-this.y0)/(this.a*o)};if(a.y>=1)a.x/=s[y][0],a.y=r.y<0?-e.HALF_PI:e.HALF_PI;else{var u=Math.floor(a.y*y);for(u<0?u=0:u>=y&&(u=y-1);;)if(i[u][0]>a.y)--u;else{if(!(i[u+1][0]<=a.y))break;++u}var l=i[u],v=5*(a.y-l[0])/(i[u+1][0]-l[0]);v=x(function(e){return(f(l,e)-a.y)/h(l,e)},v,e.EPSLN,100),a.x/=f(s[u],v),a.y=(5*u+v)*e.D2R,r.y<0&&(a.y=-a.y)}return a.x=(0,t.default)(a.x+this.long0),a}var d=["Robinson","robin"];exports.names=d;var b={init:l,forward:v,inverse:c,names:d};exports.default=b;
},{"../constants/values":"LiBj","../common/adjust_lon":"c0D1"}],"Q4M2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=t,exports.forward=r,exports.inverse=o,exports.default=exports.names=void 0;var e=require("../datumUtils");function t(){this.name="geocent"}function r(t){return(0,e.geodeticToGeocentric)(t,this.es,this.a)}function o(t){return(0,e.geocentricToGeodetic)(t,this.es,this.a,this.b)}var i=["Geocentric","geocentric","geocent","Geocent"];exports.names=i;var s={init:t,forward:r,inverse:o,names:i};exports.default=s;
},{"../datumUtils":"AJ6k"}],"FDZ4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=O;var e=z(require("./lib/projections/tmerc")),o=z(require("./lib/projections/etmerc")),r=z(require("./lib/projections/utm")),i=z(require("./lib/projections/sterea")),t=z(require("./lib/projections/stere")),d=z(require("./lib/projections/somerc")),j=z(require("./lib/projections/omerc")),c=z(require("./lib/projections/lcc")),a=z(require("./lib/projections/krovak")),s=z(require("./lib/projections/cass")),l=z(require("./lib/projections/laea")),n=z(require("./lib/projections/aea")),u=z(require("./lib/projections/gnom")),p=z(require("./lib/projections/cea")),f=z(require("./lib/projections/eqc")),q=z(require("./lib/projections/poly")),b=z(require("./lib/projections/nzmg")),P=z(require("./lib/projections/mill")),m=z(require("./lib/projections/sinu")),g=z(require("./lib/projections/moll")),v=z(require("./lib/projections/eqdc")),_=z(require("./lib/projections/vandg")),k=z(require("./lib/projections/aeqd")),x=z(require("./lib/projections/ortho")),y=z(require("./lib/projections/qsc")),M=z(require("./lib/projections/robin")),h=z(require("./lib/projections/geocent"));function z(e){return e&&e.__esModule?e:{default:e}}function O(z){z.Proj.projections.add(e.default),z.Proj.projections.add(o.default),z.Proj.projections.add(r.default),z.Proj.projections.add(i.default),z.Proj.projections.add(t.default),z.Proj.projections.add(d.default),z.Proj.projections.add(j.default),z.Proj.projections.add(c.default),z.Proj.projections.add(a.default),z.Proj.projections.add(s.default),z.Proj.projections.add(l.default),z.Proj.projections.add(n.default),z.Proj.projections.add(u.default),z.Proj.projections.add(p.default),z.Proj.projections.add(f.default),z.Proj.projections.add(q.default),z.Proj.projections.add(b.default),z.Proj.projections.add(P.default),z.Proj.projections.add(m.default),z.Proj.projections.add(g.default),z.Proj.projections.add(v.default),z.Proj.projections.add(_.default),z.Proj.projections.add(k.default),z.Proj.projections.add(x.default),z.Proj.projections.add(y.default),z.Proj.projections.add(M.default),z.Proj.projections.add(h.default)}
},{"./lib/projections/tmerc":"qgIp","./lib/projections/etmerc":"suR5","./lib/projections/utm":"F3qh","./lib/projections/sterea":"BtEk","./lib/projections/stere":"nkLl","./lib/projections/somerc":"XMD3","./lib/projections/omerc":"O3Wr","./lib/projections/lcc":"NMWS","./lib/projections/krovak":"JY2o","./lib/projections/cass":"hdfx","./lib/projections/laea":"tT4j","./lib/projections/aea":"BQzq","./lib/projections/gnom":"hgIf","./lib/projections/cea":"qHgu","./lib/projections/eqc":"C2W8","./lib/projections/poly":"GnT9","./lib/projections/nzmg":"IFhf","./lib/projections/mill":"sJ7j","./lib/projections/sinu":"oaUa","./lib/projections/moll":"vzNE","./lib/projections/eqdc":"aWhG","./lib/projections/vandg":"wESf","./lib/projections/aeqd":"UeWW","./lib/projections/ortho":"ni3R","./lib/projections/qsc":"tdNV","./lib/projections/robin":"ebFR","./lib/projections/geocent":"Q4M2"}],"oaf9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("./core")),t=o(require("./Proj")),r=o(require("./Point")),u=o(require("./common/toPoint")),a=o(require("./defs")),d=o(require("./transform")),f=o(require("mgrs")),l=o(require("../projs"));function o(e){return e&&e.__esModule?e:{default:e}}e.default.defaultDatum="WGS84",e.default.Proj=t.default,e.default.WGS84=new e.default.Proj("WGS84"),e.default.Point=r.default,e.default.toPoint=u.default,e.default.defs=a.default,e.default.transform=d.default,e.default.mgrs=f.default,e.default.version="__VERSION__",(0,l.default)(e.default);var i=e.default;exports.default=i;
},{"./core":"adlr","./Proj":"TmNP","./Point":"wpuw","./common/toPoint":"Q8bn","./defs":"KsYW","./transform":"n5UB","mgrs":"kAqR","../projs":"FDZ4"}],"Quj6":[function(require,module,exports) {
exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:1/0*(s?-1:1);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),(o+=p+N>=1?n/f:n*Math.pow(2,1-N))*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};
},{}],"UzHN":[function(require,module,exports) {
"use strict";module.exports=i;var t=require("ieee754");function i(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var e=4294967296,r=1/e,s=12,n="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function o(t,i,e){var r,s,n=e.buf;if(r=(112&(s=n[e.pos++]))>>4,s<128)return a(t,r,i);if(r|=(127&(s=n[e.pos++]))<<3,s<128)return a(t,r,i);if(r|=(127&(s=n[e.pos++]))<<10,s<128)return a(t,r,i);if(r|=(127&(s=n[e.pos++]))<<17,s<128)return a(t,r,i);if(r|=(127&(s=n[e.pos++]))<<24,s<128)return a(t,r,i);if(r|=(1&(s=n[e.pos++]))<<31,s<128)return a(t,r,i);throw new Error("Expected varint not more than 10 bytes")}function h(t){return t.type===i.Bytes?t.readVarint()+t.pos:t.pos+1}function a(t,i,e){return e?4294967296*i+(t>>>0):4294967296*(i>>>0)+(t>>>0)}function u(t,i){var e,r;if(t>=0?(e=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(e=~(-t%4294967296))?e=e+1|0:(e=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");i.realloc(10),f(e,r,i),d(r,i)}function f(t,i,e){e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos]=127&t}function d(t,i){var e=(7&t)<<4;i.buf[i.pos++]|=e|((t>>>=3)?128:0),t&&(i.buf[i.pos++]=127&t|((t>>>=7)?128:0),t&&(i.buf[i.pos++]=127&t|((t>>>=7)?128:0),t&&(i.buf[i.pos++]=127&t|((t>>>=7)?128:0),t&&(i.buf[i.pos++]=127&t|((t>>>=7)?128:0),t&&(i.buf[i.pos++]=127&t)))))}function p(t,i,e){var r=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));e.realloc(r);for(var s=e.pos-1;s>=t;s--)e.buf[s+r]=e.buf[s]}function l(t,i){for(var e=0;e<t.length;e++)i.writeVarint(t[e])}function c(t,i){for(var e=0;e<t.length;e++)i.writeSVarint(t[e])}function w(t,i){for(var e=0;e<t.length;e++)i.writeFloat(t[e])}function F(t,i){for(var e=0;e<t.length;e++)i.writeDouble(t[e])}function g(t,i){for(var e=0;e<t.length;e++)i.writeBoolean(t[e])}function b(t,i){for(var e=0;e<t.length;e++)i.writeFixed32(t[e])}function x(t,i){for(var e=0;e<t.length;e++)i.writeSFixed32(t[e])}function v(t,i){for(var e=0;e<t.length;e++)i.writeFixed64(t[e])}function y(t,i){for(var e=0;e<t.length;e++)i.writeSFixed64(t[e])}function V(t,i){return(t[i]|t[i+1]<<8|t[i+2]<<16)+16777216*t[i+3]}function S(t,i,e){t[e]=i,t[e+1]=i>>>8,t[e+2]=i>>>16,t[e+3]=i>>>24}function B(t,i){return(t[i]|t[i+1]<<8|t[i+2]<<16)+(t[i+3]<<24)}function k(t,i,e){for(var r="",s=i;s<e;){var n,o,h,a=t[s],u=null,f=a>239?4:a>223?3:a>191?2:1;if(s+f>e)break;1===f?a<128&&(u=a):2===f?128==(192&(n=t[s+1]))&&(u=(31&a)<<6|63&n)<=127&&(u=null):3===f?(n=t[s+1],o=t[s+2],128==(192&n)&&128==(192&o)&&((u=(15&a)<<12|(63&n)<<6|63&o)<=2047||u>=55296&&u<=57343)&&(u=null)):4===f&&(n=t[s+1],o=t[s+2],h=t[s+3],128==(192&n)&&128==(192&o)&&128==(192&h)&&((u=(15&a)<<18|(63&n)<<12|(63&o)<<6|63&h)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,f=1):u>65535&&(u-=65536,r+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),r+=String.fromCharCode(u),s+=f}return r}function M(t,i,e){return n.decode(t.subarray(i,e))}function P(t,i,e){for(var r,s,n=0;n<i.length;n++){if((r=i.charCodeAt(n))>55295&&r<57344){if(!s){r>56319||n+1===i.length?(t[e++]=239,t[e++]=191,t[e++]=189):s=r;continue}if(r<56320){t[e++]=239,t[e++]=191,t[e++]=189,s=r;continue}r=s-55296<<10|r-56320|65536,s=null}else s&&(t[e++]=239,t[e++]=191,t[e++]=189,s=null);r<128?t[e++]=r:(r<2048?t[e++]=r>>6|192:(r<65536?t[e++]=r>>12|224:(t[e++]=r>>18|240,t[e++]=r>>12&63|128),t[e++]=r>>6&63|128),t[e++]=63&r|128)}return e}i.prototype={destroy:function(){this.buf=null},readFields:function(t,i,e){for(e=e||this.length;this.pos<e;){var r=this.readVarint(),s=r>>3,n=this.pos;this.type=7&r,t(s,i,this),this.pos===n&&this.skip(r)}return i},readMessage:function(t,i){return this.readFields(t,i,this.readVarint()+this.pos)},readFixed32:function(){var t=V(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=B(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=V(this.buf,this.pos)+V(this.buf,this.pos+4)*e;return this.pos+=8,t},readSFixed64:function(){var t=V(this.buf,this.pos)+B(this.buf,this.pos+4)*e;return this.pos+=8,t},readFloat:function(){var i=t.read(this.buf,this.pos,!0,23,4);return this.pos+=4,i},readDouble:function(){var i=t.read(this.buf,this.pos,!0,52,8);return this.pos+=8,i},readVarint:function(t){var i,e,r=this.buf;return i=127&(e=r[this.pos++]),e<128?i:(i|=(127&(e=r[this.pos++]))<<7,e<128?i:(i|=(127&(e=r[this.pos++]))<<14,e<128?i:(i|=(127&(e=r[this.pos++]))<<21,e<128?i:o(i|=(15&(e=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,i=this.pos;return this.pos=t,t-i>=s&&n?M(this.buf,i,t):k(this.buf,i,t)},readBytes:function(){var t=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,t);return this.pos=t,i},readPackedVarint:function(t,e){if(this.type!==i.Bytes)return t.push(this.readVarint(e));var r=h(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==i.Bytes)return t.push(this.readSVarint());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==i.Bytes)return t.push(this.readBoolean());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==i.Bytes)return t.push(this.readFloat());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==i.Bytes)return t.push(this.readDouble());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed32());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed32());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed64());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed64());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===i.Varint)for(;this.buf[this.pos++]>127;);else if(e===i.Bytes)this.pos=this.readVarint()+this.pos;else if(e===i.Fixed32)this.pos+=4;else{if(e!==i.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,i){this.writeVarint(t<<3|i)},realloc:function(t){for(var i=this.length||16;i<this.pos+t;)i*=2;if(i!==this.length){var e=new Uint8Array(i);e.set(this.buf),this.buf=e,this.length=i}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),S(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),S(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),S(this.buf,-1&t,this.pos),S(this.buf,Math.floor(t*r),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),S(this.buf,-1&t,this.pos),S(this.buf,Math.floor(t*r),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?u(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var i=this.pos;this.pos=P(this.buf,t,this.pos);var e=this.pos-i;e>=128&&p(i,e,this),this.pos=i-1,this.writeVarint(e),this.pos+=e},writeFloat:function(i){this.realloc(4),t.write(this.buf,i,this.pos,!0,23,4),this.pos+=4},writeDouble:function(i){this.realloc(8),t.write(this.buf,i,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var i=t.length;this.writeVarint(i),this.realloc(i);for(var e=0;e<i;e++)this.buf[this.pos++]=t[e]},writeRawMessage:function(t,i){this.pos++;var e=this.pos;t(i,this);var r=this.pos-e;r>=128&&p(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,r){this.writeTag(t,i.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(t,i){i.length&&this.writeMessage(t,l,i)},writePackedSVarint:function(t,i){i.length&&this.writeMessage(t,c,i)},writePackedBoolean:function(t,i){i.length&&this.writeMessage(t,g,i)},writePackedFloat:function(t,i){i.length&&this.writeMessage(t,w,i)},writePackedDouble:function(t,i){i.length&&this.writeMessage(t,F,i)},writePackedFixed32:function(t,i){i.length&&this.writeMessage(t,b,i)},writePackedSFixed32:function(t,i){i.length&&this.writeMessage(t,x,i)},writePackedFixed64:function(t,i){i.length&&this.writeMessage(t,v,i)},writePackedSFixed64:function(t,i){i.length&&this.writeMessage(t,y,i)},writeBytesField:function(t,e){this.writeTag(t,i.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,i.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,i.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,i.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,i){this.writeVarintField(t,Boolean(i))}};
},{"ieee754":"Quj6"}],"Kylu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transformGeometryWithOptions=u,exports.transformExtentWithOptions=c,exports.default=void 0;var t=require("../obj.js"),e=require("../util.js"),r=require("../proj.js"),o=n(require("../proj/Units.js"));function n(t){return t&&t.__esModule?t:{default:t}}var a=function(){function n(){this.dataProjection=null,this.defaultFeatureProjection=null}return n.prototype.getReadOptions=function(t,e){var n;if(e){var a=e.dataProjection?(0,r.get)(e.dataProjection):this.readProjection(t);e.extent&&a&&a.getUnits()===o.default.TILE_PIXELS&&(a=(0,r.get)(a)).setWorldExtent(e.extent),n={dataProjection:a,featureProjection:e.featureProjection}}return this.adaptOptions(n)},n.prototype.adaptOptions=function(e){return(0,t.assign)({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},e)},n.prototype.getType=function(){return(0,e.abstract)()},n.prototype.readFeature=function(t,r){return(0,e.abstract)()},n.prototype.readFeatures=function(t,r){return(0,e.abstract)()},n.prototype.readGeometry=function(t,r){return(0,e.abstract)()},n.prototype.readProjection=function(t){return(0,e.abstract)()},n.prototype.writeFeature=function(t,r){return(0,e.abstract)()},n.prototype.writeFeatures=function(t,r){return(0,e.abstract)()},n.prototype.writeGeometry=function(t,r){return(0,e.abstract)()},n}(),i=a;function u(t,e,o){var n,a=o?(0,r.get)(o.featureProjection):null,i=o?(0,r.get)(o.dataProjection):null;if(n=a&&i&&!(0,r.equivalent)(a,i)?(e?t.clone():t).transform(e?a:i,e?i:a):t,e&&o&&void 0!==o.decimals){var u=Math.pow(10,o.decimals);n===t&&(n=t.clone()),n.applyTransform(function(t){for(var e=0,r=t.length;e<r;++e)t[e]=Math.round(t[e]*u)/u;return t})}return n}function c(t,e){var o=e?(0,r.get)(e.featureProjection):null,n=e?(0,r.get)(e.dataProjection):null;return o&&n&&!(0,r.equivalent)(o,n)?(0,r.transformExtent)(t,n,o):t}exports.default=i;
},{"../obj.js":"mH6q","../util.js":"KniQ","../proj.js":"Diht","../proj/Units.js":"yZx6"}],"IFOM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../array.js"),e=require("../extent.js"),r=f(require("../geom/GeometryType.js")),i=require("../geom/flat/center.js"),o=require("../geom/flat/interiorpoint.js"),n=require("../geom/flat/interpolate.js"),s=require("../proj.js"),a=require("../geom/flat/transform.js"),p=require("../transform.js");function f(t){return t&&t.__esModule?t:{default:t}}var l=(0,p.create)(),d=function(){function f(t,e,r,i,o){this.extent_,this.id_=o,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r,this.properties_=i}return f.prototype.get=function(t){return this.properties_[t]},f.prototype.getExtent=function(){return this.extent_||(this.extent_=this.type_===r.default.POINT?(0,e.createOrUpdateFromCoordinate)(this.flatCoordinates_):(0,e.createOrUpdateFromFlatCoordinates)(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_},f.prototype.getFlatInteriorPoint=function(){if(!this.flatInteriorPoints_){var t=(0,e.getCenter)(this.getExtent());this.flatInteriorPoints_=(0,o.getInteriorPointOfArray)(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_},f.prototype.getFlatInteriorPoints=function(){if(!this.flatInteriorPoints_){var t=(0,i.linearRingss)(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=(0,o.getInteriorPointsOfMultiArray)(this.flatCoordinates_,0,this.ends_,2,t)}return this.flatInteriorPoints_},f.prototype.getFlatMidpoint=function(){return this.flatMidpoints_||(this.flatMidpoints_=(0,n.interpolatePoint)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_},f.prototype.getFlatMidpoints=function(){if(!this.flatMidpoints_){this.flatMidpoints_=[];for(var e=this.flatCoordinates_,r=0,i=this.ends_,o=0,s=i.length;o<s;++o){var a=i[o],p=(0,n.interpolatePoint)(e,r,a,2,.5);(0,t.extend)(this.flatMidpoints_,p),r=a}}return this.flatMidpoints_},f.prototype.getId=function(){return this.id_},f.prototype.getOrientedFlatCoordinates=function(){return this.flatCoordinates_},f.prototype.getGeometry=function(){return this},f.prototype.getSimplifiedGeometry=function(t){return this},f.prototype.simplifyTransformed=function(t,e){return this},f.prototype.getProperties=function(){return this.properties_},f.prototype.getStride=function(){return 2},f.prototype.getStyleFunction=function(){},f.prototype.getType=function(){return this.type_},f.prototype.transform=function(t,r){var i=(t=(0,s.get)(t)).getExtent(),o=t.getWorldExtent(),n=(0,e.getHeight)(o)/(0,e.getHeight)(i);(0,p.compose)(l,o[0],o[3],n,-n,0,0,0),(0,a.transform2D)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,l,this.flatCoordinates_)},f}();d.prototype.getEnds=function(){return this.ends_},d.prototype.getEndss=d.prototype.getEnds,d.prototype.getFlatCoordinates=d.prototype.getOrientedFlatCoordinates;var u=d;exports.default=u;
},{"../array.js":"luEr","../extent.js":"QDir","../geom/GeometryType.js":"lmV0","../geom/flat/center.js":"VjQP","../geom/flat/interiorpoint.js":"UDvN","../geom/flat/interpolate.js":"rDTq","../proj.js":"Diht","../geom/flat/transform.js":"LGwr","../transform.js":"P4eA"}],"bjcz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../asserts.js"),r=g(require("pbf")),t=m(require("./Feature.js")),a=g(require("./FormatType.js")),n=g(require("../geom/GeometryLayout.js")),o=g(require("../geom/GeometryType.js")),i=g(require("../geom/LineString.js")),u=g(require("../geom/MultiLineString.js")),s=g(require("../geom/MultiPoint.js")),l=g(require("../geom/MultiPolygon.js")),f=g(require("../geom/Point.js")),d=g(require("../geom/Polygon.js")),p=require("../geom/flat/orient.js"),y=g(require("../proj/Projection.js")),c=g(require("../proj/Units.js")),_=g(require("../render/Feature.js")),v=require("../proj.js");function h(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return h=function(){return e},e}function m(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=h();if(r&&r.has(e))return r.get(e);var t={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=a?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,r&&r.set(e,t),t}function g(e){return e&&e.__esModule?e:{default:e}}var j=function(){var e=function(r,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(r,t)};return function(r,t){function a(){this.constructor=r}e(r,t),r.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}}(),P=function(h){function m(e){var r=h.call(this)||this,t=e||{};return r.dataProjection=new y.default({code:"",units:c.default.TILE_PIXELS}),r.featureClass_=t.featureClass?t.featureClass:_.default,r.geometryName_=t.geometryName,r.layerName_=t.layerName?t.layerName:"layer",r.layers_=t.layers?t.layers:null,r.idProperty_=t.idProperty,r}return j(m,h),m.prototype.readRawGeometry_=function(r,t,a,n){r.pos=t.geometry;for(var o=r.readVarint()+r.pos,i=1,u=0,s=0,l=0,f=0,d=0;r.pos<o;){if(!u){var p=r.readVarint();i=7&p,u=p>>3}u--,1===i||2===i?(s+=r.readSVarint(),l+=r.readSVarint(),1===i&&f>d&&(n.push(f),d=f),a.push(s,l),f+=2):7===i?f>d&&(a.push(a[d],a[d+1]),f+=2):(0,e.assert)(!1,59)}f>d&&(n.push(f),d=f)},m.prototype.createFeature_=function(e,r,a){var y,c=r.type;if(0===c)return null;var v,h=r.properties;this.idProperty_?(v=h[this.idProperty_],delete h[this.idProperty_]):v=r.id,h[this.layerName_]=r.layer.name;var m=[],g=[];this.readRawGeometry_(e,r,m,g);var j=V(c,g.length);if(this.featureClass_===_.default)(y=new this.featureClass_(j,m,g,h,v)).transform(a.dataProjection,a.featureProjection);else{var P=void 0;if(j==o.default.POLYGON){for(var O=[],N=0,w=0,I=0,q=g.length;I<q;++I){var L=g[I];(0,p.linearRingIsClockwise)(m,N,L,2)||(O.push(g.slice(w,I)),w=I),N=L}P=O.length>1?new l.default(m,n.default.XY,O):new d.default(m,n.default.XY,g)}else P=j===o.default.POINT?new f.default(m,n.default.XY):j===o.default.LINE_STRING?new i.default(m,n.default.XY):j===o.default.POLYGON?new d.default(m,n.default.XY,g):j===o.default.MULTI_POINT?new s.default(m,n.default.XY):j===o.default.MULTI_LINE_STRING?new u.default(m,n.default.XY,g):null;y=new(0,this.featureClass_),this.geometryName_&&y.setGeometryName(this.geometryName_);var T=(0,t.transformGeometryWithOptions)(P,!1,a);y.setGeometry(T),y.setId(v),y.setProperties(h,!0)}return y},m.prototype.getType=function(){return a.default.ARRAY_BUFFER},m.prototype.readFeatures=function(e,t){var a=this.layers_,n=this.adaptOptions(t),o=(0,v.get)(n.dataProjection);o.setWorldExtent(n.extent),n.dataProjection=o;var i=new r.default(e),u=i.readFields(O,{}),s=[];for(var l in u)if(!a||-1!=a.indexOf(l)){var f=u[l],d=f?[0,0,f.extent,f.extent]:null;o.setExtent(d);for(var p=0,y=f.length;p<y;++p){var c=I(i,f,p);s.push(this.createFeature_(i,c,n))}}return s},m.prototype.readProjection=function(e){return this.dataProjection},m.prototype.setLayers=function(e){this.layers_=e},m}(t.default);function O(e,r,t){if(3===e){var a={keys:[],values:[],features:[]},n=t.readVarint()+t.pos;t.readFields(N,a,n),a.length=a.features.length,a.length&&(r[a.name]=a)}}function N(e,r,t){if(15===e)r.version=t.readVarint();else if(1===e)r.name=t.readString();else if(5===e)r.extent=t.readVarint();else if(2===e)r.features.push(t.pos);else if(3===e)r.keys.push(t.readString());else if(4===e){for(var a=null,n=t.readVarint()+t.pos;t.pos<n;)a=1===(e=t.readVarint()>>3)?t.readString():2===e?t.readFloat():3===e?t.readDouble():4===e?t.readVarint64():5===e?t.readVarint():6===e?t.readSVarint():7===e?t.readBoolean():null;r.values.push(a)}}function w(e,r,t){if(1==e)r.id=t.readVarint();else if(2==e)for(var a=t.readVarint()+t.pos;t.pos<a;){var n=r.layer.keys[t.readVarint()],o=r.layer.values[t.readVarint()];r.properties[n]=o}else 3==e?r.type=t.readVarint():4==e&&(r.geometry=t.pos)}function I(e,r,t){e.pos=r.features[t];var a=e.readVarint()+e.pos,n={layer:r,type:0,properties:{}};return e.readFields(w,n,a),n}function V(e,r){var t;return 1===e?t=1===r?o.default.POINT:o.default.MULTI_POINT:2===e?t=1===r?o.default.LINE_STRING:o.default.MULTI_LINE_STRING:3===e&&(t=o.default.POLYGON),t}var q=P;exports.default=q;
},{"../asserts.js":"fLG6","pbf":"UzHN","./Feature.js":"Kylu","./FormatType.js":"AbO3","../geom/GeometryLayout.js":"Utvi","../geom/GeometryType.js":"lmV0","../geom/LineString.js":"DfxW","../geom/MultiLineString.js":"fbCo","../geom/MultiPoint.js":"dNu5","../geom/MultiPolygon.js":"ouhF","../geom/Point.js":"gLcY","../geom/Polygon.js":"Nwwk","../geom/flat/orient.js":"cJkE","../proj/Projection.js":"WUar","../proj/Units.js":"yZx6","../render/Feature.js":"IFOM","../proj.js":"Diht"}],"Q2C4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={IMAGE:"image",HYBRID:"hybrid",VECTOR:"vector"};exports.default=e;
},{}],"UST7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../../util.js"),t=R(require("../../TileState.js")),r=R(require("../../ViewHint.js")),i=require("../../events.js"),n=R(require("../../events/EventType.js")),o=require("../../extent.js"),a=R(require("../../layer/VectorTileRenderType.js")),d=R(require("../../render/canvas/BuilderType.js")),l=R(require("../../render/canvas/BuilderGroup.js")),u=R(require("./TileLayer.js")),s=require("../../size.js"),g=require("../vector.js"),c=require("../../transform.js"),f=y(require("../../render/canvas/ExecutorGroup.js")),p=require("../../obj.js"),h=require("../../render/canvas/hitdetect.js"),T=require("../../coordinate.js");function v(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return v=function(){return e},e}function y(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=v();if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=i?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}function R(e){return e&&e.__esModule?e:{default:e}}var _=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),m={image:[d.default.POLYGON,d.default.CIRCLE,d.default.LINE_STRING,d.default.IMAGE,d.default.TEXT],hybrid:[d.default.POLYGON,d.default.LINE_STRING],vector:[]},C={image:[d.default.DEFAULT],hybrid:[d.default.IMAGE,d.default.TEXT,d.default.DEFAULT],vector:[d.default.POLYGON,d.default.CIRCLE,d.default.LINE_STRING,d.default.IMAGE,d.default.TEXT,d.default.DEFAULT]},I=function(d){function u(e){var t=d.call(this,e)||this;return t.boundHandleStyleImageChange_=t.handleStyleImageChange_.bind(t),t.dirty_=!1,t.renderedLayerRevision_,t.renderedPixelToCoordinateTransform_=null,t.renderedRotation_,t.renderTileImageQueue_={},t.tileListenerKeys_={},t.tmpTransform_=(0,c.create)(),t}return _(u,d),u.prototype.prepareTile=function(r,n,o,a){var d,l=(0,e.getUid)(r),u=r.getState();return(u===t.default.LOADED&&r.hifi||u===t.default.ERROR)&&l in this.tileListenerKeys_&&((0,i.unlistenByKey)(this.tileListenerKeys_[l]),delete this.tileListenerKeys_[l]),u!==t.default.LOADED&&u!==t.default.ERROR||(this.updateExecutorGroup_(r,n,o),this.tileImageNeedsRender_(r,n,o)&&(d=!0,a&&(this.renderTileImageQueue_[l]=r))),d},u.prototype.getTile=function(o,l,u,s){var g=s.pixelRatio,c=s.viewState,f=c.resolution,p=c.projection,h=this.getLayer(),T=h.getSource().getTile(o,l,u,g,p);if(T.getState()<t.default.LOADED){T.wantedResolution=f;var v=(0,e.getUid)(T);if(!(v in this.tileListenerKeys_)){var y=(0,i.listen)(T,n.default.CHANGE,this.prepareTile.bind(this,T,g,p,!0));this.tileListenerKeys_[v]=y}}else{var R=s.viewHints;!!(R[r.default.ANIMATING]||R[r.default.INTERACTING])&&T.wantedResolution||(T.wantedResolution=f),this.prepareTile(T,g,p,!1)&&h.getRenderMode()!==a.default.VECTOR&&this.renderTileImage_(T,s)}return d.prototype.getTile.call(this,o,l,u,s)},u.prototype.isDrawableTile=function(e){var t=this.getLayer();return d.prototype.isDrawableTile.call(this,e)&&t.getRenderMode()===a.default.VECTOR||e.hasContext(t)},u.prototype.getTileImage=function(e){return e.getImage(this.getLayer())},u.prototype.prepareFrame=function(e){var t=this.getLayer().getRevision();return this.renderedLayerRevision_!=t&&(this.renderedTiles.length=0),this.renderedLayerRevision_=t,d.prototype.prepareFrame.call(this,e)},u.prototype.updateExecutorGroup_=function(r,i,n){var d=this.getLayer(),u=d.getRevision(),s=d.getRenderOrder()||null,c=r.wantedResolution,p=r.getReplayState(d);if(p.dirty||p.renderedResolution!==c||p.renderedRevision!=u||p.renderedRenderOrder!=s||p.renderedZ!==r.sourceZ){var h=d.getSource(),T=h.getTileGrid(),v=h.getTileGridForProjection(n).getTileCoordExtent(r.wrappedTileCoord),y=h.getSourceTiles(i,n,r),R=(0,e.getUid)(d);delete r.hitDetectionImageData[R],r.executorGroups[R]=[];for(var _=function(e,n){var u=y[e];if(u.getState()!=t.default.LOADED)return"continue";var _=u.tileCoord,C=T.getTileCoordExtent(_),I=(0,o.getIntersection)(v,C),E=(0,o.equals)(C,I)?null:(0,o.buffer)(I,d.getRenderBuffer()*c,m.tmpExtent);p.dirty=!1;var x=new l.default(0,I,c,i,d.getDeclutter()),S=(0,g.getSquaredTolerance)(c,i),w=function(e){var t,r=e.getStyleFunction()||d.getStyleFunction();if(r&&(t=r(e,c)),t){var i=this.renderFeature(e,S,t,x);this.dirty_=this.dirty_||i,p.dirty=p.dirty||i}},L=u.getFeatures();s&&s!==p.renderedRenderOrder&&L.sort(s);for(var j=0,O=L.length;j<O;++j){var D=L[j];E&&!(0,o.intersects)(E,D.getGeometry().getExtent())||w.call(m,D)}var G=x.finish(),A=d.getRenderMode()!==a.default.VECTOR&&d.getDeclutter()&&1===y.length?null:I,F=new f.default(A,c,i,h.getOverlaps(),G,d.getRenderBuffer());r.executorGroups[R].push(F)},m=this,C=0,I=y.length;C<I;++C)_(C);p.renderedRevision=u,p.renderedZ=r.sourceZ,p.renderedRenderOrder=s,p.renderedResolution=c}},u.prototype.forEachFeatureAtCoordinate=function(t,r,i,n,a){var d=r.viewState.resolution,l=r.viewState.rotation;i=null==i?0:i;var u,s,g,c=this.getLayer(),f=c.getDeclutter(),p=c.getSource().getTileGridForProjection(r.viewState.projection),h={},T=this.renderedTiles,v=function(){var r=T[s],g=p.getTileCoordExtent(r.wrappedTileCoord),v=(0,o.containsCoordinate)(g,t);if(!f&&!v)return"continue";for(var y=r.executorGroups[(0,e.getUid)(c)],R=0,_=y.length;R<_;++R){var m=y[R];u=u||m.forEachFeatureAtCoordinate(t,d,l,i,function(t){if(v||a&&-1!==a.indexOf(t)){var r=t.getId();if(void 0===r&&(r=(0,e.getUid)(t)),!(r in h))return h[r]=!0,n(t,c)}},c.getDeclutter()?a:null)}};for(s=0,g=T.length;s<g;++s)v();return u},u.prototype.getFeatures=function(r){return new Promise(function(i,n){for(var a,d=this.getLayer(),l=(0,e.getUid)(d),u=d.getSource(),g=this.renderedProjection,f=g.getExtent(),p=this.renderedResolution,v=u.getTileGridForProjection(g),y=(0,c.apply)(this.renderedPixelToCoordinateTransform_,r.slice()),R=v.getTileCoordForCoordAndResolution(y,p),_=0,m=this.renderedTiles.length;_<m;++_)if(R.toString()===this.renderedTiles[_].tileCoord.toString()){if((a=this.renderedTiles[_]).getState()===t.default.LOADED&&a.hifi){var C=v.getTileCoordExtent(a.tileCoord);u.getWrapX()&&g.canWrapX()&&!(0,o.containsExtent)(f,C)&&(0,T.wrapX)(y,g);break}a=void 0}if(!a||a.loadingSourceTiles>0)i([]);else{var I=v.getTileCoordExtent(a.wrappedTileCoord),E=(0,o.getTopLeft)(I),x=[(y[0]-E[0])/p,(E[1]-y[1])/p],S=a.getSourceTiles().reduce(function(e,t){return e.concat(t.getFeatures())},[]),w=a.hitDetectionImageData[l];if(!w&&!this.animatingOrInteracting_){var L=(0,s.toSize)(v.getTileSize(v.getZForResolution(p))),j=[L[0]/2,L[1]/2],O=this.renderedRotation_,D=[this.getRenderTransform(v.getTileCoordCenter(a.wrappedTileCoord),p,0,.5,j[0],j[1],0)];w=(0,h.createHitDetectionImageData)(L,D,S,d.getStyleFunction(),v.getTileCoordExtent(a.wrappedTileCoord),a.getReplayState(d).renderedResolution,O),a.hitDetectionImageData[l]=w}i((0,h.hitDetect)(x,S,w))}}.bind(this))},u.prototype.handleFontsChanged=function(){(0,p.clear)(this.renderTileImageQueue_);var e=this.getLayer();e.getVisible()&&void 0!==this.renderedLayerRevision_&&e.changed()},u.prototype.handleStyleImageChange_=function(e){this.renderIfReadyAndVisible()},u.prototype.renderFrame=function(t,i){var n=t.viewHints,o=!(n[r.default.ANIMATING]||n[r.default.INTERACTING]);this.renderQueuedTileImages_(o,t),d.prototype.renderFrame.call(this,t,i),this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation;var l=this.getLayer(),u=l.getRenderMode();if(u===a.default.IMAGE)return this.container;var s=l.getSource(),g=t.usedTiles[(0,e.getUid)(s)];for(var p in this.renderTileImageQueue_)g&&p in g||delete this.renderTileImageQueue_[p];for(var h=this.context,T=l.getDeclutter()?{}:null,v=C[u],y=t.pixelRatio,R=t.viewState,_=R.center,m=R.resolution,I=R.rotation,E=t.size,x=Math.round(E[0]*y),S=Math.round(E[1]*y),w=this.renderedTiles,L=s.getTileGridForProjection(t.viewState.projection),j=[],O=[],D=w.length-1;D>=0;--D)for(var G=w[D],A=G.tileCoord,F=L.getTileCoordExtent(G.wrappedTileCoord),b=L.getTileCoordExtent(A,this.tmpExtent)[0]-F[0],P=(0,c.multiply)((0,c.scale)(this.inversePixelTransform.slice(),1/y,1/y),this.getRenderTransform(_,m,I,y,x,S,b)),N=G.executorGroups[(0,e.getUid)(l)],q=!1,M=0,U=N.length;M<U;++M){var Q=N[M];if(Q.hasExecutors(v)){var Z=G.tileCoord[0],H=void 0;if(!T&&!q){H=Q.getClipCoords(P),h.save();for(var K=0,V=j.length;K<V;++K){var X=j[K];Z<O[K]&&(h.beginPath(),h.moveTo(H[0],H[1]),h.lineTo(H[2],H[3]),h.lineTo(H[4],H[5]),h.lineTo(H[6],H[7]),h.moveTo(X[6],X[7]),h.lineTo(X[4],X[5]),h.lineTo(X[2],X[3]),h.lineTo(X[0],X[1]),h.clip())}}Q.execute(h,P,I,o,v,T),T||q||(h.restore(),j.push(H),O.push(Z),q=!0)}}if(T){var z=t.layerStatesArray[t.layerIndex];(0,f.replayDeclutter)(T,h,I,z.opacity,o,t.declutterItems)}return this.container},u.prototype.renderQueuedTileImages_=function(e,t){for(var r in this.renderTileImageQueue_){if(!e&&Date.now()-t.time>8){t.animate=!0;break}var i=this.renderTileImageQueue_[r];delete this.renderTileImageQueue_[r],this.renderTileImage_(i,t)}},u.prototype.renderFeature=function(e,t,r,i){if(!r)return!1;var n=!1;if(Array.isArray(r))for(var o=0,a=r.length;o<a;++o)n=(0,g.renderFeature)(i,e,r[o],t,this.boundHandleStyleImageChange_)||n;else n=(0,g.renderFeature)(i,e,r,t,this.boundHandleStyleImageChange_);return n},u.prototype.tileImageNeedsRender_=function(e,t,r){var i=this.getLayer(),n=e.getReplayState(i),o=i.getRevision(),a=e.sourceZ,d=e.wantedResolution;return n.renderedTileResolution!==d||n.renderedTileRevision!==o||n.renderedTileZ!==a},u.prototype.renderTileImage_=function(t,r){var i=this.getLayer(),n=t.getReplayState(i),o=i.getRevision(),a=t.executorGroups[(0,e.getUid)(i)];n.renderedTileRevision=o,n.renderedTileZ=t.sourceZ;var d=t.wrappedTileCoord,l=d[0],u=i.getSource(),s=r.pixelRatio,g=r.viewState.projection,f=u.getTileGridForProjection(g),p=f.getResolution(t.tileCoord[0]),h=r.pixelRatio/t.wantedResolution*p,T=f.getResolution(l),v=t.getContext(i);s=Math.max(s,h/s);var y=u.getTilePixelSize(l,s,g);v.canvas.width=y[0],v.canvas.height=y[1];var R=s/h;if(1!==R){var _=(0,c.reset)(this.tmpTransform_);(0,c.scale)(_,R,R),v.setTransform.apply(v,_)}var C=f.getTileCoordExtent(d,this.tmpExtent),I=h/T,E=(0,c.reset)(this.tmpTransform_);(0,c.scale)(E,I,-I),(0,c.translate)(E,-C[0],-C[3]);for(var x=0,S=a.length;x<S;++x){a[x].execute(v,E,0,!0,m[i.getRenderMode()])}n.renderedTileResolution=t.wantedResolution},u}(u.default),E=I;exports.default=E;
},{"../../util.js":"KniQ","../../TileState.js":"u3kG","../../ViewHint.js":"cuLW","../../events.js":"UqnM","../../events/EventType.js":"C8cu","../../extent.js":"QDir","../../layer/VectorTileRenderType.js":"Q2C4","../../render/canvas/BuilderType.js":"irm1","../../render/canvas/BuilderGroup.js":"vqHd","./TileLayer.js":"hkMV","../../size.js":"TAHd","../vector.js":"UCah","../../transform.js":"P4eA","../../render/canvas/ExecutorGroup.js":"ngEc","../../obj.js":"mH6q","../../render/canvas/hitdetect.js":"MrCe","../../coordinate.js":"nGsj"}],"zOJv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../asserts.js"),t=u(require("./TileProperty.js")),r=u(require("./BaseVector.js")),o=u(require("./VectorTileRenderType.js")),n=u(require("../renderer/canvas/VectorTileLayer.js")),s=require("../obj.js");function u(e){return e&&e.__esModule?e:{default:e}}var i=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),a=function(r){function u(t){var n=this,u=t||{},i=(0,s.assign)({},u);delete i.preload,delete i.useInterimTilesOnError,n=r.call(this,i)||this;var a=u.renderMode||o.default.HYBRID;return(0,e.assert)(null==a||a==o.default.IMAGE||a==o.default.HYBRID||a==o.default.VECTOR,28),n.renderMode_=a,n.setPreload(u.preload?u.preload:0),n.setUseInterimTilesOnError(void 0===u.useInterimTilesOnError||u.useInterimTilesOnError),n}return i(u,r),u.prototype.createRenderer=function(){return new n.default(this)},u.prototype.getFeatures=function(e){return r.prototype.getFeatures.call(this,e)},u.prototype.getRenderMode=function(){return this.renderMode_},u.prototype.getPreload=function(){return this.get(t.default.PRELOAD)},u.prototype.getUseInterimTilesOnError=function(){return this.get(t.default.USE_INTERIM_TILES_ON_ERROR)},u.prototype.setPreload=function(e){this.set(t.default.PRELOAD,e)},u.prototype.setUseInterimTilesOnError=function(e){this.set(t.default.USE_INTERIM_TILES_ON_ERROR,e)},u}(r.default),l=a;exports.default=l;
},{"../asserts.js":"fLG6","./TileProperty.js":"M5pz","./BaseVector.js":"pskK","./VectorTileRenderType.js":"Q2C4","../renderer/canvas/VectorTileLayer.js":"UST7","../obj.js":"mH6q"}],"A6uo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultLoadFunction=v,exports.default=void 0;var e=f(require("../TileState.js")),t=f(require("../VectorRenderTile.js")),i=f(require("../VectorTile.js")),r=require("../size.js"),o=f(require("./UrlTile.js")),n=require("../tilecoord.js"),l=require("../tilegrid.js"),a=require("../extent.js"),s=f(require("../events/EventType.js")),u=require("../featureloader.js"),c=require("../array.js"),d=f(require("../TileCache.js"));function f(e){return e&&e.__esModule?e:{default:e}}var h=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),g=function(o){function u(e){var t=this,r=e.projection||"EPSG:3857",n=e.extent||(0,l.extentFromProjection)(r),a=e.tileGrid||(0,l.createXYZ)({extent:n,maxResolution:e.maxResolution,maxZoom:void 0!==e.maxZoom?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});return(t=o.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,opaque:!1,projection:r,state:e.state,tileGrid:a,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:v,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:void 0===e.zDirection?1:e.zDirection})||this).format_=e.format?e.format:null,t.loadingTiles_={},t.sourceTileCache=new d.default(t.tileCache.highWaterMark),t.overlaps_=null==e.overlaps||e.overlaps,t.tileClass=e.tileClass?e.tileClass:i.default,t.tileGrids_={},t}return h(u,o),u.prototype.getFeaturesInExtent=function(t){var i=[],r=this.tileCache;if(0===r.getCount())return i;var o=(0,n.fromKey)(r.peekFirstKey())[0],l=this.tileGrid;return r.forEach(function(r){if(r.tileCoord[0]===o&&r.getState()===e.default.LOADED)for(var n=r.getSourceTiles(),s=0,u=n.length;s<u;++s){var c=n[s],d=c.tileCoord;if((0,a.intersects)(t,l.getTileCoordExtent(d))){var f=c.getFeatures();if(f)for(var h=0,g=f.length;h<g;++h){var p=f[h],v=p.getGeometry();(0,a.intersects)(t,v.getExtent())&&i.push(p)}}}}),i},u.prototype.getOverlaps=function(){return this.overlaps_},u.prototype.clear=function(){this.tileCache.clear(),this.sourceTileCache.clear()},u.prototype.expireCache=function(e,t){o.prototype.expireCache.call(this,e,t),this.sourceTileCache.expireCache({})},u.prototype.getSourceTiles=function(t,i,r){var o=r.wrappedTileCoord,n=this.getTileGridForProjection(i),l=n.getTileCoordExtent(o),u=o[0],d=n.getResolution(u);(0,a.buffer)(l,-d,l);var f=this.tileGrid,h=f.getExtent();h&&(0,a.getIntersection)(l,h,l);var g,p,v,T=f.getZForResolution(d,1),C=f.getMinZoom(),E=r.sourceTiles;if(E&&E.length>0&&E[0].tileCoord[0]===T)g=E,p=!0,v=T;else{g=[],v=T+1;do{--v,p=!0,f.forEachTileCoord(l,v,function(o){var n,l=this.tileUrlFunction(o,t,i);if(void 0!==l)if(this.sourceTileCache.containsKey(l)){var a=(n=this.sourceTileCache.get(l)).getState();if(a===e.default.LOADED||a===e.default.ERROR||a===e.default.EMPTY)return void g.push(n)}else v===T&&((n=new this.tileClass(o,e.default.IDLE,l,this.format_,this.tileLoadFunction)).extent=f.getTileCoordExtent(o),n.projection=i,n.resolution=f.getResolution(o[0]),this.sourceTileCache.set(l,n),n.addEventListener(s.default.CHANGE,this.handleTileChange.bind(this)),n.load());p=p&&n&&n.getState()===e.default.LOADED,n&&n.getState()!==e.default.EMPTY&&r.getState()===e.default.IDLE&&(r.loadingSourceTiles++,n.addEventListener(s.default.CHANGE,function t(){var i=n.getState(),o=n.getKey();if(i===e.default.LOADED||i===e.default.ERROR){i===e.default.LOADED?(n.removeEventListener(s.default.CHANGE,t),r.loadingSourceTiles--,delete r.errorSourceTileKeys[o]):i===e.default.ERROR&&(r.errorSourceTileKeys[o]=!0);var l=Object.keys(r.errorSourceTileKeys).length;r.loadingSourceTiles-l==0&&(r.hifi=0===l,r.sourceZ=T,r.setState(e.default.LOADED))}}))}.bind(this)),p||(g.length=0)}while(!p&&v>C)}return r.getState()===e.default.IDLE&&r.setState(e.default.LOADING),p&&(r.hifi=T===v,r.sourceZ=v,r.getState()<e.default.LOADED?r.setState(e.default.LOADED):E&&(0,c.equals)(g,E)||(r.sourceTiles=g)),g},u.prototype.getTile=function(i,r,o,l,s){var u,c=(0,n.getKeyZXY)(i,r,o),d=this.getKey();if(this.tileCache.containsKey(c)&&(u=this.tileCache.get(c)).key===d)return u;var f=[i,r,o],h=this.getTileCoordForTileUrlFunction(f,s),g=this.getTileGrid().getExtent(),p=this.getTileGridForProjection(s);if(h&&g){var v=p.getTileCoordExtent(h);(0,a.buffer)(v,-p.getResolution(i),v),(0,a.intersects)(g,v)||(h=null)}var T=!0;if(null!==h){var C=this.tileGrid,E=p.getResolution(i),y=C.getZForResolution(E,1),S=p.getTileCoordExtent(h);(0,a.buffer)(S,-E,S),C.forEachTileCoord(S,y,function(e){T=T&&!this.tileUrlFunction(e,l,s)}.bind(this))}var x=new t.default(f,T?e.default.EMPTY:e.default.IDLE,h,this.getSourceTiles.bind(this,l,s));return x.key=d,u?(x.interimTile=u,x.refreshInterimChain(),this.tileCache.replace(c,x)):this.tileCache.set(c,x),x},u.prototype.getTileGridForProjection=function(e){var t=e.getCode(),i=this.tileGrids_[t];if(!i){var r=this.tileGrid;i=(0,l.createForProjection)(e,void 0,r?r.getTileSize(r.getMinZoom()):void 0),this.tileGrids_[t]=i}return i},u.prototype.getTilePixelRatio=function(e){return e},u.prototype.getTilePixelSize=function(e,t,i){var o=this.getTileGridForProjection(i),n=(0,r.toSize)(o.getTileSize(e),this.tmpSize);return[Math.round(n[0]*t),Math.round(n[1]*t)]},u}(o.default),p=g;function v(e,t){var i=(0,u.loadFeaturesXhr)(t,e.getFormat(),e.onLoad.bind(e),e.onError.bind(e));e.setLoader(i)}exports.default=p;
},{"../TileState.js":"u3kG","../VectorRenderTile.js":"C8Du","../VectorTile.js":"yj80","../size.js":"TAHd","./UrlTile.js":"uv9E","../tilecoord.js":"faTr","../tilegrid.js":"ExRx","../extent.js":"QDir","../events/EventType.js":"C8cu","../featureloader.js":"U3JP","../array.js":"luEr","../TileCache.js":"YFDe"}],"pt6h":[function(require,module,exports) {
var a={thin:100,hairline:100,"ultra-light":100,"extra-light":100,light:200,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,heavy:800,black:800,"extra-bold":800,"ultra-black":900,"extra-black":900,"ultra-bold":900,"heavy-black":900,fat:900,poster:900},e=" ",r=/(italic|oblique)$/i,l={};module.exports=function(o,t,i){var n=l[o];if(!n){Array.isArray(o)||(o=[o]);for(var p=400,b="normal",c=[],h=0,s=o.length;h<s;++h){var u=o[h].split(" "),d=u[u.length-1].toLowerCase();for(var m in"normal"==d||"italic"==d||"oblique"==d?(b=d,u.pop(),d=u[u.length-1].toLowerCase()):r.test(d)&&(d=d.replace(r,""),b=u[u.length-1].replace(d,"")),a)if(d==m||d==m.replace("-","")||d==m.replace("-",e)){p=a[m],u.pop();break}"number"==typeof d&&(p=d);var f=u.join(e).replace("Klokantech Noto Sans","Noto Sans");-1!==f.indexOf(e)&&(f='"'+f+'"'),c.push(f)}n=l[o]=[b,p,c]}return n[0]+e+n[1]+e+t+"px"+(i?"/"+i:"")+e+n[2]};
},{}],"FRly":[function(require,module,exports) {
"use strict";exports.byteLength=u,exports.toByteArray=i,exports.fromByteArray=d;for(var r=[],t=[],e="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=n.length;o<a;++o)r[o]=n[o],t[n.charCodeAt(o)]=o;function h(r){var t=r.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=r.indexOf("=");return-1===e&&(e=t),[e,e===t?0:4-e%4]}function u(r){var t=h(r),e=t[0],n=t[1];return 3*(e+n)/4-n}function c(r,t,e){return 3*(t+e)/4-e}function i(r){var n,o,a=h(r),u=a[0],i=a[1],f=new e(c(r,u,i)),A=0,d=i>0?u-4:u;for(o=0;o<d;o+=4)n=t[r.charCodeAt(o)]<<18|t[r.charCodeAt(o+1)]<<12|t[r.charCodeAt(o+2)]<<6|t[r.charCodeAt(o+3)],f[A++]=n>>16&255,f[A++]=n>>8&255,f[A++]=255&n;return 2===i&&(n=t[r.charCodeAt(o)]<<2|t[r.charCodeAt(o+1)]>>4,f[A++]=255&n),1===i&&(n=t[r.charCodeAt(o)]<<10|t[r.charCodeAt(o+1)]<<4|t[r.charCodeAt(o+2)]>>2,f[A++]=n>>8&255,f[A++]=255&n),f}function f(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function A(r,t,e){for(var n,o=[],a=t;a<e;a+=3)n=(r[a]<<16&16711680)+(r[a+1]<<8&65280)+(255&r[a+2]),o.push(f(n));return o.join("")}function d(t){for(var e,n=t.length,o=n%3,a=[],h=0,u=n-o;h<u;h+=16383)a.push(A(t,h,h+16383>u?u:h+16383));return 1===o?(e=t[n-1],a.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],a.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),a.join("")}t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63;
},{}],"aqZJ":[function(require,module,exports) {
var r={}.toString;module.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)};
},{}],"aMB2":[function(require,module,exports) {

var global = arguments[3];
var t=arguments[3],r=require("base64-js"),e=require("ieee754"),n=require("isarray");function i(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(r){return!1}}function o(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,r){if(o()<r)throw new RangeError("Invalid typed array length");return f.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(r)).__proto__=f.prototype:(null===t&&(t=new f(r)),t.length=r),t}function f(t,r,e){if(!(f.TYPED_ARRAY_SUPPORT||this instanceof f))return new f(t,r,e);if("number"==typeof t){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return s(this,t,r,e)}function s(t,r,e,n){if("number"==typeof r)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer?g(t,r,e,n):"string"==typeof r?l(t,r,e):y(t,r)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function a(t,r,e,n){return h(r),r<=0?u(t,r):void 0!==e?"string"==typeof n?u(t,r).fill(e,n):u(t,r).fill(e):u(t,r)}function c(t,r){if(h(r),t=u(t,r<0?0:0|w(r)),!f.TYPED_ARRAY_SUPPORT)for(var e=0;e<r;++e)t[e]=0;return t}function l(t,r,e){if("string"==typeof e&&""!==e||(e="utf8"),!f.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=0|v(r,e),i=(t=u(t,n)).write(r,e);return i!==n&&(t=t.slice(0,i)),t}function p(t,r){var e=r.length<0?0:0|w(r.length);t=u(t,e);for(var n=0;n<e;n+=1)t[n]=255&r[n];return t}function g(t,r,e,n){if(r.byteLength,e<0||r.byteLength<e)throw new RangeError("'offset' is out of bounds");if(r.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");return r=void 0===e&&void 0===n?new Uint8Array(r):void 0===n?new Uint8Array(r,e):new Uint8Array(r,e,n),f.TYPED_ARRAY_SUPPORT?(t=r).__proto__=f.prototype:t=p(t,r),t}function y(t,r){if(f.isBuffer(r)){var e=0|w(r.length);return 0===(t=u(t,e)).length?t:(r.copy(t,0,0,e),t)}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||W(r.length)?u(t,0):p(t,r);if("Buffer"===r.type&&n(r.data))return p(t,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function w(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function d(t){return+t!=t&&(t=0),f.alloc(+t)}function v(t,r){if(f.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var e=t.length;if(0===e)return 0;for(var n=!1;;)switch(r){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return $(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return K(t).length;default:if(n)return $(t).length;r=(""+r).toLowerCase(),n=!0}}function E(t,r,e){var n=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===e||e>this.length)&&(e=this.length),e<=0)return"";if((e>>>=0)<=(r>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return x(this,r,e);case"utf8":case"utf-8":return Y(this,r,e);case"ascii":return L(this,r,e);case"latin1":case"binary":return D(this,r,e);case"base64":return S(this,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,r,e);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function b(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function R(t,r,e,n,i){if(0===t.length)return-1;if("string"==typeof e?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=i?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(i)return-1;e=t.length-1}else if(e<0){if(!i)return-1;e=0}if("string"==typeof r&&(r=f.from(r,n)),f.isBuffer(r))return 0===r.length?-1:_(t,r,e,n,i);if("number"==typeof r)return r&=255,f.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,r,e):Uint8Array.prototype.lastIndexOf.call(t,r,e):_(t,[r],e,n,i);throw new TypeError("val must be string, number or Buffer")}function _(t,r,e,n,i){var o,u=1,f=t.length,s=r.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||r.length<2)return-1;u=2,f/=2,s/=2,e/=2}function h(t,r){return 1===u?t[r]:t.readUInt16BE(r*u)}if(i){var a=-1;for(o=e;o<f;o++)if(h(t,o)===h(r,-1===a?0:o-a)){if(-1===a&&(a=o),o-a+1===s)return a*u}else-1!==a&&(o-=o-a),a=-1}else for(e+s>f&&(e=f-s),o=e;o>=0;o--){for(var c=!0,l=0;l<s;l++)if(h(t,o+l)!==h(r,l)){c=!1;break}if(c)return o}return-1}function A(t,r,e,n){e=Number(e)||0;var i=t.length-e;n?(n=Number(n))>i&&(n=i):n=i;var o=r.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var u=0;u<n;++u){var f=parseInt(r.substr(2*u,2),16);if(isNaN(f))return u;t[e+u]=f}return u}function m(t,r,e,n){return Q($(r,t.length-e),t,e,n)}function P(t,r,e,n){return Q(G(r),t,e,n)}function T(t,r,e,n){return P(t,r,e,n)}function B(t,r,e,n){return Q(K(r),t,e,n)}function U(t,r,e,n){return Q(H(r,t.length-e),t,e,n)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function Y(t,r,e){e=Math.min(t.length,e);for(var n=[],i=r;i<e;){var o,u,f,s,h=t[i],a=null,c=h>239?4:h>223?3:h>191?2:1;if(i+c<=e)switch(c){case 1:h<128&&(a=h);break;case 2:128==(192&(o=t[i+1]))&&(s=(31&h)<<6|63&o)>127&&(a=s);break;case 3:o=t[i+1],u=t[i+2],128==(192&o)&&128==(192&u)&&(s=(15&h)<<12|(63&o)<<6|63&u)>2047&&(s<55296||s>57343)&&(a=s);break;case 4:o=t[i+1],u=t[i+2],f=t[i+3],128==(192&o)&&128==(192&u)&&128==(192&f)&&(s=(15&h)<<18|(63&o)<<12|(63&u)<<6|63&f)>65535&&s<1114112&&(a=s)}null===a?(a=65533,c=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=c}return O(n)}exports.Buffer=f,exports.SlowBuffer=d,exports.INSPECT_MAX_BYTES=50,f.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:i(),exports.kMaxLength=o(),f.poolSize=8192,f._augment=function(t){return t.__proto__=f.prototype,t},f.from=function(t,r,e){return s(null,t,r,e)},f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0})),f.alloc=function(t,r,e){return a(null,t,r,e)},f.allocUnsafe=function(t){return c(null,t)},f.allocUnsafeSlow=function(t){return c(null,t)},f.isBuffer=function(t){return!(null==t||!t._isBuffer)},f.compare=function(t,r){if(!f.isBuffer(t)||!f.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var e=t.length,n=r.length,i=0,o=Math.min(e,n);i<o;++i)if(t[i]!==r[i]){e=t[i],n=r[i];break}return e<n?-1:n<e?1:0},f.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(t,r){if(!n(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return f.alloc(0);var e;if(void 0===r)for(r=0,e=0;e<t.length;++e)r+=t[e].length;var i=f.allocUnsafe(r),o=0;for(e=0;e<t.length;++e){var u=t[e];if(!f.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(i,o),o+=u.length}return i},f.byteLength=v,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)b(this,r,r+1);return this},f.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)b(this,r,r+3),b(this,r+1,r+2);return this},f.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)b(this,r,r+7),b(this,r+1,r+6),b(this,r+2,r+5),b(this,r+3,r+4);return this},f.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?Y(this,0,t):E.apply(this,arguments)},f.prototype.equals=function(t){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===f.compare(this,t)},f.prototype.inspect=function(){var t="",r=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},f.prototype.compare=function(t,r,e,n,i){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===e&&(e=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),r<0||e>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&r>=e)return 0;if(n>=i)return-1;if(r>=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),u=(e>>>=0)-(r>>>=0),s=Math.min(o,u),h=this.slice(n,i),a=t.slice(r,e),c=0;c<s;++c)if(h[c]!==a[c]){o=h[c],u=a[c];break}return o<u?-1:u<o?1:0},f.prototype.includes=function(t,r,e){return-1!==this.indexOf(t,r,e)},f.prototype.indexOf=function(t,r,e){return R(this,t,r,e,!0)},f.prototype.lastIndexOf=function(t,r,e){return R(this,t,r,e,!1)},f.prototype.write=function(t,r,e,n){if(void 0===r)n="utf8",e=this.length,r=0;else if(void 0===e&&"string"==typeof r)n=r,e=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0,isFinite(e)?(e|=0,void 0===n&&(n="utf8")):(n=e,e=void 0)}var i=this.length-r;if((void 0===e||e>i)&&(e=i),t.length>0&&(e<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return A(this,t,r,e);case"utf8":case"utf-8":return m(this,t,r,e);case"ascii":return P(this,t,r,e);case"latin1":case"binary":return T(this,t,r,e);case"base64":return B(this,t,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,r,e);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function O(t){var r=t.length;if(r<=I)return String.fromCharCode.apply(String,t);for(var e="",n=0;n<r;)e+=String.fromCharCode.apply(String,t.slice(n,n+=I));return e}function L(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(127&t[i]);return n}function D(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(t[i]);return n}function x(t,r,e){var n=t.length;(!r||r<0)&&(r=0),(!e||e<0||e>n)&&(e=n);for(var i="",o=r;o<e;++o)i+=Z(t[o]);return i}function C(t,r,e){for(var n=t.slice(r,e),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function M(t,r,e){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+r>e)throw new RangeError("Trying to access beyond buffer length")}function k(t,r,e,n,i,o){if(!f.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>i||r<o)throw new RangeError('"value" argument is out of bounds');if(e+n>t.length)throw new RangeError("Index out of range")}function N(t,r,e,n){r<0&&(r=65535+r+1);for(var i=0,o=Math.min(t.length-e,2);i<o;++i)t[e+i]=(r&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function z(t,r,e,n){r<0&&(r=4294967295+r+1);for(var i=0,o=Math.min(t.length-e,4);i<o;++i)t[e+i]=r>>>8*(n?i:3-i)&255}function F(t,r,e,n,i,o){if(e+n>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function j(t,r,n,i,o){return o||F(t,r,n,4,3.4028234663852886e38,-3.4028234663852886e38),e.write(t,r,n,i,23,4),n+4}function q(t,r,n,i,o){return o||F(t,r,n,8,1.7976931348623157e308,-1.7976931348623157e308),e.write(t,r,n,i,52,8),n+8}f.prototype.slice=function(t,r){var e,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(r=void 0===r?n:~~r)<0?(r+=n)<0&&(r=0):r>n&&(r=n),r<t&&(r=t),f.TYPED_ARRAY_SUPPORT)(e=this.subarray(t,r)).__proto__=f.prototype;else{var i=r-t;e=new f(i,void 0);for(var o=0;o<i;++o)e[o]=this[o+t]}return e},f.prototype.readUIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n},f.prototype.readUIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t+--r],i=1;r>0&&(i*=256);)n+=this[t+--r]*i;return n},f.prototype.readUInt8=function(t,r){return r||M(t,1,this.length),this[t]},f.prototype.readUInt16LE=function(t,r){return r||M(t,2,this.length),this[t]|this[t+1]<<8},f.prototype.readUInt16BE=function(t,r){return r||M(t,2,this.length),this[t]<<8|this[t+1]},f.prototype.readUInt32LE=function(t,r){return r||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},f.prototype.readUInt32BE=function(t,r){return r||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},f.prototype.readIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*r)),n},f.prototype.readIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=r,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*r)),o},f.prototype.readInt8=function(t,r){return r||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},f.prototype.readInt16LE=function(t,r){r||M(t,2,this.length);var e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt16BE=function(t,r){r||M(t,2,this.length);var e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt32LE=function(t,r){return r||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},f.prototype.readInt32BE=function(t,r){return r||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},f.prototype.readFloatLE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!0,23,4)},f.prototype.readFloatBE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!1,23,4)},f.prototype.readDoubleLE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!0,52,8)},f.prototype.readDoubleBE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!1,52,8)},f.prototype.writeUIntLE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=1,o=0;for(this[r]=255&t;++o<e&&(i*=256);)this[r+o]=t/i&255;return r+e},f.prototype.writeUIntBE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=e-1,o=1;for(this[r+i]=255&t;--i>=0&&(o*=256);)this[r+i]=t/o&255;return r+e},f.prototype.writeUInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,255,0),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=255&t,r+1},f.prototype.writeUInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeUInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeUInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t):z(this,t,r,!0),r+4},f.prototype.writeUInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeIntLE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=0,u=1,f=0;for(this[r]=255&t;++o<e&&(u*=256);)t<0&&0===f&&0!==this[r+o-1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeIntBE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=e-1,u=1,f=0;for(this[r+o]=255&t;--o>=0&&(u*=256);)t<0&&0===f&&0!==this[r+o+1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,127,-128),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=255&t,r+1},f.prototype.writeInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):z(this,t,r,!0),r+4},f.prototype.writeInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeFloatLE=function(t,r,e){return j(this,t,r,!0,e)},f.prototype.writeFloatBE=function(t,r,e){return j(this,t,r,!1,e)},f.prototype.writeDoubleLE=function(t,r,e){return q(this,t,r,!0,e)},f.prototype.writeDoubleBE=function(t,r,e){return q(this,t,r,!1,e)},f.prototype.copy=function(t,r,e,n){if(e||(e=0),n||0===n||(n=this.length),r>=t.length&&(r=t.length),r||(r=0),n>0&&n<e&&(n=e),n===e)return 0;if(0===t.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(e<0||e>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-r<n-e&&(n=t.length-r+e);var i,o=n-e;if(this===t&&e<r&&r<n)for(i=o-1;i>=0;--i)t[i+r]=this[i+e];else if(o<1e3||!f.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+r]=this[i+e];else Uint8Array.prototype.set.call(t,this.subarray(e,e+o),r);return o},f.prototype.fill=function(t,r,e,n){if("string"==typeof t){if("string"==typeof r?(n=r,r=0,e=this.length):"string"==typeof e&&(n=e,e=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!f.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(r<0||this.length<r||this.length<e)throw new RangeError("Out of range index");if(e<=r)return this;var o;if(r>>>=0,e=void 0===e?this.length:e>>>0,t||(t=0),"number"==typeof t)for(o=r;o<e;++o)this[o]=t;else{var u=f.isBuffer(t)?t:$(new f(t,n).toString()),s=u.length;for(o=0;o<e-r;++o)this[o+r]=u[o%s]}return this};var V=/[^+\/0-9A-Za-z-_]/g;function X(t){if((t=J(t).replace(V,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function J(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Z(t){return t<16?"0"+t.toString(16):t.toString(16)}function $(t,r){var e;r=r||1/0;for(var n=t.length,i=null,o=[],u=0;u<n;++u){if((e=t.charCodeAt(u))>55295&&e<57344){if(!i){if(e>56319){(r-=3)>-1&&o.push(239,191,189);continue}if(u+1===n){(r-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(r-=3)>-1&&o.push(239,191,189),i=e;continue}e=65536+(i-55296<<10|e-56320)}else i&&(r-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((r-=1)<0)break;o.push(e)}else if(e<2048){if((r-=2)<0)break;o.push(e>>6|192,63&e|128)}else if(e<65536){if((r-=3)<0)break;o.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return o}function G(t){for(var r=[],e=0;e<t.length;++e)r.push(255&t.charCodeAt(e));return r}function H(t,r){for(var e,n,i,o=[],u=0;u<t.length&&!((r-=2)<0);++u)n=(e=t.charCodeAt(u))>>8,i=e%256,o.push(i),o.push(n);return o}function K(t){return r.toByteArray(X(t))}function Q(t,r,e,n){for(var i=0;i<n&&!(i+e>=r.length||i>=t.length);++i)r[i+e]=t[i];return i}function W(t){return t!=t}
},{"base64-js":"FRly","ieee754":"Quj6","isarray":"aqZJ","buffer":"aMB2"}],"Prd1":[function(require,module,exports) {
var global = arguments[3];
var Buffer = require("buffer").Buffer;
var e=arguments[3],t=require("buffer").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.composite=_n,exports.convertFilter=bn,exports.derefLayers=On,exports.diff=Un,exports.featureFilter=pn,exports.format=G,exports.migrate=Tn,exports.validate=Ti,exports.validateMapboxApiSupported=Ni,exports.visit=exports.v8=exports.latest=exports.function=exports.expression=exports.ValidationError=exports.ParsingError=exports.Color=void 0;var r=8,o={version:{required:!0,type:"enum",values:[8],doc:"Style specification version number. Must be 8.",example:8},name:{type:"string",doc:"A human-readable name for the style.",example:"Bright"},metadata:{type:"*",doc:"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},center:{type:"array",value:"number",doc:"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:[-73.9749,40.7736]},zoom:{type:"number",doc:"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:12.5},bearing:{type:"number",default:0,period:360,units:"degrees",doc:'Default bearing, in degrees. The bearing is the compass direction that is "up"; for example, a bearing of 90° orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).',example:29},pitch:{type:"number",default:0,units:"degrees",doc:"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:50},light:{type:"light",doc:"The global light source.",example:{anchor:"viewport",color:"white",intensity:.4}},sources:{required:!0,type:"sources",doc:"Data source specifications.",example:{"mapbox-streets":{type:"vector",url:"mapbox://mapbox.mapbox-streets-v6"}}},sprite:{type:"string",doc:"A base URL for retrieving the sprite image and metadata. The extensions `.png`, `.json` and scale factor `@2x.png` will be automatically appended. This property is required if any layer uses the `background-pattern`, `fill-pattern`, `line-pattern`, `fill-extrusion-pattern`, or `icon-image` properties. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://sprites/mapbox/bright-v8"},glyphs:{type:"string",doc:"A URL template for loading signed-distance-field glyph sets in PBF format. The URL must include `{fontstack}` and `{range}` tokens. This property is required if any layer uses the `text-field` layout property. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},transition:{type:"transition",doc:"A global transition definition to use as a default across properties, to be used for timing transitions between one value and the next when no property-specific transition is set. Collision-based symbol fading is controlled independently of the style's `transition` property.",example:{duration:300,delay:0}},layers:{required:!0,type:"array",value:"layer",doc:"Layers will be drawn in the order of this array.",example:[{id:"water",source:"mapbox-streets","source-layer":"water",type:"fill",paint:{"fill-color":"#00ffff"}}]}},n={"*":{type:"source",doc:"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For image and video sources, a URL must be provided. For GeoJSON sources, a URL or inline GeoJSON must be provided."}},i=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],a={type:{required:!0,type:"enum",values:{vector:{doc:"A vector tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`. If specified as a string for a vector tile source, the same property is used across all its source layers."},"*":{type:"*",doc:"Other keys to configure the data source."}},s={type:{required:!0,type:"enum",values:{raster:{doc:"A raster tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},"*":{type:"*",doc:"Other keys to configure the data source."}},l={type:{required:!0,type:"enum",values:{"raster-dem":{doc:"A RGB-encoded raster DEM source"}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},encoding:{type:"enum",values:{terrarium:{doc:"Terrarium format PNG tiles. See https://aws.amazon.com/es/public-datasets/terrain/ for more info."},mapbox:{doc:"Mapbox Terrain RGB tiles. See https://www.mapbox.com/help/access-elevation-data/#mapbox-terrain-rgb for more info."}},default:"mapbox",doc:"The encoding used by this source. Mapbox Terrain RGB is used by default"},"*":{type:"*",doc:"Other keys to configure the data source."}},u={type:{required:!0,type:"enum",values:{geojson:{doc:"A GeoJSON data source."}},doc:"The data type of the GeoJSON source."},data:{type:"*",doc:"A URL to a GeoJSON file, or inline GeoJSON."},maxzoom:{type:"number",default:18,doc:"Maximum zoom level at which to create vector tiles (higher means greater detail at high zoom levels)."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},buffer:{type:"number",default:128,maximum:512,minimum:0,doc:"Size of the tile buffer on each side. A value of 0 produces no buffer. A value of 512 produces a buffer as wide as the tile itself. Larger values produce fewer rendering artifacts near tile edges and slower performance."},tolerance:{type:"number",default:.375,doc:"Douglas-Peucker simplification tolerance (higher means simpler geometries and faster performance)."},cluster:{type:"boolean",default:!1,doc:"If the data is a collection of point features, setting this to true clusters the points by radius into groups. Cluster groups become new `Point` features in the source with additional properties:\n * `cluster` Is `true` if the point is a cluster \n * `cluster_id` A unqiue id for the cluster to be used in conjunction with the [cluster inspection methods](https://www.mapbox.com/mapbox-gl-js/api/#geojsonsource#getclusterexpansionzoom)\n * `point_count` Number of original points grouped into this cluster\n * `point_count_abbreviated` An abbreviated point count"},clusterRadius:{type:"number",default:50,minimum:0,doc:"Radius of each cluster if clustering is enabled. A value of 512 indicates a radius equal to the width of a tile."},clusterMaxZoom:{type:"number",doc:"Max zoom on which to cluster points if clustering is enabled. Defaults to one zoom less than maxzoom (so that last zoom features are not clustered)."},clusterProperties:{type:"*",doc:'An object defining custom properties on the generated clusters if clustering is enabled, aggregating values from clustered points. Has the form `{"property_name": [operator, map_expression]}`. `operator` is any expression function that accepts at least 2 operands (e.g. `"+"` or `"max"`) — it accumulates the property value from clusters/points the cluster contains; `map_expression` produces the value of a single point.\n\nExample: `{"sum": ["+", ["get", "scalerank"]]}`.\n\nFor more advanced use cases, in place of `operator`, you can use a custom reduce expression that references a special `["accumulated"]` value, e.g.:\n`{"sum": [["+", ["accumulated"], ["get", "sum"]], ["get", "scalerank"]]}`'},lineMetrics:{type:"boolean",default:!1,doc:"Whether to calculate line distance metrics. This is required for line layers that specify `line-gradient` values."},generateId:{type:"boolean",default:!1,doc:"Whether to generate ids for the geojson features. When enabled, the `feature.id` property will be auto assigned based on its index in the `features` array, over-writing any previous values."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`."}},p={type:{required:!0,type:"enum",values:{video:{doc:"A video data source."}},doc:"The data type of the video source."},urls:{required:!0,type:"array",value:"string",doc:"URLs to video content in order of preferred format."},coordinates:{required:!0,doc:"Corners of video specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},c={type:{required:!0,type:"enum",values:{image:{doc:"An image data source."}},doc:"The data type of the image source."},url:{required:!0,type:"string",doc:"URL that points to an image."},coordinates:{required:!0,doc:"Corners of image specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},d={id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:{fill:{doc:"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},line:{doc:"A stroked line.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},symbol:{doc:"An icon or a text label.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},circle:{doc:"A filled circle.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},heatmap:{doc:"A heatmap.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"fill-extrusion":{doc:"An extruded (3D) polygon.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},raster:{doc:"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},hillshade:{doc:"Client-side hillshading visualization based on DEM data. Currently, the implementation only supports Mapbox Terrain RGB and Mapzen Terrarium tiles.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},background:{doc:"The background color or pattern of the map.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}}},doc:"Rendering type of this layer.",required:!0},metadata:{type:"*",doc:"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},"source-layer":{type:"string",doc:"Layer to use from a vector tile source. Required for vector tile sources; prohibited for all other source types, including GeoJSON sources."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."},filter:{type:"filter",doc:"A expression specifying conditions on source features. Only features that match the filter are displayed. Zoom expressions in filters are only evaluated at integer zoom levels. The `feature-state` expression is not supported in filter expressions."},layout:{type:"layout",doc:"Layout properties for the layer."},paint:{type:"paint",doc:"Default paint properties for this layer."}},h=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],f={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},y={"fill-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},m={"circle-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"},"data-driven styling":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},v={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},g={"line-cap":{type:"enum",values:{butt:{doc:"A cap with a squared-off end which is drawn to the exact endpoint of the line."},round:{doc:"A cap with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},square:{doc:"A cap with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."}},default:"butt",doc:"The display of line endings.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{doc:"A join with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."},round:{doc:"A join with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},miter:{doc:"A join with a sharp, angled corner which is drawn with the outer sides beyond the endpoint of the path until they meet."}},default:"miter",doc:"The display of lines when joining.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,doc:"Used to automatically convert miter joins to bevel joins for sharp angles.",requires:[{"line-join":"miter"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,doc:"Used to automatically convert round joins to miter joins for shallow angles.",requires:[{"line-join":"round"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},b={"symbol-placement":{type:"enum",values:{point:{doc:"The label is placed at the point where the geometry is located."},line:{doc:"The label is placed along the line of the geometry. Can only be used on `LineString` and `Polygon` geometries."},"line-center":{doc:"The label is placed at the center of the line of the geometry. Can only be used on `LineString` and `Polygon` geometries. Note that a single feature in a vector tile may contain multiple line geometries."}},default:"point",doc:"Label placement relative to its geometry.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`line-center` value":{js:"0.47.0",android:"6.4.0",ios:"4.3.0",macos:"0.10.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",doc:"Distance between two symbol anchors.",requires:[{"symbol-placement":"line"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,doc:"If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don't have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer. When using a client that supports global collision detection, like Mapbox GL JS version 0.42.0 or greater, enabling this property is not needed to prevent clipped labels at tile boundaries.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with lower sort keys are drawn and placed first.  When `icon-allow-overlap` or `text-allow-overlap` is `false`, features with a lower sort key will have priority during placement. When `icon-allow-overlap` or `text-allow-overlap` is set to `true`, features with a higher sort key will overlap over features with a lower sort key.","sdk-support":{"basic functionality":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"},"data-driven styling":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"viewport-y":{doc:"Sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},source:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, no sorting is applied; symbols are rendered in the same order as the source data."}},default:"auto",doc:"Determines whether overlapping symbols in the same layer are rendered in the order that they appear in the data source or by their y-position relative to the viewport. To control the order and prioritization of symbols otherwise, use `symbol-sort-key`.","sdk-support":{"basic functionality":{js:"0.49.0",android:"6.6.0",ios:"4.5.0",macos:"0.12.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,doc:"If true, the icon will be visible even if it collides with other previously drawn symbols.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the icon.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,doc:"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns icons east-west. When `symbol-placement` is set to `line` or `line-center`, aligns icon x-axes with the line."},viewport:{doc:"Produces icons whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",doc:"Scales the original size of the icon by the provided factor. The new pixel size of the image will be the original pixel size multiplied by `icon-size`. 1 is the original size; 3 triples the size of the image.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{doc:"The icon is displayed at its intrinsic aspect ratio."},width:{doc:"The icon is scaled in the x-dimension to fit the width of the text."},height:{doc:"The icon is scaled in the y-dimension to fit the height of the text."},both:{doc:"The icon is scaled in both x- and y-dimensions."}},default:"none",doc:"Scales the icon to fit around the associated text.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"stretchable icons":{js:"1.6.0",android:"9.2.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",doc:"Size of the additional area added to dimensions determined by `icon-text-fit`, in clockwise order: top, right, bottom, left.",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",doc:"Name of image in sprite to use for drawing an image background.",tokens:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the icon clockwise.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the icon bounding box used for detecting symbol collisions.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,doc:"If true, the icon may be flipped to prevent it from being rendered upside-down.",requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],doc:"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up. Each component is multiplied by the value of `icon-size` to obtain the final offset in pixels. When combined with `icon-rotate` the offset will be as if the rotated direction was up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{doc:"The center of the icon is placed closest to the anchor."},left:{doc:"The left side of the icon is placed closest to the anchor."},right:{doc:"The right side of the icon is placed closest to the anchor."},top:{doc:"The top of the icon is placed closest to the anchor."},bottom:{doc:"The bottom of the icon is placed closest to the anchor."},"top-left":{doc:"The top left corner of the icon is placed closest to the anchor."},"top-right":{doc:"The top right corner of the icon is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the icon is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the icon is placed closest to the anchor."}},default:"center",doc:"Part of the icon placed closest to the anchor.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{doc:"The icon is aligned to the plane of the map."},viewport:{doc:"The icon is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `icon-rotation-alignment`."}},default:"auto",doc:"Orientation of icon when map is pitched.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{doc:"The text is aligned to the plane of the map."},viewport:{doc:"The text is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `text-rotation-alignment`."}},default:"auto",doc:"Orientation of text when map is pitched.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns text east-west. When `symbol-placement` is set to `line` or `line-center`, aligns text x-axes with the line."},viewport:{doc:"Produces glyphs whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of the individual glyphs forming the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,doc:"Value to use for a text label. If a plain `string` is provided, it will be treated as a `formatted` with default/inherited formatting options.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],doc:"Font stack to use for displaying text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",doc:"Font size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",doc:"The maximum line width for text wrapping.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",doc:"Text leading value for multi-line text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",doc:"Text tracking amount.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{doc:"The text is aligned towards the anchor position."},left:{doc:"The text is aligned to the left."},center:{doc:"The text is centered."},right:{doc:"The text is aligned to the right."}},default:"center",doc:"Text justification options.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},auto:{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,doc:"Radial offset of text, in the direction of the symbol's anchor. Useful in combination with `text-variable-anchor`, which defaults to using the two-dimensional `text-offset` if present.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"},"data-driven styling":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},requires:["text-field",{"symbol-placement":["point"]}],doc:"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations: the renderer will attempt to place the label at each location, in order, before moving onto the next label. Use `text-justify: auto` to choose justification based on anchor position. To apply an offset, use the `text-radial-offset` or the two-dimensional `text-offset`.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},default:"center",doc:"Part of the text placed closest to the anchor.",requires:["text-field",{"!":"text-variable-anchor"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",doc:"Maximum angle change between adjacent characters.",requires:["text-field",{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{doc:"If a text's language supports horizontal writing mode, symbols with point placement would be laid out horizontally."},vertical:{doc:"If a text's language supports vertical writing mode, symbols with point placement would be laid out vertically."}},doc:"The property allows control over a symbol's orientation. Note that the property values act as a hint, so that a symbol whose language doesn’t support the provided orientation will be laid out in its natural orientation. Example: English point symbol will be rendered horizontally even if array value contains single 'vertical' enum value. The order of elements in an array define priority order for the placement of an orientation variant.",requires:["text-field",{"symbol-placement":["point"]}],"sdk-support":{"basic functionality":{js:"1.3.0",android:"8.3.0",ios:"5.3.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the text clockwise.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the text bounding box used for detecting symbol collisions.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,doc:"If true, the text may be flipped vertically to prevent it from being rendered upside-down.",requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{doc:"The text is not altered."},uppercase:{doc:"Forces all letters to be displayed in uppercase."},lowercase:{doc:"Forces all letters to be displayed in lowercase."}},default:"none",doc:"Specifies how to capitalize text, similar to the CSS `text-transform` property.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",doc:"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up. If used with text-variable-anchor, input values will be taken as absolute values. Offsets along the x- and y-axis will be applied automatically based on the anchor position.",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,doc:"If true, the text will be visible even if it collides with other previously drawn symbols.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,doc:"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.",requires:["text-field","icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},x={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},w={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},k={type:"array",value:"*",doc:"A filter selects specific features from a layer."},j={type:"enum",values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key] ≠ value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key] ≥ value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key] ≤ value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key] ∈ {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key] ∉ {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0 ∧ ... ∧ fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0 ∨ ... ∨ fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `¬f0 ∧ ... ∧ ¬fn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'},within:{doc:'`["within", object]` feature geometry is within object geometry'}},doc:"The filter operator."},z={type:"enum",values:{Point:{doc:"Filter to point geometries."},LineString:{doc:"Filter to line geometries."},Polygon:{doc:"Filter to polygon geometries."}},doc:"The geometry type for the filter to select."},S={type:"array",minimum:0,maximum:24,value:["number","color"],length:2,doc:"Zoom level and value pair."},T={type:"array",value:"*",minimum:1,doc:"An expression defines a function that can be used for data-driven style properties or feature filters."},_={doc:"",type:"enum",values:{let:{doc:'Binds expressions to named variables, which can then be referenced in the result expression using ["var", "variable_name"].',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},var:{doc:'References variable bound using "let".',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},literal:{doc:"Provides a literal array or object value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},array:{doc:"Asserts that the input is an array (optionally with a specific item type and length).  If, when the input expression is evaluated, it is not of the asserted type, then this assertion will cause the whole expression to be aborted.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},at:{doc:"Retrieves an item from an array.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},in:{doc:"Determines whether an item exists in an array or a substring exists in a string.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.6.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"index-of":{doc:"Returns the first position at which an item can be found in an array or a substring can be found in a string, or `-1` if the input cannot be found. Accepts an optional index from where to begin the search.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0"}}},slice:{doc:"Returns an item from an array or a substring from a string from a specified start index, or between a start index and an end index if set. The return value is inclusive of the start index but not of the end index.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0"}}},case:{doc:"Selects the first output whose corresponding test condition evaluates to true, or the fallback value otherwise.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},match:{doc:'Selects the output whose label value matches the input value, or the fallback value if no match is found. The input can be any expression (e.g. `["get", "building_type"]`). Each label must be either:\n - a single literal value; or\n - an array of literal values, whose values must be all strings or all numbers (e.g. `[100, 101]` or `["c", "b"]`). The input matches if any of the values in the array matches, similar to the `"in"` operator.\nEach label must be unique. If the input type does not match the type of the labels, the result will be the fallback value.',group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},coalesce:{doc:"Evaluates each expression in turn until the first non-null value is obtained, and returns that value.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},step:{doc:'Produces discrete, stepped results by evaluating a piecewise-constant function defined by pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. Returns the output value of the stop just less than the input, or the first output if the input is less than the first stop.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},interpolate:{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. The output type must be `number`, `array<number>`, or `color`.\n\nInterpolation types:\n- `["linear"]`: Interpolates linearly between the pair of stops just less than and just greater than the input.\n- `["exponential", base]`: Interpolates exponentially between the stops just less than and just greater than the input. `base` controls the rate at which the output increases: higher values make the output increase more towards the high end of the range. With values close to 1 the output increases linearly.\n- `["cubic-bezier", x1, y1, x2, y2]`: Interpolates using the cubic bezier curve defined by the given control points.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"interpolate-hcl":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the Hue-Chroma-Luminance color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},"interpolate-lab":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the CIELAB color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},ln2:{doc:"Returns mathematical constant ln(2).",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},pi:{doc:"Returns the mathematical constant pi.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},e:{doc:"Returns the mathematical constant e.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},typeof:{doc:"Returns a string describing the type of the given value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},string:{doc:"Asserts that the input value is a string. If multiple values are provided, each one is evaluated in order until a string is obtained. If none of the inputs are strings, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},number:{doc:"Asserts that the input value is a number. If multiple values are provided, each one is evaluated in order until a number is obtained. If none of the inputs are numbers, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},boolean:{doc:"Asserts that the input value is a boolean. If multiple values are provided, each one is evaluated in order until a boolean is obtained. If none of the inputs are booleans, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},object:{doc:"Asserts that the input value is an object. If multiple values are provided, each one is evaluated in order until an object is obtained. If none of the inputs are objects, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},collator:{doc:"Returns a `collator` for use in locale-dependent comparison operations. The `case-sensitive` and `diacritic-sensitive` options default to `false`. The `locale` argument specifies the IETF language tag of the locale to use. If none is provided, the default locale is used. If the requested locale is not available, the `collator` will use a system-defined fallback locale. Use `resolved-locale` to test the results of locale fallback behavior.",group:"Types","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},format:{doc:'Returns a `formatted` string for displaying mixed-format text in the `text-field` property. The input may contain a string literal or expression, including an [`\'image\'`](#types-image) expression. Strings may be followed by a style override object that supports the following properties:\n- `"text-font"`: Overrides the font stack specified by the root layout property.\n- `"text-color"`: Overrides the color specified by the root paint property.\n- `"font-scale"`: Applies a scaling factor on `text-size` as specified by the root layout property.',group:"Types","sdk-support":{"basic functionality":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-font":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"font-scale":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-color":{js:"1.3.0",android:"7.3.0",ios:"4.10.0",macos:"0.14.0"},image:{js:"1.6.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},image:{doc:"Returns an `image` type for use in `icon-image`, `*-pattern` entries and as a section in the `format` expression. If set, the `image` argument will check that the requested image exists in the style and will return either the resolved image name or `null`, depending on whether or not the image is currently in the style. This validation process is synchronous and requires the image to have been added to the style before requesting it in the `image` argument.",group:"Types","sdk-support":{"basic functionality":{js:"1.4.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},"number-format":{doc:"Converts the input number into a string representation using the providing formatting rules. If set, the `locale` argument specifies the locale to use, as a BCP 47 language tag. If set, the `currency` argument specifies an ISO 4217 code to use for currency-style formatting. If set, the `min-fraction-digits` and `max-fraction-digits` arguments specify the minimum and maximum number of fractional digits to include.",group:"Types","sdk-support":{"basic functionality":{js:"0.54.0"}}},"to-string":{doc:'Converts the input value to a string. If the input is `null`, the result is `""`. If the input is a boolean, the result is `"true"` or `"false"`. If the input is a number, it is converted to a string as specified by the ["NumberToString" algorithm](https://tc39.github.io/ecma262/#sec-tostring-applied-to-the-number-type) of the ECMAScript Language Specification. If the input is a color, it is converted to a string of the form `"rgba(r,g,b,a)"`, where `r`, `g`, and `b` are numerals ranging from 0 to 255, and `a` ranges from 0 to 1. Otherwise, the input is converted to a string in the format specified by the [`JSON.stringify`](https://tc39.github.io/ecma262/#sec-json.stringify) function of the ECMAScript Language Specification.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-number":{doc:'Converts the input value to a number, if possible. If the input is `null` or `false`, the result is 0. If the input is `true`, the result is 1. If the input is a string, it is converted to a number as specified by the ["ToNumber Applied to the String Type" algorithm](https://tc39.github.io/ecma262/#sec-tonumber-applied-to-the-string-type) of the ECMAScript Language Specification. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-boolean":{doc:"Converts the input value to a boolean. The result is `false` when then input is an empty string, 0, `false`, `null`, or `NaN`; otherwise it is `true`.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-rgba":{doc:"Returns a four-element array containing the input color's red, green, blue, and alpha components, in that order.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-color":{doc:"Converts the input value to a color. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgb:{doc:"Creates a color value from red, green, and blue components, which must range between 0 and 255, and an alpha component of 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgba:{doc:"Creates a color value from red, green, blue components, which must range between 0 and 255, and an alpha component which must range between 0 and 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},get:{doc:"Retrieves a property value from the current feature's properties, or from another object if a second argument is provided. Returns null if the requested property is missing.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},has:{doc:"Tests for the presence of an property value in the current feature's properties, or from another object if a second argument is provided.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},length:{doc:"Gets the length of an array or string.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},properties:{doc:'Gets the feature properties object.  Note that in some cases, it may be more efficient to use ["get", "property_name"] directly.',group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"feature-state":{doc:"Retrieves a property value from the current feature's state. Returns null if the requested property is not present on the feature's state. A feature's state is not part of the GeoJSON or vector tile data, and must be set programmatically on each feature. Features are identified by their `id` attribute, which must be an integer or a string that can be cast to an integer. Note that [\"feature-state\"] can only be used with paint properties that support data-driven styling.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.46.0"}}},"geometry-type":{doc:"Gets the feature's geometry type: `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},id:{doc:"Gets the feature's id, if it has one.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},zoom:{doc:'Gets the current zoom level.  Note that in style layout and paint properties, ["zoom"] may only appear as the input to a top-level "step" or "interpolate" expression.',group:"Zoom","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"heatmap-density":{doc:"Gets the kernel density estimation of a pixel in a heatmap layer, which is a relative measure of how many data points are crowded around a particular pixel. Can only be used in the `heatmap-color` property.",group:"Heatmap","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"line-progress":{doc:"Gets the progress along a gradient line. Can only be used in the `line-gradient` property.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.6.0",macos:"0.12.0"}}},accumulated:{doc:"Gets the value of a cluster property accumulated so far. Can only be used in the `clusterProperties` option of a clustered GeoJSON source.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.53.0"}}},"+":{doc:"Returns the sum of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"*":{doc:"Returns the product of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"-":{doc:"For two inputs, returns the result of subtracting the second input from the first. For a single input, returns the result of subtracting it from 0.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"/":{doc:"Returns the result of floating point division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"%":{doc:"Returns the remainder after integer division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"^":{doc:"Returns the result of raising the first input to the power specified by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sqrt:{doc:"Returns the square root of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log10:{doc:"Returns the base-ten logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ln:{doc:"Returns the natural logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log2:{doc:"Returns the base-two logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sin:{doc:"Returns the sine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},cos:{doc:"Returns the cosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},tan:{doc:"Returns the tangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},asin:{doc:"Returns the arcsine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},acos:{doc:"Returns the arccosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},atan:{doc:"Returns the arctangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},min:{doc:"Returns the minimum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},max:{doc:"Returns the maximum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},round:{doc:'Rounds the input to the nearest integer. Halfway values are rounded away from zero. For example, `["round", -1.5]` evaluates to -2.',group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},abs:{doc:"Returns the absolute value of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ceil:{doc:"Returns the smallest integer that is greater than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},floor:{doc:"Returns the largest integer that is less than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},distance:{doc:"Returns the shortest distance in meters between the evaluated feature and the input geometry. The input value can be a valid GeoJSON of type `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Distance values returned may vary in precision due to loss in precision from encoding geometries, particularly below zoom level 13.",group:"Math","sdk-support":{"basic functionality":{android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}}},"==":{doc:"Returns `true` if the input values are equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"!=":{doc:"Returns `true` if the input values are not equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">":{doc:"Returns `true` if the first input is strictly greater than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<":{doc:"Returns `true` if the first input is strictly less than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">=":{doc:"Returns `true` if the first input is greater than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<=":{doc:"Returns `true` if the first input is less than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},all:{doc:"Returns `true` if all the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `false`, the result is `false` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},any:{doc:"Returns `true` if any of the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `true`, the result is `true` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"!":{doc:"Logical negation. Returns `true` if the input is `false`, and `false` if the input is `true`.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},within:{doc:"Returns `true` if the evaluated feature is fully contained inside a boundary of the input geometry, `false` otherwise. The input value can be a valid GeoJSON of type `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Supported features for evaluation:\n- `Point`: Returns `false` if a point is on the boundary or falls outside the boundary.\n- `LineString`: Returns `false` if any part of a line falls outside the boundary, the line intersects the boundary, or a line's endpoint is on the boundary.",group:"Decision","sdk-support":{"basic functionality":{js:"1.9.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"is-supported-script":{doc:"Returns `true` if the input string is expected to render legibly. Returns `false` if the input string contains sections that cannot be rendered without potential loss of meaning (e.g. Indic scripts that require complex text shaping, or right-to-left scripts if the the `mapbox-gl-rtl-text` plugin is not in use in Mapbox GL JS).",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.6.0"}}},upcase:{doc:"Returns the input string converted to uppercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},downcase:{doc:"Returns the input string converted to lowercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},concat:{doc:"Returns a `string` consisting of the concatenation of the inputs. Each input is converted to a string as if by `to-string`.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"resolved-locale":{doc:"Returns the IETF language tag of the locale being used by the provided `collator`. This can be used to determine the default system locale, or to determine if a requested locale was successfully loaded.",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}}}},A={anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0° (0° when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0° when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0°, directly above, to 180°, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}}},I=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],O={"fill-antialias":{type:"boolean",default:!0,doc:"Whether or not the fill should be antialiased.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill layer. In contrast to the `fill-color`, this value will also affect the 1px stroke around the fill, if the stroke is used.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",doc:"The color of the filled part of this layer. This color can be specified as `rgba` with an alpha component and the color's opacity will not affect the opacity of the 1px stroke, if it is used.",transition:!0,requires:[{"!":"fill-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",doc:"The outline color of the fill. Matches the value of `fill-color` if unspecified.",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{doc:"The fill is translated relative to the map."},viewport:{doc:"The fill is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-translate`.",default:"map",requires:["fill-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},q={"line-opacity":{type:"number",doc:"The opacity at which the line will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",doc:"The color with which the line will be drawn.",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.23.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{doc:"The line is translated relative to the map."},viewport:{doc:"The line is translated relative to the viewport."}},doc:"Controls the frame of reference for `line-translate`.",default:"map",requires:["line-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",doc:"Stroke thickness.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,doc:"Draws a line casing outside of a line's actual path. Value indicates the width of the inner gap.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,doc:"The line's offset. For linear features, a positive value offsets the line to the right, relative to the direction of the line, and a negative value to the left. For polygon features, a positive value results in an inset, and a negative value results in an outset.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.12.1",android:"3.0.0",ios:"3.1.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Blur applied to the line, in pixels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",doc:"Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width. Note that GeoJSON sources with `lineMetrics: true` specified won't render dashed lines to the expected scale. Also note that zoom-dependent expressions will be evaluated only at integer zoom levels.",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",doc:'Defines a gradient with which to color a line feature. Can only be used with GeoJSON sources that specify `"lineMetrics": true`.',transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.4.0",macos:"0.11.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},C={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",doc:"Circle radius.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",doc:"The fill color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,doc:"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",doc:"The opacity at which the circle will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{doc:"The circle is translated relative to the map."},viewport:{doc:"The circle is translated relative to the viewport."}},doc:"Controls the frame of reference for `circle-translate`.",default:"map",requires:["circle-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{doc:"Circles are scaled according to their apparent distance to the camera."},viewport:{doc:"Circles are not scaled."}},default:"map",doc:"Controls the scaling behavior of the circle when the map is pitched.","sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{doc:"The circle is aligned to the plane of the map."},viewport:{doc:"The circle is aligned to the plane of the viewport."}},default:"viewport",doc:"Orientation of circle when map is pitched.","sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The width of the circle's stroke. Strokes are placed outside of the `circle-radius`.","sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",doc:"The stroke color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",doc:"The opacity of the circle's stroke.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},E={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",doc:"Radius of influence of one heatmap point in pixels. Increasing the value makes the heatmap smoother, but less detailed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,doc:"A measure of how much an individual point contributes to the heatmap. A value of 10 would be equivalent to having 10 points of weight 1 in the same spot. Especially useful when combined with clustering.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,doc:"Similar to `heatmap-weight` but controls the intensity of the heatmap globally. Primarily used for adjusting the heatmap based on zoom level.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],doc:'Defines the color of each pixel based on its density value in a heatmap.  Should be an expression that uses `["heatmap-density"]` as input.',transition:!1,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",doc:"The global opacity at which the heatmap layer will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},M={"icon-opacity":{doc:"The opacity at which the icon will be drawn.",type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,doc:"The color of the icon. This can only be used with sdf icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the icon's halo. Icon halos can only be used with SDF icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the icon outline.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Fade out the halo towards the outside.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the icon's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{doc:"Icons are translated relative to the map."},viewport:{doc:"Icons are translated relative to the viewport."}},doc:"Controls the frame of reference for `icon-translate`.",default:"map",requires:["icon-image","icon-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",doc:"The opacity at which the text will be drawn.",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",doc:"The color with which the text will be drawn.",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the text's halo, which helps it stand out from backgrounds.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The halo's fadeout distance towards the outside.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the text's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{doc:"The text is translated relative to the map."},viewport:{doc:"The text is translated relative to the viewport."}},doc:"Controls the frame of reference for `text-translate`.",default:"map",requires:["text-field","text-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},N={"raster-opacity":{type:"number",doc:"The opacity at which the image will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",doc:"Rotates hues around the color wheel.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the minimum brightness.",default:0,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the maximum brightness.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",doc:"Increase or reduce the saturation of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",doc:"Increase or reduce the contrast of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",doc:"The resampling/interpolation method to use for overscaling, also known as texture magnification filter",values:{linear:{doc:"(Bi)linear filtering interpolates pixel values using the weighted average of the four closest original source pixels creating a smooth but blurry look when overscaled"},nearest:{doc:"Nearest neighbor filtering interpolates pixel values using the nearest original source pixel creating a sharp but pixelated look when overscaled"}},default:"linear","sdk-support":{"basic functionality":{js:"0.47.0",android:"6.3.0",ios:"4.2.0",macos:"0.9.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",doc:"Fade duration when a new tile is added.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},P={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,doc:"The direction of the light source used to generate the hillshading with 0 as the top of the viewport if `hillshade-illumination-anchor` is set to `viewport` and due north if `hillshade-illumination-anchor` is set to `map`.",transition:!1,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{doc:"The hillshade illumination is relative to the north direction."},viewport:{doc:"The hillshade illumination is relative to the top of the viewport."}},default:"viewport",doc:"Direction of light source when map is rotated.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",doc:"Intensity of the hillshade",default:.5,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",doc:"The shading color of areas that face away from the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",doc:"The shading color of areas that faces towards the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",doc:"The shading color used to accentuate rugged terrain like sharp cliffs and gorges.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},R={"background-color":{type:"color",default:"#000000",doc:"The color with which the background will be drawn.",transition:!0,requires:[{"!":"background-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the background will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},L={duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},D={"*":{type:"string",doc:"A name of a feature property to use as ID for feature state."}},F={$version:r,$root:o,sources:n,source:i,source_vector:a,source_raster:s,source_raster_dem:l,source_geojson:u,source_video:p,source_image:c,layer:d,layout:h,layout_background:f,layout_fill:y,layout_circle:m,layout_heatmap:v,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},"property-type":"constant"}},layout_line:g,layout_symbol:b,layout_raster:x,layout_hillshade:w,filter:k,filter_operator:j,geometry_type:z,function:{expression:{type:"expression",doc:"An expression."},stops:{type:"array",doc:"An array of stops.",value:"function_stop"},base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."},property:{type:"string",doc:"The name of a feature property to use as the function input.",default:"$zoom"},type:{type:"enum",values:{identity:{doc:"Return the input value as the output value."},exponential:{doc:"Generate an output by interpolating between stops just less than and just greater than the function input."},interval:{doc:"Return the output value of the stop just less than the function input."},categorical:{doc:"Return the output value of the stop equal to the function input."}},doc:"The interpolation strategy to use in function evaluation.",default:"exponential"},colorSpace:{type:"enum",values:{rgb:{doc:"Use the RGB color space to interpolate color values"},lab:{doc:"Use the LAB color space to interpolate color values."},hcl:{doc:"Use the HCL color space to interpolate color values, interpolating the Hue, Chroma, and Luminance channels individually."}},doc:"The color space in which colors interpolated. Interpolating colors in perceptual color spaces like LAB and HCL tend to produce color ramps that look more consistent and produce colors that can be differentiated more easily than those interpolated in RGB space.",default:"rgb"},default:{type:"*",required:!1,doc:"A value to serve as a fallback function result when a value isn't otherwise available. It is used in the following circumstances:\n* In categorical functions, when the feature value does not match any of the stop domain values.\n* In property and zoom-and-property functions, when a feature does not contain a value for the specified property.\n* In identity functions, when the feature value is not valid for the style property (for example, if the function is being used for a `circle-color` property but the feature property value is not a string or not a valid color).\n* In interval or exponential property and zoom-and-property functions, when the feature value is not numeric.\nIf no default is provided, the style property's default is used in these circumstances."}},function_stop:S,expression:T,expression_name:_,light:A,paint:I,paint_fill:O,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill extrusion layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",doc:"The base color of the extruded fill. The extrusion's surfaces will be shaded differently based on this color in combination with the root `light` settings. If this color is specified as `rgba` with an alpha component, the alpha component will be ignored; use `fill-extrusion-opacity` to set layer opacity.",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up (on the flat plane), respectively.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{doc:"The fill extrusion is translated relative to the map."},viewport:{doc:"The fill extrusion is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-extrusion-translate`.",default:"map",requires:["fill-extrusion-translate"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing images on extruded fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude this layer.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude the base of this layer. Must be less than or equal to `fill-extrusion-height`.",transition:!0,requires:["fill-extrusion-height"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,doc:"Whether to apply a vertical gradient to the sides of a fill-extrusion layer. If true, sides will be shaded slightly darker farther down.",transition:!1,"sdk-support":{"basic functionality":{js:"0.50.0",ios:"4.7.0",macos:"0.13.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:q,paint_circle:C,paint_heatmap:E,paint_symbol:M,paint_raster:N,paint_hillshade:P,paint_background:R,transition:L,"property-type":{"data-driven":{type:"property-type",doc:"Property is interpolable and can be represented using a property expression."},"cross-faded":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms."},"cross-faded-data-driven":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms. It can be represented using a property expression."},"color-ramp":{type:"property-type",doc:"Property should be specified using a color ramp from which the output color can be sampled based on a property calculation."},"data-constant":{type:"property-type",doc:"Property is interpolable but cannot be represented using a property expression."},constant:{type:"property-type",doc:"Property is constant across all zoom levels and property values."}},promoteId:D};exports.v8=exports.latest=F;var $=/("(?:[^\\"]|\\.)*")|[:,]/g,U=function(e,t){var r,o,n;return t=t||{},r=JSON.stringify([1],void 0,void 0===t.indent?2:t.indent).slice(2,-3),o=""===r?1/0:void 0===t.maxLength?80:t.maxLength,n=t.replacer,function e(t,i,a){var s,l,u,p,c,d,h,f,y,m,v,g;if(t&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0===(v=JSON.stringify(t,n)))return v;if(h=o-i.length-a,v.length<=h&&(y=v.replace($,function(e,t){return t||e+" "})).length<=h)return y;if(null!=n&&(t=JSON.parse(v),n=void 0),"object"==typeof t&&null!==t){if(f=i+r,u=[],l=0,Array.isArray(t))for(m="[",s="]",h=t.length;l<h;l++)u.push(e(t[l],f,l===h-1?0:1)||"null");else for(m="{",s="}",h=(d=Object.keys(t)).length;l<h;l++)p=d[l],c=JSON.stringify(p)+": ",void 0!==(g=e(t[p],f,c.length+(l===h-1?0:1)))&&u.push(c+g);if(u.length>0)return[m,r+u.join(",\n"+f),s].join("\n"+i)}return v}(e,"",0)};function J(e,t){var r={};for(var o in t)void 0!==e[o]&&(r[o]=e[o]);for(var n in e)void 0===r[n]&&(r[n]=e[n]);return r}function G(e,t){return void 0===t&&(t=2),(e=J(e,F.$root)).layers&&(e.layers=e.layers.map(function(e){return J(e,F.layer)})),U(e,{indent:t})}var W="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{};function B(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function V(e,t){return e(t={exports:{}},t.exports),t.exports}var H=V(function(e,t){!function(r){var o=t&&!t.nodeType&&t,n=e&&!e.nodeType&&e,i="object"==typeof W&&W;i.global!==i&&i.window!==i&&i.self!==i||(r=i);var a,s,l=2147483647,u=36,p=1,c=26,d=38,h=700,f=72,y=128,m="-",v=/^xn--/,g=/[^\x20-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,x={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},w=u-p,k=Math.floor,j=String.fromCharCode;function z(e){throw RangeError(x[e])}function S(e,t){for(var r=e.length,o=[];r--;)o[r]=t(e[r]);return o}function T(e,t){var r=e.split("@"),o="";return r.length>1&&(o=r[0]+"@",e=r[1]),o+S((e=e.replace(b,".")).split("."),t).join(".")}function _(e){for(var t,r,o=[],n=0,i=e.length;n<i;)(t=e.charCodeAt(n++))>=55296&&t<=56319&&n<i?56320==(64512&(r=e.charCodeAt(n++)))?o.push(((1023&t)<<10)+(1023&r)+65536):(o.push(t),n--):o.push(t);return o}function A(e){return S(e,function(e){var t="";return e>65535&&(t+=j((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=j(e)}).join("")}function I(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function O(e,t,r){var o=0;for(e=r?k(e/h):e>>1,e+=k(e/t);e>w*c>>1;o+=u)e=k(e/w);return k(o+(w+1)*e/(e+d))}function q(e){var t,r,o,n,i,a,s,d,h,v,g,b=[],x=e.length,w=0,j=y,S=f;for((r=e.lastIndexOf(m))<0&&(r=0),o=0;o<r;++o)e.charCodeAt(o)>=128&&z("not-basic"),b.push(e.charCodeAt(o));for(n=r>0?r+1:0;n<x;){for(i=w,a=1,s=u;n>=x&&z("invalid-input"),((d=(g=e.charCodeAt(n++))-48<10?g-22:g-65<26?g-65:g-97<26?g-97:u)>=u||d>k((l-w)/a))&&z("overflow"),w+=d*a,!(d<(h=s<=S?p:s>=S+c?c:s-S));s+=u)a>k(l/(v=u-h))&&z("overflow"),a*=v;S=O(w-i,t=b.length+1,0==i),k(w/t)>l-j&&z("overflow"),j+=k(w/t),w%=t,b.splice(w++,0,j)}return A(b)}function C(e){var t,r,o,n,i,a,s,d,h,v,g,b,x,w,S,T=[];for(b=(e=_(e)).length,t=y,r=0,i=f,a=0;a<b;++a)(g=e[a])<128&&T.push(j(g));for(o=n=T.length,n&&T.push(m);o<b;){for(s=l,a=0;a<b;++a)(g=e[a])>=t&&g<s&&(s=g);for(s-t>k((l-r)/(x=o+1))&&z("overflow"),r+=(s-t)*x,t=s,a=0;a<b;++a)if((g=e[a])<t&&++r>l&&z("overflow"),g==t){for(d=r,h=u;!(d<(v=h<=i?p:h>=i+c?c:h-i));h+=u)S=d-v,w=u-v,T.push(j(I(v+S%w,0))),d=k(S/w);T.push(j(I(d,0))),i=O(r,x,o==n),r=0,++o}++r,++t}return T.join("")}if(a={version:"1.3.2",ucs2:{decode:_,encode:A},decode:q,encode:C,toASCII:function(e){return T(e,function(e){return g.test(e)?"xn--"+C(e):e})},toUnicode:function(e){return T(e,function(e){return v.test(e)?q(e.slice(4).toLowerCase()):e})}},o&&n)if(e.exports==o)n.exports=a;else for(s in a)a.hasOwnProperty(s)&&(o[s]=a[s]);else r.punycode=a}(W)}),Z={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}};function X(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var K=function(e,t,r,o){t=t||"&",r=r||"=";var n={};if("string"!=typeof e||0===e.length)return n;var i=/\+/g;e=e.split(t);var a=1e3;o&&"number"==typeof o.maxKeys&&(a=o.maxKeys);var s=e.length;a>0&&s>a&&(s=a);for(var l=0;l<s;++l){var u,p,c,d,h=e[l].replace(i,"%20"),f=h.indexOf(r);f>=0?(u=h.substr(0,f),p=h.substr(f+1)):(u=h,p=""),c=decodeURIComponent(u),d=decodeURIComponent(p),X(n,c)?Array.isArray(n[c])?n[c].push(d):n[c]=[n[c],d]:n[c]=d}return n},Y=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},Q=function(e,t,r,o){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map(function(o){var n=encodeURIComponent(Y(o))+r;return Array.isArray(e[o])?e[o].map(function(e){return n+encodeURIComponent(Y(e))}).join(t):n+encodeURIComponent(Y(e[o]))}).join(t):o?encodeURIComponent(Y(o))+r+encodeURIComponent(Y(e)):""},ee=V(function(e,t){t.decode=t.parse=K,t.encode=t.stringify=Q}),te=ee.decode,re=ee.parse,oe=ee.encode,ne=ee.stringify,ie=Se,ae=_e,se=Ae,le=Te,ue=pe;function pe(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var ce=/^([a-z0-9.+-]+:)/i,de=/:[0-9]*$/,he=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,fe=["<",">",'"',"`"," ","\r","\n","\t"],ye=["{","}","|","\\","^","`"].concat(fe),me=["'"].concat(ye),ve=["%","/","?",";","#"].concat(me),ge=["/","?","#"],be=255,xe=/^[+a-z0-9A-Z_-]{0,63}$/,we=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,ke={javascript:!0,"javascript:":!0},je={javascript:!0,"javascript:":!0},ze={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function Se(e,t,r){if(e&&Z.isObject(e)&&e instanceof pe)return e;var o=new pe;return o.parse(e,t,r),o}function Te(e){return Z.isString(e)&&(e=Se(e)),e instanceof pe?e.format():pe.prototype.format.call(e)}function _e(e,t){return Se(e,!1,!0).resolve(t)}function Ae(e,t){return e?Se(e,!1,!0).resolveObject(t):t}pe.prototype.parse=function(e,t,r){if(!Z.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o=e.indexOf("?"),n=-1!==o&&o<e.indexOf("#")?"?":"#",i=e.split(n);i[0]=i[0].replace(/\\/g,"/");var a=e=i.join(n);if(a=a.trim(),!r&&1===e.split("#").length){var s=he.exec(a);if(s)return this.path=a,this.href=a,this.pathname=s[1],s[2]?(this.search=s[2],this.query=t?ee.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var l=ce.exec(a);if(l){var u=(l=l[0]).toLowerCase();this.protocol=u,a=a.substr(l.length)}if(r||l||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var p="//"===a.substr(0,2);!p||l&&je[l]||(a=a.substr(2),this.slashes=!0)}if(!je[l]&&(p||l&&!ze[l])){for(var c,d,h=-1,f=0;f<ge.length;f++){-1!==(y=a.indexOf(ge[f]))&&(-1===h||y<h)&&(h=y)}-1!==(d=-1===h?a.lastIndexOf("@"):a.lastIndexOf("@",h))&&(c=a.slice(0,d),a=a.slice(d+1),this.auth=decodeURIComponent(c)),h=-1;for(f=0;f<ve.length;f++){var y;-1!==(y=a.indexOf(ve[f]))&&(-1===h||y<h)&&(h=y)}-1===h&&(h=a.length),this.host=a.slice(0,h),a=a.slice(h),this.parseHost(),this.hostname=this.hostname||"";var m="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!m)for(var v=this.hostname.split(/\./),g=(f=0,v.length);f<g;f++){var b=v[f];if(b&&!b.match(xe)){for(var x="",w=0,k=b.length;w<k;w++)b.charCodeAt(w)>127?x+="x":x+=b[w];if(!x.match(xe)){var j=v.slice(0,f),z=v.slice(f+1),S=b.match(we);S&&(j.push(S[1]),z.unshift(S[2])),z.length&&(a="/"+z.join(".")+a),this.hostname=j.join(".");break}}}this.hostname.length>be?this.hostname="":this.hostname=this.hostname.toLowerCase(),m||(this.hostname=H.toASCII(this.hostname));var T=this.port?":"+this.port:"",_=this.hostname||"";this.host=_+T,this.href+=this.host,m&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!ke[u])for(f=0,g=me.length;f<g;f++){var A=me[f];if(-1!==a.indexOf(A)){var I=encodeURIComponent(A);I===A&&(I=escape(A)),a=a.split(A).join(I)}}var O=a.indexOf("#");-1!==O&&(this.hash=a.substr(O),a=a.slice(0,O));var q=a.indexOf("?");if(-1!==q?(this.search=a.substr(q),this.query=a.substr(q+1),t&&(this.query=ee.parse(this.query)),a=a.slice(0,q)):t&&(this.search="",this.query={}),a&&(this.pathname=a),ze[u]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){T=this.pathname||"";var C=this.search||"";this.path=T+C}return this.href=this.format(),this},pe.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",o=this.hash||"",n=!1,i="";this.host?n=e+this.host:this.hostname&&(n=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&Z.isObject(this.query)&&Object.keys(this.query).length&&(i=ee.stringify(this.query));var a=this.search||i&&"?"+i||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||ze[t])&&!1!==n?(n="//"+(n||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):n||(n=""),o&&"#"!==o.charAt(0)&&(o="#"+o),a&&"?"!==a.charAt(0)&&(a="?"+a),t+n+(r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(a=a.replace("#","%23"))+o},pe.prototype.resolve=function(e){return this.resolveObject(Se(e,!1,!0)).format()},pe.prototype.resolveObject=function(e){if(Z.isString(e)){var t=new pe;t.parse(e,!1,!0),e=t}for(var r=new pe,o=Object.keys(this),n=0;n<o.length;n++){var i=o[n];r[i]=this[i]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var a=Object.keys(e),s=0;s<a.length;s++){var l=a[s];"protocol"!==l&&(r[l]=e[l])}return ze[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!ze[e.protocol]){for(var u=Object.keys(e),p=0;p<u.length;p++){var c=u[p];r[c]=e[c]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||je[e.protocol])r.pathname=e.pathname;else{for(var d=(e.pathname||"").split("/");d.length&&!(e.host=d.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),r.pathname=d.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var h=r.pathname||"",f=r.search||"";r.path=h+f}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var y=r.pathname&&"/"===r.pathname.charAt(0),m=e.host||e.pathname&&"/"===e.pathname.charAt(0),v=m||y||r.host&&e.pathname,g=v,b=r.pathname&&r.pathname.split("/")||[],x=(d=e.pathname&&e.pathname.split("/")||[],r.protocol&&!ze[r.protocol]);if(x&&(r.hostname="",r.port=null,r.host&&(""===b[0]?b[0]=r.host:b.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host=null),v=v&&(""===d[0]||""===b[0])),m)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,b=d;else if(d.length)b||(b=[]),b.pop(),b=b.concat(d),r.search=e.search,r.query=e.query;else if(!Z.isNullOrUndefined(e.search)){if(x)r.hostname=r.host=b.shift(),(S=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=S.shift(),r.host=r.hostname=S.shift());return r.search=e.search,r.query=e.query,Z.isNull(r.pathname)&&Z.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!b.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var w=b.slice(-1)[0],k=(r.host||e.host||b.length>1)&&("."===w||".."===w)||""===w,j=0,z=b.length;z>=0;z--)"."===(w=b[z])?b.splice(z,1):".."===w?(b.splice(z,1),j++):j&&(b.splice(z,1),j--);if(!v&&!g)for(;j--;j)b.unshift("..");!v||""===b[0]||b[0]&&"/"===b[0].charAt(0)||b.unshift(""),k&&"/"!==b.join("/").substr(-1)&&b.push("");var S,T=""===b[0]||b[0]&&"/"===b[0].charAt(0);x&&(r.hostname=r.host=T?"":b.length?b.shift():"",(S=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=S.shift(),r.host=r.hostname=S.shift()));return(v=v||r.host&&b.length)&&!T&&b.unshift(""),b.length?r.pathname=b.join("/"):(r.pathname=null,r.path=null),Z.isNull(r.pathname)&&Z.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},pe.prototype.parseHost=function(){var e=this.host,t=de.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};var Ie={parse:ie,resolve:ae,resolveObject:se,format:le,Url:ue};function Oe(e){for(var t=0;t<F.layout.length;t++)for(var r in F[F.layout[t]])if(r===e)return F[F.layout[t]][r];for(var o=0;o<F.paint.length;o++)for(var n in F[F.paint[o]])if(n===e)return F[F.paint[o]][n];return null}function qe(e,t){for(var r in e.sources)t(e.sources[r])}function Ce(e,t){for(var r=0,o=e.layers;r<o.length;r+=1){t(o[r])}}function Ee(e,t,r){function o(e,t){var o=e[t];o&&Object.keys(o).forEach(function(n){r({path:[e.id,t,n],key:n,value:o[n],reference:Oe(n),set:function(e){o[n]=e}})})}Ce(e,function(e){t.paint&&o(e,"paint"),t.layout&&o(e,"layout")})}function Me(e,t){for(var r in e)0===r.indexOf("layout")&&t(e[r],r)}function Ne(e,t){for(var r in e)0===r.indexOf("paint")&&t(e[r],r)}function Pe(e,t){return"string"==typeof t&&"@"===t[0]?Pe(e,e.constants[t]):t}function Re(e){return Array.isArray(e.stops)}function Le(e,t,r){e[r]=e[t],delete e[t]}function De(e){var t,r,o;e.version=8,qe(e,function(e){"video"===e.type&&void 0!==e.url&&Le(e,"url","urls"),"video"===e.type&&e.coordinates.forEach(function(e){return e.reverse()})}),Ce(e,function(e){Me(e,function(e){void 0!==e["symbol-min-distance"]&&Le(e,"symbol-min-distance","symbol-spacing")}),Ne(e,function(e){void 0!==e["background-image"]&&Le(e,"background-image","background-pattern"),void 0!==e["line-image"]&&Le(e,"line-image","line-pattern"),void 0!==e["fill-image"]&&Le(e,"fill-image","fill-pattern")})}),Ee(e,{paint:!0,layout:!0},function(t){var r=Pe(e,t.value);Re(r)&&r.stops.forEach(function(t){t[1]=Pe(e,t[1])}),t.set(r)}),delete e.constants,Ce(e,function(e){Me(e,function(e){delete e["text-max-size"],delete e["icon-max-size"]}),Ne(e,function(t){t["text-size"]&&(e.layout||(e.layout={}),e.layout["text-size"]=t["text-size"],delete t["text-size"]),t["icon-size"]&&(e.layout||(e.layout={}),e.layout["icon-size"]=t["icon-size"],delete t["icon-size"])})}),e.glyphs&&(e.glyphs=(t=e.glyphs,r=Ie.parse(t),o=r.pathname.split("/"),"mapbox:"!==r.protocol?t:"fontstack"===r.hostname?"mapbox://fonts/mapbox/{fontstack}/{range}.pbf":"fonts"===r.hostname?"mapbox://fonts/"+o[2]+"/{fontstack}/{range}.pbf":void 0)),Ce(e,function(e){Me(e,function(e){e["text-font"]&&(e["text-font"]=function(e){function t(e){return e.split(",").map(function(e){return e.trim()})}if(Array.isArray(e))return e;if("string"==typeof e)return t(e);if("object"==typeof e)return e.stops.forEach(function(e){e[1]=t(e[1])}),e;throw new Error("unexpected font value")}(e["text-font"]))})});for(var n=0,i=e.layers.length-1;i>=0;i--){if("symbol"!==e.layers[i].type){n=i+1;break}}var a=e.layers.splice(n);return a.reverse(),e.layers=e.layers.concat(a),e}function Fe(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];for(var o=0,n=t;o<n.length;o+=1){var i=n[o];for(var a in i)e[a]=i[a]}return e}var $e=function(e){function t(t,r){e.call(this,r),this.message=r,this.key=t}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),Ue=function(e,t){void 0===t&&(t=[]),this.parent=e,this.bindings={};for(var r=0,o=t;r<o.length;r+=1){var n=o[r],i=n[0],a=n[1];this.bindings[i]=a}};Ue.prototype.concat=function(e){return new Ue(this,e)},Ue.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},Ue.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var Je={kind:"null"},Ge={kind:"number"},We={kind:"string"},Be={kind:"boolean"},Ve={kind:"color"},He={kind:"object"},Ze={kind:"value"},Xe={kind:"error"},Ke={kind:"collator"},Ye={kind:"formatted"},Qe={kind:"resolvedImage"};function et(e,t){return{kind:"array",itemType:e,N:t}}function tt(e){if("array"===e.kind){var t=tt(e.itemType);return"number"==typeof e.N?"array<"+t+", "+e.N+">":"value"===e.itemType.kind?"array":"array<"+t+">"}return e.kind}var rt=[Je,Ge,We,Be,Ve,Ye,He,et(Ze),Qe];function ot(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!ot(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(var r=0,o=rt;r<o.length;r+=1){if(!ot(o[r],t))return null}}return"Expected "+tt(e)+" but found "+tt(t)+" instead."}function nt(e,t){return t.some(function(t){return t.kind===e.kind})}function it(e,t){return t.some(function(t){return"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e})}var at=V(function(e,t){var r={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function o(e){return(e=Math.round(e))<0?0:e>255?255:e}function n(e){return e<0?0:e>1?1:e}function i(e){return"%"===e[e.length-1]?o(parseFloat(e)/100*255):o(parseInt(e))}function a(e){return"%"===e[e.length-1]?n(parseFloat(e)/100):n(parseFloat(e))}function s(e,t,r){return r<0?r+=1:r>1&&(r-=1),6*r<1?e+(t-e)*r*6:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}try{t.parseCSSColor=function(e){var t,n=e.replace(/ /g,"").toLowerCase();if(n in r)return r[n].slice();if("#"===n[0])return 4===n.length?(t=parseInt(n.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===n.length&&(t=parseInt(n.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var l=n.indexOf("("),u=n.indexOf(")");if(-1!==l&&u+1===n.length){var p=n.substr(0,l),c=n.substr(l+1,u-(l+1)).split(","),d=1;switch(p){case"rgba":if(4!==c.length)return null;d=a(c.pop());case"rgb":return 3!==c.length?null:[i(c[0]),i(c[1]),i(c[2]),d];case"hsla":if(4!==c.length)return null;d=a(c.pop());case"hsl":if(3!==c.length)return null;var h=(parseFloat(c[0])%360+360)%360/360,f=a(c[1]),y=a(c[2]),m=y<=.5?y*(f+1):y+f-y*f,v=2*y-m;return[o(255*s(v,m,h+1/3)),o(255*s(v,m,h)),o(255*s(v,m,h-1/3)),d];default:return null}}return null}}catch(l){}}),st=at.parseCSSColor,lt=function(e,t,r,o){void 0===o&&(o=1),this.r=e,this.g=t,this.b=r,this.a=o};exports.Color=lt,lt.parse=function(e){if(e){if(e instanceof lt)return e;if("string"==typeof e){var t=st(e);if(t)return new lt(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}}},lt.prototype.toString=function(){var e=this.toArray(),t=e[0],r=e[1],o=e[2],n=e[3];return"rgba("+Math.round(t)+","+Math.round(r)+","+Math.round(o)+","+n+")"},lt.prototype.toArray=function(){var e=this.r,t=this.g,r=this.b,o=this.a;return 0===o?[0,0,0,0]:[255*e/o,255*t/o,255*r/o,o]},lt.black=new lt(0,0,0,1),lt.white=new lt(1,1,1,1),lt.transparent=new lt(0,0,0,0),lt.red=new lt(1,0,0,1);var ut=function(e,t,r){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};ut.prototype.compare=function(e,t){return this.collator.compare(e,t)},ut.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var pt=function(e,t,r,o,n){this.text=e,this.image=t,this.scale=r,this.fontStack=o,this.textColor=n},ct=function(e){this.sections=e};ct.fromString=function(e){return new ct([new pt(e,null,null,null,null)])},ct.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(e){return 0!==e.text.length||e.image&&0!==e.image.name.length})},ct.factory=function(e){return e instanceof ct?e:ct.fromString(e)},ct.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(e){return e.text}).join("")},ct.prototype.serialize=function(){for(var e=["format"],t=0,r=this.sections;t<r.length;t+=1){var o=r[t];if(o.image)e.push(["image",o.image.name]);else{e.push(o.text);var n={};o.fontStack&&(n["text-font"]=["literal",o.fontStack.split(",")]),o.scale&&(n["font-scale"]=o.scale),o.textColor&&(n["text-color"]=["rgba"].concat(o.textColor.toArray())),e.push(n)}}return e};var dt=function(e){this.name=e.name,this.available=e.available};function ht(e,t,r,o){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof r&&r>=0&&r<=255?void 0===o||"number"==typeof o&&o>=0&&o<=1?null:"Invalid rgba value ["+[e,t,r,o].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof o?[e,t,r,o]:[e,t,r]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function ft(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof lt)return!0;if(e instanceof ut)return!0;if(e instanceof ct)return!0;if(e instanceof dt)return!0;if(Array.isArray(e)){for(var t=0,r=e;t<r.length;t+=1){if(!ft(r[t]))return!1}return!0}if("object"==typeof e){for(var o in e)if(!ft(e[o]))return!1;return!0}return!1}function yt(e){if(null===e)return Je;if("string"==typeof e)return We;if("boolean"==typeof e)return Be;if("number"==typeof e)return Ge;if(e instanceof lt)return Ve;if(e instanceof ut)return Ke;if(e instanceof ct)return Ye;if(e instanceof dt)return Qe;if(Array.isArray(e)){for(var t,r=e.length,o=0,n=e;o<n.length;o+=1){var i=yt(n[o]);if(t){if(t===i)continue;t=Ze;break}t=i}return et(t||Ze,r)}return He}function mt(e){var t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof lt||e instanceof ct||e instanceof dt?e.toString():JSON.stringify(e)}dt.prototype.toString=function(){return this.name},dt.fromString=function(e){return e?new dt({name:e,available:!1}):null},dt.prototype.serialize=function(){return["image",this.name]};var vt=function(e,t){this.type=e,this.value=t};vt.parse=function(e,t){if(2!==e.length)return t.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!ft(e[1]))return t.error("invalid value");var r=e[1],o=yt(r),n=t.expectedType;return"array"!==o.kind||0!==o.N||!n||"array"!==n.kind||"number"==typeof n.N&&0!==n.N||(o=n),new vt(o,r)},vt.prototype.evaluate=function(){return this.value},vt.prototype.eachChild=function(){},vt.prototype.outputDefined=function(){return!0},vt.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof lt?["rgba"].concat(this.value.toArray()):this.value instanceof ct?this.value.serialize():this.value};var gt=function(e){this.name="ExpressionEvaluationError",this.message=e};gt.prototype.toJSON=function(){return this.message};var bt={string:We,number:Ge,boolean:Be,object:He},xt=function(e,t){this.type=e,this.args=t};xt.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var r,o=1,n=e[0];if("array"===n){var i,a;if(e.length>2){var s=e[1];if("string"!=typeof s||!(s in bt)||"object"===s)return t.error('The item type argument of "array" must be one of string, number, boolean',1);i=bt[s],o++}else i=Ze;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);a=e[2],o++}r=et(i,a)}else r=bt[n];for(var l=[];o<e.length;o++){var u=t.parse(e[o],o,Ze);if(!u)return null;l.push(u)}return new xt(r,l)},xt.prototype.evaluate=function(e){for(var t=0;t<this.args.length;t++){var r=this.args[t].evaluate(e);if(!ot(this.type,yt(r)))return r;if(t===this.args.length-1)throw new gt("Expected value to be of type "+tt(this.type)+", but found "+tt(yt(r))+" instead.")}return null},xt.prototype.eachChild=function(e){this.args.forEach(e)},xt.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},xt.prototype.serialize=function(){var e=this.type,t=[e.kind];if("array"===e.kind){var r=e.itemType;if("string"===r.kind||"number"===r.kind||"boolean"===r.kind){t.push(r.kind);var o=e.N;("number"==typeof o||this.args.length>1)&&t.push(o)}}return t.concat(this.args.map(function(e){return e.serialize()}))};var wt=function(e){this.type=Ye,this.sections=e};wt.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var r=e[1];if(!Array.isArray(r)&&"object"==typeof r)return t.error("First argument must be an image or text section.");for(var o=[],n=!1,i=1;i<=e.length-1;++i){var a=e[i];if(n&&"object"==typeof a&&!Array.isArray(a)){n=!1;var s=null;if(a["font-scale"]&&!(s=t.parse(a["font-scale"],1,Ge)))return null;var l=null;if(a["text-font"]&&!(l=t.parse(a["text-font"],1,et(We))))return null;var u=null;if(a["text-color"]&&!(u=t.parse(a["text-color"],1,Ve)))return null;var p=o[o.length-1];p.scale=s,p.font=l,p.textColor=u}else{var c=t.parse(e[i],1,Ze);if(!c)return null;var d=c.type.kind;if("string"!==d&&"value"!==d&&"null"!==d&&"resolvedImage"!==d)return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");n=!0,o.push({content:c,scale:null,font:null,textColor:null})}}return new wt(o)},wt.prototype.evaluate=function(e){return new ct(this.sections.map(function(t){var r=t.content.evaluate(e);return yt(r)===Qe?new pt("",r,null,null,null):new pt(mt(r),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)}))},wt.prototype.eachChild=function(e){for(var t=0,r=this.sections;t<r.length;t+=1){var o=r[t];e(o.content),o.scale&&e(o.scale),o.font&&e(o.font),o.textColor&&e(o.textColor)}},wt.prototype.outputDefined=function(){return!1},wt.prototype.serialize=function(){for(var e=["format"],t=0,r=this.sections;t<r.length;t+=1){var o=r[t];e.push(o.content.serialize());var n={};o.scale&&(n["font-scale"]=o.scale.serialize()),o.font&&(n["text-font"]=o.font.serialize()),o.textColor&&(n["text-color"]=o.textColor.serialize()),e.push(n)}return e};var kt=function(e){this.type=Qe,this.input=e};kt.parse=function(e,t){if(2!==e.length)return t.error("Expected two arguments.");var r=t.parse(e[1],1,We);return r?new kt(r):t.error("No image name provided.")},kt.prototype.evaluate=function(e){var t=this.input.evaluate(e),r=dt.fromString(t);return r&&e.availableImages&&(r.available=e.availableImages.indexOf(t)>-1),r},kt.prototype.eachChild=function(e){e(this.input)},kt.prototype.outputDefined=function(){return!1},kt.prototype.serialize=function(){return["image",this.input.serialize()]};var jt={"to-boolean":Be,"to-color":Ve,"to-number":Ge,"to-string":We},zt=function(e,t){this.type=e,this.args=t};zt.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var r=e[0];if(("to-boolean"===r||"to-string"===r)&&2!==e.length)return t.error("Expected one argument.");for(var o=jt[r],n=[],i=1;i<e.length;i++){var a=t.parse(e[i],i,Ze);if(!a)return null;n.push(a)}return new zt(o,n)},zt.prototype.evaluate=function(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){for(var t,r,o=0,n=this.args;o<n.length;o+=1){if(r=null,(t=n[o].evaluate(e))instanceof lt)return t;if("string"==typeof t){var i=e.parseColor(t);if(i)return i}else if(Array.isArray(t)&&!(r=t.length<3||t.length>4?"Invalid rbga value "+JSON.stringify(t)+": expected an array containing either three or four numeric values.":ht(t[0],t[1],t[2],t[3])))return new lt(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new gt(r||"Could not parse color from value '"+("string"==typeof t?t:String(JSON.stringify(t)))+"'")}if("number"===this.type.kind){for(var a=null,s=0,l=this.args;s<l.length;s+=1){if(null===(a=l[s].evaluate(e)))return 0;var u=Number(a);if(!isNaN(u))return u}throw new gt("Could not convert "+JSON.stringify(a)+" to number.")}return"formatted"===this.type.kind?ct.fromString(mt(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?dt.fromString(mt(this.args[0].evaluate(e))):mt(this.args[0].evaluate(e))},zt.prototype.eachChild=function(e){this.args.forEach(e)},zt.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},zt.prototype.serialize=function(){if("formatted"===this.type.kind)return new wt([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new kt(this.args[0]).serialize();var e=["to-"+this.type.kind];return this.eachChild(function(t){e.push(t.serialize())}),e};var St=["Unknown","Point","LineString","Polygon"],Tt=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Tt.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Tt.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?St[this.feature.type]:this.feature.type:null},Tt.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Tt.prototype.canonicalID=function(){return this.canonical},Tt.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Tt.prototype.parseColor=function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=lt.parse(e)),t};var _t=function(e,t,r,o){this.name=e,this.type=t,this._evaluate=r,this.args=o};function At(e){return Array.isArray(e)?"("+e.map(tt).join(", ")+")":"("+tt(e.type)+"...)"}_t.prototype.evaluate=function(e){return this._evaluate(e,this.args)},_t.prototype.eachChild=function(e){this.args.forEach(e)},_t.prototype.outputDefined=function(){return!1},_t.prototype.serialize=function(){return[this.name].concat(this.args.map(function(e){return e.serialize()}))},_t.parse=function(e,t){var r,o=e[0],n=_t.definitions[o];if(!n)return t.error('Unknown expression "'+o+'". If you wanted a literal array, use ["literal", [...]].',0);for(var i=Array.isArray(n)?n[0]:n.type,a=Array.isArray(n)?[[n[1],n[2]]]:n.overloads,s=a.filter(function(t){var r=t[0];return!Array.isArray(r)||r.length===e.length-1}),l=null,u=0,p=s;u<p.length;u+=1){var c=p[u],d=c[0],h=c[1];l=new ir(t.registry,t.path,null,t.scope);for(var f=[],y=!1,m=1;m<e.length;m++){var v=e[m],g=Array.isArray(d)?d[m-1]:d.type,b=l.parse(v,1+f.length,g);if(!b){y=!0;break}f.push(b)}if(!y)if(Array.isArray(d)&&d.length!==f.length)l.error("Expected "+d.length+" arguments, but found "+f.length+" instead.");else{for(var x=0;x<f.length;x++){var w=Array.isArray(d)?d[x]:d.type,k=f[x];l.concat(x+1).checkSubtype(w,k.type)}if(0===l.errors.length)return new _t(o,i,h,f)}}if(1===s.length)(r=t.errors).push.apply(r,l.errors);else{for(var j=(s.length?s:a).map(function(e){return At(e[0])}).join(" | "),z=[],S=1;S<e.length;S++){var T=t.parse(e[S],1+z.length);if(!T)return null;z.push(tt(T.type))}t.error("Expected arguments of type "+j+", but found ("+z.join(", ")+") instead.")}return null},_t.register=function(e,t){for(var r in _t.definitions=t,t)e[r]=_t};var It=function(e,t,r){this.type=Ke,this.locale=r,this.caseSensitive=e,this.diacriticSensitive=t};It.parse=function(e,t){if(2!==e.length)return t.error("Expected one argument.");var r=e[1];if("object"!=typeof r||Array.isArray(r))return t.error("Collator options argument must be an object.");var o=t.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,Be);if(!o)return null;var n=t.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,Be);if(!n)return null;var i=null;return r.locale&&!(i=t.parse(r.locale,1,We))?null:new It(o,n,i)},It.prototype.evaluate=function(e){return new ut(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},It.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},It.prototype.outputDefined=function(){return!1},It.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var Ot=8192;function qt(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function Ct(e){return(180+e)/360}function Et(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function Mt(e,t){return!(e[0]<=t[0])&&(!(e[2]>=t[2])&&(!(e[1]<=t[1])&&!(e[3]>=t[3])))}function Nt(e,t){var r=Ct(e[0]),o=Et(e[1]),n=Math.pow(2,t.z);return[Math.round(r*n*Ot),Math.round(o*n*Ot)]}function Pt(e,t,r){var o=e[0]-t[0],n=e[1]-t[1],i=e[0]-r[0],a=e[1]-r[1];return o*a-i*n==0&&o*i<=0&&n*a<=0}function Rt(e,t,r){return t[1]>e[1]!=r[1]>e[1]&&e[0]<(r[0]-t[0])*(e[1]-t[1])/(r[1]-t[1])+t[0]}function Lt(e,t){for(var r=!1,o=0,n=t.length;o<n;o++)for(var i=t[o],a=0,s=i.length;a<s-1;a++){if(Pt(e,i[a],i[a+1]))return!1;Rt(e,i[a],i[a+1])&&(r=!r)}return r}function Dt(e,t){for(var r=0;r<t.length;r++)if(Lt(e,t[r]))return!0;return!1}function Ft(e,t){return e[0]*t[1]-e[1]*t[0]}function $t(e,t,r,o){var n=e[0]-r[0],i=e[1]-r[1],a=t[0]-r[0],s=t[1]-r[1],l=o[0]-r[0],u=o[1]-r[1],p=n*u-l*i,c=a*u-l*s;return p>0&&c<0||p<0&&c>0}function Ut(e,t,r,o){var n=[t[0]-e[0],t[1]-e[1]];return 0!==Ft([o[0]-r[0],o[1]-r[1]],n)&&!(!$t(e,t,r,o)||!$t(r,o,e,t))}function Jt(e,t,r){for(var o=0,n=r;o<n.length;o+=1)for(var i=n[o],a=0;a<i.length-1;++a)if(Ut(e,t,i[a],i[a+1]))return!0;return!1}function Gt(e,t){for(var r=0;r<e.length;++r)if(!Lt(e[r],t))return!1;for(var o=0;o<e.length-1;++o)if(Jt(e[o],e[o+1],t))return!1;return!0}function Wt(e,t){for(var r=0;r<t.length;r++)if(Gt(e,t[r]))return!0;return!1}function Bt(e,t,r){for(var o=[],n=0;n<e.length;n++){for(var i=[],a=0;a<e[n].length;a++){var s=Nt(e[n][a],r);qt(t,s),i.push(s)}o.push(i)}return o}function Vt(e,t,r){for(var o=[],n=0;n<e.length;n++){var i=Bt(e[n],t,r);o.push(i)}return o}function Ht(e,t,r,o){if(e[0]<r[0]||e[0]>r[2]){var n=.5*o,i=e[0]-r[0]>n?-o:r[0]-e[0]>n?o:0;0===i&&(i=e[0]-r[2]>n?-o:r[2]-e[0]>n?o:0),e[0]+=i}qt(t,e)}function Zt(e){e[0]=e[1]=1/0,e[2]=e[3]=-1/0}function Xt(e,t,r,o){for(var n=Math.pow(2,o.z)*Ot,i=[o.x*Ot,o.y*Ot],a=[],s=0,l=e;s<l.length;s+=1)for(var u=0,p=l[s];u<p.length;u+=1){var c=p[u],d=[c.x+i[0],c.y+i[1]];Ht(d,t,r,n),a.push(d)}return a}function Kt(e,t,r,o){for(var n=Math.pow(2,o.z)*Ot,i=[o.x*Ot,o.y*Ot],a=[],s=0,l=e;s<l.length;s+=1){for(var u=[],p=0,c=l[s];p<c.length;p+=1){var d=c[p],h=[d.x+i[0],d.y+i[1]];qt(t,h),u.push(h)}a.push(u)}if(t[2]-t[0]<=n/2){Zt(t);for(var f=0,y=a;f<y.length;f+=1)for(var m=0,v=y[f];m<v.length;m+=1){Ht(v[m],t,r,n)}}return a}function Yt(e,t){var r=[1/0,1/0,-1/0,-1/0],o=[1/0,1/0,-1/0,-1/0],n=e.canonicalID();if("Polygon"===t.type){var i=Bt(t.coordinates,o,n),a=Xt(e.geometry(),r,o,n);if(!Mt(r,o))return!1;for(var s=0,l=a;s<l.length;s+=1){if(!Lt(l[s],i))return!1}}if("MultiPolygon"===t.type){var u=Vt(t.coordinates,o,n),p=Xt(e.geometry(),r,o,n);if(!Mt(r,o))return!1;for(var c=0,d=p;c<d.length;c+=1){if(!Dt(d[c],u))return!1}}return!0}function Qt(e,t){var r=[1/0,1/0,-1/0,-1/0],o=[1/0,1/0,-1/0,-1/0],n=e.canonicalID();if("Polygon"===t.type){var i=Bt(t.coordinates,o,n),a=Kt(e.geometry(),r,o,n);if(!Mt(r,o))return!1;for(var s=0,l=a;s<l.length;s+=1){if(!Gt(l[s],i))return!1}}if("MultiPolygon"===t.type){var u=Vt(t.coordinates,o,n),p=Kt(e.geometry(),r,o,n);if(!Mt(r,o))return!1;for(var c=0,d=p;c<d.length;c+=1){if(!Wt(d[c],u))return!1}}return!0}var er=function(e,t){this.type=Be,this.geojson=e,this.geometries=t};function tr(e){if(e instanceof _t){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof er)return!1;var t=!0;return e.eachChild(function(e){t&&!tr(e)&&(t=!1)}),t}function rr(e){if(e instanceof _t&&"feature-state"===e.name)return!1;var t=!0;return e.eachChild(function(e){t&&!rr(e)&&(t=!1)}),t}function or(e,t){if(e instanceof _t&&t.indexOf(e.name)>=0)return!1;var r=!0;return e.eachChild(function(e){r&&!or(e,t)&&(r=!1)}),r}er.parse=function(e,t){if(2!==e.length)return t.error("'within' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(ft(e[1])){var r=e[1];if("FeatureCollection"===r.type)for(var o=0;o<r.features.length;++o){var n=r.features[o].geometry.type;if("Polygon"===n||"MultiPolygon"===n)return new er(r,r.features[o].geometry)}else if("Feature"===r.type){var i=r.geometry.type;if("Polygon"===i||"MultiPolygon"===i)return new er(r,r.geometry)}else if("Polygon"===r.type||"MultiPolygon"===r.type)return new er(r,r)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")},er.prototype.evaluate=function(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return Yt(e,this.geometries);if("LineString"===e.geometryType())return Qt(e,this.geometries)}return!1},er.prototype.eachChild=function(){},er.prototype.outputDefined=function(){return!0},er.prototype.serialize=function(){return["within",this.geojson]};var nr=function(e,t){this.type=t.type,this.name=e,this.boundExpression=t};nr.parse=function(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");var r=e[1];return t.scope.has(r)?new nr(r,t.scope.get(r)):t.error('Unknown variable "'+r+'". Make sure "'+r+'" has been bound in an enclosing "let" expression before using it.',1)},nr.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},nr.prototype.eachChild=function(){},nr.prototype.outputDefined=function(){return!1},nr.prototype.serialize=function(){return["var",this.name]};var ir=function(e,t,r,o,n){void 0===t&&(t=[]),void 0===o&&(o=new Ue),void 0===n&&(n=[]),this.registry=e,this.path=t,this.key=t.map(function(e){return"["+e+"]"}).join(""),this.scope=o,this.errors=n,this.expectedType=r};function ar(e){if(e instanceof nr)return ar(e.boundExpression);if(e instanceof _t&&"error"===e.name)return!1;if(e instanceof It)return!1;if(e instanceof er)return!1;var t=e instanceof zt||e instanceof xt,r=!0;return e.eachChild(function(e){r=t?r&&ar(e):r&&e instanceof vt}),!!r&&(tr(e)&&or(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]))}function sr(e,t){for(var r,o,n=e.length-1,i=0,a=n,s=0;i<=a;)if(r=e[s=Math.floor((i+a)/2)],o=e[s+1],r<=t){if(s===n||t<o)return s;i=s+1}else{if(!(r>t))throw new gt("Input is not a number.");a=s-1}return 0}ir.prototype.parse=function(e,t,r,o,n){return void 0===n&&(n={}),t?this.concat(t,r,o)._parse(e,n):this._parse(e,n)},ir.prototype._parse=function(e,t){function r(e,t,r){return"assert"===r?new xt(t,[e]):"coerce"===r?new zt(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var o=e[0];if("string"!=typeof o)return this.error("Expression name must be a string, but found "+typeof o+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var n=this.registry[o];if(n){var i=n.parse(e,this);if(!i)return null;if(this.expectedType){var a=this.expectedType,s=i.type;if("string"!==a.kind&&"number"!==a.kind&&"boolean"!==a.kind&&"object"!==a.kind&&"array"!==a.kind||"value"!==s.kind)if("color"!==a.kind&&"formatted"!==a.kind&&"resolvedImage"!==a.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(a,s))return null}else i=r(i,a,t.typeAnnotation||"coerce");else i=r(i,a,t.typeAnnotation||"assert")}if(!(i instanceof vt)&&"resolvedImage"!==i.type.kind&&ar(i)){var l=new Tt;try{i=new vt(i.type,i.evaluate(l))}catch(u){return this.error(u.message),null}}return i}return this.error('Unknown expression "'+o+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===e?this.error("'undefined' value invalid. Use null instead."):"object"==typeof e?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof e+" instead.")},ir.prototype.concat=function(e,t,r){var o="number"==typeof e?this.path.concat(e):this.path,n=r?this.scope.concat(r):this.scope;return new ir(this.registry,o,t||null,n,this.errors)},ir.prototype.error=function(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];var o=""+this.key+t.map(function(e){return"["+e+"]"}).join("");this.errors.push(new $e(o,e))},ir.prototype.checkSubtype=function(e,t){var r=ot(e,t);return r&&this.error(r),r};var lr=function(e,t,r){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(var o=0,n=r;o<n.length;o+=1){var i=n[o],a=i[0],s=i[1];this.labels.push(a),this.outputs.push(s)}};lr.parse=function(e,t){if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");var r=t.parse(e[1],1,Ge);if(!r)return null;var o=[],n=null;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);for(var i=1;i<e.length;i+=2){var a=1===i?-1/0:e[i],s=e[i+1],l=i,u=i+1;if("number"!=typeof a)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',l);if(o.length&&o[o.length-1][0]>=a)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',l);var p=t.parse(s,u,n);if(!p)return null;n=n||p.type,o.push([a,p])}return new lr(n,r,o)},lr.prototype.evaluate=function(e){var t=this.labels,r=this.outputs;if(1===t.length)return r[0].evaluate(e);var o=this.input.evaluate(e);if(o<=t[0])return r[0].evaluate(e);var n=t.length;return o>=t[n-1]?r[n-1].evaluate(e):r[sr(t,o)].evaluate(e)},lr.prototype.eachChild=function(e){e(this.input);for(var t=0,r=this.outputs;t<r.length;t+=1){e(r[t])}},lr.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},lr.prototype.serialize=function(){for(var e=["step",this.input.serialize()],t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e};var ur=pr;function pr(e,t,r,o){this.cx=3*e,this.bx=3*(r-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(o-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=o,this.p2x=r,this.p2y=o}function cr(e,t,r){return e*(1-r)+t*r}function dr(e,t,r){return new lt(cr(e.r,t.r,r),cr(e.g,t.g,r),cr(e.b,t.b,r),cr(e.a,t.a,r))}function hr(e,t,r){return e.map(function(e,o){return cr(e,t[o],r)})}pr.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},pr.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},pr.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},pr.prototype.solveCurveX=function(e,t){var r,o,n,i,a;for(void 0===t&&(t=1e-6),n=e,a=0;a<8;a++){if(i=this.sampleCurveX(n)-e,Math.abs(i)<t)return n;var s=this.sampleCurveDerivativeX(n);if(Math.abs(s)<1e-6)break;n-=i/s}if((n=e)<(r=0))return r;if(n>(o=1))return o;for(;r<o;){if(i=this.sampleCurveX(n),Math.abs(i-e)<t)return n;e>i?r=n:o=n,n=.5*(o-r)+r}return n},pr.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var fr=Object.freeze({__proto__:null,number:cr,color:dr,array:hr}),yr=.95047,mr=1,vr=1.08883,gr=4/29,br=6/29,xr=3*br*br,wr=br*br*br,kr=Math.PI/180,jr=180/Math.PI;function zr(e){return e>wr?Math.pow(e,1/3):e/xr+gr}function Sr(e){return e>br?e*e*e:xr*(e-gr)}function Tr(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function _r(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Ar(e){var t=_r(e.r),r=_r(e.g),o=_r(e.b),n=zr((.4124564*t+.3575761*r+.1804375*o)/yr),i=zr((.2126729*t+.7151522*r+.072175*o)/mr);return{l:116*i-16,a:500*(n-i),b:200*(i-zr((.0193339*t+.119192*r+.9503041*o)/vr)),alpha:e.a}}function Ir(e){var t=(e.l+16)/116,r=isNaN(e.a)?t:t+e.a/500,o=isNaN(e.b)?t:t-e.b/200;return t=mr*Sr(t),r=yr*Sr(r),o=vr*Sr(o),new lt(Tr(3.2404542*r-1.5371385*t-.4985314*o),Tr(-.969266*r+1.8760108*t+.041556*o),Tr(.0556434*r-.2040259*t+1.0572252*o),e.alpha)}function Or(e,t,r){return{l:cr(e.l,t.l,r),a:cr(e.a,t.a,r),b:cr(e.b,t.b,r),alpha:cr(e.alpha,t.alpha,r)}}function qr(e){var t=Ar(e),r=t.l,o=t.a,n=t.b,i=Math.atan2(n,o)*jr;return{h:i<0?i+360:i,c:Math.sqrt(o*o+n*n),l:r,alpha:e.a}}function Cr(e){var t=e.h*kr,r=e.c;return Ir({l:e.l,a:Math.cos(t)*r,b:Math.sin(t)*r,alpha:e.alpha})}function Er(e,t,r){var o=t-e;return e+r*(o>180||o<-180?o-360*Math.round(o/360):o)}function Mr(e,t,r){return{h:Er(e.h,t.h,r),c:cr(e.c,t.c,r),l:cr(e.l,t.l,r),alpha:cr(e.alpha,t.alpha,r)}}var Nr={forward:Ar,reverse:Ir,interpolate:Or},Pr={forward:qr,reverse:Cr,interpolate:Mr},Rr=Object.freeze({__proto__:null,lab:Nr,hcl:Pr}),Lr=function(e,t,r,o,n){this.type=e,this.operator=t,this.interpolation=r,this.input=o,this.labels=[],this.outputs=[];for(var i=0,a=n;i<a.length;i+=1){var s=a[i],l=s[0],u=s[1];this.labels.push(l),this.outputs.push(u)}};function Dr(e,t,r,o){var n=o-r,i=e-r;return 0===n?0:1===t?i/n:(Math.pow(t,i)-1)/(Math.pow(t,n)-1)}Lr.interpolationFactor=function(e,t,r,o){var n=0;if("exponential"===e.name)n=Dr(t,e.base,r,o);else if("linear"===e.name)n=Dr(t,1,r,o);else if("cubic-bezier"===e.name){var i=e.controlPoints;n=new ur(i[0],i[1],i[2],i[3]).solve(Dr(t,1,r,o))}return n},Lr.parse=function(e,t){var r=e[0],o=e[1],n=e[2],i=e.slice(3);if(!Array.isArray(o)||0===o.length)return t.error("Expected an interpolation type expression.",1);if("linear"===o[0])o={name:"linear"};else if("exponential"===o[0]){var a=o[1];if("number"!=typeof a)return t.error("Exponential interpolation requires a numeric base.",1,1);o={name:"exponential",base:a}}else{if("cubic-bezier"!==o[0])return t.error("Unknown interpolation type "+String(o[0]),1,0);var s=o.slice(1);if(4!==s.length||s.some(function(e){return"number"!=typeof e||e<0||e>1}))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);o={name:"cubic-bezier",controlPoints:s}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(n=t.parse(n,2,Ge)))return null;var l=[],u=null;"interpolate-hcl"===r||"interpolate-lab"===r?u=Ve:t.expectedType&&"value"!==t.expectedType.kind&&(u=t.expectedType);for(var p=0;p<i.length;p+=2){var c=i[p],d=i[p+1],h=p+3,f=p+4;if("number"!=typeof c)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',h);if(l.length&&l[l.length-1][0]>=c)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',h);var y=t.parse(d,f,u);if(!y)return null;u=u||y.type,l.push([c,y])}return"number"===u.kind||"color"===u.kind||"array"===u.kind&&"number"===u.itemType.kind&&"number"==typeof u.N?new Lr(u,r,o,n,l):t.error("Type "+tt(u)+" is not interpolatable.")},Lr.prototype.evaluate=function(e){var t=this.labels,r=this.outputs;if(1===t.length)return r[0].evaluate(e);var o=this.input.evaluate(e);if(o<=t[0])return r[0].evaluate(e);var n=t.length;if(o>=t[n-1])return r[n-1].evaluate(e);var i=sr(t,o),a=t[i],s=t[i+1],l=Lr.interpolationFactor(this.interpolation,o,a,s),u=r[i].evaluate(e),p=r[i+1].evaluate(e);return"interpolate"===this.operator?fr[this.type.kind.toLowerCase()](u,p,l):"interpolate-hcl"===this.operator?Pr.reverse(Pr.interpolate(Pr.forward(u),Pr.forward(p),l)):Nr.reverse(Nr.interpolate(Nr.forward(u),Nr.forward(p),l))},Lr.prototype.eachChild=function(e){e(this.input);for(var t=0,r=this.outputs;t<r.length;t+=1){e(r[t])}},Lr.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},Lr.prototype.serialize=function(){var e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var t=[this.operator,e,this.input.serialize()],r=0;r<this.labels.length;r++)t.push(this.labels[r],this.outputs[r].serialize());return t};var Fr=function(e,t){this.type=e,this.args=t};Fr.parse=function(e,t){if(e.length<2)return t.error("Expectected at least one argument.");var r=null,o=t.expectedType;o&&"value"!==o.kind&&(r=o);for(var n=[],i=0,a=e.slice(1);i<a.length;i+=1){var s=a[i],l=t.parse(s,1+n.length,r,void 0,{typeAnnotation:"omit"});if(!l)return null;r=r||l.type,n.push(l)}var u=o&&n.some(function(e){return ot(o,e.type)});return new Fr(u?Ze:r,n)},Fr.prototype.evaluate=function(e){for(var t,r=null,o=0,n=0,i=this.args;n<i.length;n+=1){if(o++,(r=i[n].evaluate(e))&&r instanceof dt&&!r.available&&(t||(t=r.name),r=null,o===this.args.length&&(r=t)),null!==r)break}return r},Fr.prototype.eachChild=function(e){this.args.forEach(e)},Fr.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Fr.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(t){e.push(t.serialize())}),e};var $r=function(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t};$r.prototype.evaluate=function(e){return this.result.evaluate(e)},$r.prototype.eachChild=function(e){for(var t=0,r=this.bindings;t<r.length;t+=1){e(r[t][1])}e(this.result)},$r.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var r=[],o=1;o<e.length-1;o+=2){var n=e[o];if("string"!=typeof n)return t.error("Expected string, but found "+typeof n+" instead.",o);if(/[^a-zA-Z0-9_]/.test(n))return t.error("Variable names must contain only alphanumeric characters or '_'.",o);var i=t.parse(e[o+1],o+1);if(!i)return null;r.push([n,i])}var a=t.parse(e[e.length-1],e.length-1,t.expectedType,r);return a?new $r(r,a):null},$r.prototype.outputDefined=function(){return this.result.outputDefined()},$r.prototype.serialize=function(){for(var e=["let"],t=0,r=this.bindings;t<r.length;t+=1){var o=r[t],n=o[0],i=o[1];e.push(n,i.serialize())}return e.push(this.result.serialize()),e};var Ur=function(e,t,r){this.type=e,this.index=t,this.input=r};Ur.parse=function(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var r=t.parse(e[1],1,Ge),o=t.parse(e[2],2,et(t.expectedType||Ze));if(!r||!o)return null;var n=o.type;return new Ur(n.itemType,r,o)},Ur.prototype.evaluate=function(e){var t=this.index.evaluate(e),r=this.input.evaluate(e);if(t<0)throw new gt("Array index out of bounds: "+t+" < 0.");if(t>=r.length)throw new gt("Array index out of bounds: "+t+" > "+(r.length-1)+".");if(t!==Math.floor(t))throw new gt("Array index must be an integer, but found "+t+" instead.");return r[t]},Ur.prototype.eachChild=function(e){e(this.index),e(this.input)},Ur.prototype.outputDefined=function(){return!1},Ur.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Jr=function(e,t){this.type=Be,this.needle=e,this.haystack=t};Jr.parse=function(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var r=t.parse(e[1],1,Ze),o=t.parse(e[2],2,Ze);return r&&o?nt(r.type,[Be,We,Ge,Je,Ze])?new Jr(r,o):t.error("Expected first argument to be of type boolean, string, number or null, but found "+tt(r.type)+" instead"):null},Jr.prototype.evaluate=function(e){var t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!r)return!1;if(!it(t,["boolean","string","number","null"]))throw new gt("Expected first argument to be of type boolean, string, number or null, but found "+tt(yt(t))+" instead.");if(!it(r,["string","array"]))throw new gt("Expected second argument to be of type array or string, but found "+tt(yt(r))+" instead.");return r.indexOf(t)>=0},Jr.prototype.eachChild=function(e){e(this.needle),e(this.haystack)},Jr.prototype.outputDefined=function(){return!0},Jr.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Gr=function(e,t,r){this.type=Ge,this.needle=e,this.haystack=t,this.fromIndex=r};Gr.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var r=t.parse(e[1],1,Ze),o=t.parse(e[2],2,Ze);if(!r||!o)return null;if(!nt(r.type,[Be,We,Ge,Je,Ze]))return t.error("Expected first argument to be of type boolean, string, number or null, but found "+tt(r.type)+" instead");if(4===e.length){var n=t.parse(e[3],3,Ge);return n?new Gr(r,o,n):null}return new Gr(r,o)},Gr.prototype.evaluate=function(e){var t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!it(t,["boolean","string","number","null"]))throw new gt("Expected first argument to be of type boolean, string, number or null, but found "+tt(yt(t))+" instead.");if(!it(r,["string","array"]))throw new gt("Expected second argument to be of type array or string, but found "+tt(yt(r))+" instead.");if(this.fromIndex){var o=this.fromIndex.evaluate(e);return r.indexOf(t,o)}return r.indexOf(t)},Gr.prototype.eachChild=function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)},Gr.prototype.outputDefined=function(){return!1},Gr.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Wr=function(e,t,r,o,n,i){this.inputType=e,this.type=t,this.input=r,this.cases=o,this.outputs=n,this.otherwise=i};Wr.parse=function(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return t.error("Expected an even number of arguments.");var r,o;t.expectedType&&"value"!==t.expectedType.kind&&(o=t.expectedType);for(var n={},i=[],a=2;a<e.length-1;a+=2){var s=e[a],l=e[a+1];Array.isArray(s)||(s=[s]);var u=t.concat(a);if(0===s.length)return u.error("Expected at least one branch label.");for(var p=0,c=s;p<c.length;p+=1){var d=c[p];if("number"!=typeof d&&"string"!=typeof d)return u.error("Branch labels must be numbers or strings.");if("number"==typeof d&&Math.abs(d)>Number.MAX_SAFE_INTEGER)return u.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof d&&Math.floor(d)!==d)return u.error("Numeric branch labels must be integer values.");if(r){if(u.checkSubtype(r,yt(d)))return null}else r=yt(d);if(void 0!==n[String(d)])return u.error("Branch labels must be unique.");n[String(d)]=i.length}var h=t.parse(l,a,o);if(!h)return null;o=o||h.type,i.push(h)}var f=t.parse(e[1],1,Ze);if(!f)return null;var y=t.parse(e[e.length-1],e.length-1,o);return y?"value"!==f.type.kind&&t.concat(1).checkSubtype(r,f.type)?null:new Wr(r,o,f,n,i,y):null},Wr.prototype.evaluate=function(e){var t=this.input.evaluate(e);return(yt(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)},Wr.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},Wr.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})&&this.otherwise.outputDefined()},Wr.prototype.serialize=function(){for(var e=this,t=["match",this.input.serialize()],r=[],o={},n=0,i=Object.keys(this.cases).sort();n<i.length;n+=1){var a=i[n];void 0===(c=o[this.cases[a]])?(o[this.cases[a]]=r.length,r.push([this.cases[a],[a]])):r[c][1].push(a)}for(var s=function(t){return"number"===e.inputType.kind?Number(t):t},l=0,u=r;l<u.length;l+=1){var p=u[l],c=p[0],d=p[1];1===d.length?t.push(s(d[0])):t.push(d.map(s)),t.push(this.outputs[outputIndex$1].serialize())}return t.push(this.otherwise.serialize()),t};var Br=function(e,t,r){this.type=e,this.branches=t,this.otherwise=r};Br.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return t.error("Expected an odd number of arguments.");var r;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);for(var o=[],n=1;n<e.length-1;n+=2){var i=t.parse(e[n],n,Be);if(!i)return null;var a=t.parse(e[n+1],n+1,r);if(!a)return null;o.push([i,a]),r=r||a.type}var s=t.parse(e[e.length-1],e.length-1,r);return s?new Br(r,o,s):null},Br.prototype.evaluate=function(e){for(var t=0,r=this.branches;t<r.length;t+=1){var o=r[t],n=o[0],i=o[1];if(n.evaluate(e))return i.evaluate(e)}return this.otherwise.evaluate(e)},Br.prototype.eachChild=function(e){for(var t=0,r=this.branches;t<r.length;t+=1){var o=r[t],n=o[0],i=o[1];e(n),e(i)}e(this.otherwise)},Br.prototype.outputDefined=function(){return this.branches.every(function(e){e[0];return e[1].outputDefined()})&&this.otherwise.outputDefined()},Br.prototype.serialize=function(){var e=["case"];return this.eachChild(function(t){e.push(t.serialize())}),e};var Vr=function(e,t,r,o){this.type=e,this.input=t,this.beginIndex=r,this.endIndex=o};function Hr(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function Zr(e,t,r){return t===r}function Xr(e,t,r){return t!==r}function Kr(e,t,r){return t<r}function Yr(e,t,r){return t>r}function Qr(e,t,r){return t<=r}function eo(e,t,r){return t>=r}function to(e,t,r,o){return 0===o.compare(t,r)}function ro(e,t,r,o){return!to(e,t,r,o)}function oo(e,t,r,o){return o.compare(t,r)<0}function no(e,t,r,o){return o.compare(t,r)>0}function io(e,t,r,o){return o.compare(t,r)<=0}function ao(e,t,r,o){return o.compare(t,r)>=0}function so(e,t,r){var o="=="!==e&&"!="!==e;return function(){function n(e,t,r){this.type=Be,this.lhs=e,this.rhs=t,this.collator=r,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}return n.parse=function(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");var r=e[0],i=t.parse(e[1],1,Ze);if(!i)return null;if(!Hr(r,i.type))return t.concat(1).error('"'+r+"\" comparisons are not supported for type '"+tt(i.type)+"'.");var a=t.parse(e[2],2,Ze);if(!a)return null;if(!Hr(r,a.type))return t.concat(2).error('"'+r+"\" comparisons are not supported for type '"+tt(a.type)+"'.");if(i.type.kind!==a.type.kind&&"value"!==i.type.kind&&"value"!==a.type.kind)return t.error("Cannot compare types '"+tt(i.type)+"' and '"+tt(a.type)+"'.");o&&("value"===i.type.kind&&"value"!==a.type.kind?i=new xt(a.type,[i]):"value"!==i.type.kind&&"value"===a.type.kind&&(a=new xt(i.type,[a])));var s=null;if(4===e.length){if("string"!==i.type.kind&&"string"!==a.type.kind&&"value"!==i.type.kind&&"value"!==a.type.kind)return t.error("Cannot use collator to compare non-string types.");if(!(s=t.parse(e[3],3,Ke)))return null}return new n(i,a,s)},n.prototype.evaluate=function(n){var i=this.lhs.evaluate(n),a=this.rhs.evaluate(n);if(o&&this.hasUntypedArgument){var s=yt(i),l=yt(a);if(s.kind!==l.kind||"string"!==s.kind&&"number"!==s.kind)throw new gt('Expected arguments for "'+e+'" to be (string, string) or (number, number), but found ('+s.kind+", "+l.kind+") instead.")}if(this.collator&&!o&&this.hasUntypedArgument){var u=yt(i),p=yt(a);if("string"!==u.kind||"string"!==p.kind)return t(n,i,a)}return this.collator?r(n,i,a,this.collator.evaluate(n)):t(n,i,a)},n.prototype.eachChild=function(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)},n.prototype.outputDefined=function(){return!0},n.prototype.serialize=function(){var t=[e];return this.eachChild(function(e){t.push(e.serialize())}),t},n}()}Vr.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var r=t.parse(e[1],1,Ze),o=t.parse(e[2],2,Ge);if(!r||!o)return null;if(!nt(r.type,[et(Ze),We,Ze]))return t.error("Expected first argument to be of type array or string, but found "+tt(r.type)+" instead");if(4===e.length){var n=t.parse(e[3],3,Ge);return n?new Vr(r.type,r,o,n):null}return new Vr(r.type,r,o)},Vr.prototype.evaluate=function(e){var t=this.input.evaluate(e),r=this.beginIndex.evaluate(e);if(!it(t,["string","array"]))throw new gt("Expected first argument to be of type array or string, but found "+tt(yt(t))+" instead.");if(this.endIndex){var o=this.endIndex.evaluate(e);return t.slice(r,o)}return t.slice(r)},Vr.prototype.eachChild=function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)},Vr.prototype.outputDefined=function(){return!1},Vr.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var lo=so("==",Zr,to),uo=so("!=",Xr,ro),po=so("<",Kr,oo),co=so(">",Yr,no),ho=so("<=",Qr,io),fo=so(">=",eo,ao),yo=function(e,t,r,o,n){this.type=We,this.number=e,this.locale=t,this.currency=r,this.minFractionDigits=o,this.maxFractionDigits=n};yo.parse=function(e,t){if(3!==e.length)return t.error("Expected two arguments.");var r=t.parse(e[1],1,Ge);if(!r)return null;var o=e[2];if("object"!=typeof o||Array.isArray(o))return t.error("NumberFormat options argument must be an object.");var n=null;if(o.locale&&!(n=t.parse(o.locale,1,We)))return null;var i=null;if(o.currency&&!(i=t.parse(o.currency,1,We)))return null;var a=null;if(o["min-fraction-digits"]&&!(a=t.parse(o["min-fraction-digits"],1,Ge)))return null;var s=null;return o["max-fraction-digits"]&&!(s=t.parse(o["max-fraction-digits"],1,Ge))?null:new yo(r,n,i,a,s)},yo.prototype.evaluate=function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))},yo.prototype.eachChild=function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)},yo.prototype.outputDefined=function(){return!1},yo.prototype.serialize=function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]};var mo=function(e){this.type=Ge,this.input=e};mo.parse=function(e,t){if(2!==e.length)return t.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var r=t.parse(e[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?t.error("Expected argument of type string or array, but found "+tt(r.type)+" instead."):new mo(r):null},mo.prototype.evaluate=function(e){var t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new gt("Expected value to be of type string or array, but found "+tt(yt(t))+" instead.")},mo.prototype.eachChild=function(e){e(this.input)},mo.prototype.outputDefined=function(){return!1},mo.prototype.serialize=function(){var e=["length"];return this.eachChild(function(t){e.push(t.serialize())}),e};var vo={"==":lo,"!=":uo,">":co,"<":po,">=":fo,"<=":ho,array:xt,at:Ur,boolean:xt,case:Br,coalesce:Fr,collator:It,format:wt,image:kt,in:Jr,"index-of":Gr,interpolate:Lr,"interpolate-hcl":Lr,"interpolate-lab":Lr,length:mo,let:$r,literal:vt,match:Wr,number:xt,"number-format":yo,object:xt,slice:Vr,step:lr,string:xt,"to-boolean":zt,"to-color":zt,"to-number":zt,"to-string":zt,var:nr,within:er};function go(e,t){var r=t[0],o=t[1],n=t[2],i=t[3];r=r.evaluate(e),o=o.evaluate(e),n=n.evaluate(e);var a=i?i.evaluate(e):1,s=ht(r,o,n,a);if(s)throw new gt(s);return new lt(r/255*a,o/255*a,n/255*a,a)}function bo(e,t){return e in t}function xo(e,t){var r=t[e];return void 0===r?null:r}function wo(e,t,r,o){for(;r<=o;){var n=r+o>>1;if(t[n]===e)return!0;t[n]>e?o=n-1:r=n+1}return!1}function ko(e){return{type:e}}function jo(e){return{result:"success",value:e}}function zo(e){return{result:"error",value:e}}function So(e){return"data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]}function To(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function _o(e){return!!e.expression&&e.expression.interpolated}function Ao(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function Io(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function Oo(e){return e}function qo(e,t){var r,o,n,i="color"===t.type,a=e.stops&&"object"==typeof e.stops[0][0],s=a||void 0!==e.property,l=a||!s,u=e.type||(_o(t)?"exponential":"interval");if(i&&((e=Fe({},e)).stops&&(e.stops=e.stops.map(function(e){return[e[0],lt.parse(e[1])]})),e.default?e.default=lt.parse(e.default):e.default=lt.parse(t.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!Rr[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);if("exponential"===u)r=No;else if("interval"===u)r=Mo;else if("categorical"===u){r=Eo,o=Object.create(null);for(var p=0,c=e.stops;p<c.length;p+=1){var d=c[p];o[d[0]]=d[1]}n=typeof e.stops[0][0]}else{if("identity"!==u)throw new Error('Unknown function type "'+u+'"');r=Po}if(a){for(var h={},f=[],y=0;y<e.stops.length;y++){var m=e.stops[y],v=m[0].zoom;void 0===h[v]&&(h[v]={zoom:v,type:e.type,property:e.property,default:e.default,stops:[]},f.push(v)),h[v].stops.push([m[0].value,m[1]])}for(var g=[],b=0,x=f;b<x.length;b+=1){var w=x[b];g.push([h[w].zoom,qo(h[w],t)])}var k={name:"linear"};return{kind:"composite",interpolationType:k,interpolationFactor:Lr.interpolationFactor.bind(void 0,k),zoomStops:g.map(function(e){return e[0]}),evaluate:function(r,o){var n=r.zoom;return No({stops:g,base:e.base},t,n).evaluate(n,o)}}}if(l){var j="exponential"===u?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:j,interpolationFactor:Lr.interpolationFactor.bind(void 0,j),zoomStops:e.stops.map(function(e){return e[0]}),evaluate:function(i){var a=i.zoom;return r(e,t,a,o,n)}}}return{kind:"source",evaluate:function(i,a){var s=a&&a.properties?a.properties[e.property]:void 0;return void 0===s?Co(e.default,t.default):r(e,t,s,o,n)}}}function Co(e,t,r){return void 0!==e?e:void 0!==t?t:void 0!==r?r:void 0}function Eo(e,t,r,o,n){return Co(typeof r===n?o[r]:void 0,e.default,t.default)}function Mo(e,t,r){if("number"!==Ao(r))return Co(e.default,t.default);var o=e.stops.length;if(1===o)return e.stops[0][1];if(r<=e.stops[0][0])return e.stops[0][1];if(r>=e.stops[o-1][0])return e.stops[o-1][1];var n=sr(e.stops.map(function(e){return e[0]}),r);return e.stops[n][1]}function No(e,t,r){var o=void 0!==e.base?e.base:1;if("number"!==Ao(r))return Co(e.default,t.default);var n=e.stops.length;if(1===n)return e.stops[0][1];if(r<=e.stops[0][0])return e.stops[0][1];if(r>=e.stops[n-1][0])return e.stops[n-1][1];var i=sr(e.stops.map(function(e){return e[0]}),r),a=Ro(r,o,e.stops[i][0],e.stops[i+1][0]),s=e.stops[i][1],l=e.stops[i+1][1],u=fr[t.type]||Oo;if(e.colorSpace&&"rgb"!==e.colorSpace){var p=Rr[e.colorSpace];u=function(e,t){return p.reverse(p.interpolate(p.forward(e),p.forward(t),a))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=s.evaluate.apply(void 0,e),o=l.evaluate.apply(void 0,e);if(void 0!==r&&void 0!==o)return u(r,o,a)}}:u(s,l,a)}function Po(e,t,r){return"color"===t.type?r=lt.parse(r):"formatted"===t.type?r=ct.fromString(r.toString()):"resolvedImage"===t.type?r=dt.fromString(r.toString()):Ao(r)===t.type||"enum"===t.type&&t.values[r]||(r=void 0),Co(r,e.default,t.default)}function Ro(e,t,r,o){var n=o-r,i=e-r;return 0===n?0:1===t?i/n:(Math.pow(t,i)-1)/(Math.pow(t,n)-1)}_t.register(vo,{error:[Xe,[We],function(e,t){var r=t[0];throw new gt(r.evaluate(e))}],typeof:[We,[Ze],function(e,t){return tt(yt(t[0].evaluate(e)))}],"to-rgba":[et(Ge,4),[Ve],function(e,t){return t[0].evaluate(e).toArray()}],rgb:[Ve,[Ge,Ge,Ge],go],rgba:[Ve,[Ge,Ge,Ge,Ge],go],has:{type:Be,overloads:[[[We],function(e,t){return bo(t[0].evaluate(e),e.properties())}],[[We,He],function(e,t){var r=t[0],o=t[1];return bo(r.evaluate(e),o.evaluate(e))}]]},get:{type:Ze,overloads:[[[We],function(e,t){return xo(t[0].evaluate(e),e.properties())}],[[We,He],function(e,t){var r=t[0],o=t[1];return xo(r.evaluate(e),o.evaluate(e))}]]},"feature-state":[Ze,[We],function(e,t){return xo(t[0].evaluate(e),e.featureState||{})}],properties:[He,[],function(e){return e.properties()}],"geometry-type":[We,[],function(e){return e.geometryType()}],id:[Ze,[],function(e){return e.id()}],zoom:[Ge,[],function(e){return e.globals.zoom}],"heatmap-density":[Ge,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[Ge,[],function(e){return e.globals.lineProgress||0}],accumulated:[Ze,[],function(e){return void 0===e.globals.accumulated?null:e.globals.accumulated}],"+":[Ge,ko(Ge),function(e,t){for(var r=0,o=0,n=t;o<n.length;o+=1){r+=n[o].evaluate(e)}return r}],"*":[Ge,ko(Ge),function(e,t){for(var r=1,o=0,n=t;o<n.length;o+=1){r*=n[o].evaluate(e)}return r}],"-":{type:Ge,overloads:[[[Ge,Ge],function(e,t){var r=t[0],o=t[1];return r.evaluate(e)-o.evaluate(e)}],[[Ge],function(e,t){return-t[0].evaluate(e)}]]},"/":[Ge,[Ge,Ge],function(e,t){var r=t[0],o=t[1];return r.evaluate(e)/o.evaluate(e)}],"%":[Ge,[Ge,Ge],function(e,t){var r=t[0],o=t[1];return r.evaluate(e)%o.evaluate(e)}],ln2:[Ge,[],function(){return Math.LN2}],pi:[Ge,[],function(){return Math.PI}],e:[Ge,[],function(){return Math.E}],"^":[Ge,[Ge,Ge],function(e,t){var r=t[0],o=t[1];return Math.pow(r.evaluate(e),o.evaluate(e))}],sqrt:[Ge,[Ge],function(e,t){var r=t[0];return Math.sqrt(r.evaluate(e))}],log10:[Ge,[Ge],function(e,t){var r=t[0];return Math.log(r.evaluate(e))/Math.LN10}],ln:[Ge,[Ge],function(e,t){var r=t[0];return Math.log(r.evaluate(e))}],log2:[Ge,[Ge],function(e,t){var r=t[0];return Math.log(r.evaluate(e))/Math.LN2}],sin:[Ge,[Ge],function(e,t){var r=t[0];return Math.sin(r.evaluate(e))}],cos:[Ge,[Ge],function(e,t){var r=t[0];return Math.cos(r.evaluate(e))}],tan:[Ge,[Ge],function(e,t){var r=t[0];return Math.tan(r.evaluate(e))}],asin:[Ge,[Ge],function(e,t){var r=t[0];return Math.asin(r.evaluate(e))}],acos:[Ge,[Ge],function(e,t){var r=t[0];return Math.acos(r.evaluate(e))}],atan:[Ge,[Ge],function(e,t){var r=t[0];return Math.atan(r.evaluate(e))}],min:[Ge,ko(Ge),function(e,t){return Math.min.apply(Math,t.map(function(t){return t.evaluate(e)}))}],max:[Ge,ko(Ge),function(e,t){return Math.max.apply(Math,t.map(function(t){return t.evaluate(e)}))}],abs:[Ge,[Ge],function(e,t){var r=t[0];return Math.abs(r.evaluate(e))}],round:[Ge,[Ge],function(e,t){var r=t[0].evaluate(e);return r<0?-Math.round(-r):Math.round(r)}],floor:[Ge,[Ge],function(e,t){var r=t[0];return Math.floor(r.evaluate(e))}],ceil:[Ge,[Ge],function(e,t){var r=t[0];return Math.ceil(r.evaluate(e))}],"filter-==":[Be,[We,Ze],function(e,t){var r=t[0],o=t[1];return e.properties()[r.value]===o.value}],"filter-id-==":[Be,[Ze],function(e,t){var r=t[0];return e.id()===r.value}],"filter-type-==":[Be,[We],function(e,t){var r=t[0];return e.geometryType()===r.value}],"filter-<":[Be,[We,Ze],function(e,t){var r=t[0],o=t[1],n=e.properties()[r.value],i=o.value;return typeof n==typeof i&&n<i}],"filter-id-<":[Be,[Ze],function(e,t){var r=t[0],o=e.id(),n=r.value;return typeof o==typeof n&&o<n}],"filter->":[Be,[We,Ze],function(e,t){var r=t[0],o=t[1],n=e.properties()[r.value],i=o.value;return typeof n==typeof i&&n>i}],"filter-id->":[Be,[Ze],function(e,t){var r=t[0],o=e.id(),n=r.value;return typeof o==typeof n&&o>n}],"filter-<=":[Be,[We,Ze],function(e,t){var r=t[0],o=t[1],n=e.properties()[r.value],i=o.value;return typeof n==typeof i&&n<=i}],"filter-id-<=":[Be,[Ze],function(e,t){var r=t[0],o=e.id(),n=r.value;return typeof o==typeof n&&o<=n}],"filter->=":[Be,[We,Ze],function(e,t){var r=t[0],o=t[1],n=e.properties()[r.value],i=o.value;return typeof n==typeof i&&n>=i}],"filter-id->=":[Be,[Ze],function(e,t){var r=t[0],o=e.id(),n=r.value;return typeof o==typeof n&&o>=n}],"filter-has":[Be,[Ze],function(e,t){return t[0].value in e.properties()}],"filter-has-id":[Be,[],function(e){return null!==e.id()&&void 0!==e.id()}],"filter-type-in":[Be,[et(We)],function(e,t){return t[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[Be,[et(Ze)],function(e,t){return t[0].value.indexOf(e.id())>=0}],"filter-in-small":[Be,[We,et(Ze)],function(e,t){var r=t[0];return t[1].value.indexOf(e.properties()[r.value])>=0}],"filter-in-large":[Be,[We,et(Ze)],function(e,t){var r=t[0],o=t[1];return wo(e.properties()[r.value],o.value,0,o.value.length-1)}],all:{type:Be,overloads:[[[Be,Be],function(e,t){var r=t[0],o=t[1];return r.evaluate(e)&&o.evaluate(e)}],[ko(Be),function(e,t){for(var r=0,o=t;r<o.length;r+=1){if(!o[r].evaluate(e))return!1}return!0}]]},any:{type:Be,overloads:[[[Be,Be],function(e,t){var r=t[0],o=t[1];return r.evaluate(e)||o.evaluate(e)}],[ko(Be),function(e,t){for(var r=0,o=t;r<o.length;r+=1){if(o[r].evaluate(e))return!0}return!1}]]},"!":[Be,[Be],function(e,t){return!t[0].evaluate(e)}],"is-supported-script":[Be,[We],function(e,t){var r=t[0],o=e.globals&&e.globals.isSupportedScript;return!o||o(r.evaluate(e))}],upcase:[We,[We],function(e,t){return t[0].evaluate(e).toUpperCase()}],downcase:[We,[We],function(e,t){return t[0].evaluate(e).toLowerCase()}],concat:[We,ko(Ze),function(e,t){return t.map(function(t){return mt(t.evaluate(e))}).join("")}],"resolved-locale":[We,[Ke],function(e,t){return t[0].evaluate(e).resolvedLocale()}]});var Lo=function(e,t){this.expression=e,this._warningHistory={},this._evaluator=new Tt,this._defaultValue=t?Ho(t):null,this._enumValues=t&&"enum"===t.type?t.values:null};function Do(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in vo}function Fo(e,t){var r=new ir(vo,[],t?Vo(t):void 0),o=r.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return o?jo(new Lo(o,t)):zo(r.errors)}Lo.prototype.evaluateWithoutErrorHandling=function(e,t,r,o,n,i){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=r,this._evaluator.canonical=o,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=i,this.expression.evaluate(this._evaluator)},Lo.prototype.evaluate=function(e,t,r,o,n,i){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=r||null,this._evaluator.canonical=o,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=i||null;try{var a=this.expression.evaluate(this._evaluator);if(null==a||"number"==typeof a&&a!=a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new gt("Expected value to be one of "+Object.keys(this._enumValues).map(function(e){return JSON.stringify(e)}).join(", ")+", but found "+JSON.stringify(a)+" instead.");return a}catch(s){return this._warningHistory[s.message]||(this._warningHistory[s.message]=!0,"undefined"!=typeof console&&console.warn(s.message)),this._defaultValue}};var $o=function(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!rr(t.expression)};$o.prototype.evaluateWithoutErrorHandling=function(e,t,r,o,n,i){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,o,n,i)},$o.prototype.evaluate=function(e,t,r,o,n,i){return this._styleExpression.evaluate(e,t,r,o,n,i)};var Uo=function(e,t,r,o){this.kind=e,this.zoomStops=r,this._styleExpression=t,this.isStateDependent="camera"!==e&&!rr(t.expression),this.interpolationType=o};function Jo(e,t){if("error"===(e=Fo(e,t)).result)return e;var r=e.value.expression,o=tr(r);if(!o&&!So(t))return zo([new $e("","data expressions not supported")]);var n=or(r,["zoom"]);if(!n&&!To(t))return zo([new $e("","zoom expressions not supported")]);var i=Bo(r);if(!i&&!n)return zo([new $e("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(i instanceof $e)return zo([i]);if(i instanceof Lr&&!_o(t))return zo([new $e("",'"interpolate" expressions cannot be used with this property')]);if(!i)return jo(new $o(o?"constant":"source",e.value));var a=i instanceof Lr?i.interpolation:void 0;return jo(new Uo(o?"camera":"composite",e.value,i.labels,a))}Uo.prototype.evaluateWithoutErrorHandling=function(e,t,r,o,n,i){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,o,n,i)},Uo.prototype.evaluate=function(e,t,r,o,n,i){return this._styleExpression.evaluate(e,t,r,o,n,i)},Uo.prototype.interpolationFactor=function(e,t,r){return this.interpolationType?Lr.interpolationFactor(this.interpolationType,e,t,r):0};var Go=function(e,t){this._parameters=e,this._specification=t,Fe(this,qo(this._parameters,this._specification))};function Wo(e,t){if(Io(e))return new Go(e,t);if(Do(e)){var r=Jo(e,t);if("error"===r.result)throw new Error(r.value.map(function(e){return e.key+": "+e.message}).join(", "));return r.value}var o=e;return"string"==typeof e&&"color"===t.type&&(o=lt.parse(e)),{kind:"constant",evaluate:function(){return o}}}function Bo(e){var t=null;if(e instanceof $r)t=Bo(e.result);else if(e instanceof Fr)for(var r=0,o=e.args;r<o.length;r+=1){var n=o[r];if(t=Bo(n))break}else(e instanceof lr||e instanceof Lr)&&e.input instanceof _t&&"zoom"===e.input.name&&(t=e);return t instanceof $e?t:(e.eachChild(function(e){var r=Bo(e);r instanceof $e?t=r:!t&&r?t=new $e("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&r&&t!==r&&(t=new $e("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t)}function Vo(e){var t={color:Ve,string:We,number:Ge,enum:We,boolean:Be,formatted:Ye,resolvedImage:Qe};return"array"===e.type?et(t[e.value]||Ze,e.length):t[e.type]}function Ho(e){return"color"===e.type&&Io(e.default)?new lt(0,0,0,0):"color"===e.type?lt.parse(e.default)||null:void 0===e.default?null:e.default}function Zo(e){return"object"==typeof e?["literal",e]:e}function Xo(e,t){var r=e.stops;if(!r)return Ko(e,t);var o=r&&"object"==typeof r[0][0],n=o||void 0!==e.property,i=o||!n;return r=r.map(function(e){return!n&&t.tokens&&"string"==typeof e[1]?[e[0],sn(e[1])]:[e[0],Zo(e[1])]}),o?Qo(e,t,r):i?rn(e,t,r):tn(e,t,r)}function Ko(e,t){var r=["get",e.property];if(void 0===e.default)return"string"===t.type?["string",r]:r;if("enum"===t.type)return["match",r,Object.keys(t.values),r,e.default];var o=["color"===t.type?"to-color":t.type,r,Zo(e.default)];return"array"===t.type&&o.splice(1,0,t.value,t.length||null),o}function Yo(e){switch(e.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function Qo(e,t,r){for(var o={},n={},i=[],a=0;a<r.length;a++){var s=r[a],l=s[0].zoom;void 0===o[l]&&(o[l]={zoom:l,type:e.type,property:e.property,default:e.default},n[l]=[],i.push(l)),n[l].push([s[0].value,s[1]])}if("exponential"===an({},t)){for(var u=[Yo(e),["linear"],["zoom"]],p=0,c=i;p<c.length;p+=1){var d=c[p];nn(u,d,tn(o[d],t,n[d]),!1)}return u}for(var h=["step",["zoom"]],f=0,y=i;f<y.length;f+=1){var m=y[f];nn(h,m,tn(o[m],t,n[m]),!0)}return on(h),h}function en(e,t){return void 0!==e?e:void 0!==t?t:void 0}function tn(e,t,r){var o=an(e,t),n=["get",e.property];if("categorical"===o&&"boolean"==typeof r[0][0]){for(var i=["case"],a=0,s=r;a<s.length;a+=1){var l=s[a];i.push(["==",n,l[0]],l[1])}return i.push(Zo(en(e.default,t.default))),i}if("categorical"===o){for(var u=["match",n],p=0,c=r;p<c.length;p+=1){var d=c[p];nn(u,d[0],d[1],!1)}return u.push(Zo(en(e.default,t.default))),u}if("interval"===o){for(var h=["step",["number",n]],f=0,y=r;f<y.length;f+=1){var m=y[f];nn(h,m[0],m[1],!0)}return on(h),void 0===e.default?h:["case",["==",["typeof",n],"number"],h,Zo(e.default)]}if("exponential"===o){for(var v=void 0!==e.base?e.base:1,g=[Yo(e),1===v?["linear"]:["exponential",v],["number",n]],b=0,x=r;b<x.length;b+=1){var w=x[b];nn(g,w[0],w[1],!1)}return void 0===e.default?g:["case",["==",["typeof",n],"number"],g,Zo(e.default)]}throw new Error("Unknown property function type "+o)}function rn(e,t,r,o){void 0===o&&(o=["zoom"]);var n,i=an(e,t),a=!1;if("interval"===i)n=["step",o],a=!0;else{if("exponential"!==i)throw new Error('Unknown zoom function type "'+i+'"');var s=void 0!==e.base?e.base:1;n=[Yo(e),1===s?["linear"]:["exponential",s],o]}for(var l=0,u=r;l<u.length;l+=1){var p=u[l];nn(n,p[0],p[1],a)}return on(n),n}function on(e){"step"===e[0]&&3===e.length&&(e.push(0),e.push(e[3]))}function nn(e,t,r,o){e.length>3&&t===e[e.length-2]||(o&&2===e.length||e.push(t),e.push(r))}function an(e,t){return e.type?e.type:t.expression.interpolated?"exponential":"interval"}function sn(e){for(var t=["concat"],r=/{([^{}]+)}/g,o=0,n=r.exec(e);null!==n;n=r.exec(e)){var i=e.slice(o,r.lastIndex-n[0].length);o=r.lastIndex,i.length>0&&t.push(i),t.push(["get",n[1]])}if(1===t.length)return e;if(o<e.length)t.push(e.slice(o));else if(2===t.length)return["to-string",t[1]];return t}function ln(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var t=0,r=e.slice(1);t<r.length;t+=1){var o=r[t];if(!ln(o)&&"boolean"!=typeof o)return!1}return!0;default:return!0}}Go.deserialize=function(e){return new Go(e._parameters,e._specification)},Go.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}};var un={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function pn(e){if(null==e)return{filter:function(){return!0},needGeometry:!1};ln(e)||(e=hn(e));var t=Fo(e,un);if("error"===t.result)throw new Error(t.value.map(function(e){return e.key+": "+e.message}).join(", "));return{filter:function(e,r,o){return t.value.evaluate(e,r,{},o)},needGeometry:dn(e)}}function cn(e,t){return e<t?-1:e>t?1:0}function dn(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(var t=1;t<e.length;t++)if(dn(e[t]))return!0;return!1}function hn(e){if(!e)return!0;var t=e[0];return e.length<=1?"any"!==t:"=="===t?fn(e[1],e[2],"=="):"!="===t?gn(fn(e[1],e[2],"==")):"<"===t||">"===t||"<="===t||">="===t?fn(e[1],e[2],t):"any"===t?yn(e.slice(1)):"all"===t?["all"].concat(e.slice(1).map(hn)):"none"===t?["all"].concat(e.slice(1).map(hn).map(gn)):"in"===t?mn(e[1],e.slice(2)):"!in"===t?gn(mn(e[1],e.slice(2))):"has"===t?vn(e[1]):"!has"===t?gn(vn(e[1])):"within"!==t||e}function fn(e,t,r){switch(e){case"$type":return["filter-type-"+r,t];case"$id":return["filter-id-"+r,t];default:return["filter-"+r,e,t]}}function yn(e){return["any"].concat(e.map(hn))}function mn(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(function(e){return typeof e!=typeof t[0]})?["filter-in-large",e,["literal",t.sort(cn)]]:["filter-in-small",e,["literal",t]]}}function vn(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function gn(e){return["!",e]}function bn(e){return xn(e,{})}function xn(e,t){var r;if(ln(e))return e;if(!e)return!0;var o,n=e[0];if(e.length<=1)return"any"!==n;if("=="===n||"!="===n||"<"===n||">"===n||"<="===n||">="===n){var i=e;o=kn(i[1],i[2],n,t)}else{if("any"===n){var a=e.slice(1).map(function(e){var t={},r=xn(e,t),o=wn(t);return!0===o?r:["case",o,r,!1]});return["any"].concat(a)}if("all"===n){var s=e.slice(1).map(function(e){return xn(e,t)});return s.length>1?["all"].concat(s):(r=[]).concat.apply(r,s)}if("none"===n)return["!",xn(["any"].concat(e.slice(1)),{})];o="in"===n?jn(e[1],e.slice(2)):"!in"===n?jn(e[1],e.slice(2),!0):"has"===n?zn(e[1]):"!has"!==n||["!",zn(e[1])]}return o}function wn(e){var t=[];for(var r in e){var o="$id"===r?["id"]:["get",r];t.push(["==",["typeof",o],e[r]])}return 0===t.length||(1===t.length?t[0]:["all"].concat(t))}function kn(e,t,r,o){var n;if("$type"===e)return[r,["geometry-type"],t];if(n="$id"===e?["id"]:["get",e],o&&null!==t){var i=typeof t;o[e]=i}return"=="===r&&"$id"!==e&&null===t?["all",["has",e],["==",n,null]]:"!="===r&&"$id"!==e&&null===t?["any",["!",["has",e]],["!=",n,null]]:[r,n,t]}function jn(e,t,r){if(void 0===r&&(r=!1),0===t.length)return r;var o;o="$type"===e?["geometry-type"]:"$id"===e?["id"]:["get",e];for(var n=!0,i=typeof t[0],a=0,s=t;a<s.length;a+=1){if(typeof s[a]!==i){n=!1;break}}if(n&&("string"===i||"number"===i)){var l=t.sort().filter(function(e,r){return 0===r||t[r-1]!==e});return["match",o,l,!r,r]}return[r?"all":"any"].concat(t.map(function(e){return[r?"!=":"==",o,e]}))}function zn(e){return"$type"===e||("$id"===e?["!=",["id"],null]:["has",e])}function Sn(e){var t=[];return Ce(e,function(e){e.filter&&(e.filter=bn(e.filter))}),Ee(e,{paint:!0,layout:!0},function(e){var r=e.path,o=e.value,n=e.reference,i=e.set;Do(o)||("object"!=typeof o||Array.isArray(o)?n.tokens&&"string"==typeof o&&i(sn(o)):(i(Xo(o,n)),t.push(r.join("."))))}),e}function Tn(e){var t=!1;if(7===e.version&&(e=De(e),t=!0),8===e.version&&(t=Sn(e),t=!0),!t)throw new Error("cannot migrate from",e.version);return e}function _n(e){var t=[],r=[],o=[];for(var n in e.sources){var i=e.sources[n];if("vector"===i.type){var a=/^mapbox:\/\/(.*)/.exec(i.url);a&&(t.push(n),r.push(a[1]))}}if(t.length<2)return e;t.forEach(function(t){delete e.sources[t]});var s=r.join(",");return e.sources[s]={type:"vector",url:"mapbox://"+s},e.layers.forEach(function(e){if(t.indexOf(e.source)>=0&&(e.source=s,"source-layer"in e)){if(o.indexOf(e["source-layer"])>=0)throw new Error("Conflicting source layer names");o.push(e["source-layer"])}}),e}var An=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function In(e,t){var r={};for(var o in e)"ref"!==o&&(r[o]=e[o]);return An.forEach(function(e){e in t&&(r[e]=t[e])}),r}function On(e){e=e.slice();for(var t=Object.create(null),r=0;r<e.length;r++)t[e[r].id]=e[r];for(var o=0;o<e.length;o++)"ref"in e[o]&&(e[o]=In(e[o],t[e[o].ref]));return e}function qn(e,t){if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!qn(e[r],t[r]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==t){if("object"!=typeof t)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var o in e)if(!qn(e[o],t[o]))return!1;return!0}return e===t}var Cn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function En(e,t,r){r.push({command:Cn.addSource,args:[e,t[e]]})}function Mn(e,t,r){t.push({command:Cn.removeSource,args:[e]}),r[e]=!0}function Nn(e,t,r,o){Mn(e,r,o),En(e,t,r)}function Pn(e,t,r){var o;for(o in e[r])if(e[r].hasOwnProperty(o)&&"data"!==o&&!qn(e[r][o],t[r][o]))return!1;for(o in t[r])if(t[r].hasOwnProperty(o)&&"data"!==o&&!qn(e[r][o],t[r][o]))return!1;return!0}function Rn(e,t,r,o){var n;for(n in t=t||{},e=e||{})e.hasOwnProperty(n)&&(t.hasOwnProperty(n)||Mn(n,r,o));for(n in t)t.hasOwnProperty(n)&&(e.hasOwnProperty(n)?qn(e[n],t[n])||("geojson"===e[n].type&&"geojson"===t[n].type&&Pn(e,t,n)?r.push({command:Cn.setGeoJSONSourceData,args:[n,t[n].data]}):Nn(n,t,r,o)):En(n,t,r))}function Ln(e,t,r,o,n,i){var a;for(a in t=t||{},e=e||{})e.hasOwnProperty(a)&&(qn(e[a],t[a])||r.push({command:i,args:[o,a,t[a],n]}));for(a in t)t.hasOwnProperty(a)&&!e.hasOwnProperty(a)&&(qn(e[a],t[a])||r.push({command:i,args:[o,a,t[a],n]}))}function Dn(e){return e.id}function Fn(e,t){return e[t.id]=t,e}function $n(e,t,r){t=t||[];var o,n,i,a,s,l,u,p=(e=e||[]).map(Dn),c=t.map(Dn),d=e.reduce(Fn,{}),h=t.reduce(Fn,{}),f=p.slice(),y=Object.create(null);for(o=0,n=0;o<p.length;o++)i=p[o],h.hasOwnProperty(i)?n++:(r.push({command:Cn.removeLayer,args:[i]}),f.splice(f.indexOf(i,n),1));for(o=0,n=0;o<c.length;o++)i=c[c.length-1-o],f[f.length-1-o]!==i&&(d.hasOwnProperty(i)?(r.push({command:Cn.removeLayer,args:[i]}),f.splice(f.lastIndexOf(i,f.length-n),1)):n++,l=f[f.length-o],r.push({command:Cn.addLayer,args:[h[i],l]}),f.splice(f.length-o,0,i),y[i]=!0);for(o=0;o<c.length;o++)if(a=d[i=c[o]],s=h[i],!y[i]&&!qn(a,s))if(qn(a.source,s.source)&&qn(a["source-layer"],s["source-layer"])&&qn(a.type,s.type)){for(u in Ln(a.layout,s.layout,r,i,null,Cn.setLayoutProperty),Ln(a.paint,s.paint,r,i,null,Cn.setPaintProperty),qn(a.filter,s.filter)||r.push({command:Cn.setFilter,args:[i,s.filter]}),qn(a.minzoom,s.minzoom)&&qn(a.maxzoom,s.maxzoom)||r.push({command:Cn.setLayerZoomRange,args:[i,s.minzoom,s.maxzoom]}),a)a.hasOwnProperty(u)&&"layout"!==u&&"paint"!==u&&"filter"!==u&&"metadata"!==u&&"minzoom"!==u&&"maxzoom"!==u&&(0===u.indexOf("paint.")?Ln(a[u],s[u],r,i,u.slice(6),Cn.setPaintProperty):qn(a[u],s[u])||r.push({command:Cn.setLayerProperty,args:[i,u,s[u]]}));for(u in s)s.hasOwnProperty(u)&&!a.hasOwnProperty(u)&&"layout"!==u&&"paint"!==u&&"filter"!==u&&"metadata"!==u&&"minzoom"!==u&&"maxzoom"!==u&&(0===u.indexOf("paint.")?Ln(a[u],s[u],r,i,u.slice(6),Cn.setPaintProperty):qn(a[u],s[u])||r.push({command:Cn.setLayerProperty,args:[i,u,s[u]]}))}else r.push({command:Cn.removeLayer,args:[i]}),l=f[f.lastIndexOf(i)+1],r.push({command:Cn.addLayer,args:[s,l]})}function Un(e,t){if(!e)return[{command:Cn.setStyle,args:[t]}];var r=[];try{if(!qn(e.version,t.version))return[{command:Cn.setStyle,args:[t]}];qn(e.center,t.center)||r.push({command:Cn.setCenter,args:[t.center]}),qn(e.zoom,t.zoom)||r.push({command:Cn.setZoom,args:[t.zoom]}),qn(e.bearing,t.bearing)||r.push({command:Cn.setBearing,args:[t.bearing]}),qn(e.pitch,t.pitch)||r.push({command:Cn.setPitch,args:[t.pitch]}),qn(e.sprite,t.sprite)||r.push({command:Cn.setSprite,args:[t.sprite]}),qn(e.glyphs,t.glyphs)||r.push({command:Cn.setGlyphs,args:[t.glyphs]}),qn(e.transition,t.transition)||r.push({command:Cn.setTransition,args:[t.transition]}),qn(e.light,t.light)||r.push({command:Cn.setLight,args:[t.light]});var o={},n=[];Rn(e.sources,t.sources,n,o);var i=[];e.layers&&e.layers.forEach(function(e){o[e.source]?r.push({command:Cn.removeLayer,args:[e.id]}):i.push(e)}),r=r.concat(n),$n(i,t.layers,r)}catch(a){console.warn("Unable to compute style diff:",a),r=[{command:Cn.setStyle,args:[t]}]}return r}var Jn=function(e,t,r,o){this.message=(e?e+": ":"")+r,o&&(this.identifier=o),null!=t&&t.__line__&&(this.line=t.__line__)};exports.ValidationError=Jn;var Gn=function(e){this.error=e,this.message=e.message;var t=e.message.match(/line (\d+)/);this.line=t?parseInt(t[1],10):0};function Wn(e){var t=e.key,r=e.value;return r?[new Jn(t,r,"constants have been deprecated as of v8")]:[]}function Bn(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Vn(e){if(Array.isArray(e))return e.map(Vn);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var t={};for(var r in e)t[r]=Vn(e[r]);return t}return Bn(e)}function Hn(e){var t=e.key,r=e.value,o=e.valueSpec||{},n=e.objectElementValidators||{},i=e.style,a=e.styleSpec,s=[],l=Ao(r);if("object"!==l)return[new Jn(t,r,"object expected, "+l+" found")];for(var u in r){var p=u.split(".")[0],c=o[p]||o["*"],d=void 0;if(n[p])d=n[p];else if(o[p])d=mi;else if(n["*"])d=n["*"];else{if(!o["*"]){s.push(new Jn(t,r[u],'unknown property "'+u+'"'));continue}d=mi}s=s.concat(d({key:(t?t+".":t)+u,value:r[u],valueSpec:c,style:i,styleSpec:a,object:r,objectKey:u},r))}for(var h in o)n[h]||o[h].required&&void 0===o[h].default&&void 0===r[h]&&s.push(new Jn(t,r,'missing required property "'+h+'"'));return s}function Zn(e){var t=e.value,r=e.valueSpec,o=e.style,n=e.styleSpec,i=e.key,a=e.arrayElementValidator||mi;if("array"!==Ao(t))return[new Jn(i,t,"array expected, "+Ao(t)+" found")];if(r.length&&t.length!==r.length)return[new Jn(i,t,"array length "+r.length+" expected, length "+t.length+" found")];if(r["min-length"]&&t.length<r["min-length"])return[new Jn(i,t,"array length at least "+r["min-length"]+" expected, length "+t.length+" found")];var s={type:r.value,values:r.values};n.$version<7&&(s.function=r.function),"object"===Ao(r.value)&&(s=r.value);for(var l=[],u=0;u<t.length;u++)l=l.concat(a({array:t,arrayIndex:u,value:t[u],valueSpec:s,style:o,styleSpec:n,key:i+"["+u+"]"}));return l}function Xn(e){var t=e.key,r=e.value,o=e.valueSpec,n=Ao(r);return"number"===n&&r!=r&&(n="NaN"),"number"!==n?[new Jn(t,r,"number expected, "+n+" found")]:"minimum"in o&&r<o.minimum?[new Jn(t,r,r+" is less than the minimum value "+o.minimum)]:"maximum"in o&&r>o.maximum?[new Jn(t,r,r+" is greater than the maximum value "+o.maximum)]:[]}function Kn(e){var t,r,o,n=e.valueSpec,i=Bn(e.value.type),a={},s="categorical"!==i&&void 0===e.value.property,l=!s,u="array"===Ao(e.value.stops)&&"array"===Ao(e.value.stops[0])&&"object"===Ao(e.value.stops[0][0]),p=Hn({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===i)return[new Jn(e.key,e.value,'identity function may not have a "stops" property')];var t=[],r=e.value;t=t.concat(Zn({key:e.key,value:r,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:c})),"array"===Ao(r)&&0===r.length&&t.push(new Jn(e.key,r,"array must have at least one stop"));return t},default:function(e){return mi({key:e.key,value:e.value,valueSpec:n,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===i&&s&&p.push(new Jn(e.key,e.value,'missing required property "property"')),"identity"===i||e.value.stops||p.push(new Jn(e.key,e.value,'missing required property "stops"')),"exponential"===i&&e.valueSpec.expression&&!_o(e.valueSpec)&&p.push(new Jn(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(l&&!So(e.valueSpec)?p.push(new Jn(e.key,e.value,"property functions not supported")):s&&!To(e.valueSpec)&&p.push(new Jn(e.key,e.value,"zoom functions not supported"))),"categorical"!==i&&!u||void 0!==e.value.property||p.push(new Jn(e.key,e.value,'"property" property is required')),p;function c(e){var t=[],i=e.value,s=e.key;if("array"!==Ao(i))return[new Jn(s,i,"array expected, "+Ao(i)+" found")];if(2!==i.length)return[new Jn(s,i,"array length 2 expected, length "+i.length+" found")];if(u){if("object"!==Ao(i[0]))return[new Jn(s,i,"object expected, "+Ao(i[0])+" found")];if(void 0===i[0].zoom)return[new Jn(s,i,"object stop key must have zoom")];if(void 0===i[0].value)return[new Jn(s,i,"object stop key must have value")];if(o&&o>Bn(i[0].zoom))return[new Jn(s,i[0].zoom,"stop zoom values must appear in ascending order")];Bn(i[0].zoom)!==o&&(o=Bn(i[0].zoom),r=void 0,a={}),t=t.concat(Hn({key:s+"[0]",value:i[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:Xn,value:d}}))}else t=t.concat(d({key:s+"[0]",value:i[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},i));return Do(Vn(i[1]))?t.concat([new Jn(s+"[1]",i[1],"expressions are not allowed in function stops.")]):t.concat(mi({key:s+"[1]",value:i[1],valueSpec:n,style:e.style,styleSpec:e.styleSpec}))}function d(e,o){var s=Ao(e.value),l=Bn(e.value),u=null!==e.value?e.value:o;if(t){if(s!==t)return[new Jn(e.key,u,s+" stop domain type must match previous stop domain type "+t)]}else t=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new Jn(e.key,u,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==i){var p="number expected, "+s+" found";return So(n)&&void 0===i&&(p+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Jn(e.key,u,p)]}return"categorical"!==i||"number"!==s||isFinite(l)&&Math.floor(l)===l?"categorical"!==i&&"number"===s&&void 0!==r&&l<r?[new Jn(e.key,u,"stop domain values must appear in ascending order")]:(r=l,"categorical"===i&&l in a?[new Jn(e.key,u,"stop domain values must be unique")]:(a[l]=!0,[])):[new Jn(e.key,u,"integer expected, found "+l)]}}function Yn(e){var t=("property"===e.expressionContext?Jo:Fo)(Vn(e.value),e.valueSpec);if("error"===t.result)return t.value.map(function(t){return new Jn(""+e.key+t.key,e.value,t.message)});var r=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!r.outputDefined())return[new Jn(e.key,e.value,'Invalid data expression for "'+e.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===e.expressionContext&&"layout"===e.propertyType&&!rr(r))return[new Jn(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext&&!rr(r))return[new Jn(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!or(r,["zoom","feature-state"]))return[new Jn(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!tr(r))return[new Jn(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Qn(e){var t=e.value,r=e.key,o=Ao(t);return"boolean"!==o?[new Jn(r,t,"boolean expected, "+o+" found")]:[]}function ei(e){var t=e.key,r=e.value,o=Ao(r);return"string"!==o?[new Jn(t,r,"color expected, "+o+" found")]:null===st(r)?[new Jn(t,r,'color expected, "'+r+'" found')]:[]}function ti(e){var t=e.key,r=e.value,o=e.valueSpec,n=[];return Array.isArray(o.values)?-1===o.values.indexOf(Bn(r))&&n.push(new Jn(t,r,"expected one of ["+o.values.join(", ")+"], "+JSON.stringify(r)+" found")):-1===Object.keys(o.values).indexOf(Bn(r))&&n.push(new Jn(t,r,"expected one of ["+Object.keys(o.values).join(", ")+"], "+JSON.stringify(r)+" found")),n}function ri(e){return ln(Vn(e.value))?Yn(Fe({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):oi(e)}function oi(e){var t=e.value,r=e.key;if("array"!==Ao(t))return[new Jn(r,t,"array expected, "+Ao(t)+" found")];var o,n=e.styleSpec,i=[];if(t.length<1)return[new Jn(r,t,"filter array must have at least 1 element")];switch(i=i.concat(ti({key:r+"[0]",value:t[0],valueSpec:n.filter_operator,style:e.style,styleSpec:e.styleSpec})),Bn(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===Bn(t[1])&&i.push(new Jn(r,t,'"$type" cannot be use with operator "'+t[0]+'"'));case"==":case"!=":3!==t.length&&i.push(new Jn(r,t,'filter array for operator "'+t[0]+'" must have 3 elements'));case"in":case"!in":t.length>=2&&"string"!==(o=Ao(t[1]))&&i.push(new Jn(r+"[1]",t[1],"string expected, "+o+" found"));for(var a=2;a<t.length;a++)o=Ao(t[a]),"$type"===Bn(t[1])?i=i.concat(ti({key:r+"["+a+"]",value:t[a],valueSpec:n.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==o&&"number"!==o&&"boolean"!==o&&i.push(new Jn(r+"["+a+"]",t[a],"string, number, or boolean expected, "+o+" found"));break;case"any":case"all":case"none":for(var s=1;s<t.length;s++)i=i.concat(oi({key:r+"["+s+"]",value:t[s],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":o=Ao(t[1]),2!==t.length?i.push(new Jn(r,t,'filter array for "'+t[0]+'" operator must have 2 elements')):"string"!==o&&i.push(new Jn(r+"[1]",t[1],"string expected, "+o+" found"));break;case"within":o=Ao(t[1]),2!==t.length?i.push(new Jn(r,t,'filter array for "'+t[0]+'" operator must have 2 elements')):"object"!==o&&i.push(new Jn(r+"[1]",t[1],"object expected, "+o+" found"))}return i}function ni(e,t){var r=e.key,o=e.style,n=e.styleSpec,i=e.value,a=e.objectKey,s=n[t+"_"+e.layerType];if(!s)return[];var l=a.match(/^(.*)-transition$/);if("paint"===t&&l&&s[l[1]]&&s[l[1]].transition)return mi({key:r,value:i,valueSpec:n.transition,style:o,styleSpec:n});var u,p=e.valueSpec||s[a];if(!p)return[new Jn(r,i,'unknown property "'+a+'"')];if("string"===Ao(i)&&So(p)&&!p.tokens&&(u=/^{([^}]+)}$/.exec(i)))return[new Jn(r,i,'"'+a+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(u[1])+" }`.")];var c=[];return"symbol"===e.layerType&&("text-field"===a&&o&&!o.glyphs&&c.push(new Jn(r,i,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&Io(Vn(i))&&"identity"===Bn(i.type)&&c.push(new Jn(r,i,'"text-font" does not support identity functions'))),c.concat(mi({key:e.key,value:i,valueSpec:p,style:o,styleSpec:n,expressionContext:"property",propertyType:t,propertyKey:a}))}function ii(e){return ni(e,"paint")}function ai(e){return ni(e,"layout")}function si(e){var t=[],r=e.value,o=e.key,n=e.style,i=e.styleSpec;r.type||r.ref||t.push(new Jn(o,r,'either "type" or "ref" is required'));var a,s=Bn(r.type),l=Bn(r.ref);if(r.id)for(var u=Bn(r.id),p=0;p<e.arrayIndex;p++){var c=n.layers[p];Bn(c.id)===u&&t.push(new Jn(o,r.id,'duplicate layer id "'+r.id+'", previously used at line '+c.id.__line__))}if("ref"in r)["type","source","source-layer","filter","layout"].forEach(function(e){e in r&&t.push(new Jn(o,r[e],'"'+e+'" is prohibited for ref layers'))}),n.layers.forEach(function(e){Bn(e.id)===l&&(a=e)}),a?a.ref?t.push(new Jn(o,r.ref,"ref cannot reference another ref layer")):s=Bn(a.type):t.push(new Jn(o,r.ref,'ref layer "'+l+'" not found'));else if("background"!==s)if(r.source){var d=n.sources&&n.sources[r.source],h=d&&Bn(d.type);d?"vector"===h&&"raster"===s?t.push(new Jn(o,r.source,'layer "'+r.id+'" requires a raster source')):"raster"===h&&"raster"!==s?t.push(new Jn(o,r.source,'layer "'+r.id+'" requires a vector source')):"vector"!==h||r["source-layer"]?"raster-dem"===h&&"hillshade"!==s?t.push(new Jn(o,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!r.paint||!r.paint["line-gradient"]||"geojson"===h&&d.lineMetrics||t.push(new Jn(o,r,'layer "'+r.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):t.push(new Jn(o,r,'layer "'+r.id+'" must specify a "source-layer"')):t.push(new Jn(o,r.source,'source "'+r.source+'" not found'))}else t.push(new Jn(o,r,'missing required property "source"'));return t=t.concat(Hn({key:o,value:r,valueSpec:i.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return mi({key:o+".type",value:r.type,valueSpec:i.layer.type,style:e.style,styleSpec:e.styleSpec,object:r,objectKey:"type"})},filter:ri,layout:function(e){return Hn({layer:r,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return ai(Fe({layerType:s},e))}}})},paint:function(e){return Hn({layer:r,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return ii(Fe({layerType:s},e))}}})}}}))}function li(e){var t=e.value,r=e.key,o=Ao(t);return"string"!==o?[new Jn(r,t,"string expected, "+o+" found")]:[]}exports.ParsingError=Gn;var ui={promoteId:ci};function pi(e){var t=e.value,r=e.key,o=e.styleSpec,n=e.style;if(!t.type)return[new Jn(r,t,'"type" is required')];var i,a=Bn(t.type);switch(a){case"vector":case"raster":case"raster-dem":return i=Hn({key:r,value:t,valueSpec:o["source_"+a.replace("-","_")],style:e.style,styleSpec:o,objectElementValidators:ui});case"geojson":if(i=Hn({key:r,value:t,valueSpec:o.source_geojson,style:n,styleSpec:o,objectElementValidators:ui}),t.cluster)for(var s in t.clusterProperties){var l=t.clusterProperties[s],u=l[0],p=l[1],c="string"==typeof u?[u,["accumulated"],["get",s]]:u;i.push.apply(i,Yn({key:r+"."+s+".map",value:p,expressionContext:"cluster-map"})),i.push.apply(i,Yn({key:r+"."+s+".reduce",value:c,expressionContext:"cluster-reduce"}))}return i;case"video":return Hn({key:r,value:t,valueSpec:o.source_video,style:n,styleSpec:o});case"image":return Hn({key:r,value:t,valueSpec:o.source_image,style:n,styleSpec:o});case"canvas":return[new Jn(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ti({key:r+".type",value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:n,styleSpec:o})}}function ci(e){var t=e.key,r=e.value;if("string"===Ao(r))return li({key:t,value:r});var o=[];for(var n in r)o.push.apply(o,li({key:t+"."+n,value:r[n]}));return o}function di(e){var t=e.value,r=e.styleSpec,o=r.light,n=e.style,i=[],a=Ao(t);if(void 0===t)return i;if("object"!==a)return i=i.concat([new Jn("light",t,"object expected, "+a+" found")]);for(var s in t){var l=s.match(/^(.*)-transition$/);i=l&&o[l[1]]&&o[l[1]].transition?i.concat(mi({key:s,value:t[s],valueSpec:r.transition,style:n,styleSpec:r})):o[s]?i.concat(mi({key:s,value:t[s],valueSpec:o[s],style:n,styleSpec:r})):i.concat([new Jn(s,t[s],'unknown property "'+s+'"')])}return i}function hi(e){return 0===li(e).length?[]:Yn(e)}function fi(e){return 0===li(e).length?[]:Yn(e)}var yi={"*":function(){return[]},array:Zn,boolean:Qn,number:Xn,color:ei,constants:Wn,enum:ti,filter:ri,function:Kn,layer:si,object:Hn,source:pi,light:di,string:li,formatted:hi,resolvedImage:fi};function mi(e){var t=e.value,r=e.valueSpec,o=e.styleSpec;return r.expression&&Io(Bn(t))?Kn(e):r.expression&&Do(Vn(t))?Yn(e):r.type&&yi[r.type]?yi[r.type](e):Hn(Fe({},e,{valueSpec:r.type?o[r.type]:r}))}function vi(e){var t=e.value,r=e.key,o=li(e);return o.length?o:(-1===t.indexOf("{fontstack}")&&o.push(new Jn(r,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&o.push(new Jn(r,t,'"glyphs" url must include a "{range}" token')),o)}function gi(e,t){void 0===t&&(t=F);var r=[];return r=r.concat(mi({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:vi,"*":function(){return[]}}})),e.constants&&(r=r.concat(Wn({key:"constants",value:e.constants,style:e,styleSpec:t}))),bi(r)}function bi(e){return[].concat(e).sort(function(e,t){return e.line-t.line})}function xi(e){return function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return bi(e.apply(this,t))}}gi.source=xi(pi),gi.light=xi(di),gi.layer=xi(si),gi.filter=xi(ri),gi.paintProperty=xi(ii),gi.layoutProperty=xi(ai);var wi=V(function(e,t){var r=function(){var e=function(e,t,r,o){for(r=r||{},o=e.length;o--;r[e[o]]=t);return r},t=[1,12],r=[1,13],o=[1,9],n=[1,10],i=[1,11],a=[1,14],s=[1,15],l=[14,18,22,24],u=[18,22],p=[22,24],c={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(e,t,r,o,n,i,a){var s=i.length-1;switch(n){case 1:this.$=new String(e.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b")),this.$.__line__=this._$.first_line;break;case 2:this.$=new Number(e),this.$.__line__=this._$.first_line;break;case 3:this.$=null;break;case 4:this.$=new Boolean(!0),this.$.__line__=this._$.first_line;break;case 5:this.$=new Boolean(!1),this.$.__line__=this._$.first_line;break;case 6:return this.$=i[s-1];case 13:this.$={},Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=i[s-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[i[s-2],i[s]];break;case 16:this.$={},this.$[i[s][0]]=i[s][1];break;case 17:this.$=i[s-2],i[s-2][i[s][0]]=i[s][1];break;case 18:this.$=[],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[i[s]];break;case 21:this.$=i[s-2],i[s-2].push(i[s])}},table:[{3:5,4:t,5:6,6:r,7:3,8:o,9:4,10:n,11:i,12:1,13:2,15:7,16:8,17:a,23:s},{1:[3]},{14:[1,16]},e(l,[2,7]),e(l,[2,8]),e(l,[2,9]),e(l,[2,10]),e(l,[2,11]),e(l,[2,12]),e(l,[2,3]),e(l,[2,4]),e(l,[2,5]),e([14,18,21,22,24],[2,1]),e(l,[2,2]),{3:20,4:t,18:[1,17],19:18,20:19},{3:5,4:t,5:6,6:r,7:3,8:o,9:4,10:n,11:i,13:23,15:7,16:8,17:a,23:s,24:[1,21],25:22},{1:[2,6]},e(l,[2,13]),{18:[1,24],22:[1,25]},e(u,[2,16]),{21:[1,26]},e(l,[2,18]),{22:[1,28],24:[1,27]},e(p,[2,20]),e(l,[2,14]),{3:20,4:t,20:29},{3:5,4:t,5:6,6:r,7:3,8:o,9:4,10:n,11:i,13:30,15:7,16:8,17:a,23:s},e(l,[2,19]),{3:5,4:t,5:6,6:r,7:3,8:o,9:4,10:n,11:i,13:31,15:7,16:8,17:a,23:s},e(u,[2,17]),e(u,[2,15]),e(p,[2,21])],defaultActions:{16:[2,6]},parseError:function(e,t){if(!t.recoverable)throw new Error(e);this.trace(e)},parse:function(e){var t=this,r=[0],o=[null],n=[],i=this.table,a="",s=0,l=0,u=1,p=n.slice.call(arguments,1),c=Object.create(this.lexer),d={yy:{}};for(var h in this.yy)Object.prototype.hasOwnProperty.call(this.yy,h)&&(d.yy[h]=this.yy[h]);c.setInput(e,d.yy),d.yy.lexer=c,d.yy.parser=this,void 0===c.yylloc&&(c.yylloc={});var f=c.yylloc;n.push(f);var y=c.options&&c.options.ranges;"function"==typeof d.yy.parseError?this.parseError=d.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var m,v,g,b,x,w,k,j,z,S={};;){if(v=r[r.length-1],this.defaultActions[v]?g=this.defaultActions[v]:(null==m&&(z=void 0,"number"!=typeof(z=c.lex()||u)&&(z=t.symbols_[z]||z),m=z),g=i[v]&&i[v][m]),void 0===g||!g.length||!g[0]){var T="";for(x in j=[],i[v])this.terminals_[x]&&x>2&&j.push("'"+this.terminals_[x]+"'");T=c.showPosition?"Parse error on line "+(s+1)+":\n"+c.showPosition()+"\nExpecting "+j.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(s+1)+": Unexpected "+(m==u?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(T,{text:c.match,token:this.terminals_[m]||m,line:c.yylineno,loc:f,expected:j})}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+m);switch(g[0]){case 1:r.push(m),o.push(c.yytext),n.push(c.yylloc),r.push(g[1]),m=null,l=c.yyleng,a=c.yytext,s=c.yylineno,f=c.yylloc;break;case 2:if(w=this.productions_[g[1]][1],S.$=o[o.length-w],S._$={first_line:n[n.length-(w||1)].first_line,last_line:n[n.length-1].last_line,first_column:n[n.length-(w||1)].first_column,last_column:n[n.length-1].last_column},y&&(S._$.range=[n[n.length-(w||1)].range[0],n[n.length-1].range[1]]),void 0!==(b=this.performAction.apply(S,[a,l,s,d.yy,g[1],o,n].concat(p))))return b;w&&(r=r.slice(0,-1*w*2),o=o.slice(0,-1*w),n=n.slice(0,-1*w)),r.push(this.productions_[g[1]][0]),o.push(S.$),n.push(S._$),k=i[r[r.length-2]][r[r.length-1]],r.push(k);break;case 3:return!0}}return!0}},d={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,r=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var o=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var n=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===o.length?this.yylloc.first_column:0)+o[o.length-r.length].length-r[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[n[0],n[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var r,o,n;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(n.yylloc.range=this.yylloc.range.slice(0))),(o=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=o.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:o?o[o.length-1].length-o[o.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],r=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var i in n)this[i]=n[i];return!1}return!1},next:function(){if(this.done)return this.EOF;var e,t,r,o;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var n=this._currentRules(),i=0;i<n.length;i++)if((r=this._input.match(this.rules[n[i]]))&&(!t||r[0].length>t[0].length)){if(t=r,o=i,this.options.backtrack_lexer){if(!1!==(e=this.test_match(r,n[i])))return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?!1!==(e=this.test_match(t,n[o]))&&e:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return(e=this.conditionStack.length-1-Math.abs(e||0))>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(e,t,r,o){switch(r){case 0:break;case 1:return 6;case 2:return t.yytext=t.yytext.substr(1,t.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt\/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};function h(){this.yy={}}return c.lexer=d,h.prototype=c,c.Parser=h,new h}();void 0!==B&&(t.parser=r,t.Parser=r.Parser,t.parse=function(){return r.parse.apply(r,arguments)})}),ki=wi.parser,ji=wi.Parser,zi=wi.parse;function Si(e){if(e instanceof String||"string"==typeof e||e instanceof t)try{return wi.parse(e.toString())}catch(r){throw new Gn(r)}return e}function Ti(e,t){void 0===t&&(t=F);var r=e;try{r=Si(r)}catch(o){return[o]}return gi(r,t)}var _i=8,Ai=15;function Ii(e,t){return!e||"string"!==Ao(e)||!!e.match(t)}function Oi(e){return e.url?e.url.split(",").length:0}function qi(e,t,r){var o=new Set(t),n=[];return Object.keys(e).forEach(function(t){if(!o.has(t)){var i=r?r+"."+t:null;n.push(new Jn(i,e[t],'Unsupported property "'+t+'"'))}}),n}function Ci(e,t){var r=[];r.push.apply(r,qi(e,["type","url","tileSize"],"source"));return Ii(e.url,/^mapbox:\/\/([^\/]*)$/)||r.push(new Jn("sources["+t+"]",e.url,"Source url must be a valid Mapbox tileset url")),r}function Ei(e){var t=[],r=0;return Object.keys(e).forEach(function(o,n){var i=Ci(e[o],n);i.length||(r+=Oi(e[o])),t.push.apply(t,i)}),r>Ai&&t.push(new Jn("sources",null,"Styles must contain "+Ai+" or fewer sources")),t}function Mi(e,t){var r=[],o=qi(e,t.concat(["owner","id","cacheControl","draft","created","modified","visibility"]));r.push.apply(r,o),(e.version>_i||e.version<_i)&&r.push(new Jn("version",e.version,"Style version must be "+_i));Ii(e.glyphs,/^mapbox:\/\/fonts\/([^\/]*)\/{fontstack}\/{range}.pbf$/)||r.push(new Jn("glyphs",e.glyphs,"Styles must reference glyphs hosted by Mapbox"));Ii(e.sprite,/^mapbox:\/\/sprites\/([^\/]*)\/([^\/]*)\/?([^\/]*)?$/)||r.push(new Jn("sprite",e.sprite,"Styles must reference sprites hosted by Mapbox"));return Ii(e.visibility,/^(public|private)$/)||r.push(new Jn("visibility",e.visibility,"Style visibility must be public or private")),r}function Ni(e){var t=e;try{t=Si(t)}catch(o){return[o]}var r=gi(t,F).concat(Mi(t,Object.keys(F.$root)));return t.sources&&(r=r.concat(Ei(t.sources))),r}var Pi={StyleExpression:Lo,isExpression:Do,isExpressionFilter:ln,createExpression:Fo,createPropertyExpression:Jo,normalizePropertyExpression:Wo,ZoomConstantExpression:$o,ZoomDependentExpression:Uo,StylePropertyFunction:Go};exports.expression=Pi;var Ri={convertFunction:Xo,createFunction:qo,isFunction:Io};exports.function=Ri;var Li={eachSource:qe,eachLayer:Ce,eachProperty:Ee};exports.visit=Li,Ti.parsed=Ti,Ti.latest=Ti;
},{"buffer":"aMB2"}],"N0IJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.deg2rad=o,exports.createCanvas=i,exports.getZoomForResolution=u,exports.applyLetterSpacing=f,exports.wrapText=h,exports.defaultResolutions=void 0;var e=require("ol/events"),r=n(require("ol/events/EventType")),t=require("ol/render/canvas");function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return e*Math.PI/180}var a=function(){for(var e=[],r=78271.51696402048;e.length<=24;r/=2)e.push(r);return e}();function i(e,r){if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas)return new OffscreenCanvas(e,r);var t=document.createElement("canvas");return t.width=e,t.height=r,t}function u(e,r){for(var t=0,n=r.length;t<n;++t){if(r[t]<e&&t+1<n){var o=r[t]/r[t+1];return t+Math.log(r[t]/e)/Math.log(o)}}return n-1}exports.defaultResolutions=a;var l,s=Array(256).join(" ");function f(e,r){if(r>=.05){for(var t="",n=e.split("\n"),o=s.slice(0,Math.round(r/.1)),a=0,i=n.length;a<i;++a)a>0&&(t+="\n"),t+=n[a].split("").join(o);return t}return e}function p(){return l||(l=i(1,1).getContext("2d")),l}function v(e,r){return p().measureText(e).width+(e.length-1)*r}var c={};function h(e,r,t,n){if(-1!==e.indexOf("\n")){for(var o=e.split("\n"),a=[],i=0,u=o.length;i<u;++i)a.push(h(o[i],r,t,n));return a.join("\n")}var l=t+","+r+","+e+","+n,s=c[l];if(!s){var d=e.split(" ");if(d.length>1){var g=p();g.font=r;var x=g.measureText("M").width*t,C="";for(a=[],i=0,u=d.length;i<u;++i){var M=d[i],j=C+(C?" ":"")+M;v(j,n)<=x?C=j:(C&&a.push(C),C=M)}C&&a.push(C);for(i=0;i<a.length;++i){var y=a[i];if(v(y,n)<.35*x){var b=i>0?v(a[i-1],n):1/0,m=i<a.length-1?v(a[i+1],n):1/0;a.splice(i,1),b<m?(a[i-1]+=" "+y,i-=1):a[i]=y+" "+a[i]}}for(i=0,u=a.length-1;i<u;++i){var w=a[i],O=a[i+1];if(v(w,n)>.7*x&&v(O,n)<.6*x){var R=w.split(" "),T=R.pop();v(T,n)<.2*x&&(a[i]=R.join(" "),a[i+1]=T+" "+O),u-=1}}s=a.join("\n")}else s=e;s=f(s,n),c[l]=s}return s}t.labelCache&&(0,e.listen)(t.labelCache,r.default.CLEAR,function(){c={}});
},{"ol/events":"UqnM","ol/events/EventType":"C8cu","ol/render/canvas":"iAG7"}],"Fj7k":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports._getValue=exports.getValue=b,exports.default=O,exports._colorWithOpacity=C,exports._evaluateFilter=k,exports._fromTemplate=I,exports._functionCache=exports._filterCache=void 0;var e=u(require("ol/style/Style")),t=u(require("ol/style/Fill")),i=u(require("ol/style/Stroke")),o=u(require("ol/style/Icon")),a=u(require("ol/style/Text")),r=u(require("ol/style/Circle")),n=u(require("ol/render/Feature")),l=require("@mapbox/mapbox-gl-style-spec"),s=u(require("mapbox-to-css-font")),d=require("./util");function u(e){return e&&e.__esModule?e:{default:e}}var f,g,p=l.function.isFunction,c=l.function.convertFunction,v=l.expression.isExpression,h=l.expression.createPropertyExpression,x={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},y={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},m=function(e,t){var i=h(e,t);if("error"===i.result)throw new Error(i.value.map(function(e){return e.key+": "+e.message}).join(", "));return i.value},w={},S={zoom:0},M={};function b(e,t,i,o,a){var r=e.id;M[r]||(M[r]={});var n=M[r];if(!n[i]){var s=(e[t]||w)[i],d=l.latest[t+"_"+e.type][i];void 0===s&&(s=d.default);var u=v(s);if(!u&&p(s)&&(s=c(s,d),u=!0),u){var f=m(s,d);n[i]=f.evaluate.bind(f)}else"color"==d.type&&(s=l.Color.parse(s)),n[i]=function(){return s}}return S.zoom=o,n[i](S,a)}exports._functionCache=M;var F={};function k(e,t,i,o){return e in F||(F[e]=(0,l.featureFilter)(t).filter),S.zoom=o,F[e](S,i)}function C(e,t){if(e){if(0===e.a||0===t)return;var i=e.a;return t=void 0===t?1:t,"rgba("+Math.round(255*e.r/i)+","+Math.round(255*e.g/i)+","+Math.round(255*e.b/i)+","+i*t+")"}return e}exports._filterCache=F;var T=/^([^]*)\{(.*)\}([^]*)$/;function I(e,t){var i;do{if(i=e.match(T)){var o=t[i[2]]||"";e=i[1]+o+i[3]}}while(i);return e}function O(u,p,c,v,h,m,S){if(void 0===v&&(v=d.defaultResolutions),"string"==typeof p&&(p=JSON.parse(p)),8!=p.version)throw new Error("glStyle version 8 required.");var T,O;if(m)if("undefined"!=typeof Image){var _=new Image;_.crossOrigin="anonymous",_.onload=function(){T=_,O=[_.width,_.height],u.changed(),_.onload=null},_.src=m}else if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope){var q=self;q.postMessage({action:"loadImage",src:m}),q.addEventListener("message",function(e){"imageLoaded"===e.data.action&&e.data.src===m&&(T=e.data.image,O=[T.width,T.height])})}for(var z,L=(0,l.derefLayers)(p.layers),P={},W=[],E=0,R=L.length;E<R;++E){var G=L[E],Z=G.id;if("string"==typeof c&&G.source==c||-1!==c.indexOf(Z)){var j=G["source-layer"];if(!z){z=G.source;var A=p.sources[z];if(!A)throw new Error('Source "'+z+'" is not defined');var N=A.type;if("vector"!==N&&"geojson"!==N)throw new Error('Source "'+z+'" is not of type "vector" or "geojson", but "'+N+'"')}var V=P[j];V||(V=P[j]=[]),V.push({layer:G,index:E}),W.push(Z)}delete M[Z],delete F[Z]}var D=new i.default,J=new t.default,B={},U={},X=[],Y=function(l,u){var p=l.getProperties(),c=P[p.layer];if(c){var m=v.indexOf(u);-1==m&&(m=(0,d.getZoomForResolution)(u,v));for(var M=x[l.getGeometry().getType()],F={properties:p,type:M},_=-1,q=function(v,x){var q=c[v],z=q.layer,L=z.id,P=z.layout||w,W=z.paint||w;if("none"===P.visibility||"minzoom"in z&&m<z.minzoom||"maxzoom"in z&&m>=z.maxzoom)return"continue";var E=z.filter;if(!E||k(L,E,F,m)){var R=void 0,G=void 0,Z=void 0,j=void 0,A=void 0,N=void 0,V=q.index;if(3==M&&"fill"==z.type)if(G=b(z,"paint","fill-opacity",m,F),"fill-pattern"in W){var Y=b(z,"paint","fill-pattern",m,F);if(Y){var $="string"==typeof Y?I(Y,p):Y.toString();if(T&&h&&h[$]){(N=X[++_])&&N.getFill()&&!N.getStroke()&&!N.getText()||(N=X[_]=new e.default({fill:new t.default})),Z=N.getFill(),N.setZIndex(V);var H=U[Ce=$+"."+G];if(!H){var K=h[$];(Ie=(Te=(0,d.createCanvas)(K.width,K.height)).getContext("2d")).globalAlpha=G,Ie.drawImage(T,K.x,K.y,K.width,K.height,0,0,K.width,K.height),H=Ie.createPattern(Te,"repeat"),U[Ce]=H}Z.setColor(H)}}}else(R=C(b(z,"paint","fill-color",m,F),G))&&("fill-outline-color"in W&&(A=C(b(z,"paint","fill-outline-color",m,F),G)),A||(A=R),(N=X[++_])&&N.getFill()&&N.getStroke()&&!N.getText()||(N=X[_]=new e.default({fill:new t.default,stroke:new i.default})),(Z=N.getFill()).setColor(R),(j=N.getStroke()).setColor(A),j.setWidth(1),N.setZIndex(V));if(1!=M&&"line"==z.type){R=!("line-pattern"in W)&&"line-color"in W?C(b(z,"paint","line-color",m,F),b(z,"paint","line-opacity",m,F)):void 0;var Q=b(z,"paint","line-width",m,F);R&&Q>0&&((N=X[++_])&&N.getStroke()&&!N.getFill()&&!N.getText()||(N=X[_]=new e.default({stroke:new i.default})),(j=N.getStroke()).setLineCap(b(z,"layout","line-cap",m,F)),j.setLineJoin(b(z,"layout","line-join",m,F)),j.setMiterLimit(b(z,"layout","line-miter-limit",m,F)),j.setColor(R),j.setWidth(Q),j.setLineDash(W["line-dasharray"]?b(z,"paint","line-dasharray",m,F).map(function(e){return e*Q}):null),N.setZIndex(V))}var ee=!1,te=null,ie=0,oe=void 0,ae=void 0,re=void 0;if((1==M||2==M)&&"icon-image"in P){var ne=b(z,"layout","icon-image",m,F);if(ne){oe="string"==typeof ne?I(ne,p):ne.toString();var le=void 0;if(T&&h&&h[oe]){var se=b(z,"layout","icon-rotation-alignment",m,F);if(2==M){var de=l.getGeometry();if(de.getFlatMidpoint||de.getFlatMidpoints){var ue=de.getExtent();if(Math.sqrt(Math.max(Math.pow((ue[2]-ue[0])/u,2),Math.pow((ue[3]-ue[1])/u,2)))>150){var fe="MultiLineString"===de.getType()?de.getFlatMidpoints():de.getFlatMidpoint();if(g||(f=[NaN,NaN],g=new n.default("Point",f,[],{},null)),le=g,f[0]=fe[0],f[1]=fe[1],"line"===(Xe=b(z,"layout","symbol-placement",m,F))&&"map"===se)for(var ge=de.getStride(),pe=de.getFlatCoordinates(),ce=0,ve=pe.length-ge;ce<ve;ce+=ge){var he=pe[ce],xe=pe[ce+1],ye=pe[ce+ge],me=pe[ce+ge+1],we=Math.min(he,ye),Se=Math.min(xe,me),Me=Math.max(he,ye),be=Math.max(xe,me);if(fe[0]>=we&&fe[0]<=Me&&fe[1]>=Se&&fe[1]<=be){ie=Math.atan2(xe-me,ye-he);break}}}}}if(2!==M||le){(N=X[++_])&&N.getImage()&&!N.getFill()&&!N.getStroke()||(N=X[_]=new e.default),N.setGeometry(le);var Fe=b(z,"layout","icon-size",m,F),ke=void 0!==W["icon-color"]?b(z,"paint","icon-color",m,F):null,Ce=oe+"."+Fe;if(null!==ke&&(Ce+="."+ke),!(ae=B[Ce])){K=h[oe];if(null!==ke){var Te,Ie;(Ie=(Te=(0,d.createCanvas)(K.width,K.height)).getContext("2d")).drawImage(T,K.x,K.y,K.width,K.height,0,0,K.width,K.height);for(var Oe=Ie.getImageData(0,0,Te.width,Te.height),_e=0,qe=Oe.data.length;_e<qe;_e+=4){var ze=ke.a;0!==ze&&(Oe.data[_e]=255*ke.r/ze,Oe.data[_e+1]=255*ke.g/ze,Oe.data[_e+2]=255*ke.b/ze),Oe.data[_e+3]=ze}Ie.putImageData(Oe,0,0),ae=B[Ce]=new o.default({img:Te,imgSize:[Te.width,Te.height],scale:Fe/K.pixelRatio})}else ae=B[Ce]=new o.default({img:T,imgSize:O,size:[K.width,K.height],offset:[K.x,K.y],rotateWithView:"map"===se,scale:Fe/K.pixelRatio})}ae.setRotation(ie+(0,d.deg2rad)(b(z,"layout","icon-rotate",m,F))),ae.setOpacity(b(z,"paint","icon-opacity",m,F)),ae.setAnchor(y[b(z,"layout","icon-anchor",m,F)]),N.setImage(ae),te=N.getText(),N.setText(void 0),N.setZIndex(V),ee=!0,re=!1}else re=!0}}}if(1==M&&"circle-radius"in W){(N=X[++_])&&N.getImage()&&!N.getFill()&&!N.getStroke()||(N=X[_]=new e.default);var Le=b(z,"paint","circle-radius",m,F),Pe=C(b(z,"paint","circle-stroke-color",m,F),b(z,"paint","circle-stroke-opacity",m,F)),We=C(b(z,"paint","circle-color",m,F),b(z,"paint","circle-opacity",m,F)),Ee=b(z,"paint","circle-stroke-width",m,F),Re=Le+"."+Pe+"."+We+"."+Ee;(ae=B[Re])||(ae=B[Re]=new r.default({radius:Le,stroke:Pe&&Ee>0?new i.default({width:Ee,color:Pe}):void 0,fill:We?new t.default({color:We}):void 0})),N.setImage(ae),te=N.getText(),N.setText(void 0),N.setGeometry(void 0),N.setZIndex(V),ee=!0}var Ge=void 0;if("text-field"in P)Ge=I(b(z,"layout","text-field",m,F).toString(),p).trim(),G=b(z,"paint","text-opacity",m,F);if(Ge&&G&&!re){ee||((N=X[++_])&&N.getText()&&!N.getFill()&&!N.getStroke()||(N=X[_]=new e.default),N.setImage(void 0),N.setGeometry(void 0)),N.getText()||N.setText(te||new a.default({padding:[2,2,2,2]})),te=N.getText();var Ze=Math.round(b(z,"layout","text-size",m,F)),je=b(z,"layout","text-font",m,F),Ae=b(z,"layout","text-line-height",m,F),Ne=(0,s.default)(S?S(je):je,Ze,Ae),Ve=P["text-transform"];"uppercase"==Ve?Ge=Ge.toUpperCase():"lowercase"==Ve&&(Ge=Ge.toLowerCase());var De=b(z,"layout","text-max-width",m,F),Je=b(z,"layout","text-letter-spacing",m,F),Be=2==M?(0,d.applyLetterSpacing)(Ge,Je):(0,d.wrapText)(Ge,Ne,De,Je);te.setText(Be),te.setFont(Ne),te.setRotation((0,d.deg2rad)(b(z,"layout","text-rotate",m,F)));var Ue=b(z,"layout","text-anchor",m,F),Xe=ee||1==M?"point":b(z,"layout","symbol-placement",m,F);te.setPlacement(Xe);var Ye=b(z,"paint","text-halo-width",m,F),$e=b(z,"layout","text-offset",m,F),He=b(z,"paint","text-translate",m,F),Ke=0,Qe=0;if("point"==Xe){var et="center";-1!==Ue.indexOf("left")?(et="left",Qe=Ye):-1!==Ue.indexOf("right")&&(et="right",Qe=-Ye),te.setTextAlign(et);var tt=b(z,"layout","text-rotation-alignment",m,F);te.setRotateWithView("map"==tt)}else te.setMaxAngle((0,d.deg2rad)(b(z,"layout","text-max-angle",m,F))*Ge.length/Be.length),te.setTextAlign(),te.setRotateWithView(!1);var it="middle";0==Ue.indexOf("bottom")?(it="bottom",Ke=-Ye-.5*(Ae-1)*Ze):0==Ue.indexOf("top")&&(it="top",Ke=Ye+.5*(Ae-1)*Ze),te.setTextBaseline(it),te.setOffsetX($e[0]*Ze+Qe+He[0]),te.setOffsetY($e[1]*Ze+Ke+He[1]),J.setColor(C(b(z,"paint","text-color",m,F),G)),te.setFill(J);var ot=C(b(z,"paint","text-halo-color",m,F),G);if(ot){D.setColor(ot),Ye*=2;var at=.5*Ze;D.setWidth(Ye<=at?Ye:at),te.setStroke(D)}else te.setStroke(void 0);var rt=b(z,"layout","text-padding",m,F),nt=te.getPadding();rt!==nt[0]&&(nt[0]=nt[1]=nt[2]=nt[3]=rt),N.setZIndex(V)}}},z=0,L=c.length;z<L;++z)q(z);return _>-1?(X.length=_+1,X):void 0}};return u.setStyle(Y),u.set("mapbox-source",z),u.set("mapbox-layers",W),Y}
},{"ol/style/Style":"he4w","ol/style/Fill":"AFcg","ol/style/Stroke":"TXDt","ol/style/Icon":"z2xv","ol/style/Text":"RPsG","ol/style/Circle":"cdf1","ol/render/Feature":"IFOM","@mapbox/mapbox-gl-style-spec":"Prd1","mapbox-to-css-font":"pt6h","./util":"N0IJ"}],"jVC7":[function(require,module,exports) {
(function(){var a;module.exports={icon:"icons/google.svg",name:"google",title:"Google Fonts",link:"google.com/fonts",getNames:function(){return a},getLink:function(a){return"https://fonts.google.com/specimen/"+a.replace(/( )/g,"+")},normalizeName:function(a){return a}},a=["ABeeZee","Abel","Abril Fatface","Aclonica","Acme","Actor","Adamina","Advent Pro","Aguafina Script","Akronim","Aladin","Aldrich","Alef","Alegreya","Alegreya SC","Alegreya Sans","Alegreya Sans SC","Alex Brush","Alfa Slab One","Alice","Alike","Alike Angular","Allan","Allerta","Allerta Stencil","Allura","Almendra","Almendra Display","Almendra SC","Amarante","Amaranth","Amatic SC","Amethysta","Amiri","Amita","Anaheim","Andada","Andika","Angkor","Annie Use Your Telescope","Anonymous Pro","Antic","Antic Didone","Antic Slab","Anton","Arapey","Arbutus","Arbutus Slab","Architects Daughter","Archivo Black","Archivo Narrow","Arimo","Arizonia","Armata","Artifika","Arvo","Arya","Asap","Asar","Asset","Astloch","Asul","Atomic Age","Aubrey","Audiowide","Autour One","Average","Average Sans","Averia Gruesa Libre","Averia Libre","Averia Sans Libre","Averia Serif Libre","Bad Script","Balthazar","Bangers","Basic","Battambang","Baumans","Bayon","Belgrano","Belleza","BenchNine","Bentham","Berkshire Swash","Bevan","Bigelow Rules","Bigshot One","Bilbo","Bilbo Swash Caps","Biryani","Bitter","Black Ops One","Bokor","Bonbon","Boogaloo","Bowlby One","Bowlby One SC","Brawler","Bree Serif","Bubblegum Sans","Bubbler One","Buda","Buenard","Butcherman","Butterfly Kids","Cabin","Cabin Condensed","Cabin Sketch","Caesar Dressing","Cagliostro","Calligraffitti","Cambay","Cambo","Candal","Cantarell","Cantata One","Cantora One","Capriola","Cardo","Carme","Carrois Gothic","Carrois Gothic SC","Carter One","Catamaran","Caudex","Caveat","Caveat Brush","Cedarville Cursive","Ceviche One","Changa One","Chango","Chau Philomene One","Chela One","Chelsea Market","Chenla","Cherry Cream Soda","Cherry Swash","Chewy","Chicle","Chivo","Chonburi","Cinzel","Cinzel Decorative","Clicker Script","Coda","Coda Caption","Codystar","Combo","Comfortaa","Coming Soon","Concert One","Condiment","Content","Contrail One","Convergence","Cookie","Copse","Corben","Courgette","Cousine","Coustard","Covered By Your Grace","Crafty Girls","Creepster","Crete Round","Crimson Text","Croissant One","Crushed","Cuprum","Cutive","Cutive Mono","Damion","Dancing Script","Dangrek","Dawning of a New Day","Days One","Dekko","Delius","Delius Swash Caps","Delius Unicase","Della Respira","Denk One","Devonshire","Dhurjati","Didact Gothic","Diplomata","Diplomata SC","Domine","Donegal One","Doppio One","Dorsa","Dosis","Dr Sugiyama","Droid Sans","Droid Sans Mono","Droid Serif","Duru Sans","Dynalight","EB Garamond","Eagle Lake","Eater","Economica","Eczar","Ek Mukta","Electrolize","Elsie","Elsie Swash Caps","Emblema One","Emilys Candy","Engagement","Englebert","Enriqueta","Erica One","Esteban","Euphoria Script","Ewert","Exo","Exo 2","Expletus Sans","Fanwood Text","Fascinate","Fascinate Inline","Faster One","Fasthand","Fauna One","Federant","Federo","Felipa","Fenix","Finger Paint","Fira Mono","Fira Sans","Fjalla One","Fjord One","Flamenco","Flavors","Fondamento","Fontdiner Swanky","Forum","Francois One","Freckle Face","Fredericka the Great","Fredoka One","Freehand","Fresca","Frijole","Fruktur","Fugaz One","GFS Didot","GFS Neohellenic","Gabriela","Gafata","Galdeano","Galindo","Gentium Basic","Gentium Book Basic","Geo","Geostar","Geostar Fill","Germania One","Gidugu","Gilda Display","Give You Glory","Glass Antiqua","Glegoo","Gloria Hallelujah","Goblin One","Gochi Hand","Gorditas","Goudy Bookletter 1911","Graduate","Grand Hotel","Gravitas One","Great Vibes","Griffy","Gruppo","Gudea","Gurajada","Habibi","Halant","Hammersmith One","Hanalei","Hanalei Fill","Handlee","Hanuman","Happy Monkey","Headland One","Henny Penny","Herr Von Muellerhoff","Hind","Hind Siliguri","Hind Vadodara","Holtwood One SC","Homemade Apple","Homenaje","IM Fell DW Pica","IM Fell DW Pica SC","IM Fell Double Pica","IM Fell Double Pica SC","IM Fell English","IM Fell English SC","IM Fell French Canon","IM Fell French Canon SC","IM Fell Great Primer","IM Fell Great Primer SC","Iceberg","Iceland","Imprima","Inconsolata","Inder","Indie Flower","Inika","Inknut Antiqua","Irish Grover","Istok Web","Italiana","Italianno","Itim","Jacques Francois","Jacques Francois Shadow","Jaldi","Jim Nightshade","Jockey One","Jolly Lodger","Josefin Sans","Josefin Slab","Joti One","Judson","Julee","Julius Sans One","Junge","Jura","Just Another Hand","Just Me Again Down Here","Kadwa","Kalam","Kameron","Kantumruy","Karla","Karma","Kaushan Script","Kavoon","Kdam Thmor","Keania One","Kelly Slab","Kenia","Khand","Khmer","Khula","Kite One","Knewave","Kotta One","Koulen","Kranky","Kreon","Kristi","Krona One","Kurale","La Belle Aurore","Laila","Lakki Reddy","Lancelot","Lateef","Lato","League Script","Leckerli One","Ledger","Lekton","Lemon","Libre Baskerville","Life Savers","Lilita One","Lily Script One","Limelight","Linden Hill","Lobster","Lobster Two","Londrina Outline","Londrina Shadow","Londrina Sketch","Londrina Solid","Lora","Love Ya Like A Sister","Loved by the King","Lovers Quarrel","Luckiest Guy","Lusitana","Lustria","Macondo","Macondo Swash Caps","Magra","Maiden Orange","Mako","Mallanna","Mandali","Marcellus","Marcellus SC","Marck Script","Margarine","Marko One","Marmelad","Martel","Martel Sans","Marvel","Mate","Mate SC","Maven Pro","McLaren","Meddon","MedievalSharp","Medula One","Megrim","Meie Script","Merienda","Merienda One","Merriweather","Merriweather Sans","Metal","Metal Mania","Metamorphous","Metrophobic","Michroma","Milonga","Miltonian","Miltonian Tattoo","Miniver","Miss Fajardose","Modak","Modern Antiqua","Molengo","Molle","Monda","Monofett","Monoton","Monsieur La Doulaise","Montaga","Montez","Montserrat","Montserrat Alternates","Montserrat Subrayada","Moul","Moulpali","Mountains of Christmas","Mouse Memoirs","Mr Bedfort","Mr Dafoe","Mr De Haviland","Mrs Saint Delafield","Mrs Sheppards","Muli","Mystery Quest","NTR","Neucha","Neuton","New Rocker","News Cycle","Niconne","Nixie One","Nobile","Nokora","Norican","Nosifer","Nothing You Could Do","Noticia Text","Noto Sans","Noto Serif","Nova Cut","Nova Flat","Nova Mono","Nova Oval","Nova Round","Nova Script","Nova Slim","Nova Square","Numans","Nunito","Odor Mean Chey","Offside","Old Standard TT","Oldenburg","Oleo Script","Oleo Script Swash Caps","Open Sans","Open Sans Condensed","Oranienbaum","Orbitron","Oregano","Orienta","Original Surfer","Oswald","Over the Rainbow","Overlock","Overlock SC","Ovo","Oxygen","Oxygen Mono","PT Mono","PT Sans","PT Sans Caption","PT Sans Narrow","PT Serif","PT Serif Caption","Pacifico","Palanquin","Palanquin Dark","Paprika","Parisienne","Passero One","Passion One","Pathway Gothic One","Patrick Hand","Patrick Hand SC","Patua One","Paytone One","Peddana","Peralta","Permanent Marker","Petit Formal Script","Petrona","Philosopher","Piedra","Pinyon Script","Pirata One","Plaster","Play","Playball","Playfair Display","Playfair Display SC","Podkova","Poiret One","Poller One","Poly","Pompiere","Pontano Sans","Poppins","Port Lligat Sans","Port Lligat Slab","Pragati Narrow","Prata","Preahvihear","Press Start 2P","Princess Sofia","Prociono","Prosto One","Puritan","Purple Purse","Quando","Quantico","Quattrocento","Quattrocento Sans","Questrial","Quicksand","Quintessential","Qwigley","Racing Sans One","Radley","Rajdhani","Raleway","Raleway Dots","Ramabhadra","Ramaraja","Rambla","Rammetto One","Ranchers","Rancho","Ranga","Rationale","Ravi Prakash","Redressed","Reenie Beanie","Revalia","Rhodium Libre","Ribeye","Ribeye Marrow","Righteous","Risque","Roboto","Roboto Condensed","Roboto Mono","Roboto Slab","Rochester","Rock Salt","Rokkitt","Romanesco","Ropa Sans","Rosario","Rosarivo","Rouge Script","Rozha One","Rubik","Rubik Mono One","Rubik One","Ruda","Rufina","Ruge Boogie","Ruluko","Rum Raisin","Ruslan Display","Russo One","Ruthie","Rye","Sacramento","Sahitya","Sail","Salsa","Sanchez","Sancreek","Sansita One","Sarala","Sarina","Sarpanch","Satisfy","Scada","Scheherazade","Schoolbell","Seaweed Script","Sevillana","Seymour One","Shadows Into Light","Shadows Into Light Two","Shanti","Share","Share Tech","Share Tech Mono","Shojumaru","Short Stack","Siemreap","Sigmar One","Signika","Signika Negative","Simonetta","Sintony","Sirin Stencil","Six Caps","Skranji","Slabo 13px","Slabo 27px","Slackey","Smokum","Smythe","Sniglet","Snippet","Snowburst One","Sofadi One","Sofia","Sonsie One","Sorts Mill Goudy","Source Code Pro","Source Sans Pro","Source Serif Pro","Special Elite","Spicy Rice","Spinnaker","Spirax","Squada One","Sree Krushnadevaraya","Stalemate","Stalinist One","Stardos Stencil","Stint Ultra Condensed","Stint Ultra Expanded","Stoke","Strait","Sue Ellen Francisco","Sumana","Sunshiney","Supermercado One","Sura","Suranna","Suravaram","Suwannaphum","Swanky and Moo Moo","Syncopate","Tangerine","Taprom","Tauri","Teko","Telex","Tenali Ramakrishna","Tenor Sans","Text Me One","The Girl Next Door","Tienne","Tillana","Timmana","Tinos","Titan One","Titillium Web","Trade Winds","Trocchi","Trochut","Trykker","Tulpen One","Ubuntu","Ubuntu Condensed","Ubuntu Mono","Ultra","Uncial Antiqua","Underdog","Unica One","UnifrakturCook","UnifrakturMaguntia","Unkempt","Unlock","Unna","VT323","Vampiro One","Varela","Varela Round","Vast Shadow","Vesper Libre","Vibur","Vidaloka","Viga","Voces","Volkhov","Vollkorn","Voltaire","Waiting for the Sunrise","Wallpoet","Walter Turncoat","Warnes","Wellfleet","Wendy One","Wire One","Work Sans","Yanone Kaffeesatz","Yantramanav","Yellowtail","Yeseva One","Yesteryear","Zeyada"]}).call(this);
},{}],"RA7M":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../util.js"),e=o(require("./Feature.js")),r=o(require("./FormatType.js"));function o(t){return t&&t.__esModule?t:{default:t}}var n=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),u=function(e){function o(){return e.call(this)||this}return n(o,e),o.prototype.getType=function(){return r.default.JSON},o.prototype.readFeature=function(t,e){return this.readFeatureFromObject(i(t),this.getReadOptions(t,e))},o.prototype.readFeatures=function(t,e){return this.readFeaturesFromObject(i(t),this.getReadOptions(t,e))},o.prototype.readFeatureFromObject=function(e,r){return(0,t.abstract)()},o.prototype.readFeaturesFromObject=function(e,r){return(0,t.abstract)()},o.prototype.readGeometry=function(t,e){return this.readGeometryFromObject(i(t),this.getReadOptions(t,e))},o.prototype.readGeometryFromObject=function(e,r){return(0,t.abstract)()},o.prototype.readProjection=function(t){return this.readProjectionFromObject(i(t))},o.prototype.readProjectionFromObject=function(e){return(0,t.abstract)()},o.prototype.writeFeature=function(t,e){return JSON.stringify(this.writeFeatureObject(t,e))},o.prototype.writeFeatureObject=function(e,r){return(0,t.abstract)()},o.prototype.writeFeatures=function(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))},o.prototype.writeFeaturesObject=function(e,r){return(0,t.abstract)()},o.prototype.writeGeometry=function(t,e){return JSON.stringify(this.writeGeometryObject(t,e))},o.prototype.writeGeometryObject=function(e,r){return(0,t.abstract)()},o}(e.default);function i(t){if("string"==typeof t){var e=JSON.parse(t);return e||null}return null!==t?t:null}var a=u;exports.default=a;
},{"../util.js":"KniQ","./Feature.js":"Kylu","./FormatType.js":"AbO3"}],"HvLT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../events.js"),t=o(require("../events/EventType.js")),r=require("../extent.js"),i=o(require("./Geometry.js")),n=o(require("./GeometryType.js"));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),a=function(i){function o(e){var t=i.call(this)||this;return t.geometries_=e||null,t.changeEventsKeys_=[],t.listenGeometriesChange_(),t}return s(o,i),o.prototype.unlistenGeometriesChange_=function(){this.changeEventsKeys_.forEach(e.unlistenByKey),this.changeEventsKeys_.length=0},o.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(var r=0,i=this.geometries_.length;r<i;++r)this.changeEventsKeys_.push((0,e.listen)(this.geometries_[r],t.default.CHANGE,this.changed,this))},o.prototype.clone=function(){var e=new o(null);return e.setGeometries(this.geometries_),e},o.prototype.closestPointXY=function(e,t,i,n){if(n<(0,r.closestSquaredDistanceXY)(this.getExtent(),e,t))return n;for(var o=this.geometries_,s=0,a=o.length;s<a;++s)n=o[s].closestPointXY(e,t,i,n);return n},o.prototype.containsXY=function(e,t){for(var r=this.geometries_,i=0,n=r.length;i<n;++i)if(r[i].containsXY(e,t))return!0;return!1},o.prototype.computeExtent=function(e){(0,r.createOrUpdateEmpty)(e);for(var t=this.geometries_,i=0,n=t.length;i<n;++i)(0,r.extend)(e,t[i].getExtent());return e},o.prototype.getGeometries=function(){return u(this.geometries_)},o.prototype.getGeometriesArray=function(){return this.geometries_},o.prototype.getGeometriesArrayRecursive=function(){for(var e=[],t=this.geometries_,r=0,i=t.length;r<i;++r)t[r].getType()===this.getType()?e=e.concat(t[r].getGeometriesArrayRecursive()):e.push(t[r]);return e},o.prototype.getSimplifiedGeometry=function(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var t=[],r=this.geometries_,i=!1,n=0,s=r.length;n<s;++n){var a=r[n],u=a.getSimplifiedGeometry(e);t.push(u),u!==a&&(i=!0)}if(i){var h=new o(null);return h.setGeometriesArray(t),h}return this.simplifiedGeometryMaxMinSquaredTolerance=e,this},o.prototype.getType=function(){return n.default.GEOMETRY_COLLECTION},o.prototype.intersectsExtent=function(e){for(var t=this.geometries_,r=0,i=t.length;r<i;++r)if(t[r].intersectsExtent(e))return!0;return!1},o.prototype.isEmpty=function(){return 0===this.geometries_.length},o.prototype.rotate=function(e,t){for(var r=this.geometries_,i=0,n=r.length;i<n;++i)r[i].rotate(e,t);this.changed()},o.prototype.scale=function(e,t,i){var n=i;n||(n=(0,r.getCenter)(this.getExtent()));for(var o=this.geometries_,s=0,a=o.length;s<a;++s)o[s].scale(e,t,n);this.changed()},o.prototype.setGeometries=function(e){this.setGeometriesArray(u(e))},o.prototype.setGeometriesArray=function(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()},o.prototype.applyTransform=function(e){for(var t=this.geometries_,r=0,i=t.length;r<i;++r)t[r].applyTransform(e);this.changed()},o.prototype.translate=function(e,t){for(var r=this.geometries_,i=0,n=r.length;i<n;++i)r[i].translate(e,t);this.changed()},o.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),i.prototype.disposeInternal.call(this)},o}(i.default);function u(e){for(var t=[],r=0,i=e.length;r<i;++r)t.push(e[r].clone());return t}var h=a;exports.default=h;
},{"../events.js":"UqnM","../events/EventType.js":"C8cu","../extent.js":"QDir","./Geometry.js":"F8sI","./GeometryType.js":"lmV0"}],"qBlb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../asserts.js"),t=y(require("../Feature.js")),r=require("./Feature.js"),o=y(require("./JSONFeature.js")),n=y(require("../geom/GeometryCollection.js")),a=y(require("../geom/LineString.js")),i=y(require("../geom/MultiLineString.js")),u=y(require("../geom/MultiPoint.js")),s=y(require("../geom/MultiPolygon.js")),c=y(require("../geom/Point.js")),p=y(require("../geom/Polygon.js")),d=require("../obj.js"),f=require("../proj.js"),l=y(require("../geom/GeometryType.js"));function y(e){return e&&e.__esModule?e:{default:e}}var m=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),g=function(r){function o(e){var t=this,o=e||{};return(t=r.call(this)||this).dataProjection=(0,f.get)(o.dataProjection?o.dataProjection:"EPSG:4326"),o.featureProjection&&(t.defaultFeatureProjection=(0,f.get)(o.featureProjection)),t.geometryName_=o.geometryName,t.extractGeometryName_=o.extractGeometryName,t}return m(o,r),o.prototype.readFeatureFromObject=function(e,r){var o=null,n=O((o="Feature"===e.type?e:{type:"Feature",geometry:e,properties:null}).geometry,r),a=new t.default;return this.geometryName_?a.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in o!==void 0&&a.setGeometryName(o.geometry_name),a.setGeometry(n),"id"in o&&a.setId(o.id),o.properties&&a.setProperties(o.properties,!0),a},o.prototype.readFeaturesFromObject=function(e,t){var r=null;if("FeatureCollection"===e.type){r=[];for(var o=e.features,n=0,a=o.length;n<a;++n)r.push(this.readFeatureFromObject(o[n],t))}else r=[this.readFeatureFromObject(e,t)];return r},o.prototype.readGeometryFromObject=function(e,t){return O(e,t)},o.prototype.readProjectionFromObject=function(t){var r,o=t.crs;return o?"name"==o.type?r=(0,f.get)(o.properties.name):"EPSG"===o.type?r=(0,f.get)("EPSG:"+o.properties.code):(0,e.assert)(!1,36):r=this.dataProjection,r},o.prototype.writeFeatureObject=function(e,t){t=this.adaptOptions(t);var r={type:"Feature",geometry:null,properties:null},o=e.getId();void 0!==o&&(r.id=o);var n=e.getGeometry();n&&(r.geometry=v(n,t));var a=e.getProperties();return delete a[e.getGeometryName()],(0,d.isEmpty)(a)||(r.properties=a),r},o.prototype.writeFeaturesObject=function(e,t){t=this.adaptOptions(t);for(var r=[],o=0,n=e.length;o<n;++o)r.push(this.writeFeatureObject(e[o],t));return{type:"FeatureCollection",features:r}},o.prototype.writeGeometryObject=function(e,t){return v(e,this.adaptOptions(t))},o}(o.default);function O(e,t){if(!e)return null;var o;switch(e.type){case l.default.POINT:o=P(e);break;case l.default.LINE_STRING:o=G(e);break;case l.default.POLYGON:o=h(e);break;case l.default.MULTI_POINT:o=N(e);break;case l.default.MULTI_LINE_STRING:o=_(e);break;case l.default.MULTI_POLYGON:o=b(e);break;case l.default.GEOMETRY_COLLECTION:o=j(e);break;default:throw new Error("Unsupported GeoJSON type: "+e.type)}return(0,r.transformGeometryWithOptions)(o,!1,t)}function j(e,t){var r=e.geometries.map(function(e){return O(e,t)});return new n.default(r)}function P(e){return new c.default(e.coordinates)}function G(e){return new a.default(e.coordinates)}function _(e){return new i.default(e.coordinates)}function N(e){return new u.default(e.coordinates)}function b(e){return new s.default(e.coordinates)}function h(e){return new p.default(e.coordinates)}function v(e,t){var o,n=(e=(0,r.transformGeometryWithOptions)(e,!0,t)).getType();switch(n){case l.default.POINT:o=C(e,t);break;case l.default.LINE_STRING:o=L(e,t);break;case l.default.POLYGON:o=E(e,t);break;case l.default.MULTI_POINT:o=w(e,t);break;case l.default.MULTI_LINE_STRING:o=F(e,t);break;case l.default.MULTI_POLYGON:o=T(e,t);break;case l.default.GEOMETRY_COLLECTION:o=I(e,t);break;case l.default.CIRCLE:o={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+n)}return o}function I(e,t){return{type:"GeometryCollection",geometries:e.getGeometriesArray().map(function(e){var r=(0,d.assign)({},t);return delete r.featureProjection,v(e,r)})}}function L(e,t){return{type:"LineString",coordinates:e.getCoordinates()}}function F(e,t){return{type:"MultiLineString",coordinates:e.getCoordinates()}}function w(e,t){return{type:"MultiPoint",coordinates:e.getCoordinates()}}function T(e,t){var r;return t&&(r=t.rightHanded),{type:"MultiPolygon",coordinates:e.getCoordinates(r)}}function C(e,t){return{type:"Point",coordinates:e.getCoordinates()}}function E(e,t){var r;return t&&(r=t.rightHanded),{type:"Polygon",coordinates:e.getCoordinates(r)}}var M=g;exports.default=M;
},{"../asserts.js":"fLG6","../Feature.js":"mYW9","./Feature.js":"Kylu","./JSONFeature.js":"RA7M","../geom/GeometryCollection.js":"HvLT","../geom/LineString.js":"DfxW","../geom/MultiLineString.js":"fbCo","../geom/MultiPoint.js":"dNu5","../geom/MultiPolygon.js":"ouhF","../geom/Point.js":"gLcY","../geom/Polygon.js":"Nwwk","../obj.js":"mH6q","../proj.js":"Diht","../geom/GeometryType.js":"lmV0"}],"SU9K":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.jsonp=t;var e=require("./util.js");function t(t,n,o,i){var c=document.createElement("script"),r="olc_"+(0,e.getUid)(n);function a(){delete window[r],c.parentNode.removeChild(c)}c.async=!0,c.src=t+(-1==t.indexOf("?")?"?":"&")+(i||"callback")+"="+r;var d=setTimeout(function(){a(),o&&o()},1e4);window[r]=function(e){clearTimeout(d),a(),n(e)},document.getElementsByTagName("head")[0].appendChild(c)}
},{"./util.js":"KniQ"}],"V9RY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../tileurlfunction.js"),e=require("../asserts.js"),r=require("../extent.js"),i=require("../net.js"),o=require("../proj.js"),n=l(require("./State.js")),s=l(require("./TileImage.js")),a=require("../tilegrid.js");function l(t){return t&&t.__esModule?t:{default:t}}var u=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),d=function(s){function l(t){var r=s.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,projection:(0,o.get)("EPSG:3857"),reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:n.default.LOADING,tileLoadFunction:t.tileLoadFunction,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition})||this;if(r.tileJSON_=null,r.tileSize_=t.tileSize,t.url)if(t.jsonp)(0,i.jsonp)(t.url,r.handleTileJSONResponse.bind(r),r.handleTileJSONError.bind(r));else{var a=new XMLHttpRequest;a.addEventListener("load",r.onXHRLoad_.bind(r)),a.addEventListener("error",r.onXHRError_.bind(r)),a.open("GET",t.url),a.send()}else t.tileJSON?r.handleTileJSONResponse(t.tileJSON):(0,e.assert)(!1,51);return r}return u(l,s),l.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var r=void 0;try{r=JSON.parse(e.responseText)}catch(i){return void this.handleTileJSONError()}this.handleTileJSONResponse(r)}else this.handleTileJSONError()},l.prototype.onXHRError_=function(t){this.handleTileJSONError()},l.prototype.getTileJSON=function(){return this.tileJSON_},l.prototype.handleTileJSONResponse=function(e){var i,s=(0,o.get)("EPSG:4326"),l=this.getProjection();if(void 0!==e.bounds){var u=(0,o.getTransformFromProjections)(s,l);i=(0,r.applyTransform)(e.bounds,u)}var d=e.minzoom||0,c=e.maxzoom||22,p=(0,a.createXYZ)({extent:(0,a.extentFromProjection)(l),maxZoom:c,minZoom:d,tileSize:this.tileSize_});if(this.tileGrid=p,this.tileUrlFunction=(0,t.createFromTemplates)(e.tiles,p),void 0!==e.attribution&&!this.getAttributions()){var f=void 0!==i?i:s.getExtent();this.setAttributions(function(t){return(0,r.intersects)(f,t.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState(n.default.READY)},l.prototype.handleTileJSONError=function(){this.setState(n.default.ERROR)},l}(s.default),c=d;exports.default=c;
},{"../tileurlfunction.js":"p1vZ","../asserts.js":"fLG6","../extent.js":"QDir","../net.js":"SU9K","../proj.js":"Diht","./State.js":"iC8j","./TileImage.js":"udAI","../tilegrid.js":"ExRx"}],"CreQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.applyStyle=R,exports.applyBackground=G,exports.default=H,exports.apply=W,exports.getLayer=X,exports.getLayers=Y,exports.getSource=$,exports._finalizeLayer=I,exports._getFonts=k;var e=S(require("mapbox-to-css-font")),t=w(require("./stylefunction")),r=S(require("webfont-matcher/lib/fonts/google")),o=require("ol/proj"),n=require("ol/tilegrid"),i=S(require("ol/tilegrid/TileGrid")),a=S(require("ol/Map")),u=S(require("ol/View")),s=S(require("ol/format/GeoJSON")),l=S(require("ol/format/MVT")),c=require("ol/obj"),f=require("ol/Observable"),g=S(require("ol/layer/Tile")),p=S(require("ol/layer/Vector")),d=S(require("ol/layer/VectorTile")),y=S(require("ol/source/TileJSON")),m=S(require("ol/source/Vector")),v=S(require("ol/source/VectorTile")),h=require("@mapbox/mapbox-gl-style-spec"),b=require("./util");function x(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return x=function(){return e},e}function w(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=x();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=o?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}function S(e){return e&&e.__esModule?e:{default:e}}var O,T={},q=/font-family: ?([^;]*);/,E=/("|')/g;function j(e){if(!O){O={};for(var t=document.styleSheets,r=0,o=t.length;r<o;++r){var n=t[r];try{var i=n.rules||n.cssRules;if(i)for(var a=0,u=i.length;a<u;++a){var s=i[a];if(5==s.type){var l=s.cssText.match(q);O[l[1].replace(E,"")]=!0}}}catch(c){}}}return e in O}var z={},L=r.default.getNames();function k(t){var r=t.toString();if(r in z)return t;for(var o=t.map(function(t){var r=(0,e.default)(t,1).split(" ");return[r.slice(3).join(" ").replace(/"/g,""),r[1]+r[0]]}),n=0,i=o.length;n<i;++n){var a=o[n],u=a[0];if(!j(u)&&-1!==L.indexOf(u)){var s="https://fonts.googleapis.com/css?family="+u.replace(/ /g,"+")+":"+a[1];if(!document.querySelector('link[href="'+s+'"]')){var l=document.createElement("link");l.href=s,l.rel="stylesheet",document.head.appendChild(l)}}}return z[r]=!0,t}var M=/^(.*)(\?.*)$/;function P(e,t){return t&&0===e.indexOf(".")&&(e=t+e),e}function V(e,t,r){var o=(e=P(e,t)).match(M);return o?o[1]+r+(o.length>2?o[2]:""):e+r}function R(e,r,o,n,i){return new Promise(function(a,u){if("object"!=typeof r&&(r=JSON.parse(r)),8!=r.version)return u(new Error("glStyle version 8 required."));if(!(e instanceof p.default||e instanceof d.default))return u(new Error("Can only apply to VectorLayer or VectorTileLayer"));var s,l,c;function f(){c||r.sprite&&!s?c?(e.setStyle(c),a()):u(new Error("Something went wrong trying to apply style.")):(c=(0,t.default)(e,r,o,i,s,l,k),e.getStyle()?a():u(new Error("Nothing to show for source ["+o+"]")))}if(r.sprite){var g=.5==(window.devicePixelRatio>=1.5?.5:1)?"@2x":"",y=V(r.sprite,n,g+".json");fetch(y,{credentials:"same-origin"}).then(function(e){return e.ok||""===g?e:(y=V(r.sprite,n,".json"),fetch(y,{credentials:"same-origin"}))}).then(function(e){if(e.ok)return e.json();u(new Error("Problem fetching sprite from "+y+": "+e.statusText))}).then(function(e){if(void 0===e||0===Object.keys(e).length)return u(new Error("No sprites found."));s=e,l=V(r.sprite,n,g+".png"),f()}).catch(function(e){u(new Error("Sprites cannot be loaded: "+y+": "+e.message))})}else f()})}var N={};function C(e,r){var o={type:r.type};function n(){var n=e.getTargetElement();if(n){var i=r.layout||{},a=r.paint||{};o.paint=a,o.id="olms-bg-"+a["background-opacity"]+a["background-color"];var u=e.getView().getZoom();if(void 0!==a["background-color"]){var s=(0,t.getValue)(o,"paint","background-color",u,N);n.style.background=h.Color.parse(s).toString()}void 0!==a["background-opacity"]&&(n.style.opacity=(0,t.getValue)(o,"paint","background-opacity",u,N)),"none"==i.visibility&&(n.style.backgroundColor="",n.style.opacity="")}}e.getTargetElement()&&n(),e.on(["change:resolution","change:target"],n)}function G(e,t){t.layers.some(function(t){if("background"==t.type)return C(e,t),!0})}function Z(e,t){var r;return e.some(function(e){if(e.id==t)return r=e.source,!0}),r}function A(e){var t=e.bounds;if(t){var r=(0,o.fromLonLat)([t[0],t[1]]),n=(0,o.fromLonLat)([t[2],t[3]]);return[r[0],r[1],n[0],n[1]]}}function J(e,t,r){e=(0,c.assign)({},e);var o=new d.default({declutter:!0,visible:!1}),n=JSON.stringify(e),a=T[n];a||(a=T[n]=new y.default({url:e.tiles?void 0:r,tileJSON:e.tiles?e:void 0}));var u=a.on("change",function(){var t=a.getState();if("ready"===t){var r=a.getTileJSON(),n=Array.isArray(r.tiles)?r.tiles:[r.tiles];if(e.url)for(var s=0,c=n.length;s<c;++s){var g=n[s];0!=g.indexOf("http")&&(n[s]=e.url+g)}var p=a.getTileGrid(),d=A(r),y=r.minzoom||0,m=r.maxzoom||22,h=a.get("ol-source");void 0===h&&(h=new v.default({attributions:a.getAttributions(),format:new l.default,tileGrid:new i.default({origin:p.getOrigin(0),extent:d||p.getExtent(),minZoom:y,resolutions:b.defaultResolutions.slice(0,m+1),tileSize:512}),urls:n}),a.set("ol-source",h)),(0,f.unByKey)(u),o.setSource(h)}else"error"===t&&(a.set("ol-source",null),(0,f.unByKey)(u),o.setSource(void 0))});return"ready"===a.getState()&&a.changed(),o}function _(e,t){var r=new g.default,o=new y.default({transition:0,url:e.tiles?void 0:t,tileJSON:e.tiles?e:void 0,crossOrigin:"anonymous"}),a=o.on("change",function(){var t=o.getState();if("ready"===t){(0,f.unByKey)(a);var u=o.getTileJSON(),s=A(u),l=o.getTileGrid(),c=e.tileSize||u.tileSize||512,g=u.minzoom||0,p=u.maxzoom||22;o.tileGrid=new i.default({origin:l.getOrigin(0),extent:s||l.getExtent(),minZoom:g,resolutions:(0,n.createXYZ)({maxZoom:p,tileSize:c}).getResolutions(),tileSize:c}),r.setSource(o)}else"error"===t&&((0,f.unByKey)(a),r.setSource(void 0))});return o.setTileLoadFunction(function(e,t){if(-1!=t.indexOf("{bbox-epsg-3857}")){var r=o.getTileGrid().getTileCoordExtent(e.getTileCoord());t=t.replace("{bbox-epsg-3857}",r.toString())}e.getImage().src=t}),r}var B=new s.default;function K(e,t){var r,o,n=e.data;return"string"==typeof n?o=P(n,t):r=B.readFeatures(n,{featureProjection:"EPSG:3857"}),new p.default({source:new m.default({attributions:e.attribution,features:r,format:B,url:o}),visible:!1})}function D(e,r,o){var n=o.getZoom(),i=(0,t.getValue)(e,"paint","raster-opacity",n,N);r.setOpacity(i)}function F(e,t,r,n,i,a){var s=[],l=t.getView();l.isDef()||l.getRotation()||l.getResolutions()||(l=new u.default({maxResolution:b.defaultResolutions[0]}),t.setView(l)),"center"in e&&!l.getCenter()&&l.setCenter((0,o.fromLonLat)(e.center)),"zoom"in e&&void 0===l.getZoom()&&l.setResolution(b.defaultResolutions[0]/Math.pow(2,e.zoom)),l.getCenter()&&void 0!==l.getZoom()||l.fit(l.getProjection().getExtent(),{nearest:!0,size:t.getSize()}),e.sprite&&(0==e.sprite.indexOf("mapbox://")?e.sprite=r+"/sprite"+a:0!=e.sprite.indexOf("http")&&(e.sprite=(n?n+i:"")+e.sprite+a));for(var c,f,g,p,d,y,m=e.layers,v=[],h=function(r,o){var n=(c=m[r]).type;if("heatmap"==n||"fill-extrusion"==n||"hillshade"==n);else if("background"==n)C(t,c);else{if((p=c.source||Z(m,c.ref))!=g){if(v.length&&(s.push(I(d,v,e,i,t)),v=[]),f=e.sources[p],(y=f.url)&&0==(y=P(y,i)).indexOf("mapbox://")){var u=y.replace("mapbox://","");f.tiles=["a","b","c","d"].map(function(e){return"https://"+e+".tiles.mapbox.com/v4/"+u+"/{z}/{x}/{y}."+("vector"==f.type?"vector.pbf":"png")+a})}"vector"==f.type?d=J(f,a,y):"raster"==f.type?((d=_(f,y)).setVisible(!c.layout||"none"!==c.layout.visibility),l.on("change:resolution",D.bind(x,c,d,l)),D(c,d,l)):"geojson"==f.type&&(d=K(f,i)),g=p,d&&d.set("mapbox-source",g)}v.push(c.id)}},x=this,w=0,S=m.length;w<S;++w)h(w);return s.push(I(d,v,e,i,t)),t.set("mapbox-style",e),Promise.all(s)}function H(e,t){var r,o,n,i,u;if(r=o=n=i="",("string"==typeof e||e instanceof HTMLElement)&&(e=new a.default({target:e})),"string"==typeof t){var s=t.match(M);s&&(o=s[1],r=s.length>2?s[2]:""),u=new Promise(function(a,u){fetch(t,{credentials:"same-origin"}).then(function(e){return e.json()}).then(function(s){var l=document.createElement("A");l.href=t;var c=l.href;i=l.pathname.split("/").slice(0,-1).join("/")+"/",n=c.substr(0,c.indexOf(i)),F(s,e,o,n,i,r).then(function(){a(e)}).catch(u)}).catch(function(e){u(new Error("Could not load "+t+": "+e.message))})})}else u=new Promise(function(r,o){F(t,e).then(function(){r(e)}).catch(o)});return u}function W(e,t){return("string"==typeof e||e instanceof HTMLElement)&&(e=new a.default({target:e})),setTimeout(function(){H(e,t)},0),e}function I(e,t,r,o,n){for(var i=24,a=0,u=r.layers,s=0,l=u.length;s<l;++s){var c=u[s];-1!==t.indexOf(c.id)&&(i=Math.min("minzoom"in c?c.minzoom:0,i),a=Math.max("maxzoom"in c?c.maxzoom:24,a))}return new Promise(function(u,s){var l=function(){var n=e.getSource();if(n&&"error"!==n.getState()){if("function"==typeof n.getTileGrid){var l=n.getTileGrid();if(l){var c=l.getMinZoom();(i>0||c>0)&&e.setMaxResolution(Math.min(b.defaultResolutions[i],l.getResolution(c))+1e-9),a<24&&e.setMinResolution(b.defaultResolutions[a]+1e-9)}}n instanceof m.default||n instanceof v.default?R(e,r,t,o).then(function(){e.setVisible(!0),u()},function(e){s(e)}):u()}else s(new Error("Error accessing data for source "+e.get("mapbox-source")))};e.set("mapbox-layers",t),-1===n.getLayers().getArray().indexOf(e)&&n.addLayer(e),e.getSource()?l():e.once("change:source",l)})}function X(e,t){for(var r=e.getLayers().getArray(),o=0,n=r.length;o<n;++o){var i=r[o].get("mapbox-layers");if(i&&-1!==i.indexOf(t))return r[o]}}function Y(e,t){for(var r=[],o=e.getLayers().getArray(),n=0,i=o.length;n<i;++n)o[n].get("mapbox-source")===t&&r.push(o[n]);return r}function $(e,t){for(var r=e.getLayers().getArray(),o=0,n=r.length;o<n;++o){var i=r[o].getSource();if(r[o].get("mapbox-source")===t)return i}}
},{"mapbox-to-css-font":"pt6h","./stylefunction":"Fj7k","webfont-matcher/lib/fonts/google":"jVC7","ol/proj":"Diht","ol/tilegrid":"ExRx","ol/tilegrid/TileGrid":"dpZ6","ol/Map":"kYy5","ol/View":"hNqE","ol/format/GeoJSON":"qBlb","ol/format/MVT":"bjcz","ol/obj":"mH6q","ol/Observable":"IdSm","ol/layer/Tile":"BUEc","ol/layer/Vector":"dflx","ol/layer/VectorTile":"zOJv","ol/source/TileJSON":"V9RY","ol/source/Vector":"ZS12","ol/source/VectorTile":"A6uo","@mapbox/mapbox-gl-style-spec":"Prd1","./util":"N0IJ"}],"yx3b":[function(require,module,exports) {
module.exports={version:8,name:"Blank",metadata:{"mapbox:autocomposite":!0,"mapbox:type":"template","mapbox:sdk-support":{js:"1.9.0",android:"8.6.0",ios:"5.6.0"},"mapbox:groups":{},"mapbox:uiParadigm":"layers"},center:[2.2732313078701054,48.88481220007603],zoom:8.301329164676286,bearing:0,pitch:0,sources:{composite:{url:"mapbox://theskua.2de0ko15",type:"vector"}},sprite:"mapbox://sprites/theskua/ckbib7zcb1cv31hmu55vv1juw/draft",glyphs:"mapbox://fonts/theskua/{fontstack}/{range}.pbf",layers:[{id:"ppy-circles-chiswi-breeding-exp1",type:"fill",source:"composite","source-layer":"ppy_circles_chiswi_breeding_exp1_conus",layout:{},paint:{"fill-color":["step",["get","abd_ppy"],"#67000d",-4,"#67000d",-3,"#cb181d",-2,"#fb6a4a",-1,"#fcbba1",-.05,"#fcbba1",0,"#ffffff",.05,"#c6dbef",1,"#6baed6",2,"#2171b5",3,"#08306b",4,"#08306b"]}}],created:"2020-06-11T18:40:30.124Z",id:"ckbb4n7yl0b0w1hohd7k0us4b",modified:"2020-06-11T18:41:23.495Z",owner:"theskua",visibility:"private",draft:!0};
},{}],"Focm":[function(require,module,exports) {
"use strict";require("ol/ol.css");var e=require("ol"),t=m(require("ol/layer/Tile")),o=m(require("ol/source/OSM")),r=require("ol/proj/proj4"),a=m(require("proj4")),l=require("ol/proj"),i=require("ol/extent"),s=m(require("ol/format/MVT")),n=m(require("ol/layer/VectorTile")),p=m(require("ol/source/VectorTile")),u=require("ol/style"),c=require("ol-mapbox-style"),d=m(require("ol-mapbox-style/dist/stylefunction")),f=m(require("ol/source/XYZ"));function m(e){return e&&e.__esModule?e:{default:e}}a.default.defs("EPSG:199999","+proj=laea +lon_0=-80.86 +lat_0=14.88 +datum=WGS84 +units=m +no_defs"),a.default.defs("ESRI:54009","+proj=moll +lon_0=0 +x_0=0 +y_0=0 +datum=WGS84 +units=m +no_defs"),a.default.defs("EPSG:6350","+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=23 +lon_0=-96 +x_0=0 +y_0=0 +ellps=GRS80 +units=m +no_defs"),(0,r.register)(a.default);var w=(0,l.get)("EPSG:6350");w.setExtent([-8040784.5135,-2577524.921,3668901.4484,4785105.1096]);var h=(0,l.get)("EPSG:199999");h.setExtent([-9303637,-8338295,7694955,7838189]);var y="pk.eyJ1IjoidGhlc2t1YSIsImEiOiJjaXpvdWtoZ3UwMDVmMzJueDl2cWp6NHdnIn0.3T9kAApG2hnV6NCVWxVDbA",b="https://api.mapbox.com/styles/v1/theskua/ckb9o174m07p61is0tjzhvtsc.html?fresh=true&title=view&access_token="+y,x=new e.Map({target:"map",layers:[new t.default({source:new f.default({url:"http://{1-4}.basemaps.cartocdn.com/dark_nolabels/{z}/{x}/{y}.png"}),opacity:.5}),new n.default({declutter:!0,source:new p.default({attributions:'© <a href="https://www.mapbox.com/map-feedback/">Mapbox</a> © <a href="https://www.openstreetmap.org/copyright">OpenStreetMap contributors</a>',format:new s.default,url:"https://{a-d}.tiles.mapbox.com/v4/theskua.1yvh14re/{z}/{x}/{y}.vector.pbf?access_token="+y}),opacity:.7,style:new u.Style({fill:new u.Fill({color:"#C8C8C8"})})})],view:new e.View({projection:"EPSG:6350",center:[13242.64920946,1539001.75424774],zoom:3,maxZoom:8})}),g=new n.default({declutter:!0,source:new p.default({attributions:'© <a href="https://www.mapbox.com/map-feedback/">Mapbox</a> © <a href="https://www.openstreetmap.org/copyright">OpenStreetMap contributors</a>',format:new s.default,url:"https://{a-d}.tiles.mapbox.com/v4/theskua.2de0ko15/{z}/{x}/{y}.vector.pbf?access_token="+y}),opacity:.7});x.addLayer(g);var v=require("./data/style.json");(0,d.default)(g,v,"ppy-circles-chiswi-breeding-exp1");var _=$("#info");_.tooltip({animation:!1,trigger:"manual"});var k=function(e){_.css({left:e[0]+"px",top:e[1]-15+"px"});var t=x.forEachFeatureAtPixel(e,function(e){return e});t?_.tooltip("hide").attr("data-original-title","Change: "+t.get("abd_ppy").toFixed(2)+"%<br>Abundance: "+t.get("abd").toFixed(2)).tooltip("fixTitle").tooltip("show"):_.tooltip("hide")};x.on("pointermove",function(e){e.dragging?_.tooltip("hide"):k(x.getEventPixel(e.originalEvent))});var S=new n.default({declutter:!0,source:new p.default({attributions:'© <a href="https://www.mapbox.com/map-feedback/">Mapbox</a> © <a href="https://www.openstreetmap.org/copyright">OpenStreetMap contributors</a>',format:new s.default,url:"https://{a-d}.tiles.mapbox.com/v4/theskua.49dfmx3y/{z}/{x}/{y}.vector.pbf?access_token="+y}),opacity:.7,style:new u.Style({stroke:new u.Stroke({color:"white",width:1})})});x.addLayer(S),console.log(S.getStyle);
},{"ol/ol.css":"JiFC","ol":"DRei","ol/layer/Tile":"BUEc","ol/source/OSM":"Rmo4","ol/proj/proj4":"BAXJ","proj4":"oaf9","ol/proj":"Diht","ol/extent":"QDir","ol/format/MVT":"bjcz","ol/layer/VectorTile":"zOJv","ol/source/VectorTile":"A6uo","ol/style":"qeKX","ol-mapbox-style":"CreQ","ol-mapbox-style/dist/stylefunction":"Fj7k","ol/source/XYZ":"knlU","./data/style.json":"yx3b"}]},{},["Focm"], null)
//# sourceMappingURL=trends-test.0bc84e26.js.map